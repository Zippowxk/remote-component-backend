(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9d5cd2d6","chunk-1a8266b5"],{"05b8":function(t,e,i){},"082b":function(t,e,i){},2108:function(t,e,i){"use strict";i.d(e,"c",(function(){return n})),i.d(e,"d",(function(){return o})),i.d(e,"a",(function(){return r})),i.d(e,"b",(function(){return c})),i.d(e,"e",(function(){return u}));var s=i("bbc2"),a=i("1c03"),n=function(t){return Object(a["b"])(s["a"].getMainGroupBooking,t)},o=function(t){return Object(a["b"])(s["a"].getShopGroupList,t)},r=function(t){return Object(a["b"])(s["a"].getGoodsGroupList,t)},c=function(t){return Object(a["b"])(s["a"].getGroupBuyByOrderSn,t)},u=function(t){return Object(a["b"])(s["a"].isGroupBuyOrder,t)}},"30d2":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"want-btn-container",class:{gray:"gray"===t.type,blue:"blue"===t.type,white:"white"===t.type}},[t.isHaierApp?i("div",{staticClass:"want-btn",on:{click:t.toFeedBack}},[i("span",{staticClass:"icon"}),i("span",{staticClass:"text"},[t._v("把你想要的告诉我们")])]):i("div",{staticClass:"want-text"},[i("span",[t._v("没有更多啦~")])])])},a=[],n={props:["type","classList"],data:function(){return{isHaierApp:!1}},created:function(){this.isHaierApp=this.$util.isUplus()},methods:{toFeedBack:function(){this.$store.getters.getLoginStatus?this.$util.openNewWindow("https://uplus.haier.com/uplusapp/problemFeedBack/feedback.html",!0,!1,!1):this.$store.dispatch("doLogin").then((function(t){400===t&&console.log("请求异常")}))}}},o=n,r=(i("eca0"),i("2877")),c=Object(r["a"])(o,s,a,!1,null,"f1f8e376",null);e["a"]=c.exports},"4b9e":function(t,e,i){"use strict";i("8430")},"58f3":function(t,e,i){"use strict";i("082b")},7442:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bar-activity"},[i("activity-component",{attrs:{activityType:0,storeId:t.storeId,flashSaleList:t.flashSaleList},on:{updateData:function(e){return t.updateData(0)}}}),i("activity-component",{attrs:{activityType:1,storeId:t.storeId,prodList:t.preSaleProdList},on:{updateData:function(e){return t.updateData(1)}}}),i("activity-component",{attrs:{activityType:2,storeId:t.storeId,prodList:t.findGoodsProdList},on:{updateData:function(e){return t.updateData(2)}}}),i("activity-component",{attrs:{activityType:3,storeId:t.storeId,prodList:t.groupBookingList},on:{updateData:function(e){return t.updateData(3)}}}),t.isFetching||0!==t.flashSaleList.length||0!==t.preSaleProdList.length||0!==t.findGoodsProdList.length||0!==t.groupBookingList.length?t._e():i("common-empty")],1)},a=[],n=i("c3f5"),o=i("2108"),r=i("2f62"),c=i("8ab0"),u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[0===t.activityType&&t.flashSaleList.length?i("div",{staticClass:"flash-sale"},[i("div",{staticClass:"bg-tag"}),t._m(0),i("div",{staticClass:"horionzal-content"},[i("div",{staticClass:"horionzal-row"},t._l(t.flashSaleList,(function(e,s){return i("div",{key:s,staticClass:"time-item",on:{click:function(e){return t.changeTab(s)}}},[i("div",{staticClass:"time-text",class:{active:t.currentTab===s}},["往日"===e.dayStr?i("img",{staticClass:"time-img",attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/shop/previous-sale3x.png",alt:""}}):i("span",[t._v(t._s(e.timeStr))])]),i("div",{staticClass:"time-status",class:{active:t.currentTab===s}},[i("span",[t._v(t._s(e.timeTip))])])])})),0)]),t._l(t.activeProductList.slice(0,t.showSize),(function(e){return i("product-item",{key:e.sku,attrs:{activityType:0,productInfo:e,storeId:t.storeId},on:{onTimeDown:function(e){return t.updateData(t.activityType)}}})})),t.activeProductList.length>2?i("div",{staticClass:"flex-row bottom-tag",staticStyle:{"justify-content":"center"},on:{click:function(e){return t.changeExpand()}}},[t._v(" "+t._s(t.isExpand?"收起":"查看全部")),i("img",{staticClass:"arrow",attrs:{src:t.arrowUrl}})]):t._e()],2):t._e(),0!==t.activityType&&t.prodList.length?i("div",{staticClass:"flash-sale"},[i("div",{staticClass:"bg-tag"}),i("div",{staticClass:"title",staticStyle:{"padding-bottom":"0"}},[1===t.activityType?i("span",{staticClass:"text"},[t._v("预售专区")]):t._e(),2===t.activityType?i("span",{staticClass:"text"},[t._v("发现好货")]):t._e(),3===t.activityType?i("span",{staticClass:"text"},[t._v("拼团专区")]):t._e()]),t._l(t.prodList.slice(0,t.showSize),(function(e){return i("product-item",{key:e.sku,attrs:{activityType:t.activityType,productInfo:e,storeId:t.storeId},on:{onTimeDown:function(e){return t.updateData(t.activityType)}}})})),t.prodList.length>2?i("div",{staticClass:"flex-row bottom-tag",staticStyle:{"justify-content":"center"},on:{click:function(e){return t.changeExpand()}}},[t._v(" "+t._s(t.isExpand?"收起":"查看全部")),i("img",{staticClass:"arrow",attrs:{src:t.arrowUrl}})]):t._e()],2):t._e()])},l=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"title"},[i("span",{staticClass:"text"},[t._v("秒杀专区")])])}],d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[0===t.activityType?i("div",{staticClass:"flex-row",staticStyle:{padding:".3rem 0"},on:{click:function(e){return t.goProduct()}}},[i("img",{staticClass:"product-img",attrs:{src:t._f("imageToWebp")(t._f("imageToHttps")(t.productInfo.imageUrl),t.$webpSurpport)}}),i("div",{staticClass:"flex-column",staticStyle:{position:"relative"}},[i("div",{staticClass:"product-name"},[t._v(" "+t._s(t.productInfo.productName)+" ")]),i("div",{staticClass:"sale-point"},[t._v(" "+t._s(t.productInfo.sellPoint?t.productInfo.sellPoint.join(" | "):"")+" ")]),i("div",{staticClass:"flash-sale-price"},[t._v(" ¥"),i("span",[t._v(t._s(t._f("formatPriceInt")(t._f("formatPrice")(t.productInfo.flashsalePrice))))]),t._v(t._s(t._f("formatPriceFloat")(t._f("formatPrice")(t.productInfo.flashsalePrice)))+" "),i("p",{staticClass:"flash-sale-origin-price"},[t._v("¥"+t._s(t._f("formatPrice")(t.productInfo.miniPrice)))])]),t.timeDown>0?i("div",{staticClass:"time-down"},[t._v("仅剩"),i("count-down",{attrs:{time:t.timeDown},on:{finish:t.onTimeDown}})],1):t._e(),i("div",{staticClass:"absolute-row pre-btn"},[t._v(" 立即抢购 ")])])]):i("div",{staticClass:"flex-row",staticStyle:{padding:".3rem 0"},on:{click:function(e){return t.goProduct()}}},[i("img",{staticClass:"product-img",attrs:{src:t.productInfo.imageUrl||t.productInfo.imageId||t.productInfo.picture}}),i("div",{staticClass:"flex-column",staticStyle:{position:"relative",with:"4.62rem"}},[i("div",{staticClass:"product-name"},[t._v(" "+t._s(t.productInfo.productName)+" ")]),i("div",{staticClass:"sale-point"},[t._v(" "+t._s(t.productInfo.sellPoints?t.productInfo.sellPoints.replace(/,/g," | "):"")+" ")]),i("div",{staticClass:"pre-sale-origin-price",style:{color:3===t.activityType?"white":"#999"}},[t._v(" 原价"),i("span",{staticClass:"price"},[t._v("¥"),i("span",{staticClass:"number"},[t._v(t._s(t._f("formatPrice")(t.productInfo.activeLowerPrice||t.productInfo.marketPrice)))])]),t._v(" "+t._s(t.productInfo.showActiveTag?"起":"")+" ")]),i("div",{staticClass:"flex-row",staticStyle:{"align-items":"baseline"}},[i("div",{staticClass:"pre-sale-price"},[t._v(" ¥"),i("span",[t._v(t._s(t._f("formatPriceInt")(t._f("formatPrice")(t.productInfo.advance))))]),i("p",{staticClass:"symbol"},[t._v(t._s(t._f("formatPriceFloat")(t._f("formatPrice")(t.productInfo.advance)))+t._s(1===t.activityType?"订金":"")+t._s(t.productInfo.showActiveTag?" 起":"")+" ")])]),1===t.activityType&&t.productInfo.advance&&t.productInfo.deduct?i("div",{staticClass:"flex-row",staticStyle:{"align-items":"center"}},[t._m(0),i("div",{staticClass:"price-discount"},[i("span",[t._v(t._s(t.productInfo.advance||0)+"抵"+t._s(t.productInfo.deduct||""))])])]):3===t.activityType?i("div",{staticClass:"book-num"},[i("span",[t._v(t._s(t.productInfo.clustersNum)+"人团")])]):t._e()]),i("div",{staticClass:"absolute-row"},[t.timeDown>0?i("div",{staticClass:"time-down",staticStyle:{"margin-left":"0"}},[t._v(" 仅剩"),i("count-down",{attrs:{time:t.timeDown},on:{finish:t.onTimeDown}})],1):t._e(),1===t.activityType?i("div",{staticClass:"pre-btn"},[t._v("立即预定")]):t._e(),2===t.activityType?i("div",{staticClass:"pre-btn"},[i("span",[t._v("立即抢购")]),i("span",[t._v("已售"+t._s(t.productInfo.saleNum)+"件")])]):t._e(),3===t.activityType?i("div",{staticClass:"pre-btn"},[t._v("立即抢购")]):t._e()])])])])},p=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"pre-tag"},[i("span",[t._v("预")])])}],f=(i("414a"),i("7a82")),h={props:{activityType:{type:Number,default:0},productInfo:{type:Object,default:function(){}},storeId:{type:String,default:""}},components:{CountDown:f["a"]},computed:{timeDown:function(){var t=this.productInfo,e=t.startTime,i=t.endTime,s=t.systemTime,a=0;return e>s?a=e-s:i>s&&(a=i-s),console.log("倒计时：time:",a*(this.activityType?1e3:1)),a*(this.activityType?1e3:1)}},methods:{goProduct:function(){this.$router.push("/goodsDetail?productId=".concat(this.productInfo.productId,"&visitStore=").concat(this.storeId,"&skku=").concat(this.productInfo.skku||""))},onTimeDown:function(){this.$emit("onTimeDown",this.activityType)}}},m=h,v=(i("fa18"),i("2877")),y=Object(v["a"])(m,d,p,!1,null,"7bdf278c",null),g=y.exports,b="http://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/shop/icon_arrow_down.png",_="http://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/shop/icon_arrow_up.png",w={props:{activityType:{type:Number,default:1},flashSaleList:{type:Array,default:function(){return[]}},prodList:{type:Array,default:function(){return[]}},storeId:{type:String,default:""}},components:{productItem:g},data:function(){return{currentTab:0,arrowUrl:b,isExpand:!1,showSize:2}},computed:{activeProductList:function(){return this.flashSaleList.length>this.currentTab?this.flashSaleList[this.currentTab].products:[]}},methods:{changeTab:function(t){this.currentTab=t},changeExpand:function(){this.isExpand=!this.isExpand,0===this.activityType?this.showSize=this.isExpand?this.activeProductList.length:2:this.showSize=this.isExpand?this.prodList.length:2,this.arrowUrl=this.isExpand?_:b},updateData:function(){this.$emit("updateData",this.activityType)},goProduct:function(t){this.$router.push("/goodsDetail?productId=".concat(t.productId,"&visitStore=").concat(this.storeId||""))}}},I=w,S=(i("d911"),Object(v["a"])(I,u,l,!1,null,"38d33c40",null)),T=S.exports;function C(t,e){var i="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=L(t))||e&&t&&"number"===typeof t.length){i&&(t=i);var s=0,a=function(){};return{s:a,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,r=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){r=!0,n=t},f:function(){try{o||null==i["return"]||i["return"]()}finally{if(r)throw n}}}}function P(t){return O(t)||D(t)||L(t)||k()}function k(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function L(t,e){if(t){if("string"===typeof t)return j(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?j(t,e):void 0}}function D(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function O(t){if(Array.isArray(t))return j(t)}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function x(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function E(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?x(Object(i),!0).forEach((function(e){A(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function A(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var $={props:{storeId:{type:String,default:""},storeSign:{type:Object,default:function(){}}},components:{activityComponent:T,commonEmpty:c["default"]},data:function(){return{isFetching:!0,currentTab:0,flashSaleList:[],preSaleProdList:[],findGoodsProdList:[],groupBookingList:[]}},computed:E(E({},Object(r["d"])(["mId"])),{},{location:function(){return this.$store.getters["getlocationInfo"]}}),watch:{watch:{location:{handler:function(t){this.getFlashSale()},immediate:!0}},mId:function(){this.getFlashSale(),this.getPreSale(),this.getFindGoods(),this.getGroupBooking()}},mounted:function(){console.log("活动 mounted:",this.storeId),this.getFlashSale(),this.getPreSale(),this.getFindGoods(),this.getGroupBooking()},methods:{updateData:function(t){switch(t){case 0:this.getFlashSale();break;case 1:this.getPreSale();break;case 2:this.getFindGoods();break;case 3:this.getGroupBooking();break}},getFlashSale:function(){var t=this;Object(n["getStoreFlashSale"])({provinceId:this.location.provinceId,cityId:this.location.cityId,districtId:this.location.districtId,streetId:this.location.townshipId,storeId:this.storeId}).then((function(e){if(e.success){var i=e.data;if(Array.isArray(i.dates)&&i.dates.length){var s=[];i.dates.forEach((function(t){s.push.apply(s,P(t.list))})),t.saleData=E(E({},i.dates[0]),{},{list:s,systemTime:i.systemTime}),t.handleSaleData(t.saleData)}}else t.$toast(e.message);t.isFetching=!1}))},handleSaleData:function(t){if(t.list&&t.list.length){var e,i=t.systemTime,s=t.list,a={dayStr:"往日",timeTip:"进行中",promotionState:1,isSaling:!0,products:[]},n=[],o=C(s);try{for(o.s();!(e=o.n()).done;){var r,c=e.value;if("往日"===c.dayStr){if(c.products.length)(r=a.products).push.apply(r,P(c.products))}else i>c.endTime?(c.promotionState=2,c.isSaling=!1):i<c.startTime?(c.promotionState=0,c.isSaling=!1):(c.promotionState=1,c.isSaling=!0),n.push(c)}}catch(p){o.e(p)}finally{o.f()}a.products.length&&(n=[a].concat(P(n)));for(var u=0,l=0;l<n.length;l++){var d=n[l];if(new Date(d.startTime).getDate()===new Date(i).getDate()&&i<d.endTime&&i>d.startTime){u=l;break}}this.currentTab=u,this.flashSaleList=n}},getPreSale:function(){var t=this;Object(n["getPreSales"])({storeId:this.storeId,pageIndex:1,pageSize:999999},[4,5,6].includes(this.storeSign.storeType)).then((function(e){e.success?t.preSaleProdList=e.data||[]:t.$toast(e.message||"获取数据失败，请稍后重试"),t.isFetching=!1}))},getFindGoods:function(){var t=this;Object(n["getFindGoods"])({storeId:this.storeId,provinceId:this.location.provinceId,cityId:this.location.cityId,districtId:this.location.districtId,streetId:this.location.townshipId,from:1}).then((function(e){e.success?e.data&&e.data.map((function(e){t.findGoodsProdList.push(E(E({},e),{},{marketPrice:e.crossedPrice,advance:e.price,showActiveTag:!!e.minPrice}))})):t.$toast(e.message||"获取数据失败，请稍后重试")}))},getGroupBooking:function(){var t=this;Object(o["d"])({storeId:this.storeId}).then((function(e){e.success?e.data&&e.data.map((function(e){t.groupBookingList.push(E(E({},e),{},{systemTime:e.sysTime?e.sysTime/1e3:0,startTime:e.startTime?e.startTime/1e3:0,endTime:e.endTime?e.endTime/1e3:0,marketPrice:e.basePrice,advance:e.activityPrice,sellPoints:e.sellPoints&&"null"!==e.sellPoints?e.sellPoints:"",showActiveTag:!1}))})):t.$toast(e.message||"获取数据失败，请稍后重试")}))}}},F=$,G=(i("4b9e"),Object(v["a"])(F,s,a,!1,null,"6f98b0c0",null));e["default"]=G.exports},8430:function(t,e,i){},"8ab0":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"common-empty"},[i("div",{staticClass:"shop-empty"}),i("span",[t._v("暂无相关内容")]),t.isHaierApp?i("want-btn",{attrs:{type:"blue"}}):t._e()],1)},a=[],n=i("30d2"),o={name:"common-empty",components:{wantBtn:n["a"]},data:function(){return{isHaierApp:!1}},created:function(){this.isHaierApp=this.$util.isUplus()}},r=o,c=(i("58f3"),i("2877")),u=Object(c["a"])(r,s,a,!1,null,"48f37b06",null);e["default"]=u.exports},d911:function(t,e,i){"use strict";i("05b8")},da31:function(t,e,i){},dd404:function(t,e,i){},eca0:function(t,e,i){"use strict";i("da31")},fa18:function(t,e,i){"use strict";i("dd404")}}]);
//# sourceMappingURL=chunk-9d5cd2d6.11b9d904.js.map