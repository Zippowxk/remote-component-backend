(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-09840b7f"],{"04e2":function(t,i,e){"use strict";e("f4e5")},"0d8d":function(t,i,e){"use strict";e.d(i,"a",(function(){return c})),e.d(i,"b",(function(){return s}));var a=e("1c03"),n=e("bbc2"),c=function(t){return a["a"].request({url:n["a"].GET_PROVINCE_LIST,method:"get",params:t})},s=function(t){return a["a"].request({url:n["a"].GET_PROVINCE_LIST_BY_STOREOWNERID,method:"get",params:t})}},1684:function(t,i,e){"use strict";e("3555")},"1a29":function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"box"},[a("div",{staticClass:"address",on:{click:function(t){t.stopPropagation()}}},[a("div",{staticClass:"top",on:{touchmove:function(t){t.preventDefault()}}},[a("div",{staticClass:"title"},[t._v("配送至 "),a("img",{attrs:{src:t.$cdnImageUrl+"/common/control-close.png",alt:""},on:{click:t.closeModal}})]),t.location?a("div",{staticClass:"nowAddress",on:{click:t.chooseCurrent}},[a("img",{attrs:{src:e("7046")}}),a("span",[t._v("定位地址("+t._s(t.location.district)+"/"+t._s(t.location.township)+")")])]):a("div",{staticClass:"nowAddress",on:{click:t.chooseCurrent}},[a("img",{attrs:{src:t.$cdnImageUrl+"/common/location-icon-blue.svg"}}),a("span",[t._v("点击自动定位")])]),a("div",{staticClass:"change"},[t.province?a("span",{on:{click:t.provinceClick}},[t._v(t._s(t.provinceData.text))]):t._e(),t.city?a("span",{on:{click:t.cityClick}},[t._v(t._s(t.cityData.text))]):t._e(),t.area?a("span",{on:{click:t.areaClick}},[t._v(t._s(t.areaData.text))]):t._e(),a("span",{staticClass:"placeChange"},[t._v("请选择")])])]),t.list.length>6?a("div",{staticClass:"bottom"},[t.showLoading?a("van-loading",{staticClass:"loadingClass",attrs:{vertical:""}},[t._v("加载中...")]):t._e(),t._l(t.list,(function(i,e){return a("div",{key:e,staticClass:"address-item",on:{click:function(e){return t.cityListClick(i)}}},[t._v(t._s(i.text))])}))],2):a("div",{staticClass:"bottom",on:{touchmove:function(t){t.preventDefault()}}},[t.showLoading?a("van-loading",{staticClass:"loadingClass",attrs:{vertical:""}},[t._v("加载中...")]):t._e(),t._l(t.list,(function(i,e){return a("div",{key:e,staticClass:"address-item",on:{click:function(e){return t.cityListClick(i)}}},[t._v(t._s(i.text))])}))],2)])])},n=[],c=e("2f62"),s=e("0d8d");function o(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);i&&(a=a.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,a)}return e}function r(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?o(Object(e),!0).forEach((function(i){l(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):o(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))}return t}function l(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}var d={props:["onlyread"],data:function(){return{showLoading:!1,location:null,show:!0,list:[],windowHeight:"",province:!1,provinceData:"",city:!1,cityData:"",area:!1,areaData:!1,clickNum:0,townData:"",firstValue:0,secondValue:0}},methods:r(r(r({},Object(c["e"])(["setLocationInfo","setLoaction"])),Object(c["c"])(["getLatLongByLocationInfo"])),{},{hideParent:function(t){},removeHidden:function(t){},load:function(){var t=this;this.hideParent(),this.showLoading=!0;var i={parentId:0,regionType:0};Object(s["a"])(i).then((function(i){t.showLoading=!1,200===i.status?t.list=i.data.data:t.$toast("请求失败，请重试")}))["catch"]((function(i){t.$toast("请求失败，请重试")}))},chooseCurrent:function(){this.location?(this.onlyread||(localStorage.setItem("latitude",this.location.latitude),localStorage.setItem("longitude",this.location.longitude),localStorage.setItem("provinceId",this.location.provinceId),localStorage.setItem("cityId",this.location.cityId),localStorage.setItem("districtId",this.location.districtId),localStorage.setItem("townshipId",this.location.townshipId),this.setLocationInfo(this.location),this.setLoaction({latitude:this.location.latitude,longitude:this.location.longitude})),this.$emit("handleLocation",this.location),this.closeModal()):(console.log("手动定位"),this.getLocation())},closeModal:function(){this.$emit("handleLocation",this.location),this.$emit("onHide")},provinceClick:function(){var t=this;this.showLoading=!0,this.list=[],Object(s["a"])({parentId:0,regionType:0}).then((function(i){t.province=!1,t.city=!1,t.area=!1,t.clickNum=0,t.showLoading=!1,200===i.status?t.list=i.data.data:t.$toast("请求失败，请重试")}))["catch"]((function(i){t.$toast("请求失败，请重试")}))},cityClick:function(){var t=this;this.showLoading=!0,this.list=[],Object(s["a"])({parentId:this.firstValue,regionType:1}).then((function(i){t.city=!1,t.area=!1,t.clickNum=1,t.showLoading=!1,200===i.status?t.list=i.data.data:t.$toast("请求失败，请重试")}))["catch"]((function(i){t.$toast("请求失败，请重试")}))},areaClick:function(){var t=this;this.showLoading=!0,this.list=[],Object(s["a"])({parentId:this.secondValue,regionType:2}).then((function(i){t.clickNum=2,t.area=!1,t.showLoading=!1,200===i.status?t.list=i.data.data:t.$toast("请求失败，请重试")}))["catch"]((function(i){t.$toast("请求失败，请重试")}))},cityListClick:function(t){var i=this;if(this.showLoading=!0,0===this.clickNum){this.provinceData=t,this.list=[];var e={parentId:t.value,regionType:1};this.firstValue=t.value,Object(s["a"])(e).then((function(t){i.showLoading=!1,200===t.status?i.list=t.data.data:i.$toast("请求失败，请重试")}))["catch"]((function(t){i.$toast("请求失败，请重试")})),this.province=!0,this.clickNum++}else 1===this.clickNum?(this.list=[],this.cityData=t,Object(s["a"])({parentId:t.value,regionType:2}).then((function(t){i.showLoading=!1,200===t.status?i.list=t.data.data:i.$toast("请求失败，请重试")}))["catch"]((function(t){i.$toast("请求失败，请重试")})),this.secondValue=t.value,this.city=!0,this.clickNum++):2===this.clickNum?(this.list=[],this.area=!0,this.areaData=t,Object(s["a"])({parentId:t.value,regionType:3}).then((function(t){i.showLoading=!1,200===t.status?i.list=t.data.data:i.$toast("请求失败，请重试"),0===t.data.data.length&&(i.clickNum=0,i.resetLocation())}))["catch"]((function(t){i.$toast("请求失败，请重试")})),this.clickNum++):3===this.clickNum&&(this.list=[],this.townData=t,this.clickNum=0,this.resetLocation())},resetLocation:function(){var t=this,i={region:"".concat(this.provinceData.text," ").concat(this.cityData.text," ").concat(this.areaData.text," ").concat(this.townData.text),provinceId:this.provinceData.value,province:this.provinceData.text,cityId:this.cityData.value,city:this.cityData.text,districtId:this.areaData.value,district:this.areaData.text,townshipId:this.townData.value,township:this.townData.text};this.getLatLongByLocationInfo(i).then((function(e){400===e?t.$toast("根据位置信息获取经纬度失败"):(i.latitude=e.latitude,i.longitude=e.longitude,t.onlyread||(localStorage.setItem("latitude",e.latitude),localStorage.setItem("longitude",e.longitude),localStorage.setItem("provinceId",i.provinceId),localStorage.setItem("cityId",i.cityId),localStorage.setItem("districtId",i.districtId),localStorage.setItem("townshipId",i.townshipId),t.setLocationInfo(i),t.setLoaction(e)),t.$emit("handleLocation",i))}))},getLocation:function(){var t=this;this.$store.dispatch("doLocation",!0).then((function(i){400===i?t.$toast("定位失败，请自行选择位置信息"):(t.$toast("自动定位成功"),t.$store.dispatch("doLocationInfo",{latitude:i.latitude,longitude:i.longitude,noStore:t.onlyread,force:!0}).then((function(i){t.location=i,t.closeModal()})))}))}}),mounted:function(){this.load()},beforeDestroy:function(){this.removeHidden()}},v=d,h=(e("f641"),e("2877")),u=Object(h["a"])(v,a,n,!1,null,"cee19576",null);i["a"]=u.exports},"1be46":function(t,i,e){},"2eba":function(t,i,e){"use strict";e("1be46")},3555:function(t,i,e){},"3e5a":function(t,i,e){"use strict";e("9117")},7046:function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAcCAYAAAB75n/uAAAAAXNSR0IArs4c6QAABG9JREFUSA21VWtoXEUUnnN3001N2zRWN6nJKmS3qbZq1ShFqrZWMApCQWhAjSgIRhBECiotESNZUqtFQfBHBKmPNmKKQkTUKjS0KkVq8NWWPjYim03bpI8k1jTZ7t45nm/uzs1Nmm0s4sDdOXPO931n5sy5d5X6nwddSn/5O0PzssPZdawUnhXE6hrgmdRxIf4qT3ekItJ98Nno38V0ZkywvotDvUcGnibFraw4WowMPykaYkWt9Uur393ZSO507EUJlm45NT+fm+hi5gcKAvuIeLvjhHeXlIcz8OVG8zVa59cyU5Ns4E6DI/o6XFLaeOSlq89hbceUBCjJ+Nns91KEFbK1QUeFmlMt1d0WPNOcSA6s08rtUKwqFdEvcysidwdL5gRJIr7NE6fDERVeOZs4uMAAK+KHFfMtnsakqn+CRLL/Mc28XUIjjorcnnq5sm8SNruVaBuMa5X9SZALHaKmVEtsB1gmgbnUo5lDsoM6IufJvpaaD4KSibfPLFDnxp+Se7nDkIj2q/lz30s9t+ivIC6ezDzBrN+X0xytr6tZhks3JepNZRogjsBtddU4hT+WtPev1KPnf9davykJHsEDGz7EfKAYhisa0DKa4jMJSKsHC8AdwVbDzl1Xdcm9XCvtuEfO+ygeY4sPMXO6ArnA9UpT0AwjJi/RXZgdRd9g9oeUxYqnWmruJelXxFqZP/komdktLboapRPXW5YDDa341UlNifhvaCT8hwVitjVn4g4rDn8rkYYviIGNwQUNq+m1KXEFggsXVA5j/i+j9LrKEcMvaJoEzOoMnNnTQ1cGxWXX+7EmpmY5jd/SsOEzsQLG5/15ymhYTXMHJB8vcVSNUz4hwEEfLK2oRs8/j1onkpme2mTalEXsZlN/RWm0q48XYyKfi2MNTcxeFym11zi1vh+zHejzUEg1CjxtBFl1Skd0WnHEpr8LyuUG8OW4RtMkUBz+Ck65/cfX9LA5FdYYxzbFfnTKr7jJcZwNUrKP8cCGDzEP5f3Wd3AJk27Ciij0pR+TtnPibekDtW1pjrdlTG394GUY4Hoa6QPQBNX8oO3k+/GKp8Vbl2w5fsNl6Bqox+GtWEALmsY2Ufk51hL7VOr2odR3ns65ny9/fajKxmabgQUHXGhAy3K8OyisomX0jAB6pQ0TExey317fnllkgcVmYIAFB1xoBLFTEuzbEBsvCTkNAjwohBtzrt5V+9rZ8iAhaCMGDLDggAuNIEb8Fw8cWXb1XWFXP5SVzmn47YWqsSDy5jdOlo1NXNgl35xV0lmp0jnyT/Zi9GQQA3vKCWwQQA6H7vP6X60ay+a612zjUhuHDR/EDUawM4kDP+MJrFB8c3+CXd4rL9digX5REa15GLHhocxn8ll7SNgnKET39G2MpSxn+nzJBAAn2k8sYze/RzrkKinFTvikdOvlP+E0hcKrU5sWH4Kv2Jg1AYiJzQO3atftkZPYCx9xwqG1qY3VPxcTtv5/lQBg89epuVNKpR1HNU3/TFjB6fM/5xEHkHV1YdMAAAAASUVORK5CYII="},"70bc":function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("Header",[e("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.modifyFlag?"修改发票":"开具发票"))]),1===t.invoiceData.it||4===t.invoiceData.it?e("div",{attrs:{slot:"right"},on:{click:function(i){return t.$router.push("/manageInvoice")}},slot:"right"},[t._v("选择发票信息")]):t._e()]),e("div",{staticClass:"container"},[t.orderNo&&t.pageInfo&&!t.modifyFlag?e("order-info",{attrs:{invoiceData:t.pageInfo}}):t._e(),e("div",{staticClass:"type"},[e("div",{staticClass:"tit"},[t._v(" 发票信息 "),e("span",{staticClass:"invoice-tips-container",on:{click:function(i){t.invoiceTipsShow=!0}}},[e("span",{staticClass:"tips-icon"}),t._v("发票须知")])])]),e("div",{staticClass:"select"},[e("div",{staticClass:"tit"},[t._v(" 发票类型 ")]),e("div",{staticClass:"right",on:{click:t.showTypeWindow}},[e("span",{staticClass:"text"},[t._v(t._s(t.typeSelected))]),e("img",{staticClass:"right-icon",attrs:{src:t.$cdnImageUrl+"/common/right-arrow-gray.png",alt:""}})])]),2===t.invoiceData.it||3===t.invoiceData.it?e("div",{staticClass:"invoice-normal-wrap"},[e("invoice-normal",{attrs:{hideCancelBtn:t.modifyFlag,invoiceData:t.invoiceData,autoFlag:!!t.pageInfo.autoInvoiceFlag,isLocked:t.pageInfo.hasLocked,orderNo:t.orderNo,hasWa:t.hasWa},on:{cancleInvoice:t.cancelInvoice,fnRadioChange:t.fnRadioChange,fnInput:t.fnInput,handleLocation:t.handleLocation,fnConfirm:t.fnConfirm}})],1):t._e(),1===t.invoiceData.it?e("div",{staticClass:"invoice-vat-wrap"},[e("invoice-vat",{attrs:{hideCancelBtn:t.modifyFlag,invoiceData:t.invoiceData,isLocked:t.pageInfo.hasLocked,orderNo:t.orderNo,hasWa:t.hasWa},on:{cancleInvoice:t.cancelInvoice,fnInput:t.fnInput,fnConfirm:t.fnConfirm,handleLocation:t.handleLocation}})],1):t._e(),4===t.invoiceData.it?e("div",{staticClass:"invoice-vat-wrap"},[e("invoice-vat-electric",{attrs:{hideCancelBtn:t.modifyFlag,invoiceData:t.invoiceData,isLocked:t.pageInfo.hasLocked,orderNo:t.orderNo,hasWa:t.hasWa},on:{cancleInvoice:t.cancelInvoice,fnInput:t.fnInput,fnConfirm:t.fnConfirm,handleLocation:t.handleLocation}})],1):t._e(),e("van-popup",{style:{height:"9.46rem"},attrs:{position:"bottom"},on:{close:t.onHideTips,click:t.onHideTips},model:{value:t.invoiceTipsShow,callback:function(i){t.invoiceTipsShow=i},expression:"invoiceTipsShow"}},[e("div",{staticClass:"content",on:{click:function(t){t.stopPropagation()}}},[e("div",{staticClass:"tips-header"},[e("span",{staticClass:"tips-title"},[t._v("发票须知")]),e("span",{staticClass:"tips-close",on:{click:t.onHideTips}})]),e("div",{staticClass:"scroll-view"},[e("div",{staticClass:"text"},[t._v(" 1. 第三方卖家销售的商品/服务的发票由卖家自行出具。发票金额不含礼品卡、钻石、优惠券、积分、红包、金币、银行支付有礼等优惠扣减金额。 "),e("br"),e("br"),t._v(" 2. 增值税电子普通发票是税务局认可的有效收付款凭证，其法律效力、基本用途及使用规定同纸质发票，如需纸质发票可自行下载打印; "),e("br"),e("br"),t._v(" 3. 开票时间与查询路径： "),e("br"),t._v(" (1) 电子普通发票在订单完成后3个工作日开具；增值税普通发票(纸质)、增值税专用发票(纸质)在订单完成后7个工作日开具为您寄出； "),e("br"),t._v(' (2) 可在"我的订单→订单详情→发票服务→发票详情"查询相关信息。 '),e("br"),e("br"),t._v(" 4. 发票补开、换开及修改规则： "),e("br"),t._v(" (1) 下单时未申请开票的订单，签收后365天内可申开票 "),e("br"),t._v(" (2) 订单签收前、订单签收后各可申请一次换开及修改发票；请认真核对开票内容 "),e("br"),t._v(" (3) 更换增值税专用发票，需将原票寄回，系统未自动带出退回地址的请与第三方商家客服确认。 "),e("br"),e("br")])])])]),e("invoice-type",{attrs:{invoiceData:t.pageInfo,show:t.showTypeSelect},on:{onHide:t.onTypeHide}})],1)],1)},n=[],c=e("e725"),s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"invoice-normal"},[e("ul",[e("li",{staticClass:"item radio"},[e("div",{staticClass:"left"},[t._v("抬头类型")]),e("div",{staticClass:"right"},[e("van-radio-group",{attrs:{disabled:1===t.isLocked},on:{change:t.fnRadioChange},model:{value:t.radio,callback:function(i){t.radio=i},expression:"radio"}},[e("van-radio",{attrs:{"checked-color":"#2283E2",name:"1"},scopedSlots:t._u([{key:"icon",fn:function(i){return[e("img",{staticClass:"imgIcon",attrs:{src:i.checked?t.activeIcon:t.inactiveIcon}})]}}])},[t._v(" 个人 ")]),e("van-radio",{attrs:{"checked-color":"#2283E2",name:"2"},scopedSlots:t._u([{key:"icon",fn:function(i){return[e("img",{staticClass:"imgIcon",attrs:{src:i.checked?t.activeIcon:t.inactiveIcon}})]}}])},[t._v(" 公司 ")])],1)],1)]),e("li",{staticClass:"item"},[e("div",{staticClass:"left"},[t._v("发票抬头")]),e("div",{staticClass:"right"},[e("van-field",{staticClass:"field-textarea",attrs:{rows:"1",disabled:1===t.isLocked,autosize:"",type:"textarea",placeholder:"可输入个人／单位名称"},on:{input:function(i){return t.fnInput("iti")}},model:{value:t.iti,callback:function(i){t.iti=i},expression:"iti"}})],1)]),"2"===t.radio?e("li",{staticClass:"item"},[e("div",{staticClass:"left"},[t._v("纳税人识别号")]),e("div",{staticClass:"right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tpn,expression:"tpn"}],attrs:{placeholder:"长度为15位或18位或20位",type:"text",disabled:1===t.isLocked},domProps:{value:t.tpn},on:{input:[function(i){i.target.composing||(t.tpn=i.target.value)},function(i){return t.fnInput("tpn")}]}})])]):t._e(),t.autoFlag&&2===t.invoiceData.it?e("li",{staticClass:"item"},[e("div",{staticClass:"left"},[t._v("收票邮箱")]),e("div",{staticClass:"right"},[e("van-field",{staticClass:"field-textarea",attrs:{rows:"1",disabled:1===t.isLocked,autosize:"",type:"textarea",placeholder:"发票开具后会发送到您的邮箱"},on:{input:function(i){return t.fnInput("em")}},model:{value:t.em,callback:function(i){t.em=i},expression:"em"}})],1)]):t._e()]),0===t.hasWa&&3===t.invoiceData.it?e("ul",[e("li",{staticClass:"item"},[e("div",{staticClass:"left"},[t._v("收件人姓名")]),e("div",{staticClass:"right"},[e("van-field",{staticClass:"field-textarea",attrs:{rows:"1",disabled:1===t.isLocked,autosize:"",type:"textarea",placeholder:"请填写收件人姓名"},on:{input:function(i){return t.fnInput("rcc")}},model:{value:t.rcc,callback:function(i){t.rcc=i},expression:"rcc"}})],1)]),e("li",{staticClass:"item address"},[e("div",{staticClass:"left"},[t._v("所在地区")]),e("div",{staticClass:"right",on:{click:t.showLocation}},[e("div",{staticClass:"img"},[e("span",{staticClass:"location-text"},[t._v(t._s(this.invoiceData.rcr?this.invoiceData.rcr:"选择"))]),e("img",{staticClass:"right-icon",attrs:{src:t.$cdnImageUrl+"/common/right-arrow-gray.png",alt:""}})])])]),e("li",{staticClass:"item"},[e("div",{staticClass:"left"},[t._v("详细地址")]),e("div",{staticClass:"right"},[e("van-field",{staticClass:"field-textarea",attrs:{rows:"1",disabled:1===t.isLocked,autosize:"",type:"textarea",placeholder:"请输入详细地址"},on:{input:function(i){return t.fnInput("rca")}},model:{value:t.rca,callback:function(i){t.rca=i},expression:"rca"}})],1)]),e("li",{staticClass:"item"},[e("div",{staticClass:"left"},[t._v("收件人手机")]),e("div",{staticClass:"right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.rcm,expression:"rcm"}],attrs:{placeholder:"请填写收件人手机号",type:"text",disabled:1===t.isLocked},domProps:{value:t.rcm},on:{input:[function(i){i.target.composing||(t.rcm=i.target.value)},function(i){return t.fnInput("rcm")}]}})])])]):t._e(),e("div",{staticClass:"edit-location-tip"},[1===t.isLocked?e("span",[t._v("该订单存在已经申请的开票信息，发票信息不需更改，如需帮助请联系客服")]):2!==t.invoiceData.it?e("span",[t._v("如发票与商品发往不同地址，请修改邮寄地址信息")]):t._e()]),e("div",{staticClass:"btn-wrap"},[e("div",{staticClass:"btn",on:{click:t.fnConfirm}},[t._v("确定")]),t.hideCancelBtn?t._e():[0!==t.hasWa||t.orderNo?t._e():e("div",{staticClass:"no-invoice",on:{click:t.cancleInvoice}},[t._v("不开发票")]),0===t.hasWa&&t.orderNo?e("div",{staticClass:"no-invoice",on:{click:t.doBack}},[t._v("不开发票")]):t._e()]],2),e("van-popup",{attrs:{position:"bottom"},on:{close:t.onHide,click:t.onHide},model:{value:t.showDialog,callback:function(i){t.showDialog=i},expression:"showDialog"}},[e("change-geographic-location",{ref:"geoLocation",on:{onHide:t.onHide,handleLocation:t.handleLocation}})],1)],1)},o=[],r=e("1a29"),l={props:["invoiceData","isLocked","hasWa","orderNo","autoFlag","hideCancelBtn"],components:{changeGeographicLocation:r["a"]},data:function(){return{radio:"1",iti:"",tpn:"",rcc:"",rca:"",rcm:"",em:"",showDialog:!1,activeIcon:"".concat(this.$cdnImageUrl,"/common/checked.svg"),inactiveIcon:"".concat(this.$cdnImageUrl,"/cart/icon-unselected.png")}},watch:{invoiceData:{handler:function(){this.radio=this.invoiceData.nit.toString(),this.iti=this.invoiceData.iti||"",this.tpn=this.invoiceData.tpn||"",this.rcc=this.invoiceData.rcc||"",this.rca=this.invoiceData.rca||"",this.rcm=this.invoiceData.rcm||"",this.em=this.invoiceData.em||""},immediate:!0}},methods:{showLocation:function(){1!==this.isLocked&&(this.showDialog=!0)},fnRadioChange:function(t){this.$emit("fnRadioChange",1*t)},cancleInvoice:function(){this.$emit("cancleInvoice")},onHide:function(){this.showDialog=!1,this.$refs.geoLocation.load()},handleLocation:function(t){this.showDialog=!1,t&&(this.pi=t.provinceId,this.ci=t.cityId,this.ri=t.districtId,this.si=t.townshipId,this.$emit("handleLocation",{address:"".concat(t.province," ").concat(t.city," ").concat(t.district),street:t.township}))},fnInput:function(t){var i;switch(t){case"iti":i=this.iti;break;case"tpn":i=this.tpn;break;case"rcc":i=this.rcc;break;case"rca":i=this.rca;break;case"rcm":i=this.rcm;break;case"em":i=this.em;break}this.$emit("fnInput",{type:t,value:i?i.trim?i.trim():i:""})},fnConfirm:function(){this.$emit("fnConfirm")},doBack:function(){this.$store.dispatch("doHistoryBack")}}},d=l,v=(e("04e2"),e("2877")),h=Object(v["a"])(d,s,o,!1,null,"1aeb25a6",null),u=h.exports,p=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"invoice-vat"},[e("ul",[e("li",[e("div",{staticClass:"left"},[t._v("公司名称")]),e("div",{staticClass:"right"},[e("van-field",{staticClass:"field-textarea",attrs:{rows:"1",disabled:1===t.isLocked,autosize:"",type:"textarea",placeholder:"请填写公司名称"},on:{input:function(i){return t.fnInput("bc")}},model:{value:t.bc,callback:function(i){t.bc=i},expression:"bc"}})],1)]),e("li",[e("div",{staticClass:"left"},[t._v("纳税人识别号")]),e("div",{staticClass:"right"},[e("van-field",{staticClass:"field-textarea",attrs:{rows:"1",disabled:1===t.isLocked,autosize:"",type:"textarea",placeholder:"长度为15位或18位或20位"},on:{input:function(i){return t.fnInput("tpn")}},model:{value:t.tpn,callback:function(i){t.tpn=i},expression:"tpn"}})],1)]),e("li",[e("div",{staticClass:"left"},[t._v("注册地址")]),e("div",{staticClass:"right"},[e("van-field",{staticClass:"field-textarea",attrs:{rows:"1",disabled:1===t.isLocked,autosize:"",type:"textarea",placeholder:"请填写注册地址"},on:{input:function(i){return t.fnInput("rga")}},model:{value:t.rga,callback:function(i){t.rga=i},expression:"rga"}})],1)]),e("li",[e("div",{staticClass:"left"},[t._v("注册电话")]),e("div",{staticClass:"right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.rgp,expression:"rgp"}],attrs:{placeholder:"座机（区号-号码）或手机",type:"text",disabled:1===t.isLocked},domProps:{value:t.rgp},on:{input:[function(i){i.target.composing||(t.rgp=i.target.value)},function(i){return t.fnInput("rgp")}]}})])]),e("li",[e("div",{staticClass:"left"},[t._v("开户银行")]),e("div",{staticClass:"right"},[e("van-field",{staticClass:"field-textarea",attrs:{rows:"1",disabled:1===t.isLocked,autosize:"",type:"textarea",placeholder:"请填写开户银行"},on:{input:function(i){return t.fnInput("bn")}},model:{value:t.bn,callback:function(i){t.bn=i},expression:"bn"}})],1)]),e("li",[e("div",{staticClass:"left"},[t._v("开户账号")]),e("div",{staticClass:"right"},[e("van-field",{staticClass:"field-textarea",attrs:{rows:"1",disabled:1===t.isLocked,autosize:"",type:"textarea",placeholder:"请填写开户账号"},on:{input:function(i){return t.fnInput("cbn")}},model:{value:t.cbn,callback:function(i){t.cbn=i},expression:"cbn"}})],1)])]),e("ul",[e("li",[e("div",{staticClass:"left"},[t._v("收件人姓名")]),e("div",{staticClass:"right"},[e("van-field",{staticClass:"field-textarea",attrs:{rows:"1",disabled:1===t.isLocked,autosize:"",type:"textarea",placeholder:"收件人姓名"},on:{input:function(i){return t.fnInput("rcc")}},model:{value:t.rcc,callback:function(i){t.rcc=i},expression:"rcc"}})],1)]),e("li",{staticClass:"address",on:{click:t.fnChangeAddress}},[e("div",{staticClass:"left"},[t._v(" 所在地区 ")]),e("div",{staticClass:"right"},[e("div",{staticClass:"img"},[t.rcr?e("span",[t._v(t._s(t.rcr))]):e("span",{staticClass:"no"},[t._v("选择")]),e("img",{attrs:{src:t.$cdnImageUrl+"/common/right-arrow-gray.png",alt:""}})])])]),e("li",[e("div",{staticClass:"left"},[t._v("详细地址")]),e("div",{staticClass:"right"},[e("van-field",{staticClass:"field-textarea",attrs:{rows:"1",disabled:1===t.isLocked,autosize:"",type:"textarea",placeholder:"请输入详细地址（包含省市区）"},on:{input:function(i){return t.fnInput("rca")}},model:{value:t.rca,callback:function(i){t.rca=i},expression:"rca"}})],1)]),e("li",[e("div",{staticClass:"left"},[t._v("收件人手机")]),e("div",{staticClass:"right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.rcm,expression:"rcm"}],attrs:{placeholder:"",type:"tel",disabled:1===t.isLocked},domProps:{value:t.rcm},on:{input:[function(i){i.target.composing||(t.rcm=i.target.value)},function(i){return t.fnInput("rcm")}]}})])])]),e("div",{staticClass:"edit-location-tip"},[1===t.isLocked?e("span",[t._v("该订单存在已经申请的开票信息，发票信息不需更改，如需帮助请联系客服")]):e("span",[t._v("如发票与商品发往不同地址，请修改邮寄地址信息")])]),e("div",{staticClass:"btn-wrap"},[e("div",{staticClass:"btn",on:{click:t.fnConfirm}},[t._v("确定")]),t.hideCancelBtn?t._e():[0!==t.hasWa||t.orderNo?t._e():e("div",{staticClass:"no-invoice",on:{click:t.cancleInvoice}},[t._v("不开发票")]),0===t.hasWa&&t.orderNo?e("div",{staticClass:"no-invoice",on:{click:t.doBack}},[t._v("不开发票")]):t._e()]],2),e("van-popup",{attrs:{position:"bottom"},on:{close:t.onHide,click:t.onHide},model:{value:t.showDialog,callback:function(i){t.showDialog=i},expression:"showDialog"}},[e("change-geographic-location",{ref:"geoLocation",on:{onHide:t.onHide,handleLocation:t.handleLocation}})],1)],1)},f=[],g={props:["invoiceData","isLocked","hasWa","orderNo","hideCancelBtn"],components:{changeGeographicLocation:r["a"]},data:function(){return{showDialog:!1,bc:"",tpn:"",rga:"",rgp:"",bn:"",cbn:"",rcc:"",rcr:"",rca:"",rcm:"",pi:"",ci:"",ri:"",si:""}},watch:{invoiceData:{handler:function(){this.bc=this.invoiceData.bc||"",this.tpn=this.invoiceData.tpn||"",this.rga=this.invoiceData.rga||"",this.rgp=this.invoiceData.rgp||"",this.bn=this.invoiceData.bn||"",this.cbn=this.invoiceData.cbn||"",this.rcc=this.invoiceData.rcc||"",this.rcr=this.invoiceData.rcr||"",this.rca=this.invoiceData.rca||"",this.rcm=this.invoiceData.rcm||""},immediate:!0}},methods:{fnInput:function(t){var i;switch(t){case"bc":i=this.bc;break;case"tpn":i=this.tpn;break;case"rga":i=this.rga;break;case"rgp":i=this.rgp;break;case"bn":i=this.bn;break;case"cbn":i=this.cbn;break;case"rcc":i=this.rcc;break;case"rca":i=this.rca;break;case"rcm":i=this.rcm;break}this.$emit("fnInput",{type:t,value:i?i.trim?i.trim():i:""})},cancleInvoice:function(){this.$emit("cancleInvoice")},fnChangeAddress:function(){1!==this.isLocked&&(this.showDialog=!this.showDialog)},onHide:function(){this.showDialog=!1,this.$refs.geoLocation.load()},handleLocation:function(t){this.showDialog=!1,t&&(this.pi=t.provinceId,this.ci=t.cityId,this.ri=t.districtId,this.si=t.townshipId,this.$emit("handleLocation",{address:"".concat(t.province," ").concat(t.city," ").concat(t.district),street:t.township}))},fnConfirm:function(){this.$emit("fnConfirm")},doBack:function(){this.$store.dispatch("doHistoryBack")}}},m=g,b=(e("2eba"),Object(v["a"])(m,p,f,!1,null,"a6ec653c",null)),I=b.exports,D=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"invoice-vat"},[e("ul",[e("li",[e("div",{staticClass:"left"},[t._v("公司名称")]),e("div",{staticClass:"right"},[e("van-field",{staticClass:"field-textarea",attrs:{rows:"1",disabled:1===t.isLocked,autosize:"",type:"textarea",placeholder:"请填写公司名称"},on:{input:function(i){return t.fnInput("bc")}},model:{value:t.bc,callback:function(i){t.bc=i},expression:"bc"}})],1)]),e("li",[e("div",{staticClass:"left"},[t._v("纳税人识别号")]),e("div",{staticClass:"right"},[e("van-field",{staticClass:"field-textarea",attrs:{rows:"1",disabled:1===t.isLocked,autosize:"",type:"textarea",placeholder:"长度为15位或18位或20位"},on:{input:function(i){return t.fnInput("tpn")}},model:{value:t.tpn,callback:function(i){t.tpn=i},expression:"tpn"}})],1)]),e("li",[e("div",{staticClass:"left"},[t._v("注册地址")]),e("div",{staticClass:"right"},[e("van-field",{staticClass:"field-textarea",attrs:{rows:"1",disabled:1===t.isLocked,autosize:"",type:"textarea",placeholder:"请填写注册地址"},on:{input:function(i){return t.fnInput("rga")}},model:{value:t.rga,callback:function(i){t.rga=i},expression:"rga"}})],1)]),e("li",[e("div",{staticClass:"left"},[t._v("注册电话")]),e("div",{staticClass:"right"},[e("van-field",{staticClass:"field-textarea",attrs:{rows:"1",disabled:1===t.isLocked,autosize:"",type:"textarea",placeholder:"座机（区号-号码）或手机"},on:{input:function(i){return t.fnInput("rgp")}},model:{value:t.rgp,callback:function(i){t.rgp=i},expression:"rgp"}})],1)]),e("li",[e("div",{staticClass:"left"},[t._v("开户银行")]),e("div",{staticClass:"right"},[e("van-field",{staticClass:"field-textarea",attrs:{rows:"1",disabled:1===t.isLocked,autosize:"",type:"textarea",placeholder:"请填写开户银行"},on:{input:function(i){return t.fnInput("bn")}},model:{value:t.bn,callback:function(i){t.bn=i},expression:"bn"}})],1)]),e("li",[e("div",{staticClass:"left"},[t._v("开户账号")]),e("div",{staticClass:"right"},[e("van-field",{staticClass:"field-textarea",attrs:{rows:"1",disabled:1===t.isLocked,autosize:"",type:"textarea",placeholder:"请填写开户账号"},on:{input:function(i){return t.fnInput("cbn")}},model:{value:t.cbn,callback:function(i){t.cbn=i},expression:"cbn"}})],1)])]),e("div",{staticClass:"edit-location-tip"},[1===t.isLocked?e("span",[t._v("该订单存在已经申请的开票信息，发票信息不需更改，如需帮助请联系客服")]):t._e()]),e("div",{staticClass:"btn-wrap"},[e("div",{staticClass:"btn",on:{click:t.fnConfirm}},[t._v("确定")]),0!==t.hasWa||t.orderNo?t._e():e("div",{staticClass:"no-invoice",on:{click:t.cancleInvoice}},[t._v("不开发票")]),0===t.hasWa&&t.orderNo?e("div",{staticClass:"no-invoice",on:{click:t.doBack}},[t._v("不开发票")]):t._e()])])},y=[],C={props:["invoiceData","isLocked","hasWa","orderNo"],data:function(){return{bc:"",tpn:"",rga:"",rgp:"",bn:"",cbn:"",pi:"",ci:"",ri:"",si:""}},watch:{invoiceData:{handler:function(){this.bc=this.invoiceData.bc||"",this.tpn=this.invoiceData.tpn||"",this.rga=this.invoiceData.rga||"",this.rgp=this.invoiceData.rgp||"",this.bn=this.invoiceData.bn||"",this.cbn=this.invoiceData.cbn||""},immediate:!0}},methods:{fnInput:function(t){var i;switch(t){case"bc":i=this.bc;break;case"tpn":i=this.tpn;break;case"rga":i=this.rga;break;case"rgp":i=this.rgp;break;case"bn":i=this.bn;break;case"cbn":i=this.cbn;break}this.$emit("fnInput",{type:t,value:i?i.trim?i.trim():i:""})},cancleInvoice:function(){this.$emit("cancleInvoice")},fnConfirm:function(){this.$emit("fnConfirm")},doBack:function(){this.$store.dispatch("doHistoryBack")}}},k=C,w=(e("ba9f"),Object(v["a"])(k,D,y,!1,null,"40806e4c",null)),T=w.exports,_=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"order-info-container"},[e("div",{staticClass:"content"},[e("div",{staticClass:"left"},[e("img",{attrs:{src:t.invoiceData.productImageUrl}})]),e("div",{staticClass:"right"},[e("div",{staticClass:"code"},[e("span",{staticClass:"label"},[t._v("订单编号")]),e("span",{staticClass:"text"},[t._v(t._s(t.invoiceData.orderSn))])]),e("div",{staticClass:"price"},[e("span",{staticClass:"label"},[t._v("开票金额")]),e("span",{staticClass:"text"},[t._v(t._s(t.invoiceData.orderProductAmount))])])])])])},$=[],x={props:["invoiceData"],data:function(){return{}},methods:{}},L=x,A=(e("8c10"),Object(v["a"])(L,_,$,!1,null,"992f396a",null)),N=A.exports,O=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"invoice-type-container"},[e("van-popup",{style:{"max-height":"8.26rem"},attrs:{position:"bottom"},on:{close:t.onHide},model:{value:t.typeShow,callback:function(i){t.typeShow=i},expression:"typeShow"}},[e("div",{staticClass:"content",on:{click:function(t){t.stopPropagation()}}},[e("div",{staticClass:"type-header"},[e("span",{staticClass:"type-title"},[t._v("发票类型选择")]),e("span",{staticClass:"type-close",on:{click:t.onHide}})]),e("div",{staticClass:"scroll-view"},[e("van-radio-group",{model:{value:t.typeValue,callback:function(i){t.typeValue=i},expression:"typeValue"}},t._l(t.invoiceData.supportedInvoiceTypes,(function(i){return e("van-radio",{key:i,attrs:{name:i,"label-position":"left"},on:{click:t.onHide},scopedSlots:t._u([{key:"icon",fn:function(i){return[e("img",{staticClass:"img-icon",attrs:{src:i.checked?t.activeIcon:t.inactiveIcon}})]}}],null,!0)},[e("div",{staticClass:"type-item"},[e("div",{staticClass:"lable"},[t._v(" "+t._s(t.invoiceType[i]||t.invoiceType[2]))]),e("div",{staticClass:"description"},[t._v(t._s(1===i||3===i?"纸质发票将在订单关闭7个工作日内开具并安排邮寄":"电子发票与纸质发票具有保修与财务报销效力"))])])])})),1)],1)])])],1)},S=[],j={props:["invoiceData","show"],data:function(){return{typeValue:this.invoiceData.it?this.invoiceData.it:2,activeIcon:"".concat(this.$cdnImageUrl,"/common/radio-selected.png"),inactiveIcon:"".concat(this.$cdnImageUrl,"/common/radio-unselect.png"),typeShow:!1,closeFlag:!1,invoiceType:{1:"增值税专用发票",3:"增值税纸质普通发票",2:"增值税电子普通发票",4:"增值税电子专用发票"}}},watch:{invoiceData:{handler:function(t,i){this.typeValue=t.it||t.invoiceType?t.it||t.invoiceType:2},immediate:!0,deep:!0},show:{handler:function(t,i){this.typeShow=t,t&&(this.closeFlag=!1)},immediate:!0,deep:!0}},mounted:function(){},methods:{onHide:function(){this.closeFlag||(this.closeFlag=!0,this.$emit("onHide",this.typeValue))}}},P=j,z=(e("1684"),Object(v["a"])(P,O,S,!1,null,"185e3770",null)),E=z.exports,F=e("85e4");function H(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);i&&(a=a.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,a)}return e}function B(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?H(Object(e),!0).forEach((function(i){W(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):H(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))}return t}function W(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}var U={components:{Header:c["a"],invoiceNormal:u,invoiceVat:I,invoiceType:E,orderInfo:N,invoiceVatElectric:T},data:function(){return{noticeFlag:!1,showTypeSelect:!1,typeSelected:"增值税电子普通发票",orderNo:"",hasWa:1,invoiceData:{it:2,nit:1,iti:"",tpn:"",bc:"",rga:"",rgp:"",bn:"",cbn:"",rcc:"",rcr:"",rca:"",rcm:"",em:""},pageInfo:{hasLocked:0,supportedInvoiceTypes:[2]},memberInvoiceInfo:[],address:"",street:"",invoiceTipsShow:!1,modifyFlag:0}},created:function(){this.orderNo=this.$route.query.orderNo,this.modifyFlag=Number(this.$route.query.modifyFlag?this.$route.query.modifyFlag:0),this.invoiceInfo()},activated:function(){var t=this.$store.state.orderInvoice.tempInvoice;t&&(this.invoiceData=B(B({},this.invoiceData),{},{bc:t.invoiceTitle,tpn:t.taxPayerNumber,rga:t.registerAddress,rgp:t.registerPhone,bn:t.bankName,cbn:t.bankCardNumber}),this.$store.commit("orderInvoice/setTempInvoice",null))},methods:{invoiceInfo:function(){this.orderNo?this.modifyFlag?this.getReplaceApply():this.getApplyInvoicePage():this.toInvoice()},getReplaceApply:function(){var t=this,i={orderProductSn:this.orderNo};Object(F["cb"])(i).then((function(i){i.success?(t.pageInfo=i.data,t.pageInfo.supportedInvoiceTypes&&0!==t.pageInfo.supportedInvoiceTypes.length||(t.pageInfo.supportedInvoiceTypes=[2]),t.hasWa=i.data.hasWaProduct,t.pageInfo.it=t.pageInfo.supportedInvoiceTypes.includes(t.invoiceData.it)?t.invoiceData.it:t.pageInfo.supportedInvoiceTypes[0],t.onTypeHide(t.pageInfo.supportedInvoiceTypes.includes(t.invoiceData.it)?t.invoiceData.it:t.pageInfo.supportedInvoiceTypes[0])):(t.$toast(i.message),setTimeout((function(){t.$store.dispatch("doHistoryBack")}),1500))}))},getApplyInvoicePage:function(){var t=this,i={orderProductSn:this.orderNo};Object(F["E"])(i).then((function(i){if(i.success){var e=i.data.memberActInvoice;t.pageInfo=i.data,t.pageInfo.supportedInvoiceTypes&&0!==t.pageInfo.supportedInvoiceTypes.length||(t.pageInfo.supportedInvoiceTypes=[2]),t.invoiceData=B(B({},t.invoiceData),{},{it:i.data.invoiceType,nit:i.data.invoiceIdentity,iti:1===i.data.invoiceType?e&&e.invoiceTitle?e.invoiceTitle:"":i.data.invoiceTitle,bc:1===i.data.invoiceType?e&&e.invoiceTitle?e.invoiceTitle:"":i.data.invoiceTitle,tpn:e&&e.taxPayerNumber?e.taxPayerNumber:"",rga:e&&e.registerAddress?e.registerAddress:"",rgp:e&&e.registerPhone?e.registerPhone:"",bn:e&&e.bankName?e.bankName:"",cbn:e&&e.bankCardNumber?e.bankCardNumber:"",rcc:i.data.consignee,rcr:i.data.region+","+i.data.street,rca:i.data.detailedAddress,rcm:i.data.consigneeMobile,em:i.data.email||""}),t.address=i.data.region,t.street=i.data.street,t.hasWa=i.data.hasWaProduct,t.onTypeHide(t.invoiceData.it)}else t.$toast(i.message),setTimeout((function(){t.$store.dispatch("doHistoryBack")}),1500)}))},onTypeHide:function(t){switch(this.showTypeSelect=!1,t){case 1:this.fnChangeType(1),this.typeSelected="增值税专用发票",this.invoiceData.iti=(this.pageInfo.memberActInvoice&&this.pageInfo.memberActInvoice.invoiceTitle?this.pageInfo.memberActInvoice.invoiceTitle:"")||this.invoiceData.iti,this.invoiceData.bc=(this.pageInfo.memberActInvoice&&this.pageInfo.memberActInvoice.invoiceTitle?this.pageInfo.memberActInvoice.invoiceTitle:"")||this.invoiceData.bc,this.orderNo&&this.memberInvoice();break;case 3:this.fnChangeType(3),this.typeSelected="增值税纸质普通发票",this.invoiceData.iti=this.pageInfo.invoiceTitle||this.pageInfo.iti,this.invoiceData.bc=this.pageInfo.invoiceTitle||this.pageInfo.iti;break;case 2:this.fnChangeType(2),this.typeSelected="增值税电子普通发票",this.invoiceData.iti=this.pageInfo.invoiceTitle||this.pageInfo.iti,this.invoiceData.bc=this.pageInfo.invoiceTitle||this.pageInfo.iti;break;case 4:this.fnChangeType(4),this.typeSelected="增值税电子专用发票",this.invoiceData.iti=(this.pageInfo.memberActInvoice&&this.pageInfo.memberActInvoice.invoiceTitle?this.pageInfo.memberActInvoice.invoiceTitle:"")||this.invoiceData.iti,this.invoiceData.bc=(this.pageInfo.memberActInvoice&&this.pageInfo.memberActInvoice.invoiceTitle?this.pageInfo.memberActInvoice.invoiceTitle:"")||this.invoiceData.bc,this.orderNo&&this.memberInvoice();break}},onHideTips:function(){this.invoiceTipsShow=!1},toInvoice:function(){var t=this;Object(F["Qb"])("tailOrder"===this.$route.query.from?{orderSn:this.$route.query.orderSn}:{}).then((function(i){i.success?(t.pageInfo=i.data,t.pageInfo.supportedInvoiceTypes&&0!==t.pageInfo.supportedInvoiceTypes.length||(t.pageInfo.supportedInvoiceTypes=[2]),t.pageInfo.hasLocked=0,t.invoiceData=B(B({},t.invoiceData),{},{it:i.data.it,nit:i.data.nit,iti:i.data.iti,bc:i.data.bc,tpn:i.data.tpn,rga:i.data.rga,rgp:i.data.rgp,bn:i.data.bn,cbn:i.data.cbn,rcc:i.data.rcc,rcr:i.data.rcr,rca:i.data.rca,rcm:i.data.rcm,em:i.data.email}),i.data.rcr&&(t.address=i.data.rcr.indexOf(",")>-1?i.data.rcr.split(",")[0]:i.data.rcr.split(" ")[0]+" "+i.data.rcr.split(" ")[1]+" "+i.data.rcr.split(" ")[2],t.street=i.data.rcr.indexOf(",")>-1?i.data.rcr.split(",")[1]:i.data.rcr.split(" ")[3]),i.data.bc||(t.defaultInvoiceAddress(),t.memberInvoice()),t.hasWa=i.data.hasWaProduct,t.onTypeHide(t.invoiceData.it)):t.$toast(i.message)}))},memberInvoice:function(){var t=this;Object(F["mb"])({d:1}).then((function(i){i.success?i.data.length>0&&i.data[0]&&(t.invoiceData=B(B({},t.invoiceData),{},{bc:i.data[0].invoiceTitle,tpn:1===t.invoiceData.it?i.data[0].taxPayerNumber||t.invoiceData.tpn:t.invoiceData.tpn||i.data[0].taxPayerNumber,rga:i.data[0].registerAddress,rgp:i.data[0].registerPhone,bn:i.data[0].bankName,cbn:i.data[0].bankCardNumber}),t.memberInvoiceInfo=i.data[0],console.log("invoiceData :",t.invoiceData)):t.$toast(i.message)}))},defaultInvoiceAddress:function(){var t=this;Object(F["w"])("tailOrder"===this.$route.query.from?{orderSn:this.$route.query.orderSn}:{}).then((function(i){var e,a,n,c,s,o,r,l,d;i.success?(t.invoiceData=B(B({},t.invoiceData),{},{rcc:(null===(e=t.invoiceData)||void 0===e?void 0:e.rcc)||(null===(a=i.data)||void 0===a?void 0:a.rcc)||"",rcr:(null===(n=t.invoiceData)||void 0===n?void 0:n.rcr)||(null===(c=i.data)||void 0===c?void 0:c.rcr)||"",rca:(null===(s=t.invoiceData)||void 0===s?void 0:s.rca)||(null===(o=i.data)||void 0===o?void 0:o.rca)||"",rcm:(null===(r=t.invoiceData)||void 0===r?void 0:r.rcm)||(null===(l=i.data)||void 0===l?void 0:l.rcm)||""}),null!==(d=i.data)&&void 0!==d&&d.rcr&&(t.address=i.data.rcr.indexOf(",")>-1?i.data.rcr.split(",")[0]:i.data.rcr.split(" ")[0]+" "+i.data.rcr.split(" ")[1]+" "+i.data.rcr.split(" ")[2],t.street=i.data.rcr.indexOf(",")>-1?i.data.rcr.split(",")[1]:i.data.rcr.split(" ")[3])):t.$toast(i.message)}))},fnChangeType:function(t){this.invoiceData.it=t},fnRadioChange:function(t){this.invoiceData.nit=t},fnInput:function(t){switch(t.type){case"iti":this.invoiceData.iti=t.value;break;case"tpn":this.invoiceData.tpn=t.value;break;case"bc":this.invoiceData.bc=t.value;break;case"rga":this.invoiceData.rga=t.value;break;case"rgp":this.invoiceData.rgp=t.value;break;case"bn":this.invoiceData.bn=t.value;break;case"cbn":this.invoiceData.cbn=t.value;break;case"rcc":this.invoiceData.rcc=t.value;break;case"rca":this.invoiceData.rca=t.value;break;case"rcm":this.invoiceData.rcm=t.value;break;case"em":this.invoiceData.em=t.value;break}},handleLocation:function(t){console.log(t),this.address=t.address,this.street=t.street,this.invoiceData=B(B({},this.invoiceData),{},{rcr:this.address+","+this.street})},fnConfirm:function(){if(this.orderNo)this.modifyFlag?this.replaceSubmit():this.submitInvoice();else{var t={};2===this.invoiceData.it||3===this.invoiceData.it?(t={it:this.invoiceData.it,nit:this.invoiceData.nit,iti:this.invoiceData.iti},2===this.invoiceData.it&&this.pageInfo.autoInvoiceFlag&&(t=B(B({},t),{},{email:this.invoiceData.em})),2===this.invoiceData.nit&&(t=B(B({},t),{},{tpn:this.invoiceData.tpn})),3===this.invoiceData.it&&(t=B(B({},t),{},{rcc:this.invoiceData.rcc,rca:this.invoiceData.rca,rcm:this.invoiceData.rcm,rcr:this.address+","+this.street}))):(t=B(B({},this.invoiceData),{},{iti:this.invoiceData.bc,rcr:this.address+","+this.street}),4===this.invoiceData.it&&(t.rcr="",t.rcc="",t.rca="",t.rcm=""));var i=this.checkFn(t);i&&this.submitMemInvoice(t)}},checkFn:function(t){var i="";return 1===t.it?/^.[^&<>]{0,}$/.test(t.bc)&&t.bc?t.bc.length<5?i="公司名称有误，请重新填写":/^[0-9A-Za-z]{18}$|^[0-9A-Za-z]{15}$|^[0-9A-Za-z]{20}$/.test(t.tpn)?/^.[^&<>]{4,}$/.test(t.rga)&&t.rga?t.rgp&&/^((0\d{2,3}-\d{7,8})|(1[3457689]\d{9}))$/.test(t.rgp)?t.bn?t.cbn?t.rcc?t.rca?t.rcm?/^1([3456789][0-9]|4[01356789]|66|9[89])\d{8}$/.test(t.rcm)||(i="发票邮寄收件人手机号格式不对"):i="发票邮寄收件人手机号为必填":i="发票邮寄详细地址为必填":i="收件人姓名为必填":i="开户账号为必填":i="开户银行为必填":i="注册电话格式不正确":i="注册地址至少5个字符，且不能包含特殊字符":i="纳税人识别号为15位或18位或20位的数字或字母":i="公司名称必填,且不能包含特殊字符":4===t.it?/^.[^&<>]{0,}$/.test(t.bc)&&t.bc?t.bc.length<5?i="公司名称有误，请重新填写":/^[0-9A-Za-z]{18}$|^[0-9A-Za-z]{15}$|^[0-9A-Za-z]{20}$/.test(t.tpn)?/^.[^&<>]{4,}$/.test(t.rga)&&t.rga?t.rgp&&/^((0\d{2,3}-\d{7,8})|(1[3457689]\d{9}))$/.test(t.rgp)?t.bn?t.cbn||(i="开户账号为必填"):i="开户银行为必填":i="注册电话格式不正确":i="注册地址至少5个字符，且不能包含特殊字符":i="纳税人识别号为15位或18位或20位的数字或字母":i="公司名称必填,且不能包含特殊字符":(2===t.it&&1===t.nit||3===t.it&&1===t.nit?/^.[^&<>]{0,}$/.test(t.iti)&&t.iti||(i="发票抬头必填,且不能包含特殊字符"):/^.[^&<>]{0,}$/.test(t.iti)&&t.iti?/^[0-9A-Za-z]{18}$|^[0-9A-Za-z]{15}$|^[0-9A-Za-z]{20}$/.test(t.tpn)||(i="纳税人识别号为15位或18位或20位的数字或字母"):i="发票抬头必填,且不能包含特殊字符",2===t.it&&this.pageInfo.autoInvoiceFlag&&(this.$util.isEmail(t.email)||(i="收票邮箱格式不正确"))),!i||(this.$toast(i),!1)},checkOrderFn:function(t){var i="";return 1===t.invoiceType?/^.[^&<>]{0,}$/.test(t.invoiceTitle)&&t.invoiceTitle?t.invoiceTitle.length<5?i="公司名称有误，请重新填写":/^[0-9A-Za-z]{18}$|^[0-9A-Za-z]{15}$|^[0-9A-Za-z]{20}$/.test(t.taxpayerNumber)?/^.[^&<>]{4,}$/.test(t.regiterAddress)&&t.regiterAddress?t.registerTel&&/^((0\d{2,3}-\d{7,8})|(1[3457689]\d{9}))$/.test(t.registerTel)?t.bankName?t.bankAccount?t.consignee?t.detailedAddress?t.consigneeMobile?/^1([3456789][0-9]|4[01356789]|66|9[89])\d{8}$/.test(t.consigneeMobile)||(i="发票邮寄收件人手机号格式不对"):i="发票邮寄收件人手机号为必填":i="发票邮寄详细地址为必填":i="收件人姓名为必填":i="开户账号为必填":i="开户银行为必填":i="注册电话格式不正确":i="注册地址至少5个字符，且不能包含特殊字符":i="纳税人识别号为15位或18位或20位的数字或字母":i="公司名称必填,且不能包含特殊字符":4===t.invoiceType?/^.[^&<>]{0,}$/.test(t.invoiceTitle)&&t.invoiceTitle?t.invoiceTitle.length<5?i="公司名称有误，请重新填写":/^[0-9A-Za-z]{18}$|^[0-9A-Za-z]{15}$|^[0-9A-Za-z]{20}$/.test(t.taxpayerNumber)?/^.[^&<>]{4,}$/.test(t.regiterAddress)&&t.regiterAddress?t.registerTel&&/^((0\d{2,3}-\d{7,8})|(1[3457689]\d{9}))$/.test(t.registerTel)?t.bankName?t.bankAccount||(i="开户账号为必填"):i="开户银行为必填":i="注册电话格式不正确":i="注册地址至少5个字符，且不能包含特殊字符":i="纳税人识别号为15位或18位或20位的数字或字母":i="公司名称必填,且不能包含特殊字符":(2===t.invoiceType&&1===t.invoiceIdentity||3===t.invoiceType&&1===t.invoiceIdentity?/^.[^&<>]{0,}$/.test(t.invoiceTitle)&&t.invoiceTitle||(i="发票抬头必填,且不能包含特殊字符"):/^.[^&<>]{0,}$/.test(t.invoiceTitle)&&t.invoiceTitle?/^[0-9A-Za-z]{18}$|^[0-9A-Za-z]{15}$|^[0-9A-Za-z]{20}$/.test(t.taxpayerNumber)||(i="纳税人识别号为15位或18位或20位的数字或字母"):i="发票抬头必填,且不能包含特殊字符",2===t.invoiceType&&this.pageInfo.autoInvoiceFlag&&(this.$util.isEmail(t.email)||(i="收票邮箱格式不正确"))),!i||(this.$toast(i),!1)},submitMemInvoice:function(t){var i=this;"tailOrder"===this.$route.query.from?Object(F["Nb"])(B(B({},t),{},{orderSn:this.$route.query.orderSn})).then((function(t){t.success?i.$router.go(-1):i.$toast(t.message)})):Object(F["Mb"])(t).then((function(t){t.success?i.$router.go(-1):i.$toast(t.message)}))},submitInvoice:function(){var t=this,i={orderProductSn:this.orderNo,invoiceType:this.invoiceData.it,invoiceIdentity:this.invoiceData.nit,invoiceTitle:1===this.invoiceData.it?this.invoiceData.bc:this.invoiceData.iti,taxpayerNumber:this.invoiceData.tpn,regiterAddress:this.invoiceData.rga,registerTel:this.invoiceData.rgp,bankName:this.invoiceData.bn,bankAccount:this.invoiceData.cbn,region:this.invoiceData.rcr?this.invoiceData.rcr.split(",")[0]:"",street:this.invoiceData.rcr?this.invoiceData.rcr.split(",")[1]:"",detailedAddress:this.invoiceData.rca,consignee:this.invoiceData.rcc,consigneeMobile:this.invoiceData.rcm},e={orderProductSn:this.orderNo,autoInvoiceFlag:this.pageInfo.autoInvoiceFlag};2===this.invoiceData.it||3===this.invoiceData.it?(e=B(B({},e),{},{invoiceType:this.invoiceData.it,invoiceIdentity:this.invoiceData.nit,invoiceTitle:1===this.invoiceData.it?this.invoiceData.bc:this.invoiceData.iti}),2===this.invoiceData.it&&this.pageInfo.autoInvoiceFlag&&(e=B(B({},e),{},{email:this.invoiceData.em})),2===this.invoiceData.nit&&(e=B(B({},e),{},{taxpayerNumber:this.invoiceData.tpn})),3===this.invoiceData.it&&(e=B(B({},e),{},{consignee:this.invoiceData.rcc,detailedAddress:this.invoiceData.rca,region:this.address,street:this.street,consigneeMobile:this.invoiceData.rcm}))):e=B(B({},i),{},{invoiceTitle:this.invoiceData.bc,region:this.address,street:this.street});var a=this.checkOrderFn(e);a&&Object(F["Lb"])(e).then((function(i){i.success?(t.$toast.success("您的发票申请已提交成功！"),t.$router.go(-1)):t.$toast(i.message)}))},replaceSubmit:function(){var t=this,i={orderProductSn:this.orderNo,invoiceType:this.invoiceData.it,invoiceIdentity:this.invoiceData.nit,invoiceTitle:1===this.invoiceData.it?this.invoiceData.bc:this.invoiceData.iti,taxpayerNumber:this.invoiceData.tpn,regiterAddress:this.invoiceData.rga,registerTel:this.invoiceData.rgp,bankName:this.invoiceData.bn,bankAccount:this.invoiceData.cbn,region:this.invoiceData.rcr?this.invoiceData.rcr.split(",")[0]:"",street:this.invoiceData.rcr?this.invoiceData.rcr.split(",")[1]:"",detailedAddress:this.invoiceData.rca,consignee:this.invoiceData.rcc,consigneeMobile:this.invoiceData.rcm},e={orderProductSn:this.orderNo,autoInvoiceFlag:this.pageInfo.autoInvoiceFlag};2===this.invoiceData.it||3===this.invoiceData.it?(e=B(B({},e),{},{invoiceType:this.invoiceData.it,invoiceIdentity:this.invoiceData.nit,invoiceTitle:1===this.invoiceData.it?this.invoiceData.bc:this.invoiceData.iti}),2===this.invoiceData.it&&this.pageInfo.autoInvoiceFlag&&(e=B(B({},e),{},{email:this.invoiceData.em})),2===this.invoiceData.nit&&(e=B(B({},e),{},{taxpayerNumber:this.invoiceData.tpn})),3===this.invoiceData.it&&(e=B(B({},e),{},{consignee:this.invoiceData.rcc,detailedAddress:this.invoiceData.rca,region:this.address,street:this.street,consigneeMobile:this.invoiceData.rcm}))):e=B(B({},i),{},{invoiceTitle:this.invoiceData.bc,region:1===this.invoiceData.it?this.address:"",street:1===this.invoiceData.it?this.street:""});var a=this.checkOrderFn(e);if(a){var n=Number(this.$route.query.invoiceType);[1,2,3,4].includes(n)?this.$dialog.confirm({confirmButtonText:"确定",cancelButtonText:"取消",messageAlign:"center",cancelButtonColor:"#999999",message:"您好，请您核对好需要修改的发票信息，此功能仅可修改一次"}).then((function(){Object(F["Cb"])(e).then((function(i){i.success?[1,3].includes(n)?t.$dialog.confirm({messageAlign:"left",cancelButtonColor:"#999999",confirmButtonText:"立即填写",cancelButtonText:"以后再说",title:"您的发票修改申请已提交成功！",message:"鉴于原发票类型为".concat(1===n?"增值税专用发票":"增值税纸质普通发票","，请于5日内将原票寄回并上传退回快递单号,逾期本次申请自动作废。 是否立即填写发票邮寄快递单号？")}).then((function(){t.$router.replace({path:"/invoiceExpress",query:{orderNo:t.orderNo,invoiceType:t.invoiceData.it}})}))["catch"]((function(){t.$router.go(-1)})):(t.$toast.success("您的发票修改申请已提交成功！"),t.$router.go(-1)):"INV0003"===i.errorCode?t.$dialog.alert({message:"本次修改失败，修改发票仅可一次",messageAlign:"center"}):t.$toast.fail(i.message)}))}))["catch"]((function(){})):Object(F["Cb"])(e).then((function(i){i.success?(t.$toast.success("您的发票修改申请已提交成功！"),t.$router.go(-1)):t.$toast.fail(i.message)}))}},cancelInvoice:function(){this.orderNo?history.go(-1):Object(F["f"])("tailOrder"===this.$route.query.from?{orderSn:this.$route.query.orderSn}:{}).then((function(t){t.success&&history.go(-1)}))},showTypeWindow:function(){1!==this.pageInfo.hasLocked&&(this.showTypeSelect=!0)}},beforeDestroy:function(){this.$store.commit("orderInvoice/setTempInvoice",null)}},V=U,Z=(e("3e5a"),e("c983"),Object(v["a"])(V,a,n,!1,null,"4a634138",null));i["default"]=Z.exports},"759c":function(t,i,e){},"8c10":function(t,i,e){"use strict";e("8d89")},"8d89":function(t,i,e){},9117:function(t,i,e){},"92db":function(t,i,e){},ba9f:function(t,i,e){"use strict";e("92db")},c983:function(t,i,e){"use strict";e("edf9")},edf9:function(t,i,e){},f4e5:function(t,i,e){},f641:function(t,i,e){"use strict";e("759c")}}]);
//# sourceMappingURL=chunk-09840b7f.e4b2e086.js.map