(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2fde9938","chunk-079cb250"],{"1a0f":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("van-pull-refresh",{on:{refresh:t.onRefresh},scopedSlots:t._u([{key:"pulling",fn:function(){return[a("refreshLoading",{attrs:{text:"下拉刷新"}})]},proxy:!0},{key:"loosing",fn:function(){return[a("refreshLoading",{attrs:{text:"下拉刷新"}})]},proxy:!0},{key:"loading",fn:function(){return[a("refreshLoading",{attrs:{text:"加载中"}})]},proxy:!0},{key:"success",fn:function(){return[a("refreshLoading",{attrs:{text:"加载完成"}})]},proxy:!0}]),model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[a("van-list",{attrs:{finished:t.finished,finishedText:t.list.length>0?"没有更多啦~":"","van-clearfix":"","immediate-check":!1},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[a("data-list",{attrs:{parentData:t.list,isNoData:!t.isLoading&&!t.loading}})],1)],1)],1)},s=[],i=(a("ab71"),a("58e6")),r=(a("2994"),a("2bdd")),o=(a("e7e5"),a("d399")),l=a("d7a6"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-row",{staticClass:"reserve-block"},[t._l(t.parentData,(function(e,s){return n("van-col",{key:s,staticClass:"line",on:{click:function(a){return t.toDetail(e.productId)}}},[n("div",{staticClass:"detail"},[e.imageUrl?n("img",{staticClass:"thumbnail",attrs:{src:t._f("imageToHttps")(e.imageUrl),alt:"商品封面图"}}):n("img",{staticClass:"thumbnail",attrs:{src:a("4aea"),alt:"商品封面图"}}),n("div",{staticClass:"introduce"},[n("div",{staticClass:"title"},[t._v(" "+t._s(e.productName)+" ")]),n("div",{staticClass:"price"},[t._v(" 预约价： "),n("span",[t._v("￥")]),n("font",[t._v(t._s(t._f("fmtMoneyFilter")(e.price)))])],1),n("div",[t._v(" 距开抢："),n("font",[t._v(" "+t._s(e.start?0:e.days)+" ")]),t._v("天"),n("font",[t._v(" "+t._s(e.start?0:e.hours)+" ")]),t._v("小时"),n("font",[t._v(" "+t._s(e.start?0:e.minutes)+" ")]),t._v("分"),n("font",[t._v(" "+t._s(e.start?0:e.seconds)+" ")]),t._v("秒 ")],1)])]),n("div",{staticClass:"option"},[e.start?n("div",{staticClass:"panic-buying-btn color-red"},[t._v("立即抢购")]):n("div",{staticClass:"panic-buying-btn"},[t._v("待抢购")])])])})),n("div",{directives:[{name:"show",rawName:"v-show",value:0===t.parentData.length&&t.isNoData,expression:"parentData.length === 0 && isNoData"}],staticClass:"no-data"},[n("img",{attrs:{src:t._f("imageToHttps")(t.$cdnImageUrl+"/personalCenter/new_collect.png"),alt:""}}),n("div",[t._v(" 暂无预约 ")])])],2)},u=[],d={name:"myReserveList",props:{parentData:{type:null,default:function(){return{}}},isNoData:{type:null,default:function(){return{}}}},data:function(){return{}},mounted:function(){},methods:{toDetail:function(t){var e=this;e.$router.push({path:"/goodsDetail?productId=".concat(t)})}}},f=d,p=(a("ea97"),a("2877")),g=Object(p["a"])(f,c,u,!1,null,"2089a814",null),v=g.exports,h=a("d3c8"),m=a("2b0e");m["a"].use({Toast:o["a"],List:r["a"],PullRefresh:i["a"]});var _={name:"myReserveIndex",components:{refreshLoading:l["default"],dataList:v},data:function(){return{error:!1,loading:!1,finished:!1,pageIndex:1,pageSize:5,isLoading:!1,list:[],timer:null}},created:function(){},mounted:function(){var t=this;t.$util.isHaierApp()?t.$store.dispatch("handleUpAuth").then((function(e){console.log(e),e?(t.isLoading=!0,t.list=[],t.getList()):o["a"].fail("用户信息异常")})):(t.isLoading=!0,t.list=[],t.getList())},beforeDestroy:function(){var t=this;clearTimeout(t.timer)},destroyed:function(){var t=this;clearTimeout(t.timer)},methods:{getTimer:function(){var t=this,e=t.list;clearTimeout(t.timer);var a=(new Date).getTime();e.map((function(t,e){var n=parseFloat(t.purchaseStartTime)-parseFloat(a),s=parseInt(n/864e5),i=parseInt(n%864e5/36e5),r=parseInt(n%36e5/6e4),o=parseInt(n%6e4/1e3);t.days=s,t.hours=i,t.minutes=r,t.seconds=o,t.start=n<=0})),t.timer=setTimeout((function(){t.getTimer()}),1e3)},onRefresh:function(){var t=this;t.pageIndex=1,t.list=[],t.onLoad()},onLoad:function(){var t=this;t.isLoading=!1,t.getList()},getList:function(){var t=this,e={pageIndex:t.pageIndex};h["a"].getMyReserve(e).then((function(e){var a=e.data;o["a"].clear(),a.success?(t.isLoading&&(t.list=[],t.isLoading=!1),a.data.map((function(t,e){t.days=0,t.hours=0,t.minutes=0,t.seconds=0,t.start=!1})),t.list=1===t.pageIndex?[]:t.list,t.list=t.list.concat(a.data),t.getTimer(),t.finished=!1,t.loading=!1,(0===a.data.length||a.data.length<t.pageSize)&&(t.finished=!0)):o["a"].fail(a.message)}))}}},x=_,L=(a("57aa"),Object(p["a"])(x,n,s,!1,null,"3548f8f0",null));e["default"]=L.exports},"4aea":function(t,e,a){t.exports=a.p+"img/logo.6ca4023e.png"},"57aa":function(t,e,a){"use strict";a("876a")},"67c7":function(t,e,a){},8261:function(t,e,a){},"876a":function(t,e,a){},d7a6:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"refresh-load"},[a("div",{staticClass:"spinner"},t._l(t.rectlist,(function(e){return a("div",{key:e,class:"rect"+e,style:{"background-color":t.color}})})),0),t.text?a("div",{staticClass:"spinner-text",style:{color:t.textColor}},[t._v(t._s(t.text))]):t._e()])},s=[],i={name:"refreshLoading",props:["text","color","textColor"],data:function(){return{rectlist:[1,2,3,4,5]}}},r=i,o=(a("ef69"),a("2877")),l=Object(o["a"])(r,n,s,!1,null,"9448457e",null);e["default"]=l.exports},ea97:function(t,e,a){"use strict";a("67c7")},ef69:function(t,e,a){"use strict";a("8261")}}]);
//# sourceMappingURL=chunk-2fde9938.dc3a28fb.js.map