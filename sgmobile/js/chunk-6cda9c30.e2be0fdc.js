(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6cda9c30"],{"1bf8":function(e,t,a){"use strict";a("a28c")},"26cd":function(e,t,a){"use strict";a("fef6")},"5f99":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"recharge-methods"},e._l(e.payWay,(function(t){return a("div",{key:t.key,staticClass:"recharge-pay-item",class:{selected:t.key===e.curSelect},on:{click:function(a){return e.doSelect(t.key)}}},[a("div",{staticClass:"pay-logo",class:"logo-"+t.key},[a("i"),e._v(e._s(t.name))]),e._m(0,!0)])})),0),a("div",{staticClass:"recharge-btn"},[a("a",{class:{disable:e.paying},attrs:{href:"javascript:;"},on:{click:e.goPay}},[e.paying?a("span",[e._v("支付中...")]):a("span",[e.repay?a("span",[e._v("重新支付￥"+e._s(e._f("moneyFormate")(e.money)))]):a("span",[e._v("立即支付￥"+e._s(e._f("moneyFormate")(e.money)))])])]),e.hasCancel?a("a",{staticClass:"cancel-btn",attrs:{href:"javascript:;"},on:{click:e.deleteRecharge}},[e._v("取消充值订单")]):e._e()])])},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pay-selected"},[a("i")])}],i=a("fa7d"),o=a("bbc2"),s={name:"paymethod",props:{mobile:{default:""},orderSn:{default:""},money:{default:0},hasCancel:{default:!1},repay:{default:!1}},data:function(){return{curSelect:"alipay",paying:!1,payWay:[{key:"alipay",name:"支付宝支付"},{key:"weixin",name:"微信支付"}]}},filters:{moneyFormate:function(e){return i["a"].formatNumber(e)}},methods:{doSelect:function(e){this.curSelect=e},checkOrderInfo:function(){return this.$http.post(o["a"].RECHARGE_PHONE_SAVEORDER,{lifePayType:"mobile",payAmt:this.money,orderAmt:this.money,diamondCount:0,phoneConfigId:"",rechargeValue:this.money,billKey:this.mobile,version:1})},doPay:function(e,t){var a=this;"alipay"===this.curSelect?i["a"].openNewWindow("".concat(e,"?orderSn=").concat(t)):"weixin"===this.curSelect&&this.$http.get("".concat(e,"?orderSn=").concat(t)).then((function(e){var t=e.data;t.success?"SUCCESS"===t.data.returnCode&&"SUCCESS"===t.data.resultCode?i["a"].openNewWindow(t.data.mwebUrl,!0):a.$toast(t.data.returnMsg):a.$toast(t.message),a.paying=!1}))},goPay:function(){var e=this;if(!this.paying){this.paying=!0;var t="";"alipay"===this.curSelect?t=o["a"].PHONE_RECHARGE_ALIPAY:"weixin"===this.curSelect&&(t=o["a"].PHONE_RECHARGE_WEIXIN),this.hasCancel||this.repay?this.doPay(t,this.orderSn):this.checkOrderInfo().then((function(a){var n=a.data;if(n.success){var r=n.data.orderSn;e.doPay(t,r)}else{if("1100"===n.errorCode){e.$toast("请重新登录");var i=setTimeout((function(){clearTimeout(i),e.$store.dispatch("doLogin")}),2e3);return}if("您有未付款的充值订单，请优先处理!"===n.message)return e.$dialog.confirm({title:"充值提示",message:"您有未付款的充值订单，请优先处理!",confirmButtonText:"去处理"}).then((function(){e.$router.push("/rechargelist")}))["catch"]((function(){})),void(e.paying=!1);e.$toast(n.message),e.paying=!1}}))["catch"]((function(){e.paying=!1}))}},deleteRecharge:function(){var e=this;this.$dialog.confirm({title:"订单状态变更提醒",message:"确定取消当前充值订单吗？",confirmButtonText:"确定"}).then((function(){e.$http.get("".concat(o["a"].DELETE_RECHARGE,"?orderSn=").concat(e.orderSn)).then((function(t){var a=t.data;a.success?e.$router.replace("/rechargelist"):e.$toast(a.message)}))}))["catch"]((function(){}))}}},c=s,l=(a("1bf8"),a("2877")),u=Object(l["a"])(c,n,r,!1,null,"bbb3a36e",null);t["a"]=u.exports},a28c:function(e,t,a){},e72c:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"recharge-result-page"},[a("div",{staticClass:"recharge-result result-waiting"},[a("div",{staticClass:"result-icon"}),a("p",[e._v("待支付")]),e.leftTime?a("p",[e._v("剩余支付时间："+e._s(e.leftTime))]):e._e()]),a("div",{staticClass:"result-list"},[a("div",[a("span",[e._v("充值号码")]),a("strong",[e._v(e._s(e._f("mobileFormate")(e.mobile)))])]),a("div",[a("span",[e._v("面值")]),a("strong",[e._v("￥"+e._s(e.money))])]),a("div",[a("span",[e._v("支付金额")]),a("strong",[e._v("￥"+e._s(e.payAmt))])]),a("div",[a("span",[e._v("创建时间")]),a("strong",[e._v(e._s(e.createTime))])]),a("div",[a("span",[e._v("订单编号")]),a("strong",[e._v(e._s(e.orderSn))])])]),a("payMethod",{attrs:{mobile:e.mobile,money:e.payAmt,hasCancel:!0,orderSn:e.orderSn}}),a("div",{staticClass:"recharge-tips"},[e._v("温馨提示：本业务不提供发票")])],1)},r=[],i=a("fa7d"),o=a("bbc2"),s=a("5f99"),c={name:"rechargeresult",components:{payMethod:s["a"]},filters:{mobileFormate:function(e){if(!e)return"";var t=e.split(""),a="";return t.forEach((function(e,t){3!==t&&7!==t||(a+=" "),a+=e})),a}},data:function(){return{leftTime:0,mobile:"",money:"",payAmt:"",orderSn:"",createTime:""}},mounted:function(){this.orderSn=this.$route.query.orderSn,this.fetchData()},methods:{fetchData:function(){var e=this,t=o["a"].GET_RECHARGE_DETAIL;this.$http.get("".concat(t,"?orderSn=").concat(this.orderSn,"&type=2")).then((function(t){var a=t.data;if(a.success)if(e.mobile=a.data.billKey,e.money=a.data.rechargeValue,e.payAmt=a.data.payAmt,e.createTime=a.data.orderTime,e.orderSn=a.data.orderSn,"unpaid"===a.data.orderStatus&&-1===a.data.countDown){e.$toast("订单已过期");var n=setTimeout((function(){clearTimeout(n),e.$router.replace("/rechargelist")}),3e3)}else e.intervalLeft(a.data.countDown);else e.$toast(a.message)}))},intervalLeft:function(e){var t=this,a=function(){if(e<0)return e=0,clearInterval(n),void t.$router.replace("/rechargelist");var a=Math.floor(e/3600),r=Math.floor(e%3600/60),o=Math.floor(e%3600%60);e--,t.leftTime=i["a"].numberToDouble(a)+":"+i["a"].numberToDouble(r)+":"+i["a"].numberToDouble(o)},n=setInterval(a,1e3);a()}}},l=c,u=(a("26cd"),a("2877")),d=Object(u["a"])(l,n,r,!1,null,"89fcfb32",null);t["default"]=d.exports},fef6:function(e,t,a){}}]);
//# sourceMappingURL=chunk-6cda9c30.e2be0fdc.js.map