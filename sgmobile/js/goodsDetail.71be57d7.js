(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["goodsDetail","chunk-2b4715e4"],{"290c":function(t,e,o){},"2bab":function(t,e,o){},"347c":function(t,e,o){},"40ca":function(t,e,o){"use strict";e["a"]={HZYTarget:"7a8a25a546646355c07a1b9c5bfbd9fb",HZYTarget_test:"7a8a25a546646355c07a1b9c5bfbd9fb",JiFenTarget:"4542349d17217cac9743761e45500184",JiFenTarget_test:"4542349d17217cacc8940de9925b82d15affba05d6537bab",LiveTarget:"abb43fe5ecadc8ae855ea95d171a6918",LiveTarget_test:"abb43fe5ecadc8ae855ea95d171a6918",ssUrlTarget:"0d3e477c75f5da4c7a8e2c00d794cd75",ssUrlTarget_test:"0d3e477c75f5da4cac599543e22b78aa16f46123fc726a2d",ccUrlTarget:"0d3e477c75f5da4c7a8e2c00d794cd75",ccUrlTarget_test:"0d3e477c75f5da4cac599543e22b78aa16f46123fc726a2d"}},"4b7d":function(t,e,o){"use strict";o("7fdc")},"6d76":function(t,e,o){"use strict";o("7539")},"6ff3":function(t,e,o){"use strict";var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return"small"==t.size?o("div",{staticClass:"tag"},[o("img",{attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/search/living.gif",alt:""}}),t._v(" 直播中 ")]):o("div",{staticClass:"tag-big"},[o("img",{attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/search/live_big.gif",alt:""}})])},s=[],n={name:"LiveTag",props:["size"]},r=n,a=(o("6d76"),o("2877")),c=Object(a["a"])(r,i,s,!1,null,"3d20227a",null);e["a"]=c.exports},7539:function(t,e,o){},"7fdc":function(t,e,o){},"80cc":function(t,e,o){"use strict";o("347c")},"90a0":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAA2CAYAAACBWxqaAAABqElEQVRoQ+2YPUoEQRBGXyEigofxAApeQSMxNDJTMPAOaqSBV1AwlDUw8gim3sITlKzsyoCzs93zVY8z0JtuV897X/XPMMbEfzZxfqrAf3ewdqB2QEygLiExQLm8dkCOUJygdkAMUC6vHZAjFCeoHRADzCp39w3gGPgys5d58WQ64O6bwBNwuLA+MLP3SQi0wM8dpiGwAv7azK5Gv4TWwY9aIAV+tAKp8KMUyIEfnUAu/B8Bd98GToFPM3vLumXEwX3g2wRugUvAgXMzuxe5ksr7wncJzP8bREKBbxPYAV6BvUV0RSVU+NZN7O6DSETArzyFSktEwXceo6UkFvCPwFFjh/++2yTt+sagzrfRaIlo+KSLLEqiBHySwM95Km7sUvDJAh0SF2Z217VuS8JnCfSRKA2fLZAjMQR8L4EUiaHgewt0SQAPQNg5v+5ekL5KrDidPoDdiEtqHbzUgeXkLRLN5/a+YVPgQwQay2kG7A+V/PI50hJqpuTuW8AZcAI8m9lNaorKuDABBUKprQJKehG1tQMRKSpz1A4o6UXU1g5EpKjMMfkOfAM4qOQ3E4g6NwAAAABJRU5ErkJggg=="},a2c8:function(t,e,o){"use strict";o("290c")},a73f:function(t,e,o){"use strict";var i=function(t,e){var o=e._c;return e.props.nums>0?o("div",{staticClass:"m-skeleton",style:{"z-index":e.props.zIndex||0}},[o("div",{style:{background:e.props.bgColor,height:e.props.fheight}}),e._l(e.props.nums-1,(function(t){return o("div",{key:t,style:{background:e.props.bgColor,height:e.props.iheight}})}))],2):e._e()},s=[],n=(o("80cc"),o("2877")),r={},a=Object(n["a"])(r,i,s,!0,null,null,null);e["a"]=a.exports},b402:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAACDklEQVRoQ+2YPUoEMRSAv1erWHkWQURv4A1s/MFKRCzFRrbX3r9CsBfRC4gg3sET2AgeIBLJwLBMJsnkvV0XdtpJJt+Xl2TeizDjj8w4P3OBaUdwHoF/GwHn3Ag4Am6AYxFxk4J1zi0AD8AmcCgi97Gxo0vIOfcDLIaOXmJ/EhIB/jnA++HfRGR9iMBliEDT11yiA95H3U+cH7vz6YuAf3cF7LZ6mklE4E9E5KJv6faeQs65iUgMhfdiyWPUWqIGPkvAN7KSqIXPFrCQ0IAvEtCU0IIvFtCQ0IQfJFAjoQ0/WGCIhAV8lUCJhBV8tUCOhCW8ikBC4hh4aiVmPrdJpgclWW/yT5z7scjP7gtYCd9Qh1eLQCMZkfgLkvbMN2OqRaAlsQR8tmbev3oH1izqCVWBsGFfgI2OpXcL7GlLqAl0wPtl8wGstmTUJVQEIvAngK/qroEdK4lqgRh8U0mFjW0mUSWQgh87nUwkBgvkwickqmvsQQKl8JYSxQJD4a0kigS0EjPNGjtbQAs+kXYU74ksAW14TYmkgBW8lkTqZs7fErcvWk2yypo90Xc3OhH42kj0CTwCW5bFyHjGGonESETOYoVVn8A3sGxZjHRBdUi8ikhXev7XvU9gGzgA7vru53NLzpJ2QeI81NKnIvJaHIGSAafZNnmMThMuZ+y5QM4sWbaZR8BydnO+PfMR+AU+l3xAJ1Tm/QAAAABJRU5ErkJggg=="},c63d:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.isShow?o("div",{staticClass:"go-top",class:t.classList},[o("div",{staticClass:"top",on:{click:t.toGotop}},[o("img",{attrs:{src:t.$cdnImageUrl+"/common/common-to-top-icon.png"}}),o("span",[t._v("顶部")])]),t.isHaierApp&&t.feedShow?o("div",{staticClass:"divider"}):t._e(),t.isHaierApp&&t.feedShow?o("div",{staticClass:"bottom",on:{click:function(e){return t.toFeedBack()}}},[o("img",{attrs:{src:t.$cdnImageUrl+"/common/common-edit-icon.png"}}),o("span",[t._v("反馈")])]):t._e()]):t._e()},s=[],n={props:{isShow:{type:Boolean,default:function(){return!1}},classList:{type:Object,default:function(){return{}}},feedShow:{type:Boolean,default:function(){return!0}},code:{type:Number,default:function(){return null}}},data:function(){return{isHaierApp:!1,timer:null}},created:function(){this.isHaierApp=this.$util.isUplus()},watch:{isShow:{handler:function(t){var e=this;console.log(t),console.log("this.timer:",this.timer),t?this.timer?(clearTimeout(this.timer),this.timer=null):this.timer=setTimeout((function(){e.hiddenFeedBack()}),4e3):(clearTimeout(this.timer),this.timer=null)}}},methods:{hiddenFeedBack:function(){console.log("hiddenFeedBack"),this.$emit("hiddenFeedBack")},toGotop:function(){this.$emit("toTop")},toFeedBack:function(){if(this.$store.getters.getLoginStatus){var t="https://uplus.haier.com/uplusapp/problemFeedBack/feedback.html";this.code&&(t="https://uplus.haier.com/uplusapp/problemFeedBack/feedback.html?code="+this.code),this.$util.openNewWindow(t,!0,!1,!1)}else this.$store.dispatch("doLogin").then((function(t){400===t&&console.log("请求异常")}))}}},r=n,a=(o("4b7d"),o("2877")),c=Object(a["a"])(r,i,s,!1,null,"7733b653",null);e["default"]=c.exports},e973:function(t,e,o){"use strict";o("2bab")},efb8:function(t,e,o){"use strict";e["a"]={methods:{getREM:function(){var t=parseInt(window.getComputedStyle(document.documentElement,null).getPropertyValue("font-size"));return t}}}},fb68:function(t,e,o){},fbe1:function(t,e,o){"use strict";o("fb68")},fe8c:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"detail-page",attrs:{id:"detailPage"}},[t.isSkeletonLoading?o("div",{staticClass:"detail-page"},[o("div",[o("div",{staticClass:"goods-detail-container"},[o("div",{staticClass:"header"},[o("div",{directives:[{name:"show",rawName:"v-show",value:!t.navShowFlag&&!t.commentHeader,expression:"!navShowFlag && !commentHeader"}],staticClass:"scroll-0"},[t.$route.query.browerFirstIn?o("div"):o("div",{staticClass:"left",on:{click:t.fnBack}}),o("div",{staticClass:"right share-icon",class:{show:t.showShareFlag},on:{click:t.openShareModal}},[o("img",{attrs:{alt:"",src:t.$globalIcon.whiteShareIcon}})])]),o("div",{directives:[{name:"show",rawName:"v-show",value:t.navShowFlag&&!t.commentHeader,expression:"navShowFlag && !commentHeader"}],staticClass:"scroll"},[t.$route.query.browerFirstIn?t._e():o("div",{staticClass:"left",on:{click:t.fnBack}}),o("div",{staticClass:"tab"},[o("div",{staticClass:"tab-item",class:{active:"goodsContainer"===t.activeAnchor},on:{touchstart:function(e){return t.fnScrollTo("goodsContainer",e)}}},[o("span",[t._v("商品")])]),o("div",{staticClass:"tab-item",class:{active:"commentContainer"===t.activeAnchor},on:{touchstart:function(e){return t.fnScrollTo("commentContainer",e)}}},[o("span",[t._v("评价")])]),o("div",{staticClass:"tab-item",class:{active:"detailContainer"===t.activeAnchor},on:{touchstart:function(e){return t.fnScrollTo("detailContainer",e)}}},[o("span",[t._v("详情")])])]),o("div",{staticClass:"right",class:{show:t.showShareFlag},on:{click:function(e){return e.stopPropagation(),t.openShareModal.apply(null,arguments)}}},[o("img",{staticStyle:{width:"0.36rem",height:"0.36rem"},attrs:{alt:"",src:t.$globalIcon.blackShareIcon}})])]),o("div",{directives:[{name:"show",rawName:"v-show",value:t.commentHeader,expression:"commentHeader"}],staticClass:"scroll"},[o("div",{staticClass:"left",on:{click:t.commentBack}}),o("div",{staticClass:"comment-header-title"},[t._v("商品评价")]),o("div",{staticClass:"right",class:{show:t.showShareFlag},on:{click:function(e){return e.stopPropagation(),t.openShareModal.apply(null,arguments)}}},[o("img",{staticStyle:{width:"0.36rem",height:"0.36rem"},attrs:{alt:"",src:t.$globalIcon.blackShareIcon}})])])]),t.hotLiveInfo.length&&1==t.hotLiveInfo[0].liveState?o("liveTag",{staticClass:"detail-livetag",nativeOn:{click:function(e){return t.doOpenLive(t.hotLiveInfo[0])}}}):t._e(),o("div",{ref:"scrollBox",staticClass:"inner-view",on:{scroll:t.handleScroll}},["2"===t.show_live?o("floatButton",{on:{click:t.gotoLive}}):t._e(),o("div",{ref:"goodsContainer",staticClass:"goods-container",attrs:{id:"goods-container"}},[t.showSwiper?o("div",{staticClass:"banner-swiper"},[o("swiper",{ref:"swiper",attrs:{images:t.swiperImgs,products:t.products},on:{swiperChange:t.swiperChange,sceenChange:t.sceenChange}})],1):t._e(),o("lazy-goods-info",{ref:"goodsInfo",attrs:{activityInfo:t.activityInfo,attrValueNames:t.attrValueNames,baseInfo:t.baseInfo,rightsList:t.rightsList,couponList:t.couponList,descriptionList:t.descriptionList,finished:t.finished,hasProgramFlag:t.hasProgramFlag,ioucInfo:t.ioucInfo,location:t.location,oldForNewFlag:t.oldForNewFlag,priceInfo:t.priceInfo,productId:t.productId,productNumber:t.productNumber,products:t.products,sgAttribute:t.sgAttribute,sgStockInfo:t.sgStockInfo,sgStoreAttribute:t.originAttrs,isCanSelectTitle:t.isCanSelectTitle,sgStoreAttributeItem:t.sgStoreAttributeItem,storeInfo:t.storeInfo,voucherList:t.voucherList,checkCouponIsAllGet:t.checkCouponIsAllGet,getGoodsUseCouponInfo:t.getGoodsUseCouponInfo,btnType:t.btnType,hasSubProduct:t.hasSubProduct,checkedAttr:t.checkedAttr,isExclusive:t.isExclusive,attrLength:t.attrLen,parentBookable:t.parentBookable,spuInfo:t.spuInfo,swiperImgs:t.swiperImgs,notSaleStatus:t.notSaleStatus,visitStore:t.visitStore,noticeContent:t.noticeContent,isCollected:t.isCollected},on:{fnCollect:t.fnCollect,fetchIoucCost:t.fetchIoucCost,fnAddCart:t.fnAddCart,fnChangeProductNumber:t.fnChangeProductNumber,fnGoBuy:t.fnGoBuy,fnSelectAttribute:t.fnSelectAttribute,getDes:t.getDes,goBaitiao:t.goBaitiao,handleLocation:t.handleLocation,receiveCoupon:t.receiveCoupon,attrNameChange:t.attrNameChange,countdownFinish:t.countdownFinish,resetBtnType:t.resetBtnType,fnArrivalNotice:t.fnArrivalNotice,toggleShowInfo:t.toggleShowInfo,bookableBuy:function(e){return t.fnGoBuy("1","5")},attrSelectChanged:t.attrSelectChanged,titleSelectOption:t.titleSelectOption,fnReserve:t.fnReserve,fnSelectSpu:t.fnSelectSpu}})],1),t.showComment?o("div",{ref:"commentContainer",staticClass:"comment-container",attrs:{id:"comment-container"}},[o("lazy-comment-info",{attrs:{commentList:t.commentList,commentTotal:t.commentTotal,positiveRate:t.positiveRate,productId:t.productId,show:t.commentHeader,storeId:t.staticStoreId},on:{toggleCommentHeader:t.toggleCommentHeader,fnShowCommentContent:t.fnShowCommentContent}}),t.relationList.length?o("goods-recommend",{attrs:{relationList:t.relationList}}):t._e()],1):t._e(),o("div",[o("answer-area",{attrs:{info:t.answerAreaInfo}})],1),o("div",[o("recommendation",{attrs:{productId:Number(t.productId)}})],1),t.storeInfo&&t.storeInfo.storePublicDomainSwitch?t._e():o("div",[t.showComment&&("WA"===t.sgStockInfo.stockType||"ZJ"===t.sgStockInfo.stockType||t.storeInfo)?o("lazy-shop-info",{attrs:{stockInfo:t.sgStockInfo,storeInfo:t.storeInfo}}):t._e()],1),t.showComment?o("div",{ref:"detailContainer",staticClass:"detail-container",attrs:{id:"detail-container"}},[o("lazy-goods-detail",{attrs:{mp4FileId2:t.mp4FileId2,products:t.products,productAttrs:t.productAttrs,productDetails:t.productDetails,richText:t.richText,sgBottomPic:t.sgBottomPic,sgTopPic:t.sgTopPic,afterSales:t.afterSales}})],1):t._e(),t.notSaleStatus?o("div",{staticClass:"none-sale-container"},[t.sgStockInfo.skuDisplayReason?o("div",{staticClass:"none-sale-left",staticStyle:{"font-size":"12px"}},[o("span",{staticClass:"tip-text"},[t._v(t._s(t.sgStockInfo.skuDisplayReason))])]):[o("div",{staticClass:"none-sale-left"},[o("div",{staticClass:"tips-icon"}),o("span",{staticClass:"tip-text"},[t._v(t._s(3===t.sgStockInfo.skuDisplayState?"此商品不支持在当前地区销售":"当前地区超出该门店配送范围"))])]),o("div",{staticClass:"none-sale-right",on:{click:t.changeAddress}},[o("span",{staticClass:"location-text"},[t._v("切换地址")]),o("div",{staticClass:"location-right-arrow"})])]],2):t._e()],1),o("div",{staticClass:"bottom-wrap",class:{"no-store":!t.showShop}},[o("ul",[o("li",{directives:[{name:"show",rawName:"v-show",value:t.showShop,expression:"showShop"}],on:{click:t.fnGoToStore}},[o("div",{staticClass:"li-inner"},[o("div",{staticClass:"img-box"},[o("div",{staticClass:"box"},[o("img",{staticStyle:{width:"0.4rem",height:"0.4rem"},attrs:{src:t.$cdnImageUrl+"/goodsDetail/shop.png",alt:""}})])]),o("div",{staticClass:"text"},[t._v("店铺")])])]),o("li",{on:{click:t.fnOpenCustomerService}},[o("div",{staticClass:"li-inner"},[o("div",{staticClass:"img-box"},[o("div",{staticClass:"box"},[o("img",{staticStyle:{width:"0.4rem",height:"0.4rem"},attrs:{src:t.$cdnImageUrl+"/goodsDetail/kefu.png",alt:""}})])]),o("div",{staticClass:"text"},[t._v("客服")])])]),o("li",{on:{click:t.fnOpenCart}},[o("div",{staticClass:"li-inner"},[o("div",{staticClass:"img-box"},[o("div",{staticClass:"box"},[o("img",{staticStyle:{width:"0.4rem",height:"0.4rem"},attrs:{src:t.$cdnImageUrl+"/goodsDetail/gouwuche.png",alt:""}}),t.cartNumber?o("div",{staticClass:"badge"},[t._v(t._s(t.cartNumber>99?" 99+":t.cartNumber))]):t._e()])]),o("div",{staticClass:"text"},[t._v("购物车")])])]),o("li",{class:{disabled:t.notSaleStatus}},[t.activityInfo&&75===t.activityInfo.activityType?[o("div",{staticClass:"btn-box"},[o("div",{staticClass:"group-origin-btn",on:{click:function(e){return t.openAttr(9)}}},[o("div",{staticClass:"origin-price"},[t._v(" ¥"+t._s(t._f("formatPrice")(t.priceInfo.minOriginPrice||t.priceInfo.originPrice||0))+" ")]),o("span",{staticClass:"text"},[t._v("原价购买")])]),o("div",{staticClass:"group-origin-btn",staticStyle:{"background-color":"#FF5252"},on:{click:function(e){return t.openAttr(10)}}},[o("div",{staticClass:"origin-price"},[t._v(" ¥"+t._s(t._f("formatPrice")(t.priceInfo.minPrice||t.priceInfo.actualPrice||0))+" ")]),o("span",{staticClass:"text"},[t._v("拼团购买")])])])]:t.notSaleStatus?o("div",{staticClass:"btn-box"},[o("div",{staticClass:"btn add-cart"},[t._v("加入购物车")]),o("div",{staticClass:"btn buy",class:{orange:t.voucherList.length&&"sheng"==t.getGoodsUseCouponInfo.type&&t.baseInfo.showCoupons}},[o("p",[t._v(t._s(t.activityInfo&&70===t.activityInfo.activityType?"立即抢购":t.baseInfo.showCoupons?t.checkCouponIsAllGet?"立即购买":"领券购买":"立即购买"))]),t.voucherList.length&&"sheng"==t.getGoodsUseCouponInfo.type&&t.baseInfo.showCoupons?o("h6",[t._v("到手价"+t._s(t.getGoodsUseCouponInfo.price.toFixed(2)))]):t._e()])]):t.hasSubProduct?o("div",{staticClass:"btn-box spec"},[t.sgStockInfo&&t.sgStockInfo.stockNum>0?[t.baseInfo.supportCart?o("div",{staticClass:"btn add-cart",on:{click:function(e){return t.openAttr(0)}}},[t._v("加入购物车")]):t._e(),o("div",{staticClass:"btn buy",class:{orange:t.voucherList.length&&"sheng"==t.getGoodsUseCouponInfo.type&&t.baseInfo.showCoupons},on:{click:function(e){return t.openAttr(1)}}},[o("p",[t._v(t._s(t.activityInfo&&70===t.activityInfo.activityType?"立即抢购":t.baseInfo.showCoupons?t.checkCouponIsAllGet?"立即购买":"领券购买":"立即购买"))]),t.voucherList.length&&"sheng"==t.getGoodsUseCouponInfo.type&&t.baseInfo.showCoupons?o("h6",[t._v("到手价"+t._s(t.getGoodsUseCouponInfo.price.toFixed(2)))]):t._e()])]:[t.sgStockInfo.bookable?[t.baseInfo.supportCart?o("div",{staticClass:"btn add-cart",on:{click:function(e){return t.openAttr(0)}}},[t._v("加入购物车")]):t._e(),o("div",{staticClass:"btn book",on:{click:function(e){return t.openAttr(3)}}},[t._v("马上预定")])]:[o("div",{staticClass:"btn arrival-notice",on:{click:t.fnArrivalNotice}},[t._v("到货通知")])]]],2):o("div",{staticClass:"btn-box"},[t.baseInfo.supportCart?o("div",{staticClass:"btn add-cart",on:{click:function(e){return t.openAttr(0)}}},[t._v("加入购物车")]):t._e(),t.activityInfo&&81===t.activityInfo.activityType?[o("div",{staticClass:"btn reservation",on:{click:t.fnReserve}},[t._v("立即预约")])]:[t.sgStockInfo&&!t.sgStockInfo.hasStock?[t.activityInfo&&100===t.activityInfo.activityType&&t.sgStockInfo.bookable?[1===t.activityInfo.deposit?o("div",{staticClass:"btn bdl bdt",on:{click:function(e){return t.openAttr(4)}}},[o("div",{staticClass:"btn-inner"},[o("div",[t._v("原价购买")])])]):t._e(),1===t.activityInfo.deposit?o("div",{staticClass:"btn bg",on:{click:function(e){return t.openAttr(5)}}},[o("div",{staticClass:"btn-inner"},[o("div",[t._v("支付订金")])])]):t._e(),1!==t.activityInfo.deposit?o("div",{staticClass:"btn bg",on:{click:function(e){return t.openAttr(5)}}},[t._v(" ￥"+t._s(t._f("formatPrice")(t.priceInfo.actualPrice?t.priceInfo.actualPrice:0))+" 订金支付 ")]):t._e()]:t.sgStockInfo.bookable?[o("div",{staticClass:"btn book",on:{click:function(e){return t.openAttr(3)}}},[t._v("马上预定")])]:t.sgStockInfo.bookable?t._e():[t.notSaleStatus?[t.activityInfo&&100===t.activityInfo.activityType?[1===t.activityInfo.deposit?o("div",{staticClass:"btn bdl bdt",on:{click:function(e){return t.openAttr(4)}}},[o("div",{staticClass:"btn-inner"},[t._v(" 原价购买 ")])]):t._e(),1===t.activityInfo.deposit?o("div",{staticClass:"btn bg",on:{click:function(e){return t.openAttr(5)}}},[o("div",{staticClass:"btn-inner"},[t._v(" 支付订金 ")])]):t._e(),1!==t.activityInfo.deposit?o("div",{staticClass:"btn bg",on:{click:function(e){return t.openAttr(5)}}},[t._v(" ￥"+t._s(t._f("formatPrice")(t.priceInfo.actualPrice?t.priceInfo.actualPrice:0))+" 订金支付 ")]):t._e()]:[o("div",{staticClass:"btn buy",class:{orange:t.voucherList.length&&"sheng"==t.getGoodsUseCouponInfo.type&&t.baseInfo.showCoupons},on:{click:function(e){return t.openAttr(1)}}},[o("p",[t._v(t._s(t.activityInfo&&70===t.activityInfo.activityType?"立即抢购":t.baseInfo.showCoupons?t.checkCouponIsAllGet?"立即购买":"领券购买":"立即购买"))]),t.voucherList.length&&"sheng"==t.getGoodsUseCouponInfo.type&&t.baseInfo.showCoupons?o("h6",[t._v("到手价"+t._s(t.getGoodsUseCouponInfo.price.toFixed(2)))]):t._e()])]]:[o("div",{staticClass:"btn arrival-notice",on:{click:t.fnArrivalNotice}},[t._v("到货通知")])]]]:[t.activityInfo&&100===t.activityInfo.activityType?[1===t.activityInfo.deposit?o("div",{staticClass:"btn bdl bdt",on:{click:function(e){return t.openAttr(4)}}},[o("div",{staticClass:"btn-inner"},[t._v(" 原价购买 ")])]):t._e(),1===t.activityInfo.deposit?o("div",{staticClass:"btn bg",on:{click:function(e){return t.openAttr(5)}}},[o("div",{staticClass:"btn-inner"},[t._v(" 支付订金 ")])]):t._e(),1!==t.activityInfo.deposit?o("div",{staticClass:"btn bg",on:{click:function(e){return t.openAttr(5)}}},[t._v(" ￥"+t._s(t._f("formatPrice")(t.priceInfo.actualPrice?t.priceInfo.actualPrice:0))+" 订金支付 ")]):t._e()]:[o("div",{staticClass:"btn buy",class:{orange:t.voucherList.length&&"sheng"==t.getGoodsUseCouponInfo.type&&t.baseInfo.showCoupons},on:{click:function(e){return t.openAttr(1)}}},[o("p",[t._v(t._s(t.activityInfo&&70===t.activityInfo.activityType?"立即抢购":t.baseInfo.showCoupons?t.checkCouponIsAllGet?"立即购买":"领券购买":"立即购买"))]),t.voucherList.length&&"sheng"==t.getGoodsUseCouponInfo.type&&t.baseInfo.showCoupons?o("h6",[t._v("到手价"+t._s(t.getGoodsUseCouponInfo.price.toFixed(2)))]):t._e()])]]]],2)],2)])]),o("reservation-confirm-box",{directives:[{name:"show",rawName:"v-show",value:t.reservationShowFlag,expression:"reservationShowFlag"}],on:{fnChangeReservationShowFlag:t.fnChangeReservationShowFlag,reserve:t.reserve,sendSmsCaptcha:t.sendSmsCaptcha}}),t.showExclusiveTip?o("exclusiveFinish"):t._e(),o("van-dialog",{attrs:{"close-on-click-overlay":!0,"show-cancel-button":!1,"show-confirm-button":!1,title:"到货通知"},on:{confirm:t.fnNotice},model:{value:t.dialogShow,callback:function(e){t.dialogShow=e},expression:"dialogShow"}},[o("div",{staticClass:"product-name"},[o("span",{staticClass:"title"},[t._v("商品名称")]),t._v(" "),o("p",[t._v(t._s(t.products.productFullName))])]),o("van-field",{attrs:{placeholder:"请输入手机号",type:"tel",maxlength:"11"},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}}),o("div",{staticClass:"btn-container"},[o("div",{staticClass:"confirm-btn",on:{click:t.fnNotice}},[t._v("确定")])]),o("div",{staticClass:"dialog-close",on:{click:function(e){t.dialogShow=!1}}})],1),o("div",{directives:[{name:"show",rawName:"v-show",value:t.isAllSceenSwiper,expression:"isAllSceenSwiper"}],staticClass:"mask-close"},[o("div",{staticClass:"close",attrs:{id:"maskClose"}}),o("span",[t._v(t._s(t.curSwiper)+"/"+t._s(t.swiperImgs.length))])]),o("div",{staticClass:"mask-video",attrs:{id:"maskVideo"},on:{touchmove:function(t){t.stopPropagation(),t.preventDefault()}}}),o("div",{attrs:{id:"good-component-container"}})],1)]),t.loadShareModal?o("custom-share",{attrs:{show:t.showShareModal,copyCustomLink:!0},on:{"update:show":function(e){t.showShareModal=e},copyLink:t.copyLink,customShare:t.defaultShareFn,pictureShare:t.openPictureShare}}):t._e(),t.loadPictureShare?o("picture-share",{attrs:{show:t.showPictureShare},on:{"update:show":function(e){t.showPictureShare=e}}}):t._e(),o("top-feedBack",{attrs:{isShow:t.showTotop&&!t.commentHeader,classList:{"top-margin-no-sale":t.notSaleStatus,"has-bottom-bar":!t.notSaleStatus}},on:{hiddenFeedBack:t.hiddenFeedBack,toTop:t.toGotop}})],1):o("skeleton",{attrs:{nums:4,fheight:"4rem",iheight:"2rem"}})],1)},s=[],n=o("a34a"),r=o.n(n),a=o("b311"),c=o.n(a),u=o("2f62"),l=o("6ff3"),d=o("c63d"),h=o("bbc2"),p=o("21b1"),f=o("f121"),g=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"exclusive-finish"},[o("img",{attrs:{src:t.tipImage}}),o("p",{staticClass:"big-text"},[t._v("专属价格已失效")]),o("p",[t._v("专属价格已过期或已被使用")]),o("button",{on:{click:t.back}},[t._v("返回")])])},m=[],I={name:"exclusiveFinish",data:function(){return{tipImage:"".concat(this.$cdnImageUrl,"/goods/tipImg.png")}},methods:{back:function(){this.$store.dispatch("doHistoryBack")}}},v=I,b=(o("fbe1"),o("2877")),S=Object(b["a"])(v,g,m,!1,null,"37e887b8",null),y=S.exports,k=o("d3c8"),C=o("85e4"),w=o("fa7d"),A=o("efb8"),T=o("90dd"),$=o("40ca"),_=o("a73f"),P=o("1c03");function L(t){return L="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function x(t,e,o,i,s,n,r){try{var a=t[n](r),c=a.value}catch(u){return void o(u)}a.done?e(c):Promise.resolve(c).then(i,s)}function N(t){return function(){var e=this,o=arguments;return new Promise((function(i,s){var n=t.apply(e,o);function r(t){x(n,i,s,r,a,"next",t)}function a(t){x(n,i,s,r,a,"throw",t)}r(void 0)}))}}function F(t){return j(t)||R(t)||B(t)||O()}function O(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function B(t,e){if(t){if("string"===typeof t)return E(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?E(t,e):void 0}}function R(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function j(t){if(Array.isArray(t))return E(t)}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,i=new Array(e);o<e;o++)i[o]=t[o];return i}function U(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,i)}return o}function M(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?U(Object(o),!0).forEach((function(e){V(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):U(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function V(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var G=function(){return o.e("chunk-98660928").then(o.bind(null,"d1e7b"))},D=function(){return o.e("chunk-02260549").then(o.bind(null,"7937"))},q=function(){return o.e("chunk-7dcf6572").then(o.bind(null,"a69d"))},H=function(){return Promise.all([o.e("chunk-2d216257"),o.e("chunk-0ae0a366")]).then(o.bind(null,"8052"))},W=function(){return Promise.all([o.e("chunk-8efa73ec"),o.e("chunk-492f2e5e")]).then(o.bind(null,"85d4"))},z=function(){return o.e("lazy-shop-info").then(o.bind(null,"f2f6"))},Q=function(){return o.e("chunk-0ec41d7a").then(o.bind(null,"9654"))},J=function(){return o.e("chunk-58b5599d").then(o.bind(null,"3fe3"))},K=function(){return o.e("chunk-80504292").then(o.bind(null,"1ead"))},Y=function(){return Promise.all([o.e("chunk-3aea2a64"),o.e("chunk-8efa73ec"),o.e("lazy-goods-detail")]).then(o.bind(null,"c8a1"))},X=function(){return Promise.all([o.e("chunk-be445e7e"),o.e("lazy-comment-info")]).then(o.bind(null,"39a8"))},Z=function(){return Promise.all([o.e("chunk-61859a35"),o.e("lazy-good-info")]).then(o.bind(null,"cc65"))},tt=Object(u["a"])("cart"),et=tt.mapState,ot=tt.mapActions,it=new p["a"];it.initDeviceReady();var st=0,nt={mixins:[A["a"]],provide:function(){var t=this;return{getCurScrollTop:function(){return t.scrollTop}}},inject:["reload"],components:{skeleton:_["a"],lazyGoodsInfo:Z,lazyCommentInfo:X,swiper:W,answerArea:G,recommendation:D,lazyShopInfo:z,goodsRecommend:Q,lazyGoodsDetail:Y,floatButton:K,reservationConfirmBox:J,exclusiveFinish:y,liveTag:l["a"],customShare:q,pictureShare:H,topFeedBack:d["default"]},data:function(){return{showSwiper:!0,islogining:!1,scrollTop:0,exclusiveId:"",visitStoreId:"",exclusiveFinished:!1,exclusiveUsed:!1,swiperSkeleton:!0,navShowFlag:!1,showShareFlag:!1,activeAnchor:"goodsContainer",productId:"",storeId:"",isCollected:0,curSwiper:1,swiperImgs:[],isAllSceenSwiper:!1,products:{},checkedAttr:"",attrValueNames:"",attrLen:0,skku:"",sgAttribute:null,hasSubProduct:!1,sgStoreAttribute:null,originAttrs:[],sgStoreAttributeItem:null,productNumber:1,activityInfo:null,baseInfo:{},priceInfo:{},sgStockInfo:null,storeInfo:null,couponList:[],voucherList:[],finished:!1,descriptionList:[],hasProgramFlag:0,commentTotal:0,positiveRate:0,commentList:[],relationList:[],mp4FileId2:"",sgTopPic:"",richText:"",productDetails:"",sgBottomPic:"",productAttrs:[],dialogShow:!1,mobile:"",ioucInfo:{feeInfo:"查看更多"},shareGoodsInfo:{},reservationShowFlag:!1,show_live:"",hotLiveInfo:[],shopInfo:null,gioObject:{},o2oStoreId:"",RootEM:0,answerAreaInfo:{},commentHeader:!1,holdSelected:"",cancelScroll:!1,staticStoreId:"",isCanSelectTitle:!0,showComment:!1,isSkeletonLoading:!1,btnType:-1,attrInitStatus:!1,parentBookable:!1,attrHasSelect:!1,spuInfo:null,notSaleStatus:!1,openFrom:1,lastSelectRealBtn:1,noticeContent:void 0,originSource:null,loadShareModal:!1,showShareModal:!1,loadPictureShare:!1,showPictureShare:!1,showTotop:!1,chooseGroupId:0,oldForNewFlag:!1,rightsList:[],taskId:"",stageId:"",testArray:[]}},computed:M(M(M({},Object(u["d"])(["accessToken","ucId"])),et(["cartNumber"])),{},{location:function(){return this.$store.getters["getlocationInfo"]},mId:function(){return this.$store.getters["mId"]},getShareId:function(){return sessionStorage.getItem("shareUserId")||""},isExclusive:function(){return!this.exclusiveUsed&&200===this.priceInfo.priceType},showShop:function(){return this.storeInfo&&(!this.storeInfo.storePublicDomainName||this.storeInfo.storePublicDomainName&&1===this.storeInfo.storePublicDomainSwitch&&!(("O2O"===this.sgStockInfo.stockType||"OCO"===this.sgStockInfo.stockType)&&this.notSaleStatus))},showExclusiveTip:function(){return 200===this.priceInfo.priceType&&(this.exclusiveUsed||this.exclusiveFinished)},checkCouponIsAllGet:function(){var t=this.voucherList.filter((function(t){return"sheng"===t.marking}));return t.every((function(t){return"2"===t.displayType}))},getGoodsUseCouponInfo:function(){console.log(this.voucherList,"voucherList");var t=this.voucherList.some((function(t){return"sheng"===t.marking}))?"sheng":this.voucherList.some((function(t){return"cou"===t.marking}))?"cou":"";console.log(t,"type");var e=0,o=1;return this.voucherList.forEach((function(t){"sheng"!==t.marking&&"cou"!==t.marking||(e+=t.couponAmount,o=t.buyNum)})),{type:t,buyNum:o,price:this.priceInfo.actualPrice*o-e>0?this.priceInfo.actualPrice*o-e:0,yhprice:e,voucherLen:this.voucherList.length}}}),watch:{isCollected:{handler:function(t){t&&this.notifyWashingMachine()},immediate:!0}},created:function(){this.taskId=this.$route.query.taskId||"",this.stageId=this.$route.query.stageId||"";for(var t=0;t<500;t++)this.testArray.push(new Date)},beforeMount:function(){this.debouncedBuyAction=w["a"].debounceImmediate(this.doBuyAction)},mounted:function(){this.RootEM=this.getREM(),this.skku=this.$route.query.skku||""},beforeRouteEnter:function(t,e,o){if(w["a"].isSgRn()){var i=t.query.productId,s=t.query.visitStore;window.postMessage(JSON.stringify({type:"goProduct",data:{id:i,storeId:s||""}})),o(e&&e.fullPath&&"/"===e.fullPath)}else o()},beforeRouteLeave:function(t,e,o){localStorage.removeItem("shareMessage"),st&&this.gioMB13407(),o()},deactivated:function(){this.$refs.swiper.player&&this.$refs.swiper.player.dispose(),this.$refs.swiper.player&&(this.$refs.swiper.smallVideoShow=!1)},activated:function(){this.init()},methods:M(M(M({},Object(u["e"])("orderRight",["setOrderRightInfos","setOrderProInfo","setSelectedRights","setGiveupStatus","setExclusiveStatus"])),{},{notifyWashingMachine:function(){this.taskId&&this.stageId&&Object(C["nb"])({taskId:this.taskId,stageId:this.stageId}).then((function(t){t.success?t.data&&console.log("success"):console.log(t.message)}))},toSYNFootPrint:function(){var t=f["a"].DHOST+h["a"].getSYNfootprint;this.$http.post(t,{sku:this.products.sku,storeId:this.o2oStoreId,provinceId:this.location.provinceId,cityId:this.location.cityId,districtId:this.location.districtId,streetId:this.location.townshipId})},fetchRecordShareRelation:function(){this.$store.state.shareId&&!sessionStorage.getItem("isRecordShareRelation")&&(sessionStorage.setItem("isRecordShareRelation",!0),this.$http.get(h["a"].recordShareRelation,{params:{sharerMemberId:this.$store.state.shareId||"",storeProductId:this.$route.query.productId||"",storeId:this.o2oStoreId||""}}))},init:function(){var t=this,e=this.$route.query;e.exclusiveId&&this.queryExclusivePrice(e.exclusiveId),w["a"].isHaierApp()&&this.doShowUplusLive(),this.productNumber=1,this.productId=this.$route.query.productId,this.visitStore=this.$route.query.visitStore,this.storeId=this.$route.query.storeId||"",this.show_live=this.$route.query.show_live||"",this.hasProgram(),this.relation(),this.promos(),this.specifications(),this.evaluation(),this.getCommentsByCondition(),this.$util.isIhaierApp()?this.showShareFlag=!0:this.$util.isHaierApp()?(this.showShareFlag=!0,this.$store.getters.getLoginStatus&&this.getCartNumber()):this.$store.getters.getLoginStatus&&this.getCartNumber(),this.getProductBasicInfo().then((function(e){t.getVirtualSpuInfo(t.productId).then((function(e){t.dynamic().then((function(e){(t.$util.isSyBird()||"syn"===t.$route.query.fromSource)&&t.toSYNFootPrint(),t.$util.gioTrackWithVariable("ProView",{member_id:localStorage.getItem("mId")?localStorage.getItem("mId")+"":"null",user_id:localStorage.getItem("ucId")?localStorage.getItem("ucId")+"":"null",deliverStreet:t.$store.state.locationInfo.township||"null",deliverDistrict:t.$store.state.locationInfo.district||"null",deliverCity:t.$store.state.locationInfo.city||"null",deliverProvince:t.$store.state.locationInfo.province||"null",storeId:t.gioObject.storeId?t.gioObject.storeId+"":"null",stockStatus:t.gioObject.stockStatus?t.gioObject.stockStatus+"":"null",productCode:t.gioObject.productEncode?t.gioObject.productEncode+"":"null",productName_var:t.gioObject.productName||"null",productId_var:t.gioObject.productId?t.gioObject.productId+"":"null"}),t.$util.isHaierApp()&&t.productQrCode(),t.$store.dispatch("WeChatSecondShare",{title:t.products.productFullName,desc:t.products.productTitle,thumImage:t.getShareImage()}),t.setStorageToShare()}))}))})),st=Date.now()},fnSelectSpu:function(t){var e=this;this.$refs.swiper.player&&(this.$refs.swiper.player.dispose(),this.$refs.swiper.player=null,this.$refs.swiper.closeSmallVideo(),this.$refs.swiper.isCancelSmallVideo=!1),w["a"].isHaierApp()&&this.doShowUplusLive(),this.productId=t.productId,this.hasProgram(),this.relation(),this.promos(),this.specifications(),this.evaluation(),this.getCommentsByCondition(),this.$util.isIhaierApp()?this.showShareFlag=!0:this.$util.isHaierApp()?(this.showShareFlag=!0,this.$store.getters.getLoginStatus&&this.getCartNumber()):this.$store.getters.getLoginStatus&&this.getCartNumber(),this.getProductBasicInfo().then((function(o){e.productNumber=1,e.dynamic().then((function(o){e.fetchIoucCost(),e.$util.gioTrackWithVariable("ProView",{member_id:localStorage.getItem("mId")?localStorage.getItem("mId")+"":"null",user_id:localStorage.getItem("ucId")?localStorage.getItem("ucId")+"":"null",deliverStreet:e.$store.state.locationInfo.township||"null",deliverDistrict:e.$store.state.locationInfo.district||"null",deliverCity:e.$store.state.locationInfo.city||"null",deliverProvince:e.$store.state.locationInfo.province||"null",storeId:e.gioObject.storeId?e.gioObject.storeId+"":"null",stockStatus:e.gioObject.stockStatus?e.gioObject.stockStatus+"":"null",productCode:e.gioObject.productEncode?e.gioObject.productEncode+"":"null",productName_var:e.gioObject.productName||"null",productId_var:e.gioObject.productId?e.gioObject.productId+"":"null"}),e.$util.isHaierApp()&&e.productQrCode(),e.$store.dispatch("WeChatSecondShare",{title:e.products.productFullName,desc:e.products.productTitle,thumImage:e.getShareImage()}),e.refreshSpuBtn(),e.attrValueNames=t.skuShortName,e.attrLen=0===e.attrValueNames.length?"":e.attrValueNames.split(",").length}))}))},notSelectTitle:function(){this.isCanSelectTitle=!1},changeAddress:function(){this.$refs.goodsInfo.openAddr()},hiddenFeedBack:function(){this.showTotop=!1},refreshSpuBtn:function(){1===this.openFrom?this.refreshBtnType():this.activityInfo&&81===this.activityInfo.activityType?this.btnType=8:this.sgStockInfo.bookable?this.activityInfo&&100===this.activityInfo.activityType?1===this.activityInfo.deposit&&4===this.lastSelectRealBtn?this.btnType=4:this.btnType=5:this.btnType=3:0===this.lastSelectRealBtn&&this.baseInfo.supportCart?this.btnType=0:this.activityInfo&&100===this.activityInfo.activityType?1===this.activityInfo.deposit&&4===this.lastSelectRealBtn?this.btnType=4:this.btnType=5:this.activityInfo&&75===this.activityInfo.activityType?9===this.lastSelectRealBtn?this.btnType=9:this.btnType=10:this.btnType=1},attrSelectChanged:function(){},selectTitle:function(){this.isCanSelectTitle=!0},titleSelectOption:function(t){this.isCanSelectTitle=t},countdownFinish:function(){this.exclusiveFinished=!0},queryExclusivePrice:function(t){var e=this;Object(C["vb"])({id:t}).then((function(t){if(t.success){var o=t.data[0];e.exclusiveUsed=o.used}else e.$message.error(t.message)}))},attrNameChange:function(t){this.attrValueNames=t,this.attrLen=0===this.attrValueNames.length?"":this.attrValueNames.split(",").length,this.attrValueNames=0===t.length?this.holdSelected:this.attrValueNames},verifyTagCheckStatus:function(){return!this.sgAttribute||!this.sgStoreAttribute||!(this.attrLen<Object.keys(this.sgAttribute).length)},toGotop:function(){this.scrollSmoothTo(0)},scrollSmoothTo:function(t){console.log("#scrollSmoothToscroll"),window.requestAnimationFrame||(window.requestAnimationFrame=function(t){return setTimeout(t,17)});var e=document.querySelector(".inner-view"),o=e.scrollTop;console.log(o,"scrollTop");var i=function i(){var s=t-o;o+=s/10,Math.abs(s)<1?e.scrollTo(0,t):(e.scrollTo(0,o),requestAnimationFrame(i))};i()},handleScroll:function(t){var e=this;this.cancelScroll||this.$util.throttle((function(){e.navShowFlag=e.$refs.scrollBox.scrollTop>.92*e.RootEM;var o=Math.abs(e.$refs.goodsContainer.getBoundingClientRect().top),i=e.showComment?Math.abs(e.$refs.detailContainer.getBoundingClientRect().top):0,s=e.showComment?Math.abs(e.$refs.commentContainer.getBoundingClientRect().top):0;if(e.scrollTop=o,!e.showComment){var n=t.target.scrollHeight,r=t.target.scrollTop,a=t.target.clientHeight;n-a===r&&(e.showComment=!0)}e.$refs.scrollBox.scrollTop>200?e.showTotop=!0:e.showTotop=!1,e.$nextTick((function(){o<i&&o<s?e.activeAnchor="goodsContainer":i<o&&i<s?e.activeAnchor="detailContainer":s<i&&s<o&&(e.activeAnchor="commentContainer",e.showComment)}))}),200)()}},ot(["getCartNumber","addCart"])),{},{doShowUplusLive:function(){var t=this.$route.query.show_live;+t&&!sessionStorage.getItem("showlive")&&it.initDeviceReady().then((function(){it.upLiveModule.showFloatWindow()}))},getSkusLive:function(t){var e=this;Object(C["eb"])([t]).then((function(o){var i=o.data;console.log(i,"++++result++++"),e.hotLiveInfo=i[t]||[]}))},doOpenLive:function(t){var e=this;if(console.log(t),this.$util.isHaierApp()){var o=this.$route.query.show_live;o?it.initDeviceReady().then((function(){it.upLiveModule.closeFloatWindow(),it.upVdnModule.goToPage({url:e.$util.isIos()?t.appIosUrl:t.appAndroidUrl})})):it.initDeviceReady().then((function(){it.upVdnModule.goToPage({url:e.$util.isIos()?t.appIosUrl:t.appAndroidUrl})}))}else Object(T["a"])({redirectUri:t.h5Url,target:$["a"].LiveTarget,targetTest:$["a"].LiveTarget_test,redirectUriTest:t.h5Url}).then((function(t){var o=t.data;o.success?location.href=o.data:e.$toast(o.message)}))},getProductBasicInfo:function(){var t=this;return new Promise((function(e,o){Object(C["Y"])({productId:t.productId,channel:"",openId:"",storeId:t.getShareId||"",sceneCode:t.$route.query.fkcode||""}).then((function(o){if(o.success){if(t.shopInfo=o,t.oldForNewFlag=o.data.oldForNewFlag,t.getMaxAnswerProductQuestion({sku:o.data.products.sku,productId:t.productId,productFullName:o.data.products.productFullName,defaultImageUrl:o.data.swiperImgs.length&&o.data.swiperImgs[0]}),t.getSkusLive(o.data.products.productId),t.hasSubProduct=!!o.data.sgStoreAttribute[0].haschildItems,t.hasSubProduct)if(t.skku)o.data.sgStoreAttribute.forEach((function(e){e.skku===t.skku&&(t.shopInfo.data.checkedAttr=e.attrValueIds)}));else{var i=t.shopInfo.data.sgStoreAttribute.filter((function(e){return e.attrValueIds===t.shopInfo.data.checkedAttr}))[0];console.log(i,"defaultItem"),i&&(t.sku=i.sku,t.skku=i.skku,t.dynamic())}else t.shopInfo.data.sgAttribute["0"][0].attrName="型号",t.shopInfo.data.sgAttribute["0"][0].sgAttribute.attrName="型号",t.attrHasSelect=!0,t.shopInfo.data.checkedAttr="0";t.$set(t.gioObject,"productName",o.data.products.productFullName),t.$set(t.gioObject,"productId",String(o.data.products.productId)),t.$set(t.gioObject,"productEncode",o.data.products.sku),t.isCollected=o.data.isCollected,t.products=o.data.products,t.swiperSkeleton=!1,e()}else t.$toast(o.message)}))}))},getVirtualSpuInfo:function(t){var e=this;return this.$route.query.exclusiveId?Promise.resolve():new Promise((function(o,i){Object(C["ib"])({productId:t}).then((function(i){i.success?(e.spuInfo=i.data,e.spuInfo&&e.spuInfo.spuSpecsList[0].spuSkuList.forEach((function(o){o.productId===Number(t)&&(e.attrValueNames=o.skuShortName)})),o()):e.$toast(i.message)}))}))},calcAttr:function(){var t=this,e=this.shopInfo,o=[],i=[],s=[],n={};if(e.data.checkedAttr&&(this.checkedAttr=e.data.checkedAttr,o=e.data.checkedAttr.split(","),s=Object.keys(e.data.sgAttribute),s.forEach((function(t,e){n[t]=o[e]}))),this.hasSubProduct&&!this.checkedAttr)for(var r in e.data.sgAttribute)i.push(e.data.sgAttribute[r][0].attrName);else{var a=function(t){e.data.sgAttribute[t].forEach((function(e,o){e.sgAttribute.id===1*n[t]?(e.selected=!0,i.push(e.sgAttribute.attrValueName)):e.selected=!1}))};for(var c in e.data.sgAttribute)a(c)}this.spuInfo||(this.attrValueNames=i.join(",")),this.holdSelected=i.join(","),this.hasSubProduct?this.attrLen=this.checkedAttr?this.attrValueNames.split(",").length:0:this.attrLen=this.attrValueNames.split(",").length,this.sgAttribute=e.data.sgAttribute,this.sgStoreAttribute=e.data.sgStoreAttribute,this.originAttrs=e.data.sgStoreAttribute?e.data.sgStoreAttribute.filter((function(t,e){return t.num>=0})):[],e.data.sgStoreAttribute?e.data.sgStoreAttribute.forEach((function(e){t.checkedAttr===e.attrValueIds&&(t.sgStoreAttributeItem=e,t.skku=e.skku)})):this.sgStoreAttributeItem=null},dynamic:function(){var t=this,e=this.$route.query;return new Promise((function(o,i){Object(C["B"])({prodId:t.productId,mdCode:sessionStorage.getItem("shareMdCode")||"",memberStoreId:t.getShareId||"",number:t.productNumber||1,provinceId:t.location.provinceId,cityId:t.location.cityId,regionId:t.location.districtId,streetId:t.location.townshipId,latitude:t.location.latitude,longitude:t.location.longitude,skku:t.skku||null,sku:t.products.sku,visitStore:e.exclusiveId?t.getShareId:t.visitStore,exclusivePriceId:e.exclusiveId||null,directSaleType:e.directSaleType||null,sceneCode:e.sceneCode||null,sceneVersion:e.sceneVersion||null,comId:e.comId}).then((function(e){if(e.success){t.activityInfo=e.data.activityInfo||null,t.baseInfo=M({},e.data.baseInfo),t.priceInfo=e.data.priceInfo||null,t.noticeContent=e.data.noticeInfo?e.data.noticeInfo.platformNoticeContent?e.data.noticeInfo.platformNoticeContent:e.data.noticeInfo.storeNoticeContent?e.data.noticeInfo.storeNoticeContent:void 0:void 0,t.sgStockInfo=e.data.sgStockInfo?M({},e.data.sgStockInfo):null,t.sgStockInfo&&(3===t.sgStockInfo.skuDisplayState||4===t.sgStockInfo.skuDisplayState||t.sgStockInfo.skuDisplayReason)?t.notSaleStatus=!0:t.notSaleStatus=!1,t.storeInfo=e.data.storeInfo||null,t.storeInfo?t.staticStoreId=e.data.storeInfo.o2oStoreId:t.staticStoreId="";var i="";if(i=t.sgStockInfo.hasStock?"有货":"无货",null===e.data.storeInfo?t.o2oStoreId="":t.o2oStoreId=e.data.storeInfo.o2oStoreId,t.$set(t.gioObject,"stockStatus",i),t.$set(t.gioObject,"storeId",t.o2oStoreId),t.baseInfo.image){if(t.swiperImgs&&t.swiperImgs[0]&&t.swiperImgs[0].baseImage?t.swiperImgs[0].baseImage=t.baseInfo.image:t.swiperImgs=[{baseImage:t.baseInfo.image||""}].concat(F(t.shopInfo.data.swiperImgs)),t.products.videoUrl){var s=t.$util.strJSONParse(t.products.videoUrl,{video:t.products.videoUrl});t.swiperImgs=[{baseImage:t.swiperImgs[0].baseImage},{img:s.img,video:s.video}].concat(F(t.shopInfo.data.swiperImgs))}}else if(t.products.videoUrl){var n=t.$util.strJSONParse(t.products.videoUrl,{video:t.products.videoUrl});t.swiperImgs=[{img:n.img,video:n.video}].concat(F(t.shopInfo.data.swiperImgs))}else t.swiperImgs=t.shopInfo.data.swiperImgs;t.hasSubProduct||(t.shopInfo.data.sgStoreAttribute[0].num=t.sgStockInfo.stockNum,t.activityInfo&&100===t.activityInfo.activityType?t.shopInfo.data.sgStoreAttribute[0].price=t.priceInfo.originPrice:t.shopInfo.data.sgStoreAttribute[0].price=t.priceInfo.actualPrice),t.attrInitStatus||(t.calcAttr(),t.fetchIoucCost(),t.attrInitStatus=!0,t.spuInfo&&t.spuInfo.spuSpecsList[0].spuSkuList.forEach((function(e){e.productId===Number(t.productId)&&(t.attrValueNames=e.skuShortName)}))),e.data.storeInfo&&t.fetchRecordShareRelation(),t.getProductAvailableCoupons(),t.querySingleOnlineRightsList(),t.isSkeletonLoading=!0,Promise.all([Y(),X(),z()]).then((function(){t.showComment=!0,console.log("===================================="),console.log("加载完成"),console.log("====================================")})),o()}else t.$toast(e.message)}))}))},getProductAvailableCoupons:function(){var t=this;return new Promise((function(e,o){Object(C["X"])({sku:t.skku||t.products.sku||"",storeId:t.storeInfo?t.storeInfo.o2oStoreId:null,price:t.priceInfo?100===t.priceInfo.priceType?t.priceInfo.finalPrice:t.priceInfo.actualPrice:null}).then((function(o){o.success?(t.finished=!0,o.data?o.data.length>2?t.couponList=o.data.slice(0,2):t.couponList=o.data:t.couponList=[],t.voucherList=o.data?o.data:[],e()):console.log(o.message)}))}))},querySingleOnlineRightsList:function(){var t=this;this.priceInfo&&this.priceInfo.actualPrice&&this.storeInfo&&this.storeInfo.storeCode?Object(C["wb"])({productCode:this.products.sku,storeId:this.storeInfo.storeCode,productPrice:this.priceInfo.actualPrice}).then((function(e){e&&e.success&&e.data?t.rightsList=e.data:t.rightsList=[]}))["catch"]((function(){t.rightsList=[]})):this.rightsList=[]},receiveToast:function(t,e){var i=o(t?"90a0":"b402"),s=t?"领取成功":"领取失败";this.$toast({message:s,icon:i,duration:1500}),e&&this.$nextTick((function(){var t=document.querySelector(".van-toast");if(!t.querySelectorAll(".toast-add-text").length){var o=document.createElement("span");o.className="toast-add-text",o.innerHTML="".concat(e,"可用"),t.appendChild(o);var i=window.setTimeout((function(){t.removeChild(o),window.clearTimeout(i)}),1550)}}))},receiveCoupon:function(t){var e=this;console.log(t,"++++++++=============++++++++++");var o=this.location.townshipId;Object(C["xb"])({activityCode:t.activityCode,couponTemplateCode:t.couponTemplateCode,sourceChannel:t.sourceChannel,streetId:o}).then((function(o){o.success?(e.voucherList[t.index].displayType="2",e.voucherList=F(e.voucherList),e.receiveToast(!0,t.startTime&&t.endTime?"".concat(t.startTime,"-").concat(t.endTime):""),console.log(e.checkCouponIsAllGet)):e.receiveToast(!1)}))},fnSelectAttribute:function(t,e){var o=this;this.$refs.swiper.player&&this.$refs.swiper.player.dispose(),this.$refs.swiper.player&&(this.$refs.swiper.smallVideoShow=!1),this.sgStoreAttributeItem=t,this.skku=t.skku,this.productNumber=e,this.$route.query.exclusiveId&&this.queryExclusivePrice(this.$route.query.exclusiveId),this.dynamic().then((function(t){0!==o.btnType&&1!==o.btnType&&3!==o.btnType&&o.refreshBtnType()}))},getDes:function(){var t=this,e=this.sgStockInfo.labels.map((function(t){return t.i}));Object(C["J"])({sid:"".concat(e.join(","),",")}).then((function(e){e.success?t.descriptionList=F(e.data):t.$toast(e.message)}))},hasProgram:function(){var t=this;Object(C["kb"])({channel:1,productId:this.productId}).then((function(e){e.success?t.hasProgramFlag=e.data:t.$toast(e.message)}))},relation:function(){var t=this;Object(C["yb"])({productId:this.productId}).then((function(e){e.success?t.relationList=e.data||[]:t.$toast(e.message)}))},promos:function(){var t=this;Object(C["ub"])({productId:this.productId}).then((function(e){e.success?(t.mp4FileId2=e.data?e.data.mp4FileId2:"",t.sgTopPic=e.data&&e.data.sgTopPic?e.data.sgTopPic.pic:"",t.productDetails=e.data?e.data.productDetails:"",t.productDetails=t.productDetails.replace(/<a.*?(?:>)([\s\S]*?)<\/a>/gi,""),t.productDetails=t.productDetails.replace(/<br>/gi,""),t.productDetails=t.productDetails.replace(/http:/gi,""),t.richText=e.data?e.data.richText:"",t.richText=t.richText.replace(/<a.*?(?:>)([\s\S]*?)<\/a>/gi,""),t.richText=t.richText.replace(/<br>/gi,""),t.richText=t.richText.replace(/http:/gi,""),t.sgBottomPic=e.data&&e.data.sgBottomPic?e.data.sgBottomPic.pic:"",t.afterSales=e.data?e.data.afterSales:""):t.$toast(e.message)}))},specifications:function(){var t=this;Object(C["Ib"])({productId:this.productId}).then((function(e){e.success?t.productAttrs=e.data?e.data.productAttrs:[]:t.$toast(e.message)}))},fetchIoucCost:function(){var t=this,e=0;e=this.activityInfo?this.priceInfo.finalPrice:this.priceInfo.actualPrice,Object(C["M"])({payAmt:e,proGroup:this.products.department,sku:this.skku?this.skku:this.products.sku,token:this.accessToken}).then((function(e){e.success&&(t.ioucInfo=e.data)}))},goBaitiao:function(){if(this.ioucInfo)switch(this.ioucInfo.applyStatus){case"2":case"3":this.$router.push({path:"/sgwhitepay"});break;case"0":this.$http.get(h["a"].WHITE_SHOWS_APPLY,{params:{backUrl:window.location.href,userId:this.ucId,token:this.accessToken}}).then((function(t){var e=t.data;e.success&&(console.log(e.data.redirectUrl),location.href=e.data.data.url)}));break;case"1":break;default:}},evaluation:function(){var t=this;Object(C["C"])({productId:this.productId}).then((function(e){e.success?(t.commentTotal=e.data.commentTotal,t.positiveRate=e.data.positiveRate):t.$toast(e.message)}))},getCommentsByCondition:function(){var t=this;Object(C["I"])({commentType:"all",productId:this.productId,pageSize:2,pageIndex:1}).then((function(e){e.success?t.commentList=t.fnFormatComment(e.data):t.$toast(e.message)}))},fnFormatComment:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return 0===t.length?[]:(t.forEach((function(t){if(t.commentContent.length>71?(t.longContentBtn=!0,t.longContent=!0,t.miniContent=t.commentContent.substring(0,71)+"..."):t.miniContent=t.commentContent,t.storeCommentReplies&&t.storeCommentReplies.length){var e=t.storeCommentReplies;e.forEach((function(t){t.replyContent.length>71?(t.longBtn=!0,t["long"]=!0,t.miniReply=t.replyContent.substring(0,71)+"..."):t.miniReply=t.replyContent}))}if(t.experienceContent&&t.experienceContent.length){var o=t.experienceContent;o.length>71?(t.longExperienceBtn=!0,t.longExperience=!0,t.miniExperienceContent=t.experienceContent.substring(0,71)+"..."):(t.longExperience=!1,t.miniExperienceContent=t.experienceContent)}if(t.serviceCommentReplies&&t.serviceCommentReplies.length){var i=t.serviceCommentReplies;i.forEach((function(t){t.replyContent.length>71?(t.longServiceBtn=!0,t.longService=!0,t.miniServiceContent=t.replyContent.substring(0,71)+"..."):(t.longService=!1,t.miniServiceContent=t.replyContent)}))}})),t)},fnGoToStore:function(){this.$router.push({path:"/shopDetail",query:{storeId:this.storeInfo.o2oStoreId}})},gotoLive:function(){this.$store.dispatch("doHistoryBack",!0)},getMaxAnswerProductQuestion:function(t){var e=this;Object(C["N"])({sku:t.sku}).then((function(o){var i=o.result,s=o.pager,n=o.success;if(n){var r={productId:t.productId,sku:t.sku,pager:s,productFullName:t.productFullName,defaultImageUrl:t.defaultImageUrl,rowsCount:s.rowsCount};e.answerAreaInfo=M(M({},r),{},{result:i})}}))},fnShowCommentContent:function(t){"commentContent"===t.type?this.commentList[t.index].longContent=!this.commentList[t.index].longContent:"experienceContent"===t.type?this.commentList[t.index].longExperience=!this.commentList[t.index].longExperience:"serviceReplyContent"===t.type?this.commentList[t.index].serviceCommentReplies[t.subIndex].longService=!this.commentList[t.index].serviceCommentReplies[t.subIndex].longService:"replyContent"===t.type&&(this.commentList[t.index].storeCommentReplies[t.subIndex]["long"]=!this.commentList[t.index].storeCommentReplies[t.subIndex]["long"])},handleLocation:function(){this.$route.query.exclusiveId&&this.queryExclusivePrice(this.$route.query.exclusiveId),this.dynamic()},fnChangeProductNumber:function(t){this.productNumber=t},changeGoodsNumber:function(t){this.productNumber=t},openAttr:function(t){this.notSaleStatus||(this.chooseGroupId=0,this.openFrom=2,this.lastSelectRealBtn=t,this.$refs.goodsInfo.fnShowInfo(),this.btnType=t,0===t&&this.$util.gioTrackWithVariable("MB13413",{user_id:localStorage.getItem("ucId")?localStorage.getItem("ucId")+"":"null",member_id:localStorage.getItem("mId")?localStorage.getItem("mId")+"":"null",productId_var:this.productId+""}))},openAttrFromToggle:function(t){this.chooseGroupId?this.openFrom=2:this.openFrom=1,this.$refs.goodsInfo.fnShowInfo(),this.btnType=t,0===t&&this.$util.gioTrackWithVariable("MB13413",{user_id:localStorage.getItem("ucId")?localStorage.getItem("ucId")+"":"null",member_id:localStorage.getItem("mId")?localStorage.getItem("mId")+"":"null",productId_var:this.productId+""})},fnAddCart:function(t){var e=this;if(!this.islogining){if(!this.verifyTagCheckStatus())return this.$refs.goodsInfo.showInfoFlag?this.$toast("规格选择不完整"):void(this.$refs.goodsInfo.showInfoFlag=!0);if(this.$refs.goodsInfo.showInfoFlag&&(this.$refs.goodsInfo.showInfoFlag=!1),this.$refs.goodsInfo.showSpuFlag&&(this.$refs.goodsInfo.showSpuFlag=!1),!this.$store.getters.getLoginStatus)return this.islogining=!0,void this.$store.dispatch("doLogin").then((function(t){400!==t?(e.islogining=!1,e.reload()):e.islogining=!1}))["catch"]((function(){e.islogining=!1}));if(this.baseInfo.supportCart){var o=this.$route.query,i=o.comId,s=o.caseId,n=o.directSaleType,r={attrValueNames:this.hasSubProduct&&this.attrValueNames||null,number:this.productNumber,productId:this.productId,skku:this.hasSubProduct&&this.skku||null,sku:this.products.sku,visitStore:this.$route.query.visitStore||"",comId:i,caseId:s,directSaleType:n,undertakeStore:this.storeInfo?this.storeInfo.o2oStoreId:void 0,shareId:this.getShareId?this.getShareId:void 0};this.$util.gioTrackWithVariable("MB10801",{user_id:localStorage.getItem("ucId")?localStorage.getItem("ucId")+"":"null",member_id:localStorage.getItem("mId")?localStorage.getItem("mId")+"":"null",productId_var:this.productId+""}),this.$util.isHaierApp()?this.$util.uplusReportPageClickEvent({actionCode:"1002",extentInfo:{user_id:this.ucId,member_id:this.mId,productId_var:this.productId}}).then((function(){console.log("加入购物车的商品信息：",r),e.$util.gioTrackWithVariable("add_to_cart",{member_id:e.mId?e.mId+"":"null",productId_var:e.productId?e.productId+"":"null",user_id:e.ucId?e.ucId+"":"null"}),e.addCart(r)})):(gio("track","add_to_cart",{user_id:this.ucId,member_id:this.mId,productId_var:this.productId}),console.log("加入购物车的商品信息：",r),this.addCart(r))}else this.$toast("此商品暂时不能加入购物车")}},fnGoBuy:function(t,e){var o=this;return N(r.a.mark((function i(){var s;return r.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!o.islogining){i.next=2;break}return i.abrupt("return");case 2:if(o.$store.getters.getLoginStatus){i.next=7;break}return o.islogining=!0,o.$store.dispatch("doLogin").then((function(t){400!==t?(o.islogining=!1,o.reload()):o.islogining=!1}))["catch"]((function(){o.islogining=!1})),s=setTimeout((function(){clearTimeout(s),o.islogining=!1}),1e3),i.abrupt("return");case 7:o.$util.gioTrackWithVariable("MB13415",{user_id:localStorage.getItem("ucId")?localStorage.getItem("ucId")+"":"null",member_id:localStorage.getItem("mId")?localStorage.getItem("mId")+"":"null",productId_var:o.productId+""}),o.debouncedBuyAction(t,e);case 9:case"end":return i.stop()}}),i)})))()},doBuyAction:function(t,e){var o=this;return N(r.a.mark((function e(){var i,s,n,a,c;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!o.islogining){e.next=2;break}return e.abrupt("return");case 2:if(o.verifyTagCheckStatus()){e.next=9;break}if(o.$refs.goodsInfo.showInfoFlag){e.next=8;break}return o.$refs.goodsInfo.showInfoFlag=!0,e.abrupt("return");case 8:return e.abrupt("return",o.$toast("规格选择不完整"));case 9:if(gio("track","BuyNow",{storeId:o.o2oStoreId,productName:o.shopInfo.data.products.productName,productId:o.shopInfo.data.products.productId+"",productEncode:o.shopInfo.data.products.sku}),o.$store.getters.getLoginStatus){e.next=14;break}return o.islogining=!0,o.$store.dispatch("doLogin").then((function(t){400!==t?(o.islogining=!1,o.reload()):o.islogining=!1}))["catch"]((function(){o.islogining=!1})),e.abrupt("return");case 14:if(console.log(o.productNumber),0!==o.productNumber){e.next=17;break}return e.abrupt("return");case 17:i=o.$route.query,s={name:o.hasSubProduct&&o.attrValueNames||null,sku:o.hasSubProduct&&o.skku||null,proId:o.productId,num:o.productNumber,visitStore:i.exclusiveId?o.getShareId:o.visitStore,exclusivePriceId:i.exclusiveId||"",caseId:i.caseId||""},i.sendOrderType&&(s.sendOrderType=i.sendOrderType),n=[s],o.setExclusiveStatus(o.isExclusive),a=[],o.voucherList.length&&o.voucherList.forEach((function(t){"sheng"===t.marking&&"1"===t.displayType&&a.push({activityCode:t.activityCode,couponTemplateCode:t.couponTemplateCode})})),c={_proList:n,ac:t,isExclusive:o.isExclusive,originSource:o.originSource,groupId:o.chooseGroupId||0,comId:i.comId},i.directSaleType&&(c.directSaleType=i.directSaleType),i.sceneCode&&(c.sceneCode=i.sceneCode),i.fkcode&&(c.fkcode=i.fkcode),i.sceneVersion&&(c.sceneVersion=i.sceneVersion),o.baseInfo.showCoupons&&(c.coupon=a),o.$router.push({name:"create",query:c});case 31:case"end":return e.stop()}}),e)})))()},checkStockForNum:function(t){var e=this,o=this.getCheckStockParams();return new Promise((function(i,s){Object(C["o"])(o).then((function(o){o.success?o.data&&o.data.hasStock||"5"===t?i():e.$toast("库存不足"):e.$toast(o.message)}))}))},getCheckStockParams:function(){var t,e=this.sgStockInfo.stockType,o=this.skku,i=this.productId,s=this.location.districtId,n=this.storeInfo?this.storeInfo.o2oStoreId:null,r=this.storeInfo?this.storeInfo.storeCode:null,a=this.location.townshipId,c=this.$store.getters.mId,u=this.productNumber;return t="WA"===e?{stockType:e,productId:i,number:u,memberId:c,streetId:a,regionId:s}:"O2O"===e?{stockType:e,productId:i,number:u,memberId:c,streetId:a,o2oStoreId:n,storeCode:r}:{stockType:e,productId:i,number:u,memberId:c,streetId:a},t.sku=o||null,t},createOrder:function(t,e){var o=this;return new Promise((function(i,s){var n={ac:e||"1",ch:o.$util.isHaierApp()?61:60,proList:t,shareId:o.getShareId||"",street:o.location.townshipId,isOrderRight:"1",v:2};o.baseInfo.showCoupons&&(n.coupon=o.voucherList.length&&o.voucherList.map((function(t){if("sheng"===t.marking&&"1"===t.displayType)return{activityCode:t.activityCode,couponTemplateCode:t.couponTemplateCode}}))),Object(C["v"])(n).then((function(t){i(t)}))}))},fnCollect:function(){var t=this;if(!this.islogining)return this.$store.getters.getLoginStatus?void(0===this.isCollected?this.productCollection():1===this.isCollected&&this.cancelProductCollection()):(this.islogining=!0,void this.$store.dispatch("doLogin").then((function(e){400!==e?(t.islogining=!1,t.reload()):t.islogining=!1}))["catch"]((function(){t.islogining=!1})))},productCollection:function(){var t=this,e=function(){var e=t.swiperImgs.length>1?t.swiperImgs[1]:"";return"object"===L(e)?e["img"]:e},o=this.$route.query,i=this.storeInfo?this.storeInfo.o2oStoreId:void 0;Object(C["sb"])({PCGName:this.location.region,imageUrl:"object"===L(this.swiperImgs[0])?e():this.swiperImgs[0],productId:this.productId,productName:this.products.productName,sku:this.products.sku,shareId:this.getShareId?this.getShareId:void 0,visitStore:this.visitStore,comId:o.comId,undertakeStore:i,directSaleType:o.directSaleType}).then((function(e){e.success?e.data?(t.isCollected=1,t.$toast("收藏成功"),t.$util.gioTrackWithVariable("MB10802",{user_id:t.ucId?t.ucId+"":"null",member_id:t.mId?t.mId+"":"null",productId_var:t.productId+"",productName_var:t.products.productName||"null"})):t.isCollected=0:t.$toast(e.message)}))},cancelProductCollection:function(){var t=this;Object(C["g"])({sku:this.products.sku}).then((function(e){e.success?e.data?(t.isCollected=0,t.$toast("取消收藏成功"),t.$util.gioTrackWithVariable("MB13408",{productId_var:t.productId+""})):t.isCollected=1:t.$toast(e.message)}))},fnArrivalNotice:function(){this.notSaleStatus||(this.dialogShow=!this.dialogShow,this.mobile=localStorage.getItem("notifycationMobile")||"",this.dialogShow&&this.$util.gioTrackWithVariable("MB13410",{user_id:localStorage.getItem("ucId")?localStorage.getItem("ucId")+"":"null",member_id:localStorage.getItem("mId")?localStorage.getItem("mId")+"":"null",productId_var:this.productId+""}))},toggleShowInfo:function(t){this.chooseGroupId=t,this.activityInfo&&81===this.activityInfo.activityType?this.openAttrFromToggle(8):(console.log(this.activityInfo),this.sgStockInfo&&!this.sgStockInfo.hasStock?this.activityInfo&&100===this.activityInfo.activityType&&this.sgStockInfo.bookable?1!==this.activityInfo.deposit?this.openAttrFromToggle(5):this.openAttrFromToggle(7):this.sgStockInfo.bookable||this.parentBookable?this.openAttrFromToggle(3):this.sgStockInfo.bookable||(this.notSaleStatus?this.activityInfo&&100===this.activityInfo.activityType?1!==this.activityInfo.deposit?this.openAttrFromToggle(5):this.openAttrFromToggle(7):this.openAttrFromToggle(6):this.openAttrFromToggle(2)):this.activityInfo&&100===this.activityInfo.activityType?1!==this.activityInfo.deposit?this.openAttrFromToggle(5):this.openAttrFromToggle(7):this.activityInfo&&75===this.activityInfo.activityType?t?(this.openFrom=2,this.openAttrFromToggle(10)):this.openAttrFromToggle(11):this.baseInfo.supportCart?this.openAttrFromToggle(6):this.openAttrFromToggle(1))},refreshBtnType:function(){this.activityInfo&&81===this.activityInfo.activityType?this.btnType=8:this.sgStockInfo&&!this.sgStockInfo.hasStock?this.activityInfo&&100===this.activityInfo.activityType&&this.sgStockInfo.bookable?1!==this.activityInfo.deposit?this.btnType=5:this.btnType=7:this.sgStockInfo.bookable||this.parentBookable?this.btnType=3:this.sgStockInfo.bookable||(this.notSaleStatus?this.activityInfo&&100===this.activityInfo.activityType?1!==this.activityInfo.deposit?this.btnType=5:this.btnType=7:this.btnType=6:this.btnType=2):this.activityInfo&&100===this.activityInfo.activityType?1!==this.activityInfo.deposit?this.btnType=5:this.btnType=7:this.activityInfo&&75===this.activityInfo.activityType?1===this.openFrom?this.btnType=11:9===this.lastSelectRealBtn?this.btnType=9:this.btnType=10:this.baseInfo.supportCart?this.btnType=6:this.btnType=1},fnNotice:function(){var t=this;return N(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(/^1([3456789][0-9]|4[01356789]|66|9[89])\d{8}$/.test(t.mobile)){e.next=3;break}return t.$toast("手机号格式不正确"),e.abrupt("return");case 3:return localStorage.setItem("notifycationMobile",t.mobile),e.next=6,t.checkOnly();case 6:t.insertNotice();case 7:case"end":return e.stop()}}),e)})))()},checkOnly:function(){var t=this;return new Promise((function(e,o){Object(C["m"])({productId:t.productId,mobile:t.mobile,provinceId:t.location.provinceId,cityId:t.location.cityId,areaId:t.location.districtId,streetId:t.location.townshipId}).then((function(o){o.success?0===o.result?e():t.$toast("该手机号在该地区已经申请到货通知，不能重复申请！"):t.$toast(o.message)}))}))},insertNotice:function(){var t=this;Object(C["lb"])({productId:this.productId,mobile:this.mobile,provinceId:this.location.provinceId,cityId:this.location.cityId,areaId:this.location.districtId,streetId:this.location.townshipId,sku:this.skku?this.skku:this.products.sku,productName:this.products.productName,provinceName:this.location.province,cityName:this.location.city,areaName:this.location.district,o2oStoreId:this.storeInfo?this.storeInfo.o2oStoreId:null}).then((function(e){e.success?(t.$util.gioTrackWithVariable("MB13411",{user_id:localStorage.getItem("ucId")?localStorage.getItem("ucId")+"":"null",member_id:localStorage.getItem("mId")?localStorage.getItem("mId")+"":"null",productId_var:t.productId+""}),t.$toast("您的资料已经提交，到货后我们会第一时间通知您！")):t.$toast(e.message)}))},fnOpenCustomerService:function(){var t=this;if(!this.islogining){var e=this.$route.query.show_live;if(!this.$store.getters.getLoginStatus)return this.islogining=!0,void this.$store.dispatch("doLogin").then((function(o){400!==o?(t.islogining=!1,+e?it.initDeviceReady().then((function(){it.upLiveModule.closeFloatWindow().then((function(e){t.toCustomerService()}))["catch"]((function(){t.toCustomerService()}))})):t.toCustomerService()):t.islogining=!1}))["catch"]((function(){t.islogining=!1}));+e?it.initDeviceReady().then((function(){it.upLiveModule.closeFloatWindow().then((function(e){t.toCustomerService()}))["catch"]((function(){t.toCustomerService()}))})):this.toCustomerService()}},toCustomerService:function(){this.$util.gioTrackWithVariable("MB13412",{user_id:localStorage.getItem("ucId")?localStorage.getItem("ucId")+"":"null",member_id:localStorage.getItem("mId")?localStorage.getItem("mId")+"":"null",productId_var:this.productId+""}),this.$store.getters.getLoginStatus&&this.$store.dispatch("goPageByType",{type:29,params:{accountId:this.storeInfo&&this.storeInfo.storeCode?this.storeInfo.storeCode:"",sceneId:"cj091"}})},isCanGetCustomer:function(t){return new Promise((function(e,o){var i={storeCode:t};k["a"].getCustomer(i).then((function(t){t.data.success&&e(t.data.result)}))}))},fnOpenCart:function(){var t=this;if(!this.islogining){if(this.$util.gioTrackWithVariable("MB15626"),!this.$store.getters.getLoginStatus)return this.islogining=!0,void this.$store.dispatch("doLogin").then((function(e){400!==e?(t.islogining=!1,t.reload()):t.islogining=!1}))["catch"]((function(){t.islogining=!1}));var e={};this.originSource&&(e.originSource=this.originSource),this.$router.push({path:"/cart",query:e})}},fnScrollTo:function(t,e){var o=this;e.preventDefault(),this.cancelScroll=!0,this.activeAnchor=t,this.showComment=!0,Promise.all([Y(),X(),z()]).then((function(){o.$nextTick((function(){o.$refs[t].scrollIntoView({block:"start"})}))})),setTimeout((function(){o.cancelScroll=!1}),100)},fnBack:function(){w["a"].isHaierApp()&&(this.gioMB13407(),st=0),this.$store.dispatch("doHistoryBack")},gioMB13407:function(){this.$util.gioTrackWithVariable("MB13407",{productId_var:this.productId+"",page_stay_time:Date.now()-st+""||"null"})},openPictureShare:function(){this.loadPictureShare=!0,this.showPictureShare=!0},openShareModal:function(){this.loadShareModal=!0,this.showShareModal=!0},shareLinkFactory:function(){var t="".concat(location.origin).concat(location.pathname),e=M(M({},this.getCleanQuerys()),{},{productId:this.productId});this.mId&&(e.storeId=this.mId,e.shareId=this.mId),this.storeInfo&&this.storeInfo.mdCode&&(e.mdCode=this.storeInfo.mdCode);var o=w["a"].parseParamsToQuery(e);return t+o},copyLink:function(){var t=this,e=this.shareLinkFactory(),o=document.createElement("a"),i=new c.a(o,{text:function(t){return e}});i.on("success",(function(){t.$toast("复制链接成功")})),i.on("error",(function(){t.$toast("复制链接失败")})),o.click()},getShareImage:function(){return this.swiperImgs.find((function(t){return"string"===typeof t}))},defaultShareFn:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$util.gioTrackWithVariable("MB13409",{user_id:localStorage.getItem("ucId")?localStorage.getItem("ucId")+"":"null",member_id:localStorage.getItem("mId")?localStorage.getItem("mId")+"":"null",productId_var:this.productId+""});var e=this.shareLinkFactory();this.$util.inAppShare(M({title:this.products.productFullName,desc:this.products.productTitle,url:e,thumImage:this.getShareImage()},t)).then((function(t){return console.log(t)})),this.afterShare()},afterShare:function(){var t=this,e=this;w["a"].isHaierApp()&&(w["a"].smMsgSdk(),this.$store.state.isShareTask&&it.initDeviceReady().then((function(){it.upAppinfoModule.getAppInfo().then((function(o){var i=o.retData;i.appKey&&w["a"].dealSmDeviceId().then((function(o){P["a"].post(h["a"].getNotifyTaskFinished,{accountToken:t.$store.state.sdToken,clientId:i.clientId,appVersion:i.appVersion,appKey:i.appKey,appId:i.appId,accessToken:t.$store.state.sdToken,taskCode:"TASK1042",deviceId:o,userId:localStorage.getItem("ucId"),taskSource:"VIP_CENTER"}).then((function(){e.$store.commit("setIsShareTask",!1),t.$reviewTimetoast({type:2,productId:t.$route.query.productId})}))}))["catch"]((function(){}))}))})))},productQrCode:function(){var t=this,e={};this.skku&&(e.sku=this.skku),this.storeId&&(e.storeId=this.storeId),Object(C["tb"])(M({productId:this.productId,channelId:3,spu:this.products.sku,streetId:this.location.townshipId},e)).then((function(e){e.success&&(e.data.productName&&e.data.productName.length>48&&(e.data.productName="".concat(e.data.productName.slice(0,48),"...")),t.shareGoodsInfo=M({},e.data))}))},fnReserve:function(){var t=this;return N(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.notSaleStatus){e.next=2;break}return e.abrupt("return");case 2:if(!t.islogining){e.next=4;break}return e.abrupt("return");case 4:if(t.$store.getters.getLoginStatus){e.next=8;break}return t.islogining=!0,t.$store.dispatch("doLogin").then((function(e){400!==e?(t.islogining=!1,t.reload()):t.islogining=!1}))["catch"]((function(){t.islogining=!1})),e.abrupt("return");case 8:return e.next=10,t.checkMemberReserve();case 10:t.reservationShowFlag=!0;case 11:case"end":return e.stop()}}),e)})))()},checkMemberReserve:function(){var t=this;return new Promise((function(e,o){Object(C["l"])({acReserveId:t.activityInfo.activityId,productId:t.productId}).then((function(o){o.success&&o.data?e():t.$toast(o.message)}))}))},sendSmsCaptcha:function(t){var e=this;Object(C["Fb"])({mobile:t}).then((function(t){t.success||e.$toast(t.message)}))},reserve:function(t,e){var o=this;Object(C["Db"])({acReserveId:this.activityInfo.activityId,productId:this.productId,mobile:t,mobileCode:e,provinceId:this.location.provinceId,cityId:this.location.cityId,districtId:this.location.districtId,streetId:this.location.townshipId}).then((function(t){t.success&&t.data?o.$toast("商品预约成功，可在个人中心-我的预约中查看预约商品"):o.$toast(t.message)}))},fnChangeReservationShowFlag:function(){this.reservationShowFlag=!this.reservationShowFlag},commentBack:function(){this.commentHeader=!1},toggleCommentHeader:function(){this.commentHeader=!this.commentHeader},swiperChange:function(t){this.curSwiper=t+1},sceenChange:function(t){this.isAllSceenSwiper=t},resetBtnType:function(){},setStorageToShare:function(){var t=this,e={mdCode:this.storeInfo&&this.storeInfo.mdCode?this.storeInfo.mdCode:"",actualPrice:this.priceInfo.actualPrice,spuList:this.spuInfo?this.spuInfo.spuSpecsList[0].spuSkuList.map((function(t){return{productId:t.productId,skuShortName:t.skuShortName}})):[]},o=e.spuList.findIndex((function(e){return e.productId===Number(t.productId)}));if(-1===o)e.spuList.unshift({productId:Number(this.productId),productFullName:this.products.productFullName});else{var i=e.spuList.splice(o,1)[0];i.productFullName=this.products.productFullName,e.spuList.unshift(i)}var s=JSON.stringify(e);localStorage.setItem("shareMessage",s)}})},rt=nt,at=(o("e973"),o("a2c8"),Object(b["a"])(rt,i,s,!1,null,"1f068d0a",null));e["default"]=at.exports}},0,["chunk-3aea2a64","chunk-8efa73ec","lazy-goods-detail","chunk-be445e7e","lazy-comment-info","chunk-61859a35","lazy-good-info","lazy-shop-info"]]);
//# sourceMappingURL=goodsDetail.71be57d7.js.map