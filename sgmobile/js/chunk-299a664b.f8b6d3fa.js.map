{"version":3,"sources":["webpack:///./src/components/vertifyComp/index.vue?0426","webpack:///src/components/vertifyComp/index.vue","webpack:///./src/components/vertifyComp/index.vue?db2c","webpack:///./src/components/vertifyComp/index.vue","webpack:///./src/views/mine/ecard/components/card.vue?e372","webpack:///src/views/mine/ecard/components/card.vue","webpack:///./src/views/mine/ecard/components/card.vue?a163","webpack:///./src/views/mine/ecard/components/card.vue","webpack:///./src/views/mine/ecard/bind.vue?cba4","webpack:///src/views/mine/ecard/bind.vue","webpack:///./src/views/mine/ecard/bind.vue?0678","webpack:///./src/views/mine/ecard/bind.vue","webpack:///./src/views/mine/ecard/bind.vue?1bfe","webpack:///./src/views/mine/ecard/components/card.vue?1481","webpack:///./src/components/vertifyComp/index.vue?1709"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","doClose","_v","class","isRefreshing","attrs","$event","stopPropagation","doRefresh","apply","arguments","_l","item","index","key","curSelected","doVertify","_e","mapJson","vertifySelected","staticRenderFns","name","data","vertifyArr","sort","Math","ceil","random","vertifySuccess","0","1","2","3","methods","$emit","clearTimeout","t","component","cardInfo","cardStatus","size","doSelect","_s","baseName","amount","isBind","limitProd","canSelect","cardNo","getDetail","_f","expireDate","isSelected","balance","gotoUse","switchChange","directives","rawName","value","expression","productId","defaultImageUrl","switchShow","props","type","Object","default","String","Boolean","isTailOrder","limitList","$router","push","$http","post","url","smartEcardId","smartEcardBaseInfoId","baseInfoId","console","log","res","result","productList","domProps","target","composing","ecardCode","inputVal","toBind","vertifyClose","cancel","sure","components","Ecard","VertifyComp","vertifyShow","bindShow","test","replace","substr","getBindCardInfo","baseURL","config","success","message","errMessage","theme","allowHtml","confirmButtonColor","confirmButtonText","toUpperCase","$toast","title"],"mappings":"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","file":"js/chunk-299a664b.f8b6d3fa.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"dialog-mask\",on:{\"click\":_vm.doClose}},[_c('div',{staticClass:\"dialog\"},[_c('div',{staticClass:\"dialog-title\"},[_c('h4',[_vm._v(\"安全验证\")]),_c('a',{staticClass:\"dialog-close\",class:{'refreshing': _vm.isRefreshing},attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.doRefresh.apply(null, arguments)}}},[_c('img',{attrs:{\"src\":\"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/vertify/refresh.png\",\"alt\":\"\"}})])]),_c('div',{staticClass:\"dialog-body\"},[_vm._l((_vm.vertifyArr),function(item,index){return _c('div',{key:item,staticClass:\"vertify-item\",class:[(\"vertify-pos\" + index), {'vertify-success': _vm.curSelected==item}],on:{\"click\":function($event){$event.stopPropagation();return _vm.doVertify(item)}}},[(_vm.curSelected==item)?_c('div',[(_vm.vertifySuccess)?_c('img',{attrs:{\"src\":\"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/cart/icon-success.png\",\"alt\":\"\"}}):_c('img',{attrs:{\"src\":\"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/cart/icon-fail.png\",\"alt\":\"\"}})]):_vm._e(),_c('img',{attrs:{\"src\":(\"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/vertify/\" + (_vm.mapJson[item]) + \".png\"),\"alt\":\"\"}})])}),_c('img',{staticClass:\"vertify-bg\",attrs:{\"src\":\"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/vertify/vertiify_bg.png\",\"alt\":\"\"}})],2),_c('div',{staticClass:\"dialog-footer\"},[_c('p',[_vm._v(\"请点击上图中的：\")]),_c('div',[_c('img',{attrs:{\"src\":(\"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/vertify/\" + (_vm.mapJson[_vm.vertifySelected]) + \".png\"),\"alt\":\"\"}})])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"dialog-mask\" @click=\"doClose\">\n    <div class=\"dialog\">\n      <div class=\"dialog-title\">\n        <h4>安全验证</h4>\n        <a href=\"javascript:;\" class=\"dialog-close\" :class=\"{'refreshing': isRefreshing}\" @click.stop=\"doRefresh\">\n          <img src=\"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/vertify/refresh.png\" alt=\"\">\n        </a>\n      </div>\n      <div class=\"dialog-body\">\n        <div class=\"vertify-item\" :class=\"[`vertify-pos${index}`, {'vertify-success': curSelected==item}]\" v-for=\"(item,index) in vertifyArr\" :key=\"item\" @click.stop=\"doVertify(item)\">\n          <div v-if=\"curSelected==item\">\n            <img v-if=\"vertifySuccess\" src=\"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/cart/icon-success.png\" alt=\"\">\n            <img v-else src=\"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/cart/icon-fail.png\" alt=\"\">\n          </div>\n          <img :src=\"`https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/vertify/${mapJson[item]}.png`\" alt=\"\">\n        </div>\n        <img class=\"vertify-bg\" src=\"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/vertify/vertiify_bg.png\" alt=\"\">\n      </div>\n      <div class=\"dialog-footer\">\n        <p>请点击上图中的：</p>\n        <div>\n          <img :src=\"`https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/vertify/${mapJson[vertifySelected]}.png`\" alt=\"\">\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  name: 'VertifyComp',\n  data() {\n    return {\n      isRefreshing: false,\n      vertifyArr: [0, 1, 2, 3].sort(() => Math.random() - 0.5),\n      curSelected: -1,\n      vertifySelected: Math.ceil(Math.random() * 3),\n      vertifySuccess: false,\n      mapJson: {\n        0: 'dog',\n        1: 'lu',\n        2: 'house',\n        3: 'bird'\n      }\n    }\n  },\n  methods: {\n    doVertify(item) {\n      this.curSelected = item\n      if (item === this.vertifySelected) {\n        this.vertifySuccess = true\n        this.$emit('vertifySuccess')\n      } else {\n        this.vertifySuccess = false\n        this.doRefresh()\n      }\n    },\n    doClose() {\n      this.$emit('vertifyClose')\n    },\n    doRefresh() {\n      this.isRefreshing = true\n      this.vertifySelected = Math.ceil(Math.random() * 3)\n      let t = setTimeout(() => {\n        this.vertifySuccess = false\n        this.curSelected = -1\n        clearTimeout(t)\n        this.vertifyArr = [0, 1, 2, 3].sort(() => Math.random() - 0.5)\n        this.isRefreshing = false\n      }, 500)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dialog-mask{\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba($color: #000, $alpha: 0.7);\n}\n\n.dialog{\n  width: 6.2rem;\n  background: #fff;\n  border-radius: .24rem;\n  padding: .3rem .2rem;\n  padding-top: 0;\n  box-sizing: border-box;\n}\n.dialog-title{\n  position: relative;\n  height: .99rem;\n  h4{\n    text-align: center;\n    line-height: .99rem;\n    font-size: .32rem;\n    color: #333;\n  }\n  a{\n    position: absolute;\n    top: .26rem;\n    right: .28rem;\n    width: .42rem;\n    height: .44rem;\n    img{\n      width: 100%;\n      height: 100%;\n    }\n  }\n}\n\n.dialog-body{\n  position: relative;\n  width: 5.8rem;\n  height: 3.58rem;\n}\n\n.vertify-item{\n  position: absolute;\n  width: .8rem;\n  max-height: .92rem;\n  z-index: 5;\n  > img{\n    width: 100%;\n    height: 100%;\n  }\n  > div{\n    display: none;\n  }\n}\n\n.vertify-success{\n  > div{\n    display: block;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translateX(-50%) translateY(-50%);\n    background: rgba($color: #000, $alpha: 0.7);\n    z-index: 10;\n    img{\n      width: .8rem;\n      height: .8rem;\n    }\n  }\n}\n\n.vertify-pos0{\n  top: .4rem;\n  left: .84rem;\n}\n.vertify-pos1{\n  top: .34rem;\n  right: 1rem;\n}\n.vertify-pos2{\n  bottom: .86rem;\n  left: 1.48rem;\n}\n.vertify-pos3{\n  bottom: .84rem;\n  right: 1.34rem;\n}\n\n.vertify-bg{\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 1;\n  width: 100%;\n}\n\n.dialog-footer{\n  height: 1.2rem;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  p{\n    text-indent: .2rem;\n    font-size: .32rem;\n    color: #333;\n  }\n  div{\n    display: inline-flex;\n    justify-content: center;\n    align-items: center;\n    width: 1.96rem;\n    height: .64rem;\n    img{\n      max-width: .5rem;\n    }\n  }\n}\n\n.refreshing{\n  img{\n    transform: rotate(360deg);\n    transition: transform .5s linear;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=42962527&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=42962527&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"42962527\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ecard-item-warp\"},[_c('div',{staticClass:\"ecard-item\",class:{'gray': _vm.cardInfo.cardStatus != 1,'ecard-normal': _vm.size == 'normal', 'ecard-small': _vm.size == 'small'},on:{\"click\":_vm.doSelect}},[_c('div',{staticClass:\"ecard-header\"},[_c('div',{staticClass:\"ecard-header-warp\"},[_c('div',{staticClass:\"ecard-header-fl\"},[_c('img',{attrs:{\"src\":\"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/mine/ecard/ecard_logo.png\",\"alt\":\"\"}}),_c('div',[_c('h4',[_vm._v(_vm._s(_vm.cardInfo.baseName || '智家E卡'))]),_c('p',[_vm._v(\"面值：\"+_vm._s(_vm.cardInfo.amount)+\"元\")])])]),_c('div',{staticClass:\"ecard-header-fr\"},[(_vm.isBind || _vm.limitProd || _vm.canSelect)?_c('h4',[_vm._v(\"卡号：\"+_vm._s(_vm.cardInfo.cardNo))]):_c('h4',{on:{\"click\":function($event){$event.stopPropagation();return _vm.getDetail(_vm.cardInfo)}}},[_vm._v(\"消费记录\")]),_c('p',[_vm._v(_vm._s(_vm._f(\"formatDateYMD\")(_vm.cardInfo.expireDate))+\" 到期\")])])]),_c('img',{staticClass:\"ecard-header-bg\",attrs:{\"src\":\"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/mine/ecard/ecard_header.png\",\"alt\":\"\"}})]),_c('div',{staticClass:\"ecard-body\"},[(_vm.canSelect && _vm.cardInfo.cardStatus == 1)?_c('div',{staticClass:\"ecard-select\",class:{'active': _vm.cardInfo.isSelected}},[_c('i')]):_vm._e(),_c('div',{staticClass:\"ecard-body-warp\"},[_c('p',[_vm._v(\"余额 \"),_c('span',[_vm._v(\"¥\")]),_c('strong',[_vm._v(_vm._s(_vm._f(\"formatPriceInt\")(_vm.cardInfo.balance)))]),_c('small',[_vm._v(_vm._s(_vm._f(\"formatPriceFloat\")(_vm.cardInfo.balance)))])]),(!_vm.isBind && _vm.cardInfo.cardStatus == 1)?_c('a',{staticClass:\"ecard-usebtn\",attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.gotoUse.apply(null, arguments)}}},[_vm._v(\"适用商品\")]):_vm._e()]),_c('img',{staticClass:\"ecard-img-footer\",attrs:{\"src\":\"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/mine/ecard/ecard_footer.png\",\"alt\":\"\"}}),(_vm.cardInfo.cardStatus == 2)?_c('img',{staticClass:\"ecard-img-use\",attrs:{\"src\":\"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/mine/ecard/used.png\",\"alt\":\"\"}}):_vm._e(),(_vm.cardInfo.cardStatus == 3)?_c('img',{staticClass:\"ecard-img-use\",attrs:{\"src\":\"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/mine/ecard/ecard_guoqi.png\",\"alt\":\"\"}}):_vm._e()])]),(_vm.limitProd)?_c('div',{staticClass:\"ecard-limit-list\",on:{\"click\":_vm.switchChange}},[_c('p',[_vm._v(\"以下商品不符合该卡使用条件\")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.switchShow),expression:\"switchShow\"}],staticClass:\"limit-imgs\"},[_c('div',_vm._l((_vm.limitList),function(item){return _c('img',{key:item.productId,attrs:{\"src\":item.defaultImageUrl,\"alt\":\"\"}})}),0)]),_c('a',{staticClass:\"open-btn\",class:{'active': _vm.switchShow},attrs:{\"href\":\"javascript:;\"}})]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div class=\"ecard-item-warp\">\n  <div class=\"ecard-item\" :class=\"{'gray': cardInfo.cardStatus != 1,'ecard-normal': size == 'normal', 'ecard-small': size == 'small'}\" @click=\"doSelect\">\n    <div class=\"ecard-header\">\n      <div class=\"ecard-header-warp\">\n        <div class=\"ecard-header-fl\">\n          <img src=\"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/mine/ecard/ecard_logo.png\" alt=\"\">\n          <div>\n            <h4>{{cardInfo.baseName || '智家E卡'}}</h4>\n            <p>面值：{{cardInfo.amount}}元</p>\n          </div>\n        </div>\n        <div class=\"ecard-header-fr\">\n          <h4 v-if=\"isBind || limitProd || canSelect\">卡号：{{cardInfo.cardNo}}</h4>\n          <h4 v-else @click.stop=\"getDetail(cardInfo)\">消费记录</h4>\n          <p>{{cardInfo.expireDate | formatDateYMD}} 到期</p>\n        </div>\n      </div>\n      <img class=\"ecard-header-bg\" src=\"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/mine/ecard/ecard_header.png\" alt=\"\">\n    </div>\n    <div class=\"ecard-body\">\n      <div v-if=\"canSelect && cardInfo.cardStatus == 1\" class=\"ecard-select\" :class=\"{'active': cardInfo.isSelected}\"><i></i></div>\n      <div class=\"ecard-body-warp\">\n        <p>余额 <span>¥</span><strong>{{cardInfo.balance | formatPriceInt}}</strong><small>{{cardInfo.balance | formatPriceFloat}}</small></p>\n        <a href=\"javascript:;\" v-if=\"!isBind && cardInfo.cardStatus == 1\" class=\"ecard-usebtn\" @click.stop=\"gotoUse\">适用商品</a>\n      </div>\n      <img class=\"ecard-img-footer\" src=\"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/mine/ecard/ecard_footer.png\" alt=\"\">\n      <img class=\"ecard-img-use\" v-if=\"cardInfo.cardStatus == 2\" src=\"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/mine/ecard/used.png\" alt=\"\">\n      <img class=\"ecard-img-use\" v-if=\"cardInfo.cardStatus == 3\" src=\"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/mine/ecard/ecard_guoqi.png\" alt=\"\">\n    </div>\n  </div>\n  <div class=\"ecard-limit-list\" @click=\"switchChange\" v-if=\"limitProd\">\n    <p>以下商品不符合该卡使用条件</p>\n    <div class=\"limit-imgs\" v-show=\"switchShow\">\n      <div>\n        <img v-for=\"item in limitList\" :key=\"item.productId\" :src=\"item.defaultImageUrl\" alt=\"\">\n      </div>\n    </div>\n    <a href=\"javascript:;\" class=\"open-btn\" :class=\"{'active': switchShow}\"></a>\n  </div>\n</div>\n</template>\n\n<script>\nimport Url from '@/http/url'\n\nexport default {\n  props: {\n    cardInfo: {\n      type: Object,\n      default: () => {}\n    },\n    size: {\n      type: String,\n      default: () => 'normal'\n    },\n    canSelect: {\n      type: Boolean,\n      default: false\n    },\n    isBind: {\n      type: Boolean,\n      default: false\n    },\n    limitProd: {\n      type: Boolean,\n      default: false\n    },\n    isTailOrder: {\n      type: String,\n      default: () => '',\n    }\n    // enableSelect: {\n    //   type: Boolean,\n    //   default: false\n    // }\n  },\n  data() {\n    return {\n      limitList: [],\n      switchShow: false\n    }\n  },\n  methods: {\n    getDetail(info) {\n      this.$router.push(`/ecarddetail/${info.cardNo}`)\n    },\n    doSelect() {\n      // if (!this.canSelect || this.cardInfo.cardStatus === 2) return;\n      // if (this.enableSelect) {\n      //   this.cardInfo.isSelected = !this.cardInfo.isSelected\n      // } else {\n      //   if (!this.cardInfo.isSelected) {\n      //     this.$toast('目前订单中已没有可用于充抵的金额')\n      //   }\n      //   this.cardInfo.isSelected = false\n      // }\n      if (this.canSelect) {\n        this.$emit('doSelect', this.cardInfo)\n      }\n    },\n    gotoUse() {\n      this.$router.push(`/ecardUseProd/${this.cardInfo.baseInfoId}?readonly=${this.limitProd ? 1 : 0}`)\n    },\n\n    switchChange() {\n      let url = this.isTailOrder ? Url.getUnSupportProductsForTailOrder : Url.getUnSupportProductsForOrder\n      if (!this.switchShow) {\n        this.$http.post(url, {\n          smartEcardId: this.cardInfo.smartEcardId,\n          smartEcardBaseInfoId: this.cardInfo.baseInfoId\n        }).then(res => {\n          console.log(res)\n          let result = res.data\n          if (result.data && result.data.productList) {\n            this.limitList = result.data.productList\n          }\n          this.switchShow = !this.switchShow\n        })\n      } else {\n        this.switchShow = !this.switchShow\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.ecard-item-warp{\n  margin-bottom: .24rem;\n}\n\n.ecard-item{\n  position: relative;\n  width: 7.04rem;\n  height: 3rem;\n  border-radius: .28rem;\n  border: .04rem solid #2878ff;\n  box-sizing: border-box;\n  z-index: 5;\n}\n\n.ecard-small{\n  transform: scale(.85);\n}\n\n.ecard-header{\n  position: relative;\n  height: 1.04rem;\n}\n\n.ecard-header-warp{\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 1.04rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 .2rem;\n  z-index: 2;\n}\n\n.ecard-header-bg{\n  position: absolute;\n  top: -.04rem;\n  left: -.04rem;\n  width: 7.04rem;\n  border-top-left-radius: .26rem;\n  z-index: 1;\n}\n\n.ecard-header-fl{\n  display: flex;\n  color: #fff;\n  img{\n    margin-right: .23rem;\n    width: .58rem;\n    height: .58rem;\n    border-radius: .3rem;\n  }\n  div{\n    h4{\n      max-width: 2.3rem;\n      @include text-overflow(1);\n      font-size: .32rem;\n    }\n    p{\n      font-size: .24rem;\n    }\n  }\n}\n\n.ecard-header-fr{\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  align-items: flex-end;\n  color: #fff;\n  >h4{\n    font-size: .24rem;\n    margin-bottom: 2px;\n  }\n  >p{\n    font-size: .24rem;\n  }\n}\n\n.ecard-body{\n  position: relative;\n  height: 1.9rem;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  background: #fff;\n  border-bottom-right-radius: .26rem;\n  border-bottom-left-radius: .26rem;\n  .ecard-body-warp{\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translateX(-50%) translateY(-50%);\n    text-align: center;\n    z-index: 5;\n  }\n  .ecard-usebtn{\n    margin-top: .1rem;\n    display: inline-flex;\n    justify-content: center;\n    align-items: center;\n    width: 1.36rem;\n    height: .44rem;\n    font-size: .2rem;\n    color: #2878FF;\n    border: 1px solid #2878FF;\n    border-radius: .3rem;\n  }\n  p{\n    color: #2878FF;\n    font-size: .28rem;\n    span{\n      padding: 0 2px;\n    }\n    strong{\n      line-height: .55rem;\n      font-size: .64rem;\n      font-family: PingFangSC, PingFangSC-Regular;\n    }\n    small{\n      font-size: .4rem;\n      font-weight: 600;\n      font-family: PingFangSC, PingFangSC-Regular;\n    }\n  }\n  .ecard-img-footer{\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    width: 5.44rem;\n    height: .83rem;\n  }\n  .ecard-img-use{\n    position: absolute;\n    bottom: .56rem;\n    right: .26rem;\n    width: 1.14rem;\n    height: .92rem;\n  }\n}\n\n.ecard-select{\n  position: absolute;\n  top: 50%;\n  margin-top: -.3rem;\n  right: .26rem;\n  width: .4rem;\n  height: .4rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: 1px solid #999999;\n  border-radius: .4rem;\n  z-index: 10;\n  &.active{\n    border: 1px solid $themeColor;\n    i{\n      display: block;\n      width: .2rem;\n      height: .2rem;\n      background: $themeColor;\n      border-radius: .2rem;\n    }\n  }\n  i{\n    display: none;\n  }\n}\n\n.gray {\n  @include gray-disable;\n}\n\n.ecard-limit-list{\n  position: relative;\n  min-height: .6rem;\n  padding-top: .2rem;\n  margin-top: -.2rem;\n  background: #F5F5F5;\n  border-bottom-left-radius: .26rem;\n  border-bottom-right-radius: .26rem;\n  z-index: 2;\n  > p{\n    padding: .2rem .12rem .15rem;\n    font-size: .2rem;\n    color: #333;\n  }\n}\n\n.limit-imgs{\n  height: .84rem;\n  padding: 0 .12rem .5rem;\n  div{\n    height: 1rem;\n    overflow: hidden;\n    overflow-x: auto;\n    white-space: nowrap;\n    -webkit-overflow-scrolling: touch;\n    img{\n      display: inline-block;\n      margin-right: .14rem;\n      width: .84rem;\n      height: .84rem;\n      vertical-align: middle;\n    }\n  }\n}\n.open-btn{\n  position: absolute;\n  left: 50%;\n  bottom: .2rem;\n  margin-left: -.13rem;\n  display: block;\n  width: .26rem;\n  height: .12rem;\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAMCAYAAAB8xa1IAAAAAXNSR0IArs4c6QAAAetJREFUOE+tkrGLE0EUxr83E1CCeCCIpV51hSBcYyH4DxwcIuLlMI2w2dkknCjCoWCR5gQ7G3Uzu4kEi7tiUVBLD0lnYW1xkSs1aW4j2Bjd3Scje8cYcjGi28173/d+82Y/UkqtEdG9LMt2C4WC4/v+Dv7D5zjOopTyKYAzADZIKbUH4EQ+eyilXPF9f/tfWK7rrhJRG0Axn7NHnueVmLkD4GheTIjoptb6yd/CGo2G6Pf79wHcAUC5/yszX/t1cF33AhG9AHDKGv641+vd6na7ySxApdQcM28S0ZKl32XmS2EYftinwnGc01LKVwDO7QuJ6M1oNFrpdDpfpsFqtdpCmqYvASxYuu00TUvtdjs2tQOQOdTr9WNJkmwCWLYMO0S0rLX+OAnmed6S2QTAnNV/OBwO16MoSg8uPW7O3/kBgHWrF2dZdrXVar219UqpuyZRAGRe/0ZEntb62fjc3zaym9Vq9XqWZU0AR/L6DwA3giDQSimTJhPdkuX5xMyXwzB8P2nzQ0FGXKlULgohngM4aZk1EZ1n5kWr9g7AlSAI+of9y6mgHDYvhHgN4OzEmxK14ziuR1H0fVpg/ggy5nK5fLxYLG6NRdc85e0gCB7NEv+ZQGaQCclgMNhg5jUAn4UQ1Waz2Z0FYjQ/AWaur0u8HAroAAAAAElFTkSuQmCC) no-repeat;\n  background-size: cover;\n  &.active{\n    transform: rotate(180deg);\n  }\n}\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./card.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./card.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./card.vue?vue&type=template&id=3306e74c&scoped=true&\"\nimport script from \"./card.vue?vue&type=script&lang=js&\"\nexport * from \"./card.vue?vue&type=script&lang=js&\"\nimport style0 from \"./card.vue?vue&type=style&index=0&id=3306e74c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3306e74c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bind-page\"},[_c('h4',[_vm._v(\"请输入礼品卡密码\")]),_c('div',{staticClass:\"bind-input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.ecardCode),expression:\"ecardCode\"}],attrs:{\"type\":\"text\",\"placeholder\":\"卡密码不区分大小写\",\"maxlength\":\"19\"},domProps:{\"value\":(_vm.ecardCode)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.ecardCode=$event.target.value},_vm.inputVal]}})]),_c('a',{staticClass:\"bind-btn\",attrs:{\"href\":\"javascript:;\"},on:{\"click\":_vm.toBind}},[_vm._v(\"绑定\")]),(_vm.vertifyShow)?_c('VertifyComp',{on:{\"vertifySuccess\":_vm.vertifySuccess,\"vertifyClose\":_vm.vertifyClose}}):_vm._e(),(_vm.bindShow)?_c('div',{staticClass:\"dialog-mask\"},[_c('div',{staticClass:\"dialog\"},[_c('h4',[_vm._v(\"绑定到您的智家账号？\")]),_c('p',[_vm._v(\"确认绑定后该卡不得转赠，只可在当前账号使用\")]),_c('Ecard',{attrs:{\"cardInfo\":_vm.cardInfo,\"isBind\":true,\"size\":\"small\"}}),_c('div',{staticClass:\"dialog-btn\"},[_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":_vm.cancel}},[_vm._v(\"再想想\")]),_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":_vm.sure}},[_vm._v(\"确定\")])])],1)]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"bind-page\">\n    <h4>请输入礼品卡密码</h4>\n    <div class=\"bind-input\">\n      <input v-model=\"ecardCode\" type=\"text\" placeholder=\"卡密码不区分大小写\" maxlength=\"19\" @input=\"inputVal\"/>\n    </div>\n    <a class=\"bind-btn\" href=\"javascript:;\" @click=\"toBind\">绑定</a>\n\n    <VertifyComp v-if=\"vertifyShow\" @vertifySuccess=\"vertifySuccess\" @vertifyClose=\"vertifyClose\"/>\n\n    <div class=\"dialog-mask\" v-if=\"bindShow\">\n      <div class=\"dialog\">\n        <h4>绑定到您的智家账号？</h4>\n        <p>确认绑定后该卡不得转赠，只可在当前账号使用</p>\n        <Ecard :cardInfo=\"cardInfo\" :isBind=\"true\" size=\"small\"/>\n        <div class=\"dialog-btn\">\n          <a href=\"javascript:;\" @click=\"cancel\">再想想</a>\n          <a href=\"javascript:;\" @click=\"sure\">确定</a>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Ecard from './components/card'\nimport VertifyComp from '@/components/vertifyComp'\nimport Url from '@/http/url'\nimport config from '@/config'\n\nexport default {\n  name: 'Ecardbind',\n  components: {\n    Ecard,\n    VertifyComp,\n  },\n  data() {\n    return {\n      ecardCode: '',\n      vertifyShow: false,\n      bindShow: false,\n      cardInfo: {},\n    }\n  },\n  methods: {\n    inputVal() {\n      if (/\\S{5}/.test(this.ecardCode)) {\n        this.ecardCode = this.ecardCode.replace(/\\s/g, '').replace(/(.{4})/g, '$1 ').substr(0, 19);\n      }\n    },\n    getBindCardInfo() {\n      let url = Url.getSmartEcardDetails + '?password=' + this.ecardCode.replace(/\\s/g, '')\n      this.$http.post(url, null, {\n        baseURL: config.OHOST\n      }).then(({ data }) => {\n        let result = data;\n        if (result.success) {\n          this.bindShow = true\n          this.cardInfo = result.data\n          this.cardInfo.cardStatus = 1\n        } else {\n          this.$dialog.alert({\n            message: result.errMessage,\n            theme: 'round-button',\n            allowHtml: true,\n            confirmButtonColor: '#2878ff',\n            confirmButtonText: '我知道了'\n          }).then(() => {\n            // on close\n          });\n        }\n        this.vertifyShow = false\n      })\n    },\n    toBind() {\n      if (!this.ecardCode) {\n        this.$toast('请输入礼品卡密码');\n        return\n      }\n      console.log(/^\\w{16}$/.test(this.ecardCode), 'reg')\n      if (!/^\\w{16}$/.test(this.ecardCode.replace(/\\s/g, ''))) {\n        this.$toast('该卡密不存在，请重新输入');\n        return;\n      }\n      this.ecardCode = this.ecardCode.toUpperCase()\n      this.vertifyShow = true\n    },\n    vertifySuccess() {\n      this.getBindCardInfo()\n    },\n    vertifyClose() {\n      this.vertifyShow = false\n    },\n    cancel() {\n      this.bindShow = false;\n    },\n    sure() {\n      let url = Url.getBindEcard + '?password=' + this.ecardCode.replace(/\\s/g, '')\n\n      this.$http.post(url, null, {\n        baseURL: config.OHOST\n      }).then(({ data }) => {\n        let result = data;\n        console.log(result)\n        if (result.success) {\n          this.bindShow = false;\n          this.$dialog.alert({\n            title: '绑卡成功',\n            message: '您可以在确认订单时使用此卡， 以抵扣订单金额',\n            theme: 'round-button',\n            allowHtml: true,\n            confirmButtonColor: '#2878ff',\n            confirmButtonText: '确定'\n          }).then(() => {\n            // on close\n            this.$router.replace('/ecardlist')\n          });\n        } else {\n          this.bindShow = false;\n          this.$dialog.alert({\n            message: result.errMessage,\n            theme: 'round-button',\n            allowHtml: true,\n            confirmButtonColor: '#2878ff',\n            confirmButtonText: '我知道了'\n          }).then(() => {\n            // on close\n          });\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.bind-page{\n  padding: .44rem .32rem;\n  > h4{\n    font-size: .24rem;\n    color: #333;\n  }\n}\n.bind-input{\n  margin: .24rem 0;\n  display: flex;\n  align-items: center;\n  height: 1.1rem;\n  padding: 0 .46rem;\n  border: 1px solid #e5e5e5;\n  border-radius: .6rem;\n  background: #fff;\n  input{\n    width: 100%;\n    font-size: .24rem;\n  }\n}\n\n.bind-btn{\n  height: .88rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: .32rem;\n  background: #2878ff;\n  color: #fff;\n  border-radius: .44rem;\n}\n\n.dialog-mask{\n  position: fixed;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  z-index: 5000;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: rgba(0,0,0,.7);\n}\n\n.dialog{\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  width: 5.86rem;\n  padding: .4rem .5rem;\n  border-radius: .24rem;\n  background: #fff;\n  h4{\n    margin-top: .32rem;\n    font-size: .32rem;\n    color: #333;\n    font-weight: 500;\n  }\n  p{\n    padding: .32rem 0;\n    font-size: .28rem;\n    color: #333;\n    white-space: nowrap;\n  }\n}\n\n.dialog-btn{\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  a{\n    display: inline-flex;\n    width: 2.5rem;\n    height: .64rem;\n    border-radius: .32rem;\n    justify-content: center;\n    align-items: center;\n    font-size: .24rem;\n    box-sizing: border-box;\n    &:first-child{\n      color: #2878FF;\n      background: #fff;\n      border: 1px solid #2878FF;\n    }\n    &:last-child{\n      color: #fff;\n      background: #2878FF;\n      border: 1px solid #2878FF;\n    }\n  }\n}\n\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./bind.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./bind.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./bind.vue?vue&type=template&id=01665f12&scoped=true&\"\nimport script from \"./bind.vue?vue&type=script&lang=js&\"\nexport * from \"./bind.vue?vue&type=script&lang=js&\"\nimport style0 from \"./bind.vue?vue&type=style&index=0&id=01665f12&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"01665f12\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/@sg/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./bind.vue?vue&type=style&index=0&id=01665f12&lang=scss&scoped=true&\"","export * from \"-!../../../../../node_modules/@sg/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./card.vue?vue&type=style&index=0&id=3306e74c&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/@sg/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=42962527&lang=scss&scoped=true&\""],"sourceRoot":""}