(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21e49456"],{"347c":function(e,t,a){},"7b3b":function(e,t,a){"use strict";a("dd35")},"80cc":function(e,t,a){"use strict";a("347c")},a73f:function(e,t,a){"use strict";var i=function(e,t){var a=t._c;return t.props.nums>0?a("div",{staticClass:"m-skeleton",style:{"z-index":t.props.zIndex||0}},[a("div",{style:{background:t.props.bgColor,height:t.props.fheight}}),t._l(t.props.nums-1,(function(e){return a("div",{key:e,style:{background:t.props.bgColor,height:t.props.iheight}})}))],2):t._e()},n=[],r=(a("80cc"),a("2877")),s={},o=Object(r["a"])(s,i,n,!0,null,null,null);t["a"]=o.exports},c264:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.isSkeletonLoading?a("skeleton",{attrs:{nums:4,fheight:"4rem",iheight:"2rem"}}):[a("div",{staticClass:"wrap"},[a("div",{staticClass:"top"},[a("img",{attrs:{src:e.$cdnImageUrl+"/partner/img.png",alt:""}}),a("p",{staticClass:"title1"},[e._v("欢迎加入智家"+e._s(e.isApplyPlatformPartner?"平台":"店铺")+"合伙人")]),a("p",{staticClass:"title2"},[e._v("请确认身份信息")])]),a("div",{staticClass:"middle"},[a("div",{staticClass:"list"},e._l(e.list,(function(t,i){return a("div",{key:i,staticClass:"item"},[a("div",{staticClass:"title"},[e._v(e._s(t.title))]),a("div",{staticClass:"value"},[e._v(e._s(t.value))])])})),0),a("div",{staticClass:"box"},[a("van-checkbox",{attrs:{value:e.checked},on:{click:e.licenseChecked}}),a("span",{staticClass:"text"},[e._v("同意"),a("router-link",{attrs:{to:"/documentInfo?id=1481&title=%E5%B9%B3%E5%8F%B0%E5%90%88%E4%BC%99%E4%BA%BA%E5%8D%8F%E8%AE%AE"}},[e._v("《平台合伙人入驻协议》")])],1)],1)]),a("div",{staticClass:"bottom",on:{click:e.doSubmit}},[e._v("确认")])])]],2)},n=[],r=a("a73f"),s=a("bbc2"),o=a("eb13"),u=a("d354"),c=a("fa7d");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){p(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var f={components:{skeleton:r["a"]},computed:{isApplyPlatformPartner:function(){return!(!this.info||this.info.affiliatedStore)},list:function(){if(c["a"].isIhaierApp())return[{title:"员工号",value:this.employeeNumber||""}];if(!this.info)return[];var e=[{title:"合伙人类型",value:this.info.partnerTypeName||""},{title:"服务网点",value:this.info.serviceNetwork||""},{title:"所在地区",value:this.info.residentAddress?this.info.residentAddress.fullAddress:""}];return this.isApplyPlatformPartner?e.splice(1,0,{title:"员工号",value:this.info.employeeNumber||""}):e.splice(1,0,{title:"上岗证号",value:this.info.employeeNumber||""},{title:"挂靠店铺码",value:this.info.affiliatedStore||""}),e}},data:function(){return{title:"升级平台合伙人确认",checked:!1,info:{},isSkeletonLoading:!0,employeeNumber:void 0}},activated:function(){this.employeeNumber=this.$route.query.employeeNumber,this.firstCheckPriority()},methods:{ihaierLogic:function(){var e=this,t=this;c["a"].loadScript("//i.haier.net/public/js/qing/latest/qing.js").then((function(){if(window.qing)try{window.qing.call("getPersonInfo",{success:function(e){if(t.isSkeletonLoading=!1,e&&e.data&&e.data.userName){if(t.employeeNumber=e.data.userName+"",!e.data.userName||0===t.employeeNumber)return void t.$toast("暂未获取到员工信息，稍后重试");Object(o["e"])({employeeNumber:t.employeeNumber}).then((function(e){if(e.data.success&&e.data.data.employee){var a=e.data.data,i=a.mobile,n=a.status;sessionStorage.setItem("employee_status",n),sessionStorage.setItem("employee_phone",i)}else t.$toast(e.data.message),t.closeWebView(3e3)}))["catch"]((function(e){return console.log(e)}));var a=["A","Z","a","z"],i=function(e){return t.employeeNumber.startsWith(e)};(8===t.employeeNumber.length&&a.some(i)||10===t.employeeNumber.length)&&(t.$toast("暂不支持访问智家掌柜，可下载“智家掌柜”App"),t.closeWebView(3e3))}else t.$toast("获取用户信息失败")}})}catch(e){t.$toast("获取用户信息失败")}else t.$toast("获取用户信息失败")}))["catch"]((function(t){e.$toast("加载iHaier SDK失败，请更新版本后重试")}))},checkTrueNameAuth:function(){var e=this;this.$http.get("".concat(s["a"].TRUE_REALNAMEAUTH,"?_t=").concat(Date.now())).then((function(t){var a=t.data.data;a&&a.isAuth?e.checkPriority():"-100"===t.data.errorCode?setTimeout((function(){e.$store.dispatch("doLogin").then((function(e){}))}),500):e.$router.replace("trueAuthentication?destination=settleInPartner")}))["catch"]((function(t){e.$toast(t.message)}))},firstCheckPriority:function(){var e=this;c["a"].isIMaker()||c["a"].isIhaierApp()?Object(u["g"])(null,!1).then((function(t){if(t.data.success){var a=t.data.data,i=a.identifyFlag,n=a.occupation;99200===n&&c["a"].isIMaker()||99600===n&&c["a"].isIhaierApp()||[0,1,31].includes(i)||i>20&&c["a"].isIMaker()?e.checkTrueNameAuth():(i>20?e.$toast({message:"您当前的身份为店铺合伙人，需要解绑后绑定为平台合伙人。解绑入口：联系商家解绑或是登录智家掌柜App申请解绑",duration:5e3}):e.$toast({message:"您的身份可能为商家或其他类型的会员身份，无法继续申请认证",duration:5e3}),(c["a"].isIhaierApp()||c["a"].isIMaker())&&e.closeWebView(5e3))}else e.$toast(t.data.message)})):this.$toast("您可能享有特定权益，请前往特定App申请入驻")},checkPriority:function(){var e=this;Object(u["g"])(null,!0).then((function(t){if(t.data.success){var a=t.data.data,i=a.identifyFlag,n=a.occupation;99200===n&&c["a"].isIMaker()||99600===n&&c["a"].isIhaierApp()?e.$router.replace("/?commissionDisplay=1"):[0,1,31].includes(i)||i>20&&c["a"].isIMaker()?c["a"].isIhaierApp()?e.ihaierLogic():e.fetchData():(i>20?e.$toast({message:"您当前的身份为店铺合伙人，需要解绑后绑定为平台合伙人。解绑入口：联系商家解绑或是登录智家掌柜App申请解绑",duration:5e3}):e.$toast({message:"您的身份可能为商家或其他类型的会员身份，无法继续申请认证",duration:5e3}),(c["a"].isIhaierApp()||c["a"].isIMaker())&&e.closeWebView(5e3))}else{e.$toast(t.data.message);var r=setTimeout((function(){clearTimeout(r),history.length?history.back():e.$router.replace("/?commissionDisplay=1")}),2e3)}}))},_logout:function(){var e=this;this.$store.dispatch("logout").then((function(t){e.$store.dispatch("doLogin")}))},closeWebView:function(e){var t=this;setTimeout((function(){t._logout()}),e-1e3),setTimeout((function(){c["a"].isIhaierApp()&&window.qing&&window.qing.call("closeWebView"),c["a"].isIMaker()&&(localStorage.clear(),location.href="mallLink://closeWindow")}),e)},fetchData:function(){var e=this;Object(o["f"])().then((function(t){e.isSkeletonLoading=!1,t.data.success?e.info=t.data.data:(e.$toast({message:t.data.msg,duration:3e3}),(c["a"].isIhaierApp()||c["a"].isIMaker())&&e.closeWebView(3e3))}))["catch"]((function(t){e.$toast(t.message)}))},submitQuery:function(){if(c["a"].isIhaierApp())return{employeeNumber:this.employeeNumber,source:c["a"].isIMaker()?1:c["a"].isIhaierApp()?2:0};var e=d(d({},this.info),{},{agreement:this.checked,source:c["a"].isIMaker()?1:c["a"].isIhaierApp()?2:0});return delete e["provinceName"],delete e["cityName"],delete e["regionName"],delete e["partnerTypeName"],delete e["streetName"],e},submitData:function(){var e=this;Object(o["h"])(this.submitQuery()).then((function(t){t.data.success?e.$router.replace("/?commissionDisplay=1"):(e.$toast(t.data.msg),(c["a"].isIhaierApp()||c["a"].isIMaker())&&e.closeWebView(3e3))}))["catch"]((function(t){e.$toast(t.message)}))},licenseChecked:function(){this.checked=!this.checked},doSubmit:function(){this.checked?this.submitData():this.$toast("请勾选同意合伙人入驻协议")}}},h=f,m=(a("7b3b"),a("2877")),b=Object(m["a"])(h,i,n,!1,null,"28bb730a",null);t["default"]=b.exports},d354:function(e,t,a){"use strict";a.d(t,"g",(function(){return r})),a.d(t,"d",(function(){return s})),a.d(t,"f",(function(){return o})),a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return l})),a.d(t,"e",(function(){return d}));var i=a("1c03"),n=a("bbc2"),r=function(e,t){return i["a"].request({url:n["a"].myManage,method:"get",params:{_t:Date.now()},noLogin:t})},s=function(e){return i["a"].request({url:n["a"].getOrderCount,method:"get",params:{chId:60}})},o=function(e){return i["a"].request({url:n["a"].wallet,method:"get",params:{}})},u=function(e){return i["a"].request({url:n["a"].checkBindByType,method:"get",params:e})},c=function(e){return i["a"].request({url:n["a"].getComminsionSumInfo,method:"POST",data:e,headers:{"Content-Type":"application/json"}})},l=function(e){return i["a"].request({url:n["a"].getGoodsAmountList,method:"POST",data:e,headers:{"Content-Type":"application/json"}})},d=function(e){return i["a"].request({url:n["a"].getServiceCharge,method:"get",params:e})}},dd35:function(e,t,a){},eb13:function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"g",(function(){return s})),a.d(t,"a",(function(){return o})),a.d(t,"d",(function(){return u})),a.d(t,"b",(function(){return c})),a.d(t,"f",(function(){return l})),a.d(t,"h",(function(){return d})),a.d(t,"e",(function(){return p}));var i=a("1c03"),n=a("bbc2"),r=function(){return i["a"].request({url:n["a"].GET_JOBS,method:"get"})},s=function(e){return i["a"].request({url:n["a"].submitApplyInfo,method:"POST",data:e,headers:{"Content-Type":"application/json"}})},o=function(e){return i["a"].request({url:n["a"].applyResult,method:"get",params:e})},u=function(){return i["a"].request({url:n["a"].queryApplyInfo,method:"get"})},c=function(e){return i["a"].request({url:n["a"].bindWxAccount,method:"get",params:e})},l=function(e){return i["a"].request({url:n["a"].queryMemberInfo,method:"get",params:e})},d=function(e){return i["a"].request({url:n["a"].submitStandardMemberInfo,method:"POST",data:e,headers:{"Content-Type":"application/json"}})},p=function(e){return i["a"].request({url:n["a"].queryEmployeeInfo,method:"POST",data:e,headers:{"Content-Type":"application/json"}})}}}]);
//# sourceMappingURL=chunk-21e49456.d7e9aeab.js.map