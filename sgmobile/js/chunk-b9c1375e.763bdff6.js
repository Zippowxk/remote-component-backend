(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b9c1375e"],{12611:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("Header",{attrs:{text:e.title}}),a("div",{staticClass:"submit-page"},[a("p",[e._v("验证码已经发送到 "+e._s(e.phone))]),a("van-field",{attrs:{type:"digit",center:"",clearable:"",label:"短信验证码",placeholder:"请输入短信验证码",maxlength:"6",formatter:e.formatter},scopedSlots:e._u([{key:"button",fn:function(){return[a("a",{staticClass:"code-btn",class:{active:e.canCode},attrs:{href:"javascript:;"},on:{click:e.getCode}},[e._v(e._s(e.codeText))])]},proxy:!0}]),model:{value:e.sms,callback:function(t){e.sms=t},expression:"sms"}}),a("div",{staticClass:"submit-help"},[a("a",{attrs:{href:"javascript:;"},on:{click:e.doHelp}},[e._v("收不到验证码？")])]),a("div",{staticClass:"submit-btn",class:{active:e.sms}},[a("a",{attrs:{href:"javascript:;"},on:{click:e.doSubmit}},[e._v("确定")]),a("p",[e._v("本服务由中国工商银行服务")])])],1)],1)},r=[],o=a("bbc2"),s=a("e725"),i=a("2f62");function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){f(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var h={name:"freesubmit",components:{Header:s["a"]},data:function(){return{title:"",fromFlag:"",sms:"",phone:"",bankcardInfo:{},canCode:!1,codeText:"发送验证码",fetching:!1}},computed:d({},Object(i["d"])("freebankcard",["getBankRegInfo"])),mounted:function(){var e=this.getBankRegInfo.mobile_no;this.fromFlag=this.$route.query.addcard,this.fromFlag?this.title="添加银行卡":this.title="物联支付签约",e?(this.phone=e.substr(0,3)+"****"+e.substr(7),this.fetchBankCardInfo(),+sessionStorage.getItem("get_free_code")?this.leftCountTimer(30):(this.canCode=!0,this.getCode())):this.$router.replace(this.fromFlag?"/freeapply?addcard="+this.fromFlag:"/freeapply")},methods:d(d({},Object(i["e"])("freebankcard",["setFreeMessage","setFreeOriginUrl","setBankRegInfo"])),{},{doSubmit:function(){var e=this;if(this.sms&&!this.fetching)if(/^\d{6}$/.test(this.sms)){this.fetching=!0;var t={verify_code:this.sms.replace(/\s/g,""),card_no:this.getBankRegInfo.card_no,mobile_no:this.getBankRegInfo.mobile_no,id_type:this.getBankRegInfo.id_type,id_no:this.getBankRegInfo.id_no,holder_name:this.getBankRegInfo.holder_name,verify_code_no:this.getBankRegInfo.verify_code_no,bank_code:this.bankcardInfo.bankNo,bank_name:this.bankcardInfo.bankName,bank_tel:this.bankcardInfo.bankPhone,signSource:this.fromFlag?2:1};2===this.getBankRegInfo.card_type&&(t.card_expired_date=this.getBankRegInfo.card_exdate_text,t.card_cvv2=this.getBankRegInfo.card_cvv2),this.$http.post(o["a"].DO_FREE_BANKCORD,t).then((function(t){var a=t.data,n=a;n.success?(e.setFreeOriginUrl(n.data),e.$router.replace(e.fromFlag?"/freestate?status=1&addcard="+e.fromFlag:"/freestate?status=1")):(e.$toast(n.message),e.$router.replace(e.fromFlag?"/freeapply?addcard="+e.fromFlag:"/freeapply"))}))}else this.$toast("输入短信验证码位数或格式有误")},getCode:function(){var e=this;if(this.canCode){var t={holder_name:this.getBankRegInfo.holder_name,id_no:this.getBankRegInfo.id_no,card_no:this.getBankRegInfo.card_no&&this.getBankRegInfo.card_no.replace(/\s/g,""),id_type:0,mobile_no:this.getBankRegInfo.mobile_no};2===this.getBankRegInfo.card_type&&(t.card_expired_date=this.getBankRegInfo.card_exdate_text,t.card_cvv2=this.getBankRegInfo.card_cvv2),this.$http.post(o["a"].GET_FREE_CODE_MSG,d({},t)).then((function(t){var a=t.data,n=a;n.success?(e.canCode=!1,e.leftCountTimer(60),e.setBankRegInfo({verify_code_no:n.data}),sessionStorage.setItem("get_free_code",1)):e.$toast(n.message)}))}},doHelp:function(){var e=this;this.bankcardInfo.bankPhone?this.$dialog.alert({message:'银行预留手机号是您办理该银行卡时所填写的手机号。如忘记、停用或忘记预留手机号，请拨打银行客服电话 <a href="tel:'+this.bankcardInfo.bankPhone+'" style="color: #2283E2;">'+this.bankcardInfo.bankPhone+"</a>更新处理！"}):this.fetchBankCardInfo().then((function(){e.bankcardInfo.bankPhone?e.$dialog.alert({message:'银行预留手机号是您办理该银行卡时所填写的手机号。如忘记、停用或忘记预留手机号，请拨打银行客服电话 <a href="tel:'+e.bankcardInfo.bankPhone+'" style="color: #2283E2;">'+e.bankcardInfo.bankPhone+"</a>更新处理！"}):e.$dialog.alert({message:"银行预留手机号是您办理该银行卡时所填写的手机号。如忘记、停用或忘记预留手机号，请拨打银行客服电话更新处理！"})}))},leftCountTimer:function(e){var t=this,a=function(){e--,e<=0?(clearInterval(n),t.codeText="重新获取",t.canCode=!0,sessionStorage.setItem("get_free_code",0)):t.codeText="重新获取("+e+"s)"},n=setInterval(a,1e3);a()},fetchBankCardInfo:function(){var e=this;return this.$http.get(o["a"].GET_BANKNAME+"?cardNo="+this.getBankRegInfo.card_no).then((function(t){var a=t.data.data;a.bankNames?e.bankcardInfo=d(d({},a.bankNames),{},{bankPhone:a.bankPhone}):e.bankcardInfo={}}))},formatter:function(e){return e.replace(/\D/g,"")}})},l=h,g=(a("eb47"),a("2877")),b=Object(g["a"])(l,n,r,!1,null,"520a0158",null);t["default"]=b.exports},cd59:function(e,t,a){},eb47:function(e,t,a){"use strict";a("cd59")}}]);
//# sourceMappingURL=chunk-b9c1375e.763bdff6.js.map