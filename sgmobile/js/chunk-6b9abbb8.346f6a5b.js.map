{"version":3,"sources":["webpack:///./src/views/recharge/rechargelist.vue?69fb","webpack:///src/views/recharge/rechargelist.vue","webpack:///./src/views/recharge/rechargelist.vue?72d5","webpack:///./src/views/recharge/rechargelist.vue","webpack:///./src/views/recharge/rechargelist.vue?26a7"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","selectYears","on","changeFn","model","value","callback","$$v","year","expression","listData","_l","item","index","key","_v","_s","month","order","id","$event","goResultPage","lifeOrderDesc","orderTime","payAmt","class","showStatus","showStatusDesc","loadend","directives","name","rawName","staticRenderFns","data","curPage","fetching","scroll","bind","window","addEventListener","el","getBoundingClientRect","top","winH","binding","mounted","initYears","fetchData","methods","curYear","text","push","$router","query","$globalLoading","open","$http","get","result","length","component"],"mappings":"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","file":"js/chunk-6b9abbb8.346f6a5b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"recharge-list-page\"},[_c('div',{staticClass:\"recharge-header\"},[_c('van-dropdown-menu',{staticClass:\"recharge-year\"},[_c('van-dropdown-item',{attrs:{\"options\":_vm.selectYears},on:{\"change\":_vm.changeFn},model:{value:(_vm.year),callback:function ($$v) {_vm.year=$$v},expression:\"year\"}})],1)],1),(_vm.listData.length)?_c('div',{staticClass:\"recharge-list\"},[_vm._l((_vm.listData),function(item,index){return _c('div',{key:index,staticClass:\"recharge-list-item\"},[_c('div',{staticClass:\"recharge-title\"},[_vm._v(_vm._s(item.month))]),_vm._l((item.orders),function(order){return _c('div',{key:order.id,staticClass:\"recharge-flex\",on:{\"click\":function($event){return _vm.goResultPage(order)}}},[_c('div',{staticClass:\"recharge-icon\"}),_c('div',{staticClass:\"recharge-info-body\"},[_c('div',[_c('h4',[_vm._v(_vm._s(order.lifeOrderDesc))]),_c('p',[_vm._v(_vm._s(order.orderTime))])]),_c('div',{staticClass:\"text-right\"},[_c('h4',[_vm._v(\"￥\"+_vm._s(order.payAmt))]),_c('p',{class:{'text-active': order.showStatus == 'unpaid'}},[_vm._v(_vm._s(order.showStatusDesc))])])])])})],2)}),(!_vm.loadend)?_c('van-loading',{directives:[{name:\"scroll\",rawName:\"v-scroll\",value:(_vm.fetchData),expression:\"fetchData\"}],staticClass:\"recharge-loading\",attrs:{\"size\":\".24rem\"}},[_vm._v(\"加载中...\")]):_c('div',{staticClass:\"recharge-loading\"},[_vm._v(\"到底了~\")])],2):_c('div',{staticClass:\"list-empty\"},[_c('img',{attrs:{\"src\":\"http://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/order/empty.png\",\"alt\":\"\"}}),_c('p',[_vm._v(\"暂无充值记录～\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"recharge-list-page\">\n    <div class=\"recharge-header\">\n      <van-dropdown-menu class=\"recharge-year\">\n        <van-dropdown-item v-model=\"year\" :options=\"selectYears\" @change=\"changeFn\"/>\n      </van-dropdown-menu>\n    </div>\n    <div class=\"recharge-list\" v-if=\"listData.length\">\n      <div class=\"recharge-list-item\" v-for=\"(item,index) in listData\" :key=\"index\">\n        <div class=\"recharge-title\">{{item.month}}</div>\n        <div class=\"recharge-flex\"\n          v-for=\"order in item.orders\"\n          :key=\"order.id\"\n          @click=\"goResultPage(order)\"\n        >\n          <div class=\"recharge-icon\"></div>\n          <div class=\"recharge-info-body\">\n            <div>\n              <h4>{{order.lifeOrderDesc}}</h4>\n              <p>{{order.orderTime}}</p>\n            </div>\n            <div class=\"text-right\">\n              <h4>￥{{order.payAmt}}</h4>\n              <p :class=\"{'text-active': order.showStatus == 'unpaid'}\">{{order.showStatusDesc}}</p>\n            </div>\n          </div>\n        </div>\n\n      </div>\n      <van-loading v-if=\"!loadend\" v-scroll=\"fetchData\" class=\"recharge-loading\" size=\".24rem\">加载中...</van-loading>\n      <div v-else class=\"recharge-loading\">到底了~</div>\n    </div>\n    <div class=\"list-empty\" v-else>\n      <img src=\"http://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/order/empty.png\" alt=\"\">\n      <p>暂无充值记录～</p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport URL from '@/http/url'\nexport default {\n  name: 'rechargelist',\n  data() {\n    return {\n      year: '',\n      selectYears: [\n        { text: '请选择年份', value: 0, disabled: true },\n      ],\n      curPage: 0,\n      listData: [],\n      fetching: false, // 是否正在请求\n      loadend: false,\n    }\n  },\n  directives: {\n    scroll: {\n      bind(el, binding) {\n        let winH = window.innerHeight;\n        window.addEventListener('scroll', ev => {\n          if (el.getBoundingClientRect().top < winH + 50) {\n            binding.value()\n          }\n        })\n      }\n    }\n  },\n  mounted () {\n    this.initYears()\n    this.fetchData()\n  },\n  methods: {\n    initYears() {\n      let curYear = this.year = new Date().getFullYear();\n      while (curYear >= 2018) {\n        let year = {\n          text: curYear + '年',\n          value: curYear\n        }\n        this.selectYears.push(year);\n        curYear--\n      }\n    },\n    changeFn() {\n      // console.log(this.year, 'change')\n      this.curPage = 0;\n      this.fetching = false;\n      this.loadend = false;\n      this.listData = [];\n      this.fetchData();\n    },\n    goResultPage(order) {\n      if (order.showStatus === 'unpaid') { // 待支付\n        this.$router.push({\n          name: 'rechargedetail',\n          query: { orderSn: order.orderSn }\n        })\n      } else { // 支付成功\n        this.$router.push({\n          name: 'rechargeresult',\n          query: { status: order.showStatus === 'paid' ? 1 : 2, orderSn: order.orderSn },\n        })\n      }\n    },\n    fetchData() {\n      // this.$toast.loading({\n      //   message: '加载中...',\n      //   forbidClick: true\n      // });\n      if (this.fetching || this.loadend) return\n      this.$globalLoading.open()\n      this.fetching = true;\n      this.$http.get(`${URL.RECHARGE_PAY_LIST}?type=2&month=${this.year}&pageIndex=${this.curPage}&pageSize=8`).then(res => {\n        let result = res.data\n        if (result.data.length) {\n          this.curPage += 1\n          this.listData = this.listData.concat(result.data)\n          this.fetching = false\n          if (result.data.length < 8) {\n            this.loadend = true\n          }\n        } else {\n          this.loadend = true\n        }\n        this.$globalLoading.close()\n        // this.$toast.clear()\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.recharge-header{\n  height: .8rem;\n  background: #fff;\n  div{\n    height: .8rem;\n  }\n}\n.recharge-year{\n  width: 2rem;\n}\n.recharge-list-item{\n  padding-top: .16rem;\n}\n.recharge-title{\n  padding: .18rem .24rem;\n  font-size: .24rem;\n  color: #666;\n}\n.recharge-flex{\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background: #fff;\n  &:last-child{\n    .recharge-info-body{\n      border-bottom: 0;\n    }\n  }\n}\n\n.recharge-icon{\n  margin-left: .24rem;\n  margin-right: .2rem;\n  width: .8rem;\n  height: .8rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: .4rem;\n  background: $themeColor;\n  &::before{\n    content: '';\n    display: inline-block;\n    width: .28rem;\n    height: .4rem;\n    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAoCAYAAADt5povAAAAAXNSR0IArs4c6QAAAQRJREFUWAntmMENgzAMRQF1gt4qwQyswLndkAHoCL2yQmdoBbeukP4v5RSMSOI0hyqWLCXG/sYvHICqghljWvgEX+CpjZrUbtmrtosn1mcGfmgfaPecjt197Lp3Myi++QggZ2ogMuwJOfHa2cdsByI1MZWxNZwwq53cbjXMjWn2LsHsE5aGmuMTawtSEYsmWJBq6Im1BamIRRMsSDX0xNqCVMSiCRakGnpibXak///mHYP0gcPprHMdZDFIO3wNvNkFr/H8yHyFdIyZMER/kxvTcORkdrpxo3gQINIFOZeDvFSXV044p1Lz0Jk5IQ8+20+Fxj5xPZre4avHXYamUJPaPXt9AZA57yRzXHEYAAAAAElFTkSuQmCC) no-repeat;\n    background-size: cover;\n  }\n}\n\n.recharge-info-body{\n  flex: 1;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: .38rem 0;\n  padding-right: .24rem;\n  border-bottom: 1px solid #eee;\n  > div{\n    height: .8rem;\n    h4{\n      margin: .12rem 0;\n      font-size: .28rem;\n      color: #333;\n    }\n    p{\n      font-size: .24rem;\n      color: #999;\n    }\n    .text-active{\n      color: #ED2856;\n    }\n  }\n  .text-right{\n    text-align: right;\n  }\n}\n\n.recharge-loading{\n  padding: .2rem 0;\n  text-align: center;\n  color: #666;\n  font-size: .24rem;\n}\n\n.list-empty{\n  padding-top: 1rem;\n  text-align: center;\n  img{\n    display: inline-block;\n    width: 2.4rem;\n  }\n  p{\n    font-size: .28rem;\n    color: #999;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rechargelist.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rechargelist.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./rechargelist.vue?vue&type=template&id=e0ac7cae&scoped=true&\"\nimport script from \"./rechargelist.vue?vue&type=script&lang=js&\"\nexport * from \"./rechargelist.vue?vue&type=script&lang=js&\"\nimport style0 from \"./rechargelist.vue?vue&type=style&index=0&id=e0ac7cae&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e0ac7cae\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/@sg/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rechargelist.vue?vue&type=style&index=0&id=e0ac7cae&lang=scss&scoped=true&\""],"sourceRoot":""}