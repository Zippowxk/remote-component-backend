(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2410fd70"],{"0ae0":function(t,e,a){"use strict";a("5f75")},4908:function(t,e,a){},"5f75":function(t,e,a){},"60a9":function(t,e,a){},c7ac:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[t.data.resData&&!t.data.soNo?a("order-info",{attrs:{parentData:t.data}}):t._e(),a("div",{staticClass:"track-container"},[t.trackList?a("order-track-info",{attrs:{parentData:t.trackList,orderNo:t.data.soNo||t.data.cOrderSn}}):t._e()],1),a("div",{attrs:{id:"element-container"}})],1)},n=[],r=(a("e7e5"),a("d399")),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order-info-content"},[a("div",{staticClass:"top"},[a("img",{staticClass:"thumbnail",attrs:{src:t._f("imageToHttps")(t.parentData.resData.orderProductInfo.defaultImageUrl),alt:"商品封面图"}}),a("div",{staticClass:"line"},[a("div",[t._v(" 订单编号： ")]),a("div",[t._v(" "+t._s(t.parentData.resData.orderProductInfo.orderSn||"")+" ")])])]),t.parentData.resData.orderProductInfo.expressNumber||t.parentData.resData.orderProductInfo.expressCompany||t.parentData.resData.orderProductInfo.expectTime?a("div",{staticClass:"bottom"},[a("div",{staticClass:"left"},[a("img",{attrs:{src:t.$cdnImageUrl+"/order/tracking/littlecar.png",alt:"icon"}})]),a("div",{staticClass:"right"},[t.parentData.resData.orderProductInfo.expressNumber?a("div",{staticClass:"line"},[a("div",[t._v(" 运单编号： ")]),a("div",[t._v(" "+t._s(t.parentData.resData.orderProductInfo.expressNumber||"")+" ")]),t.parentData.resData.orderProductInfo.expressNumber?a("div",{staticClass:"copy border",on:{click:t.copy}},[a("span",[t._v("复制")])]):t._e()]):t._e(),t.parentData.resData.orderProductInfo.expressCompany?a("div",{staticClass:"line"},[a("div",[t._v(" 物流公司： ")]),a("div",[t._v(" "+t._s(t.parentData.resData.orderProductInfo.expressCompany||"")+" ")])]):t._e(),t.parentData.resData.orderProductInfo.expectTime?a("div",{staticClass:"line"},[a("div",{staticStyle:{"max-width":"5rem"}},[t._v(" 预计"+t._s(t.parentData.resData.orderProductInfo.expectTime)+"送达 ")])]):t._e()]),a("div",{staticClass:"icon"},[a("img",{attrs:{src:t.$cdnImageUrl+"/order/tracking/car.png",alt:"icon"}})])]):t._e()])},i=[],c=a("b311"),d=a.n(c),l=a("2b0e");l["a"].use(r["a"]);var u={name:"trackingOrderInfo",components:{},props:{parentData:{type:null,default:function(){return{}}}},data:function(){return{data:{showDialog:!1,downArrowLeft:0,downArrowTop:0,downArrowHeight:0},dataExpress:{showDialog:!1,downArrowLeft:0,downArrowTop:0,downArrowHeight:0}}},mounted:function(){},methods:{showMore:function(){var t=this;if(!(!t.parentData.checkedWDInfo.cOrderSn||t.parentData.resData.orderWorkFlowsViewA.length<=1||t.parentData.fromDetail)){var e=document.getElementById("down-arrow");t.data.downArrowLeft=e.offsetLeft+10,t.data.downArrowTop=e.offsetTop,t.data.downArrowHeight=e.offsetHeight,t.data.showDialog=!0}},showMoreExpress:function(){var t=this;if(!(t.parentData.checkedWDInfo.expressList&&t.parentData.checkedWDInfo.expressList.length<=1)){var e=document.getElementById("down-arrow-express");t.dataExpress.downArrowLeft=e.offsetLeft,t.dataExpress.downArrowTop=e.offsetTop,t.dataExpress.downArrowHeight=e.offsetHeight,t.dataExpress.showDialog=!0}},closeCallBack:function(t){var e=this;e.data.showDialog=t.showDialog,e.$emit("changeCallBack",t)},expressCloseCallBack:function(t){var e=this;e.dataExpress.showDialog=t.showDialog,e.$emit("expressChangeCallBack",t)},copy:function(){var t=this,e=t.parentData.resData.orderProductInfo.expressNumber,a=new d.a(".copy",{text:function(t){return e}});a.on("success",(function(){t.$toast.success("复制成功")})),a.on("error",(function(){t.$toast.success("复制失败")}))}}},p=u,h=(a("e1da"),a("2877")),f=Object(h["a"])(p,s,i,!1,null,"f08d2c78",null),m=f.exports,g=a("d45d"),v=a("d3c8");l["a"].use(r["a"]);var N={name:"trackingOrders",components:{orderInfo:m,orderTrackInfo:g["a"]},data:function(){return{data:{orderSn:"",cOrderSn:"",soNo:"",expressNumber:"",expressCompany:"",resData:null,checkedWDInfo:{},fromDetail:!1},trackList:[]}},created:function(){var t=this,e=t.$route.query;t.data.orderSn=e.orderSn,t.data.cOrderSn=e.cOrderSn,t.data.soNo=e.soNo,t.data.expressNumber=e.expressNumber,t.data.expressCompany=e.expressCompany,t.data.fromDetail=e.cOrderSn||!1},mounted:function(){var t=this,e=this;this.$util.isHaierApp()?this.$store.dispatch("handleUpAuth").then((function(a){a?e.getOrderTrack():e.$store.dispatch("doLogin").then((function(a){t.$store.dispatch("handleUpAuth").then((function(a){a?e.getOrderTrack():t.$toast("用户未登录")}))}))})):this.$store.getters.getLoginStatus?e.getOrderTrack():e.$store.dispatch("doLogin")},methods:{getOrderTrack:function(){var t=this;if(t.data.soNo){var e={deliveryOrderCode:t.data.soNo};v["a"].getYlhLogisticsMsgList(e).then((function(e){e.data.success&&(t.data.resData=e.data.data,t.calcMdNodeList(t.data.resData))}))}else{var a={corderSn:this.data.cOrderSn,expressNumber:this.data.expressNumber,expressCompany:this.data.expressCompany};v["a"].orderProductTrack(a).then((function(e){e.data.success&&(t.data.resData=e.data.data,t.calcNodeList(t.data.resData))}))}},calcNodeList:function(t){var e=this,a=[];0===t.signNodes.length&&t.orderCancelNodes.length>0?a=a.concat(this.toTrackList({title:"已取消",node:t.orderCancelNodes})):t.signNodes.length>0&&(a=a.concat(this.toTrackList({title:"已签收",node:t.signNodes}))),t.installNodes.length>0&&(a=a.concat(this.toTrackList({title:"安装服务",node:t.installNodes}))),t.deliverNodes.length>0&&(a=a.concat(this.toTrackList({title:"派送中",node:t.deliverNodes}))),t.shippingNodes.length>0&&(a=a.concat(this.toTrackList({title:"运输中",node:t.shippingNodes}))),t.collectNodes.length>0&&(a=a.concat(this.toTrackList({title:"已揽件",node:t.collectNodes}))),t.depotNodes.length>0&&(a=a.concat(this.toTrackList({title:"仓库处理中",node:t.depotNodes}))),t.orderNodes.length>0&&(a=a.concat(this.toTrackList({title:"已下单",node:t.orderNodes}))),this.trackList=a,this.trackList.forEach((function(t){t.nodeContent=e.selectPhoneNumber(t.nodeContent)||""}))},calcMdNodeList:function(t){var e=this,a=[];t.logistics&&t.logistics.length>0&&(t.logistics.reverse().forEach((function(t){a=a.concat(e.mdToTrackList(t))})),this.trackList=a,this.trackList.forEach((function(t){t.nodeContent=e.selectPhoneNumber(t.nodeContent)||""})),console.log("calcMdNodeList:"),console.log(this.trackList))},selectPhoneNumber:function(t){var e=/(1(3|4|5|6|7|8|9)\d{9})|(0[\d]{2,4}-[\d]{5,8})/g,a=t.match(e);if(a)for(var o=0;o<a.length;o++){var n=a[o];t=t.replace(a[o],'<a class="phone-num" style=" text-decoration: underline;color: #2878FF;">'+n+"</a>")}return t},toTrackList:function(t){var e=[];return e=e.concat(t.node),e.unshift({nodeContent:"",nodeName:t.title,nodeType:"main",nodeTime:"2019-12-12 09:33:02"}),e},mdToTrackList:function(t){var e=Object.keys(t)[0],a=[];return t[e]&&t[e].length>0&&(a=a.concat(t[e]),a.unshift({nodeContent:"",nodeName:this.getNodeName(e),nodeType:"main",nodeTime:""})),a},getNodeName:function(t){var e="";switch(t){case"order":e="已下单";break;case"depot":e="仓库处理中";break;case"shipping":e="运输中";break;case"deliver":e="派送中";break;case"sign":e="已签收";break;case"install":e="安装服务";break;case"cancel":e="已取消";break}return e}}},k=N,w=(a("e764"),Object(h["a"])(k,o,n,!1,null,"011c0654",null));e["default"]=w.exports},d45d:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("div",{staticClass:"track-info-container",class:{wx:"1"===t.from}},t._l(t.parentData,(function(e,o){return a("div",{key:o,class:{line:!0,complete:0===o,first:0===o,main:"main"===e.nodeType,"hide-line":"main"===e.nodeType&&o===t.parentData.length-2}},[a("span",{class:{install:"安装服务"===e.nodeName,collect:"已揽件"===e.nodeName,cancle:"已取消"===e.nodeName,signIn:"已签收"===e.nodeName,delivery:"派送中"===e.nodeName,transit:"运输中"===e.nodeName,warehouse:"仓库处理中"===e.nodeName,order:"已下单"===e.nodeName}}),a("div",{class:{"main-title":"main"===e.nodeType,info:"main"!==e.nodeType},domProps:{innerHTML:t._s("main"===e.nodeType?e.nodeName:e.nodeContent)},on:{click:t.option}}),t.trackNo&&t.noCancle&&"main"===e.nodeType&&"派送中"===e.nodeName?a("div",{staticClass:"view-map-container",on:{click:t.toLogistigsTrack}},[t._m(0,!0)]):t._e(),"main"!==e.nodeType?a("div",{staticClass:"date"},[t._v(" "+t._s(e.nodeTime||"")+" ")]):t._e()])})),0),a("van-dialog",{attrs:{className:"custome-confirm",showConfirmButton:!1,showCancelButton:!1,title:"",width:"304px","cancel-button-color":"#666666","get-container":"#element-container"},model:{value:t.copyOptionShow,callback:function(e){t.copyOptionShow=e},expression:"copyOptionShow"}},[a("div",{staticClass:"option-container",class:{wx:"1"===t.from}},[a("div",{staticClass:"phonenum-show"},[t._v(t._s(t.currentPhoneNum))]),a("div",{staticClass:"copy-option",on:{click:t.copyPhone}},[a("span",[t._v("复制号码")])]),a("div",{staticClass:"call-option"},[a("div",{on:{click:t.callPhone}},[t._v("拨打电话")])]),a("div",{staticClass:"cancle-option"},[a("div",{on:{click:t.cancleOption}},[t._v("取消")])])])])],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"map-tips"},[a("div",{staticClass:"map-icon"}),t._v("查看配送地图")])}],r=a("b311"),s=a.n(r),i=a("d3c8"),c={name:"orderTrackInfo",props:{parentData:{type:null,default:function(){return[]}},orderNo:{type:String,default:function(){return""}},from:{type:null,default:function(){return""}}},data:function(){return{copyOptionShow:!1,currentPhoneNum:"",trackNo:""}},created:function(){this.getLogisticsCode()},computed:{noCancle:function(){return 0===this.parentData.filter((function(t){return"已取消"===t.nodeName})).length}},methods:{getLogisticsCode:function(){var t=this;i["a"].getLogisticsCode({deliveryOrderCode:this.orderNo}).then((function(e){e.data.success&&(t.trackNo=e.data.data)}))},option:function(t){"copy phone-num"!==t.target.className&&"phone-num"!==t.target.className||(console.log(t.target.innerText),this.currentPhoneNum=t.target.innerText,this.copyOptionShow=!0)},cancleOption:function(){this.copyOptionShow=!1},copyPhone:function(){var t=this,e=this,a=new s.a(".copy-option",{text:function(t){return e.currentPhoneNum}});a.on("success",(function(){t.$toast.success("复制成功"),t.copyOptionShow=!1})),a.on("error",(function(){t.$toast.success("复制失败")}))},callPhone:function(){location.href="tel:"+this.currentPhoneNum,this.copyOptionShow=!1},toLogistigsTrack:function(){this.$router.push({path:"/logistigsTrack",query:{trackNo:this.trackNo}})}}},d=c,l=(a("0ae0"),a("2877")),u=Object(l["a"])(d,o,n,!1,null,"7f7d697c",null);e["a"]=u.exports},e1da:function(t,e,a){"use strict";a("4908")},e764:function(t,e,a){"use strict";a("60a9")}}]);
//# sourceMappingURL=chunk-2410fd70.7a12cc12.js.map