{"version":3,"sources":["webpack:///./src/views/home/api.js","webpack:///./src/http/service/groupBooking.js","webpack:///./src/views/order/cashier/pay-state.vue?1ea3","webpack:///./src/views/order/cashier/pay-state.vue?83fd","webpack:///src/views/order/cashier/pay-state.vue","webpack:///./src/views/order/cashier/pay-state.vue?aeb8","webpack:///./src/views/order/cashier/pay-state.vue","webpack:///./src/views/home/components/couponActivitysDialog.vue?7ee4","webpack:///src/views/home/components/couponActivitysDialog.vue","webpack:///./src/views/home/components/couponActivitysDialog.vue?14e5","webpack:///./src/views/home/components/couponActivitysDialog.vue","webpack:///./src/views/home/components/couponActivitysDialog.vue?d686"],"names":["getActivitidInfo","params","url","config","ADMINEHOST","http","get","getCartNumber","getActivityBgInfo","getBanner","getTopSearchBar","getCategoryItems","getKingKongs","getCouponList","getCouponItem","getProductRecommend","getProgramData","getMiddleBanner","getHotLive","getFlexArea","getCouponStatus","getFlashSale","getNearbyShop","getelectricalGoods","getDefaultSearchWord","baseURL","SHOST","getCommonLoadItemNew","getPriceByProduct","couponActivitysInfo","receiveActivitysCoupons","closeCouponPop","getMainGroupBooking","Url","getShopGroupList","getGoodsGroupList","getGroupBuyByOrderSn","isGroupBuyOrder","render","_vm","this","_h","$createElement","_c","_self","staticClass","on","onComplete","_v","attrs","$cdnImageUrl","payType","_s","state","originFlag","goHome","goOrder","newGoBack","_m","copy","_e","ref","saveImage","originOrderId","staticRenderFns","instance","initDeviceReady","components","couponActivitysDialog","data","success","queryData","orderSource","originUrl","loadend","groupBuyOrderSn","beforeRouteEnter","console","log","history","next","beforeRouteLeave","methods","checkSynOrderExtend","$http","orderNum","result","orderSn","timestamp","Date","now","fkcode","goSyBridSelfPayStatus","location","replace","then","closeH5ContainerView","window","postMessage","JSON","stringify","clearTimeout","timer","href","$router","push","parent","type","onClickLeft","go","goBack","$util","gioTrackWithVariable","user_id","localStorage","getItem","text","clipboard","setTimeout","_getPixelRatio","backingStore","devicePixelRatio","_html2canvas","Promise","canvas2","width","scale","height","ctx","canvas","allowTaint","useCORS","createALink","a","attrKey","dispatchEvent","event","checkIsGroupBuy","res","component","dialogInfoList","length","$event","stopPropagation","preventDefault","_l","item","index","key","refInFor","style","dialogCloseFn","dialogStatus","touchHandler","quan","couponUseType","couponType","couponValue","Number","toFixed","activityName","description","startTime","split","endTime","directives","name","rawName","value","expression","doGiveUp","doGetQuan","goLookQuan","props","source","String","default","sourceId","show","Boolean","dialogInfo","dialogStyle","computed","dialogShow","created","forEach","ele","coupons","includes","targetType","watch","val","$nextTick","dialogMaskElementStyle","bottom","dialogElementStyle","paddingTop","childHeight","e","returnValue","handleCloseCouponPop","activityId","id","splice","param","resolve"],"mappings":"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","file":"js/chunk-1330a486.23f9b67d.js","sourcesContent":["import http from '@/http/http';\n// import utils from '@/utils/utils'\n\nimport config from '@/config'\n// let platform = 'sc-h5-m'\n// if (utils.isSgRn()) {\n//   platform = 'sc-app-zhanggui'\n// } else if (utils.isSyBird()) {\n//   platform = 'haier-app-sybird'\n// } else if (utils.isIMaker()) {\n//   platform = 'haier-app-ichuangke'\n// } else if (utils.isIhaierApp()) {\n//   platform = 'haier-app-ihaier'\n// } else if (utils.isUplus()) {\n//   platform = 'haier-app-zhijia'\n// }\n\n// 活动配置\nconst getActivitidInfo = (params) => {\n  let url = config.ADMINEHOST + '/cmsadmin/homepage/activity/getHomeActivityById.json'\n  return http.get(url, {\n    params,\n  })\n}\n\n// 购物车列表\nconst getCartNumber = () => http.get(`/v3/h5/scart/num.json`)\n// 背景信息\nconst getActivityBgInfo = () => http.get('/sg/cms/homepage/getCurrentActivityBackgroundByCurrentTime.json')\n// banner\nconst getBanner = (params) => http.get('/sg/cms/home/banner.json', {\n  params,\n  // headers: { 'Platform': platform }\n});\n// search icon\nconst getTopSearchBar = () => {\n  return http.get('/sg/cms/homepage/getCurrentActivityNavigationByCurrentTime.json')\n}\n// 分类\nconst getCategoryItems = () => {\n  return http.get('/sg/cms/homepage/getCurrentActivityCategoryByCurrentTime.json?notSupportMPassFlag=1');\n}\n\n// 金刚区\nconst getKingKongs = () => {\n  return http.get('/sg/cms/homepage/getCurrentActivityVajraByCurrentTime.json?notSupportMPassFlag=1')\n}\n\n// 优惠券\nconst getCouponList = (params) => {\n  return http.get('/coupon/v1/carry/getCouponCenter.json', {\n    params\n  })\n}\n// 领取优惠券\nconst getCouponItem = (params) => {\n  return http.get('/coupon/v1/carry/receiveCoupon.json', {\n    params\n  })\n}\n\n// 必选单品\nconst getProductRecommend = () => {\n  return http.get(`/sg/cms/homepage/getAllHomeProductRecommend.json`)\n}\n\n// 场景\nconst getProgramData = () => {\n  return http.get(`/sg/cms/home/uhome/getTabsByPageInfo.json`)\n}\n\n// 中通广告位\nconst getMiddleBanner = () => {\n  return http.get('/sg/cms/homepage/getCurrentActivityAdvertByCurrentTime.json')\n}\n\n// 热门直播\nconst getHotLive = (params) => {\n  return http.get('/sg/cms/live/getHotLive.json', {\n    params\n  });\n}\n\n// 营销区域\nconst getFlexArea = params => {\n  return http.get(`/sg/cms/homepage/getCurrentActivityMarketingByCurrentTime.json`, { params })\n}\n\n// 是否展示优惠券\nconst getCouponStatus = params => {\n  return http.get(`/sg/cms/homepage/getCurrentActivityCouponByCurrentTime.json`, { params })\n}\n\n// 限时抢购\nconst getFlashSale = (params) => {\n  return http.get('/sg/cms/flashSales/fourth/nearFlashSale.json', {\n    params\n  });\n}\n\n// 附近店铺\nconst getNearbyShop = (params) => {\n  // return http.post(`/sg/cms/home/nearbyStoreForHomeList.json`, params)\n  return http.get(`/v3/mstore/decorate/getMallNearMdStore.json`, { params })\n}\n\n// 生态优选\nconst getelectricalGoods = (params) => {\n  return http.get('/sg/cms/chara/charaIndex.json', { params })\n}\n\n// 搜索词列表\nconst getDefaultSearchWord = (params) => {\n  let url = '/search/defaultSearchList.json?platform=3'\n  return http.get(url, {\n    params,\n    baseURL: config.SHOST,\n  });\n}\n\n// 底部商品列表\nconst getCommonLoadItemNew = (params) => {\n  let url = '/search/commonLoadItemNew.html'\n  return http.get(url, { params, baseURL: config.SHOST, })\n}\n// 底部商品列表\nconst getPriceByProduct = (params) => {\n  let url = '/search/getPriceByProductList.html'\n  return http.get(url, { params, baseURL: config.SHOST, })\n}\n// 首页弹窗\nconst couponActivitysInfo = params => {\n  return http.get(`/sg/cms/home/getCouponActivitys.json`, { params })\n}\n\n// 首页弹框领券\nconst receiveActivitysCoupons = params => {\n  return http.get(`/sg/cms/home/receiveCoupons.json`, { params })\n}\n// 关闭弹框领券\nconst closeCouponPop = params => {\n  return http.get(`/sg/cms/home/closeCouponPop.json`, { params })\n}\nexport default {\n  getActivitidInfo,\n  getCartNumber,\n  getActivityBgInfo,\n  getBanner,\n  getTopSearchBar,\n  getCategoryItems,\n  getKingKongs,\n  getCouponList,\n  getCouponItem,\n  getProductRecommend,\n  getProgramData,\n  getMiddleBanner,\n  getHotLive,\n  getFlexArea,\n  getCouponStatus,\n  getFlashSale,\n  getNearbyShop,\n  getelectricalGoods,\n  getDefaultSearchWord,\n  getCommonLoadItemNew,\n  getPriceByProduct,\n  couponActivitysInfo,\n  receiveActivitysCoupons,\n  closeCouponPop\n}\n","/**\n * 拼团相关\n */\nimport Url from '../url.js';\n// import HOST from '@/config';\nimport { get } from '../http'\n\n/**\n  * 首页拼团列表\n  */\nexport const getMainGroupBooking = params => get(Url.getMainGroupBooking, params);\n/**\n  * 店铺首页拼团列表\n  */\nexport const getShopGroupList = params => get(Url.getShopGroupList, params);\n/**\n  * 单品页待成团列表\n  */\nexport const getGoodsGroupList = params => get(Url.getGoodsGroupList, params);\n/**\n  * 根据订单号查询拼团信息\n  */\nexport const getGroupBuyByOrderSn = params => get(Url.getGroupBuyByOrderSn, params);\n/**\n  * 根据orderId查询orderSn\n  */\nexport const isGroupBuyOrder = params => get(Url.isGroupBuyOrder, params);\n\nexport default {\n  getMainGroupBooking,\n  getShopGroupList,\n  getGoodsGroupList,\n  getGroupBuyByOrderSn,\n  isGroupBuyOrder\n};\n","export * from \"-!../../../../node_modules/@sg/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./pay-state.vue?vue&type=style&index=0&id=04dfb50c&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.loadend)?_c('div',{staticClass:\"pay-state\"},[_c('div',{staticClass:\"head-line\"},[_c('span',{staticClass:\"finish\",on:{\"click\":_vm.onComplete}},[_vm._v(\"完成\")])]),_c('div',{staticClass:\"state-wrapper\"},[_c('div',{staticClass:\"image-wrapper\"},[(_vm.success)?_c('img',{attrs:{\"src\":(_vm.$cdnImageUrl + \"/pay-resault/pay-success3x.png\")}}):(_vm.payType==='digiccy')?_c('img',{attrs:{\"src\":(_vm.$cdnImageUrl + \"/pay-resault/pay-wait3x.png\")}}):_c('img',{attrs:{\"src\":(_vm.$cdnImageUrl + \"/pay-resault/pay-fail3x.png\")}})]),_c('div',{staticClass:\"text-wrapper\"},[_vm._v(_vm._s(_vm.state))])]),(_vm.originFlag === 1)?_c('div',{staticClass:\"btn-wrapper\"},[_c('div',{staticClass:\"btn\",on:{\"click\":_vm.goHome}},[_vm._v(\"返回首页\")]),_c('div',{staticClass:\"btn\",on:{\"click\":_vm.goOrder}},[_vm._v(\"查看订单\")])]):_c('div',{staticClass:\"btn-wrapper\"},[_c('div',{staticClass:\"btn\",on:{\"click\":_vm.newGoBack}},[_vm._v(\"返回\")])]),(_vm.originFlag === 1)?_c('div',{staticClass:\"wx-wrapper\"},[(_vm.state==='支付成功')?_c('div',{staticClass:\"wx-account-wrapper\"},[_c('div',{staticClass:\"avatar-wrapper\"},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":(_vm.$cdnImageUrl + \"/pay-resault/wx-logo3x.png\"),\"alt\":\"\"}})]),_vm._m(0),_c('div',{staticClass:\"btn-wrapper\"},[_c('div',{staticClass:\"btn copy\",on:{\"click\":_vm.copy}},[_vm._v(\"复制\")])])]):_vm._e(),(_vm.state==='支付成功')?_c('div',{staticClass:\"wx-account-qrcode\"},[_c('div',{ref:\"qrcode\",staticClass:\"qrcode-wrapper\"},[_c('img',{staticClass:\"qrcode\",attrs:{\"src\":(_vm.$cdnImageUrl + \"/pay-resault/wx-qrcode.png\"),\"alt\":\"\"}})]),_c('div',{staticClass:\"qrcode-info\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"微信扫一扫关注公众号\")]),_c('div',{staticClass:\"btn download\",on:{\"click\":_vm.saveImage}},[_c('img',{staticClass:\"download-icon\",attrs:{\"src\":(_vm.$cdnImageUrl + \"/pay-resault/qr-download-icon3x.png\"),\"alt\":\"\"}}),_c('div',{staticClass:\"text\"},[_vm._v(\"保存到相册\")])])])]):_vm._e()]):_vm._e(),(_vm.state === '支付成功')?_c('couponActivitysDialog',{attrs:{\"source\":'ZDSP',\"sourceId\":_vm.originOrderId,\"show\":true}}):_vm._e()],1):_vm._e()}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"info-wrapper\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"海尔智家公众号\")]),_c('div',{staticClass:\"content\"},[_vm._v(\"实时推送物流、发票等信息\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div v-if=\"loadend\" class=\"pay-state\">\n     <div class=\"head-line\">\n       <span class=\"finish\" @click=\"onComplete\">完成</span>\n     </div>\n     <div class=\"state-wrapper\">\n       <div class=\"image-wrapper\">\n          <img v-if=\"success\" :src=\"`${$cdnImageUrl}/pay-resault/pay-success3x.png`\">\n          <img v-else-if=\"payType==='digiccy'\" :src=\"`${$cdnImageUrl}/pay-resault/pay-wait3x.png`\">\n          <img v-else :src=\"`${$cdnImageUrl}/pay-resault/pay-fail3x.png`\">\n       </div>\n       <div class=\"text-wrapper\">{{state}}</div>\n     </div>\n     <div v-if=\"originFlag === 1\" class=\"btn-wrapper\">\n      <div class=\"btn\" @click=\"goHome\">返回首页</div>\n      <div class=\"btn\" @click=\"goOrder\">查看订单</div>\n     </div>\n     <div v-else class=\"btn-wrapper\">\n      <div class=\"btn\" @click=\"newGoBack\">返回</div>\n     </div>\n     <div v-if=\"originFlag === 1\" class=\"wx-wrapper\">\n       <div v-if=\"state==='支付成功'\" class=\"wx-account-wrapper\">\n        <div class=\"avatar-wrapper\">\n          <img :src=\"`${$cdnImageUrl}/pay-resault/wx-logo3x.png`\" alt=\"\" class=\"avatar\">\n        </div>\n        <div class=\"info-wrapper\">\n          <div class=\"title\">海尔智家公众号</div>\n          <div class=\"content\">实时推送物流、发票等信息</div>\n        </div>\n        <div class=\"btn-wrapper\">\n          <div class=\"btn copy\" @click=\"copy\">复制</div>\n        </div>\n      </div>\n      <div v-if=\"state==='支付成功'\" class=\"wx-account-qrcode\">\n        <div class=\"qrcode-wrapper\" ref=\"qrcode\">\n          <img :src=\"`${$cdnImageUrl}/pay-resault/wx-qrcode.png`\" alt=\"\" class=\"qrcode\">\n        </div>\n        <div class=\"qrcode-info\">\n          <div class=\"title\">微信扫一扫关注公众号</div>\n          <div class=\"btn download\" @click=\"saveImage\">\n            <img :src=\"`${$cdnImageUrl}/pay-resault/qr-download-icon3x.png`\" alt=\"\" class=\"download-icon\">\n            <div class=\"text\">保存到相册</div>\n          </div>\n        </div>\n      </div>\n     </div>\n     <!-- 优惠券弹窗 -->\n     <couponActivitysDialog v-if=\"state === '支付成功'\" :source=\"'ZDSP'\" :sourceId=\"originOrderId\" :show=\"true\"/>\n  </div>\n</template>\n<script>\n// import Header from '@/components/header'\nimport html2canvas from 'html2canvas'\nimport ClipboardJS from 'clipboard'\nimport util from '@/utils/utils'\nimport Url from '@/http/url'\nimport UplusApi from '@uplus/uplus-api';\nimport {\n  isGroupBuyOrder\n} from '@/http/service/groupBooking'\n\nimport couponActivitysDialog from '@/views/home/components/couponActivitysDialog'\nconst instance = new UplusApi();\ninstance.initDeviceReady()\nexport default {\n  components: {\n    couponActivitysDialog\n  },\n  data() {\n    return {\n      state: '',\n      success: false,\n      queryData: null,\n      orderSource: '',\n      originFlag: null, // 订单来源\n      originOrderId: null, // 订单id\n      originUrl: '', // 来源地址\n      payType: '', // 支付方式\n      loadend: false, // loading end\n      groupBuyOrderSn: '', // 拼团订单orderSn\n    }\n  },\n  beforeRouteEnter(to, from, next) {\n    console.log('beforeRouteEnter history length: ' + history.state)\n    next()\n  },\n  beforeRouteLeave(to, from, next) {\n    // alert('a')\n    console.log('beforeRouteLeave ==========')\n    next()\n  },\n  async mounted() {\n    // this.historyInit()\n    let queryData = this.queryData = this.$util.strJSONParse(decodeURIComponent(this.$route.query.data), {})\n    console.log(this.$route.query.data, 'queryData')\n    this.originOrderId = queryData.order_id || null\n    this.payType = queryData.payType\n    // 处理易理货等\n    this.orderSource = sessionStorage.getItem('cur_order_from') || ''\n\n    // 处理三翼鸟订金支付的单子跳转到三翼鸟自己的结果页\n    // DSG-30715 三翼鸟环境修改支付成功页\n    if (this.originOrderId) {\n      let result = await this.checkSynOrderExtend()\n      if (result) {\n        this.goSyBridSelfPayStatus(result)\n        return\n      }\n    }\n\n    if (this.payType === 'digiccy') {\n      this.state = '支付结果处理中'\n      this.$http.post(Url.GET_GHDICCPAY_RESULT, {\n        'orderNo': queryData.orderNo\n      }).then(({ data }) => {\n        if (data.success) {\n          this.success = true;\n          this.state = '支付成功'\n          gio('track', 'PayResult', {\n            payStatus: 'success',\n            memberId: localStorage.getItem('mId')\n          })\n        } else {\n          this.success = false;\n          this.state = '支付结果处理中'\n          gio('track', 'PayResult', {\n            payStatus: 'failed',\n            memberId: localStorage.getItem('mId')\n          })\n        }\n        this.loadend = true\n      });\n    } else {\n      this.success = !!((queryData.is_success === 'T' || queryData.is_success === 'true'))\n      // this.originOrderId = queryData.order_id || null\n      // this.payType = queryData.payType\n      if (this.success) {\n        this.state = '支付成功'\n        gio('track', 'PayResult', {\n          payStatus: 'success',\n          memberId: localStorage.getItem('mId')\n        })\n      } else {\n        this.state = '支付失败'\n        gio('track', 'PayResult', {\n          payStatus: 'failed',\n          memberId: localStorage.getItem('mId')\n        })\n      }\n      this.loadend = true\n    }\n\n    // 获取订单来源 originFlag=1正常商城来源; originFlag=2食联网来源; originFlag=3特殊处理 工行epay\n    if (this.originOrderId || this.orderSource) {\n      this.$http.get(Url.GetExtendInfoByOrderId, { params: { 'orderId': this.originOrderId, 'source': this.orderSource } }).then(({ data }) => {\n        console.log(data)\n        if (data.data && data.data.returnUrl) {\n          this.originFlag = 2\n          this.originUrl = data.data.returnUrl\n        } else {\n          this.originFlag = 1\n        }\n      })\n      this.checkIsGroupBuy();\n    } else if (this.payType === 'epay' && this.$util.isHaierApp()) {\n      this.originFlag = 3\n    } else {\n      this.originFlag = 1\n    }\n    console.log(this.originFlag, 'this.originFlag')\n  },\n  methods: {\n    // DSG-30715 三翼鸟环境修改支付成功页\n    checkSynOrderExtend() {\n      return this.$http.get(Url.GetExtendInfoByOrderId, { params: { 'orderId': this.originOrderId, 'source': this.orderSource } }).then(({ data }) => {\n        let result = data.data\n        if (result?.extendOrderType === 'SYN_BOOK') {\n          return {\n            orderNum: result.orderSn,\n            timestamp: Date.now(),\n            fkcode: result.fkcode\n          }\n        } else {\n          return false\n        }\n      })\n    },\n    // DSG-30715 三翼鸟环境修改支付成功页\n    goSyBridSelfPayStatus(result) {\n      let url = process.env.VUE_APP_ENV === 'production' ? `https://sybird.haier.net/resource/reserve/index.html?planCode=${result.fkcode}&orderNum=${result.orderNum}&timestamp=${result.timestamp}#/signupSuccess` : `https://syntest.haier.net/resourceTest/reserve/index.html?planCode=${result.fkcode}&orderNum=${result.orderNum}&timestamp=${result.timestamp}#/signupSuccess`\n      location.replace(url)\n    },\n\n    newGoBack () {\n      if (util.isHaierApp() && this.originUrl) {\n        instance.initDeviceReady().then(function() {\n          instance.closeH5ContainerView();\n        });\n      } else if (util.isSgRn()) {\n        window.postMessage(JSON.stringify({ type: 'goHome' }))\n      } else if (this.originUrl) {\n        let timer = setTimeout(() => {\n          clearTimeout(timer)\n          location.href = this.originUrl\n        }, 200)\n      } else {\n        this.$router.push('/')\n      }\n      // E支付，智家APP会唤醒Safari，在Safari中通过scheme拉起智家APP商城tab页\n      if (!util.isHaierApp() && !util.isSgRn()) {\n        window.parent && (window.parent.location = 'haieruplus://jump/https://uplus.haier.com/uplusapp/customize/index.html')\n      }\n    },\n    goOrder() {\n      console.log('goOrder')\n      if (util.isHaierApp() && this.originUrl) {\n        instance.initDeviceReady().then(function() {\n          instance.closeH5ContainerView();\n        });\n      } else if (util.isSgRn()) {\n        window.postMessage(JSON.stringify({\n          type: 'goOrderList',\n        }));\n      } else if (this.originUrl) {\n        let timer = setTimeout(() => {\n          clearTimeout(timer)\n          location.href = this.originUrl\n        }, 200)\n      } else {\n        this.$router.push('/orderlist')\n      }\n      // E支付，智家APP会唤醒Safari，在Safari中通过scheme拉起智家APP\n      if (!util.isHaierApp() && !util.isSgRn()) {\n        // window.location = 'haieruplus://'\n        window.parent && (window.parent.location = 'haieruplus://')\n      }\n    },\n    onClickLeft() {\n      if (this.originUrl) {\n        if (util.isUplus()) {\n          instance.initDeviceReady().then(function() {\n            instance.closeH5ContainerView();\n          });\n        } else {\n          location.href = this.originUrl\n        }\n      } else {\n        this.$router.go(-1)\n      }\n    },\n    goBack() {\n      if (this.originFlag === 2) {\n        this.goOrder()\n        return\n      }\n      console.log('goBack')\n      instance.initDeviceReady().then(function() {\n        instance.closeH5ContainerView();\n      });\n      // E支付，智家APP会唤醒Safari，在Safari中通过scheme拉起智家APP商城tab页\n      if (!util.isHaierApp()) {\n        window.parent && (window.parent.location = 'haieruplus://jump/https://uplus.haier.com/uplusapp/customize/index.html')\n      }\n    },\n    goHome() {\n      if (util.isUplus()) {\n        util.openNewWindow('https://uplus.haier.com/uplusapp/customize/index.html', true, true)\n      } else if (util.isHaierApp()) {\n        instance.initDeviceReady().then(function() {\n          instance.closeH5ContainerView();\n        });\n      } else if (util.isSgRn()) {\n        window.postMessage(JSON.stringify({\n          type: 'goHome',\n        }));\n      } else {\n        this.$router.push('/')\n      }\n      // E支付，智家APP会唤醒Safari，在Safari中通过scheme拉起智家APP商城tab页\n      if (!util.isHaierApp() && !util.isSgRn()) {\n        window.parent && (window.parent.location = 'haieruplus://jump/https://uplus.haier.com/uplusapp/customize/index.html')\n      }\n    },\n    copy() {\n      this.$util.gioTrackWithVariable('mall_payresult_copyOfficialAccount', {\n        user_id: localStorage.getItem('ucId') ? localStorage.getItem('ucId') + '' : 'null'\n      }).then(() => {\n        const clipboard = new ClipboardJS('.pay-state .copy', {\n          text: (trigger) => {\n            return 'shunguang01'\n          }\n        })\n        clipboard.on('success', () => {\n          this.$toast('复制成功')\n          window.setTimeout(() => {\n            this.createALink({ href: 'weixin://' })\n          }, 1000)\n        })\n        clipboard.on('error', () => {\n          this.$toast('复制失败')\n        })\n      })\n    },\n    async saveImage() {\n      this.$util.gioTrackWithVariable('mall_payresult_saveToGallery', {\n        user_id: localStorage.getItem('ucId') ? localStorage.getItem('ucId') + '' : 'null'\n      }).then(async() => {\n        const imgUrl = await this._html2canvas()\n        if (this.$util.isHaierApp()) {\n          this.$util.uplusSaveImage(imgUrl).then(res => {\n            if (res) {\n              this.$toast('保存成功')\n            } else {\n              this.$toast('保存失败')\n            }\n          })\n        } else {\n          this.createALink({ download: Date.now(), href: imgUrl })\n        }\n      })\n    },\n    _getPixelRatio(context) {\n      var backingStore =\n        context.backingStorePixelRatio ||\n        context.webkitBackingStorePixelRatio ||\n        context.mozBackingStorePixelRatio ||\n        context.msBackingStorePixelRatio ||\n        context.oBackingStorePixelRatio ||\n        context.backingStorePixelRatio ||\n        1\n      return (window.devicePixelRatio || 1) / backingStore\n    },\n    _html2canvas() {\n      return new Promise((resolve, reject) => {\n        // 创建一个新的canvas\n        const _canvas = this.$refs['qrcode']\n        // 此处用于解决截图不清晰问题，将生成的canvas放大，然后再填充到原有的容器中就会清晰\n        const width = _canvas.offsetWidth\n        const height = _canvas.offsetHeight\n        const canvas2 = document.createElement('canvas')\n        const ctx = canvas2.getContext('2d')\n        const ratio = this._getPixelRatio(ctx)\n        const scale = ratio\n        canvas2.width = width * scale\n        canvas2.height = height * scale\n        ctx.scale(scale, scale)\n        const opts = {\n          scale: 1,\n          canvas: canvas2,\n          // logging: true, // 日志开关，便于查看html2canvas的内部执行流程\n          width,\n          height,\n          allowTaint: true,\n          useCORS: true, // 【重要】开启跨域配置\n        }\n        html2canvas(_canvas, opts).then(async canvas => {\n          const context = canvas.getContext('2d')\n          // 【重要】关闭抗锯齿\n          context.mozImageSmoothingEnabled = false\n          context.webkitImageSmoothingEnabled = false\n          context.msImageSmoothingEnabled = false\n          context.imageSmoothingEnabled = false\n\n          const screenUrl = canvas.toDataURL('image/png')\n          console.log('screenUrl', screenUrl)\n          resolve(screenUrl)\n        })\n      })\n    },\n    createALink (attrs) {\n      const a = document.createElement('a')\n      const event = new MouseEvent('click')\n      for (const attrKey of Object.keys(attrs)) {\n        a[attrKey] = attrs[attrKey]\n      }\n      a.dispatchEvent(event)\n    },\n    onComplete() {\n      if (this.groupBuyOrderSn) {\n        this.$router.replace(`/groupBookingDetail?orderSn=${this.groupBuyOrderSn}`);\n      } else {\n        this.goHome()\n      }\n    },\n    /** 查询是否是拼团订单 */\n    checkIsGroupBuy() {\n      isGroupBuyOrder({ orderId: this.originOrderId }).then(res => {\n        if (res.data) {\n          this.groupBuyOrderSn = res.data;\n        }\n      });\n    }\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n  .pay-state {\n    height: 100%;\n    background-color: white;\n    .head-line {\n      padding-right: .32rem;\n      text-align: right;\n      .finish {\n        font-size: 0.28rem;\n        line-height: .88rem;\n        color: #2878ff;\n        letter-spacing: -0.008rem;\n      }\n    }\n    .state-wrapper {\n      margin-top: .48rem;\n      .image-wrapper {\n        width: 1.44rem;\n        height: 1.44rem;\n        margin: 0 auto;\n        img {\n          width: 100%;\n          height: 100%;\n        }\n      }\n      .text-wrapper {\n        margin-top: .24rem;\n        font-size: .32rem;\n        text-align: center;\n        color: #333333;\n        font-weight: bold;\n        line-height: .44rem;\n        letter-spacing: -0.009rem;\n      }\n    }\n    .btn-wrapper {\n      margin-top: .96rem;\n      display: flex;\n      justify-content: center;\n      .btn {\n        flex: 0 1 2.6rem;\n        line-height: .76rem;\n        text-align: center;\n        border: .01rem solid #dddddd;\n        border-radius: .49rem;\n        color: #666666;\n        &:nth-of-type(2) {\n          margin-left: .3rem;\n        }\n      }\n    }\n    .wx-account-wrapper {\n      width: 6.3rem;\n      margin: 0.8rem auto 0 auto;\n      padding: 0.39rem 0;\n      box-sizing: border-box;\n      border-top: 0.02rem solid #eeeeee;\n      border-bottom: 0.02rem solid #eeeeee;\n      display: flex;\n      justify-content: space-between;\n      .avatar-wrapper {\n        flex: 0 0 auto;\n        margin-right: 0.16rem;\n        width: 0.72rem;\n        height: 0.76rem;\n        overflow: hidden;\n        border-radius: 50%;\n        .avatar {\n          width: 0.72rem;\n          height: 0.76rem;\n        }\n      }\n      .info-wrapper {\n        flex: 1;\n        height: 0.76rem;\n        .title {\n          margin-bottom: 0.2rem;\n          font-size: 0.28rem;\n          color: #333333;\n          line-height: 0.28rem;\n          letter-spacing: -0.01rem;\n        }\n        .content {\n          font-size: 0.24rem;\n          color: #333333;\n          line-height: 0.24rem;\n          letter-spacing: -0.01rem;\n        }\n      }\n      .btn-wrapper {\n        flex: 0 0 auto;\n        margin-top: 0;\n        width: 1.28rem;\n        height: 0.76rem;\n        .btn {\n          margin-top: 0.07rem;\n          width: 1.26rem;\n          border: 0.01rem solid #2878ff;\n          border-radius: 0.34rem;\n          text-align: center;\n          font-size: 0.24rem;\n          line-height: 0.62rem;\n          letter-spacing: -0.01rem;\n          color: #2878ff;\n        }\n      }\n    }\n    .wx-account-qrcode {\n      margin: 0.56rem auto 0 auto;\n      padding: 0.28rem 0 0.28rem 0.28rem;\n      box-sizing: border-box;\n      width: 6.3rem;\n      background: #f5f5f5;\n      border-radius: 0.24rem;\n      display: flex;\n      .qrcode-wrapper {\n        flex: 0 0 auto;\n        width: 1.56rem;\n        height: 1.56rem;\n        overflow: hidden;\n        border: 0.01rem solid #dddddd;\n        border-radius: 0.16rem;\n        background: white;\n        .qrcode {\n          width: 1.5rem;\n          height: 1.48rem;\n          margin: 0.04rem 0 0 0.03rem;\n        }\n      }\n      .qrcode-info {\n        flex: 1;\n        width: 2.8rem;\n        margin-top: 0.14rem;\n        .title {\n          text-align: center;\n          margin-bottom: 0.24rem;\n          display: block;\n          font-size: 0.28rem;\n          color: #333333;\n          line-height: 0.4rem;\n        }\n        .btn {\n          margin: 0 auto;\n          width: 2.2rem;\n          padding-left: 0.35rem;\n          background: #2878ff;\n          border-radius: 0.3rem;\n          display: flex;\n          align-items: center;\n          .download-icon {\n            flex: 0 0 auto;\n            width: 0.3rem;\n            height: 0.3rem;\n            margin-right: 0.05rem;\n          }\n          .text {\n            flex: 0 0 auto;\n            line-height: 0.6rem;\n            color: white;\n          }\n        }\n      }\n    }\n  }\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./pay-state.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./pay-state.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./pay-state.vue?vue&type=template&id=04dfb50c&scoped=true&\"\nimport script from \"./pay-state.vue?vue&type=script&lang=js&\"\nexport * from \"./pay-state.vue?vue&type=script&lang=js&\"\nimport style0 from \"./pay-state.vue?vue&type=style&index=0&id=04dfb50c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"04dfb50c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"activitys-dialog-warp\"},[(_vm.dialogInfoList.length > 0)?_c('div',{ref:\"dialogMask\",staticClass:\"dialog-mask\",on:{\"touchmove\":function($event){$event.stopPropagation();$event.preventDefault();}}},[[_c('van-swipe',{staticClass:\"coupon-swipe\",attrs:{\"loop\":false,\"show-indicators\":_vm.dialogInfoList.length > 1,\"indicator-color\":\"white\"}},_vm._l((_vm.dialogInfoList),function(item,index){return _c('van-swipe-item',{key:index,staticClass:\"coupon-swiper-item\"},[_c('div',{ref:\"dialog\",refInFor:true,staticClass:\"dialog\",style:(_vm.dialogStyle)},[_c('div',{staticClass:\"dialog-warp\"},[_c('div',{staticClass:\"dialog-body\",on:{\"touchmove\":function($event){$event.stopPropagation();$event.preventDefault();}}},[_c('div',{ref:\"closeIcon\",refInFor:true,staticClass:\"dialog-close\",on:{\"click\":function($event){return _vm.dialogCloseFn(index)}}}),_c('span',{staticClass:\"icon-tag\"}),(_vm.dialogInfoList[index].dialogStatus==1)?_c('div',{staticClass:\"dialog-quan\"},[_c('div',{staticClass:\"dialog-quan-list\",on:{\"touchmove\":function($event){$event.stopPropagation();return _vm.touchHandler($event, index)}}},_vm._l((_vm.dialogInfoList[index].coupons),function(quan,index){return _c('div',{key:index,staticClass:\"dialog-quan-item\"},[_c('div',{staticClass:\"item-fl\"},[(quan.couponUseType == 'ORDER')?_c('span',[_vm._v(\"卡券\")]):_vm._e(),(quan.couponUseType == 'SHOP')?_c('span',[_vm._v(\"店铺券\")]):_vm._e(),(quan.couponType == 'DISCOUNT_COUPON')?_c('strong',[_vm._v(_vm._s((quan.couponValue/10))),_c('small',[_vm._v(\"折\")])]):_c('strong',[_c('small',[_vm._v(\"￥\")]),_vm._v(_vm._s(Number(quan.couponValue).toFixed(0)))])]),_c('div',{staticClass:\"item-fr\"},[_c('h5',[_vm._v(_vm._s(quan.activityName))]),_c('p',[_vm._v(_vm._s(quan.description))]),_c('p',[_vm._v(_vm._s(quan.startTime && quan.startTime.split(' ')[0].replace(/-/g,'.'))+\"—\"+_vm._s(quan.startTime && quan.endTime.split(' ')[0].replace(/-/g,'.')))])])])}),0)]):_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.dialogInfoList[index].dialogStatus==2),expression:\"dialogInfoList[index].dialogStatus==2\"}],staticClass:\"dialog-text dialog-gpt\"},[_c('h4',[_vm._v(\"领取成功！\")]),_c('p',[_vm._v(\"优惠券已发放到您的账户\"),_c('br'),_vm._v(\"请到“我的优惠券”查看\")])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.dialogInfoList[index].dialogStatus==3),expression:\"dialogInfoList[index].dialogStatus==3\"}],staticClass:\"dialog-text dialog-pt\"},[_c('p',[_vm._v(\"确定放弃领取优惠券吗？\")])])]),_c('div',{staticClass:\"dialog-middle-img\"}),_c('div',{staticClass:\"dialog-btns\"},[_c('a',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.dialogInfoList[index].dialogStatus==3),expression:\"dialogInfoList[index].dialogStatus==3\"}],staticClass:\"btn btn-cancel\",attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.doGiveUp(index)}}},[_vm._v(\"确定放弃\")]),_c('a',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.dialogInfoList[index].dialogStatus==3),expression:\"dialogInfoList[index].dialogStatus==3\"}],staticClass:\"btn\",attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.doGetQuan(index)}}},[_vm._v(\"立即领取\")]),_c('a',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.dialogInfoList[index].dialogStatus==1),expression:\"dialogInfoList[index].dialogStatus==1\"}],staticClass:\"btn-big\",attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.doGetQuan(index)}}},[_vm._v(\"立即领取\")]),_c('a',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.dialogInfoList[index].dialogStatus==2),expression:\"dialogInfoList[index].dialogStatus==2\"}],staticClass:\"btn-big\",attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.goLookQuan(index)}}},[_vm._v(\"去查看\")])])])])])}),1)]],2):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"activitys-dialog-warp\">\n    <div\n      class=\"dialog-mask\"\n      ref=\"dialogMask\"\n      @touchmove.stop.prevent\n      v-if=\"dialogInfoList.length > 0\"\n    >\n      <template>\n        <van-swipe\n          :loop=\"false\"\n          class=\"coupon-swipe\"\n          :show-indicators=\"dialogInfoList.length > 1\"\n          indicator-color=\"white\"\n        >\n          <van-swipe-item\n            class=\"coupon-swiper-item\"\n            :key=\"index\"\n            v-for=\"(item, index) in dialogInfoList\"\n          >\n            <div\n              class=\"dialog\"\n              :style=\"dialogStyle\"\n              ref=\"dialog\"\n            >\n              <div class=\"dialog-warp\">\n                <div\n                  class=\"dialog-body\"\n                  @touchmove.stop.prevent\n                >\n                  <div\n                    class=\"dialog-close\"\n                    ref=\"closeIcon\"\n                    @click=\"dialogCloseFn(index)\"\n                  ></div>\n                  <span class=\"icon-tag\"></span>\n                  <div\n                    class=\"dialog-quan\"\n                    v-if=\"dialogInfoList[index].dialogStatus==1\"\n                  >\n                    <div\n                      class=\"dialog-quan-list\"\n                      @touchmove.stop=\"touchHandler($event, index)\"\n                    >\n                      <div\n                        class=\"dialog-quan-item\"\n                        v-for=\"(quan, index) in dialogInfoList[index].coupons\"\n                        :key=\"index\"\n                      >\n                        <div class=\"item-fl\">\n                          <span v-if=\"quan.couponUseType == 'ORDER'\">卡券</span>\n                          <span v-if=\"quan.couponUseType == 'SHOP'\">店铺券</span>\n                          <strong v-if=\"quan.couponType == 'DISCOUNT_COUPON'\">{{(quan.couponValue/10)}}<small>折</small></strong>\n                          <strong v-else><small>￥</small>{{Number(quan.couponValue).toFixed(0)}}</strong>\n                        </div>\n                        <div class=\"item-fr\">\n                          <!-- <span>1张</span> -->\n                          <h5>{{quan.activityName}}</h5>\n                          <p>{{quan.description}}</p>\n                          <p>{{quan.startTime && quan.startTime.split(' ')[0].replace(/-/g,'.')}}—{{quan.startTime && quan.endTime.split(' ')[0].replace(/-/g,'.')}}</p>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  <div\n                    class=\"dialog-text dialog-gpt\"\n                    v-show=\"dialogInfoList[index].dialogStatus==2\"\n                  >\n                    <h4>领取成功！</h4>\n                    <p>优惠券已发放到您的账户<br>请到“我的优惠券”查看</p>\n                  </div>\n                  <div\n                    class=\"dialog-text dialog-pt\"\n                    v-show=\"dialogInfoList[index].dialogStatus==3\"\n                  >\n                    <p>确定放弃领取优惠券吗？</p>\n                  </div>\n                </div>\n                <div class=\"dialog-middle-img\"></div>\n                <div class=\"dialog-btns\">\n                  <a\n                    href=\"javascript:;\"\n                    class=\"btn btn-cancel\"\n                    v-show=\"dialogInfoList[index].dialogStatus==3\"\n                    @click=\"doGiveUp(index)\"\n                  >确定放弃</a>\n                  <a\n                    href=\"javascript:;\"\n                    class=\"btn\"\n                    v-show=\"dialogInfoList[index].dialogStatus==3\"\n                    @click=\"doGetQuan(index)\"\n                  >立即领取</a>\n                  <a\n                    href=\"javascript:;\"\n                    class=\"btn-big\"\n                    v-show=\"dialogInfoList[index].dialogStatus==1\"\n                    @click=\"doGetQuan(index)\"\n                  >立即领取</a>\n                  <a\n                    href=\"javascript:;\"\n                    class=\"btn-big\"\n                    v-show=\"dialogInfoList[index].dialogStatus==2\"\n                    @click=\"goLookQuan(index)\"\n                  >去查看</a>\n                </div>\n              </div>\n            </div>\n          </van-swipe-item>\n        </van-swipe>\n      </template>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Api from '../api'\n\nexport default {\n  name: 'couponActivitysDialog',\n  props: {\n    source: {\n      type: String,\n      default: () => '',\n    },\n    sourceId: {\n      type: String,\n      default: () => '',\n    },\n    show: {\n      type: Boolean,\n      default: () => false,\n    },\n  },\n  data() {\n    return {\n      dialogStatus: 0, // 弹窗状态  0关闭状态 1立即领取  2领取成功  3是否放弃\n      dialogInfo: {}, // 弹窗信息\n      dialogInfoList: [], // 弹窗信息列表\n      dialogStyle: {}, // 弹框样式\n    }\n  },\n  computed: {\n    dialogShow() {\n      return this.dialogInfoList && this.dialogInfoList.length > 0\n    },\n  },\n  created() {\n    Api.couponActivitysInfo({\n      source: this.source,\n      sourceId: this.sourceId,\n    }).then(res => {\n      let result = res.data\n      if (result.success && result.data && result.data.length > 0) {\n        result.data.forEach(ele => {\n          if (ele.coupons && ele.coupons.length) {\n            /*\n             * targetType(用户身份):1、全部用户 2、新用户 3、老用户\n             * (1，2，3)的用户身份在任何场景均需要弹框\n             * 其他身份用户需要在(员工、服务兵)：ihaier\\爱创客\\顺逛\\智家 内部弹框\n             */\n            if ([1, 2, 3].includes(+ele.targetType) || this.$util.isIhaierApp() || this.$util.isIMaker() || this.$util.isSgRn() || this.$util.isUplus() || this.show) {\n              ele.dialogStatus = 1\n              this.dialogInfoList.push(ele)\n            }\n          }\n        })\n      }\n    })\n  },\n  watch: {\n    dialogShow(val) {\n      if (val === true) {\n        this.$nextTick(() => {\n          /*\n           * 处理在大屏模式下顶部边距超出的问题\n           * dialogMaskElementStyle：mask的底部距离\n           * dialogElementStyle：dialog的底部距离\n           * (childHeight.height + (childHeight.height * 30) / 234)：表示dialog底部内容的高度\n           * 如果大屏模式下dialog超出mask的底部，则重新设置dialog的顶部padding：刚好露出底部\n           */\n          if (this.$refs.dialogMask && this.$refs.dialog && this.$refs.dialog[0]) {\n            let dialogMaskElementStyle = this.$refs.dialogMask.getBoundingClientRect() || {}\n            let dialogElementStyle = this.$refs.dialog[0].getBoundingClientRect() || {}\n            let childHeight = (this.$refs.dialog[0].firstElementChild && this.$refs.dialog[0].firstElementChild.getBoundingClientRect()) || {}\n            if (dialogMaskElementStyle.bottom && dialogElementStyle.bottom) {\n              if (dialogMaskElementStyle.bottom < dialogElementStyle.bottom) {\n                this.dialogStyle = {\n                  paddingTop: dialogMaskElementStyle.bottom - (childHeight.height + (childHeight.height * 30) / 234) + 'px',\n                }\n              }\n            }\n          }\n        })\n      }\n    },\n  },\n  methods: {\n    touchHandler(e, index) {\n      if (this.dialogInfoList[index].coupons.length <= 2) {\n        e.preventDefault()\n        e.returnValue = false\n        return false\n      } else {\n        e.returnValue = true\n        return true\n      }\n    },\n    // 券弹窗\n    dialogCloseFn(index) {\n      // 2021/08/13 DSG-27833需求，应华要求去掉关闭时确认放弃功能\n\n      // if (this.dialogInfoList[index].dialogStatus === 3 || this.dialogInfoList[index].dialogStatus === 2) {\n      this.handleCloseCouponPop({\n        activityId: this.dialogInfoList[index].id,\n        endTime: this.dialogInfoList[index].endTime\n      })\n      this.dialogInfoList.splice(index, 1)\n      // } else {\n      //   this.dialogInfoList[index].dialogStatus = 3\n      // }\n    },\n    // 确认放弃领券\n    doGiveUp(index) {\n      this.handleCloseCouponPop({\n        activityId: this.dialogInfoList[index].id,\n        endTime: this.dialogInfoList[index].endTime\n      })\n      this.dialogInfoList.splice(index, 1)\n    },\n    /**\n     * @description 关闭弹窗优惠券方法\n     * @param activityId 所关闭弹窗的活动id\n     * @param endTime 优惠券活动结束时间 时间戳\n    */\n    handleCloseCouponPop(param) {\n      return new Promise((resolve, reject) => {\n        Api.closeCouponPop({\n          activityId: param.activityId,\n          endTime: param.endTime\n        }).then(res => {\n          let result = res.data\n          if (result.success) {\n            resolve()\n          }\n        })\n      })\n    },\n    doGetQuan(index) {\n      Api.receiveActivitysCoupons({\n        activityId: this.dialogInfoList[index].id,\n      }).then(res => {\n        let result = res.data\n        console.log(result, 'doGetQuan result')\n        if (result.success) {\n          this.dialogInfoList[index].dialogStatus = 2\n        }\n      })\n    },\n    goLookQuan(index) {\n      this.dialogInfoList.splice(index, 1)\n      this.$router.push('/coupon')\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.activitys-dialog-warp {\n  .dialog-mask {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.7);\n    z-index: 200;\n  }\n\n  .dialog {\n    position: relative;\n    // top: 60%;\n    // left: 50%;\n    // transform: translateX(-50%) translateY(-50%);\n    padding-top: 85%;\n    padding-bottom: 10%;\n    z-index: 210;\n  }\n\n  .dialog-warp {\n    margin: 0 auto;\n    position: relative;\n    width: 5.5rem;\n    height: 4.26rem;\n    background: #a83b30;\n    border-radius: 0.36rem;\n  }\n  // .coupon-swipe {\n  //   width: 100%;\n  //   height: 100%;\n  // }\n\n  .dialog-body {\n    position: absolute;\n    left: 0.15rem;\n    bottom: 1.35rem;\n    width: 5.2rem;\n    max-height: 6.2rem;\n    padding-bottom: 1.5rem;\n    background: linear-gradient(180deg, #f7f7f7, #fff2da);\n    border-radius: 0.36rem;\n    &::before {\n      content: '';\n      position: absolute;\n      left: 0.35rem;\n      top: -0.35rem;\n      display: block;\n      width: 0.82rem;\n      height: 0.76rem;\n      background: url(#{$cdnImageUrl}/home/popup/jinbitop.png) no-repeat;\n      background-size: cover;\n    }\n    &::after {\n      content: '';\n      position: absolute;\n      right: 0.15rem;\n      top: -0.33rem;\n      display: block;\n      width: 0.72rem;\n      height: 0.66rem;\n      background: url(#{$cdnImageUrl}/home/popup/rightquan.png) no-repeat;\n      background-size: cover;\n    }\n    .icon-tag {\n      position: absolute;\n      left: -0.25rem;\n      top: 1.18rem;\n      display: block;\n      width: 0.52rem;\n      height: 0.46rem;\n      background: url(#{$cdnImageUrl}/home/popup/leftquan.png) no-repeat;\n      background-size: cover;\n    }\n\n    .dialog-close {\n      position: absolute;\n      right: 0;\n      top: -1.5rem;\n      width: 0.7rem;\n      height: 0.7rem;\n      background: url(#{$cdnImageUrl}/home/popup/close.png) no-repeat;\n      background-size: contain;\n    }\n  }\n  .dialog-middle-img {\n    position: absolute;\n    left: -0.54rem;\n    bottom: 1.3rem;\n    width: 6.28rem;\n    height: 2rem;\n    background: url(#{$cdnImageUrl}/home/popup/img.png?t=1) no-repeat;\n    background-size: cover;\n  }\n\n  .dialog-btns {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background: #e83349;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 1.35rem;\n    border-bottom-right-radius: 0.36rem;\n    border-bottom-left-radius: 0.36rem;\n    .btn-big {\n      display: inline-flex;\n      justify-content: center;\n      align-items: center;\n      width: 3.72rem;\n      height: 0.84rem;\n      background: url(#{$cdnImageUrl}/home/popup/btnlingqu.png?t=1) no-repeat;\n      background-size: cover;\n      font-size: 0.32rem;\n      font-weight: 600;\n      color: #b84605;\n    }\n    .btn {\n      margin: 0 0.11rem;\n      display: inline-flex;\n      justify-content: center;\n      align-items: center;\n      width: 2.24rem;\n      height: 0.76rem;\n      background: url(#{$cdnImageUrl}/home/popup/btnlingqu_small.png?t=1) no-repeat;\n      background-size: cover;\n      box-sizing: border-box;\n      font-size: 0.32rem;\n      font-weight: 600;\n      color: #b84605;\n    }\n    .btn-cancel {\n      width: 2.24rem;\n      height: 0.76rem;\n      background: none;\n      border: 0.02rem solid #ffce66;\n      color: #ffce66;\n      border-radius: 0.46rem;\n    }\n  }\n\n  .dialog-quan {\n    &::before {\n      content: '';\n      display: block;\n      margin: 0.36rem auto;\n      width: 3.4rem;\n      height: 0.34rem;\n      background: url(#{$cdnImageUrl}/home/popup/title_dialog.png) no-repeat;\n      background-size: cover;\n    }\n  }\n\n  .dialog-quan-list {\n    padding: 0 0.3rem 0.4rem;\n    margin: 0 0.1rem;\n    max-height: 3.46rem;\n    overflow-y: auto;\n  }\n\n  .dialog-quan-item {\n    &:last-child {\n      margin-bottom: 0;\n    }\n    margin-bottom: 0.2rem;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 4.42rem;\n    height: 1.54rem;\n    background: url(#{$cdnImageUrl}/home/popup/quanbg.png) no-repeat;\n    background-size: cover;\n    .item-fl {\n      position: relative;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      width: 1.44rem;\n      height: 1.54rem;\n      span {\n        position: absolute;\n        left: 0;\n        top: 0.12rem;\n        padding: 0.04rem 0.1rem;\n        font-size: 0.2rem;\n        color: #fff;\n        border-bottom-right-radius: 0.4rem;\n        border-top-right-radius: 0.4rem;\n        background: rgba(#fff, 0.3);\n      }\n      strong {\n        font-size: 0.48rem;\n        color: #fff72f;\n        font-weight: 700;\n        small {\n          font-size: 0.24rem;\n        }\n      }\n    }\n    .item-fr {\n      width: 2.88rem;\n      height: 1.54rem;\n      padding-left: 0.18rem;\n      position: relative;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      span {\n        position: absolute;\n        right: 0.08rem;\n        top: 0.08rem;\n        padding: 0.05rem 0.15rem;\n        font-size: 0.22rem;\n        color: #9e4300;\n        background: #ffc939;\n        border-radius: 0.2rem;\n      }\n      h5 {\n        font-size: 0.24rem;\n        line-height: 0.34rem;\n        color: #fff;\n        @include text-overflow(1);\n      }\n      p {\n        font-size: 0.2rem;\n        line-height: 0.28rem;\n        color: #fff;\n        opacity: 0.7;\n        @include text-overflow(1);\n      }\n    }\n  }\n\n  .dialog-text {\n    padding-top: 0.65rem;\n    color: #b84605;\n    text-align: center;\n    h4 {\n      margin-bottom: 0.36rem;\n      font-size: 0.32rem;\n      font-weight: 600;\n    }\n    p {\n      font-size: 0.28rem;\n      line-height: 0.4rem;\n    }\n  }\n  .dialog-pt {\n    padding-top: 1.7rem;\n    padding-bottom: 1rem;\n  }\n  .dialog-text {\n    padding-bottom: 1rem;\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./couponActivitysDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./couponActivitysDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./couponActivitysDialog.vue?vue&type=template&id=4204285e&scoped=true&\"\nimport script from \"./couponActivitysDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./couponActivitysDialog.vue?vue&type=script&lang=js&\"\nimport style0 from \"./couponActivitysDialog.vue?vue&type=style&index=0&id=4204285e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4204285e\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/@sg/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./couponActivitysDialog.vue?vue&type=style&index=0&id=4204285e&lang=scss&scoped=true&\""],"sourceRoot":""}