(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["groupBookingDetail"],{"0459":function(t,o,e){"use strict";e("73af")},2108:function(t,o,e){"use strict";e.d(o,"c",(function(){return s})),e.d(o,"d",(function(){return i})),e.d(o,"a",(function(){return a})),e.d(o,"b",(function(){return c})),e.d(o,"e",(function(){return u}));var n=e("bbc2"),r=e("1c03"),s=function(t){return Object(r["b"])(n["a"].getMainGroupBooking,t)},i=function(t){return Object(r["b"])(n["a"].getShopGroupList,t)},a=function(t){return Object(r["b"])(n["a"].getGoodsGroupList,t)},c=function(t){return Object(r["b"])(n["a"].getGroupBuyByOrderSn,t)},u=function(t){return Object(r["b"])(n["a"].isGroupBuyOrder,t)}},3054:function(t,o,e){"use strict";e("3754")},"347c":function(t,o,e){},3754:function(t,o,e){},"73af":function(t,o,e){},"80cc":function(t,o,e){"use strict";e("347c")},"83d9":function(t,o,e){"use strict";e.r(o);var n=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[t.isSkeletonLoading?e("skeleton",{attrs:{nums:3}}):e("div",{staticClass:"content"},[e("div",{staticStyle:{padding:".24rem"}},[e("div",{staticClass:"top-content"},[e("img",{staticClass:"left-img",attrs:{src:"//cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/groupBooking/icon-detail-left.png"}}),e("img",{staticClass:"right-img",attrs:{src:"//cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/groupBooking/icon-detail-right.png"}}),e("div",{staticClass:"shop-row",on:{click:function(o){return t.goShop(t.groupInfo)}}},[e("img",{attrs:{src:"//cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/groupBooking/icon-shop.png"}}),e("span",[t._v(t._s(t.groupInfo.storeName))]),e("van-icon",{attrs:{name:"arrow",size:".28rem",color:"#333333"}})],1),e("div",{staticStyle:{display:"flex"},on:{click:function(o){return t.goGoodsDetail(t.groupInfo)}}},[e("img",{staticClass:"prod-img",attrs:{src:t.groupInfo.picture}}),e("div",{staticClass:"top-prod-content"},[e("div",{staticClass:"prod-title",staticStyle:{"font-size":".26rem",width:"4.78rem"}},[t._v(t._s(t.groupInfo.productName))]),e("div",{staticClass:"sale-point",staticStyle:{padding:"0"}}),e("div",{staticClass:"origin-price",staticStyle:{"margin-top":"0"}},[e("span",{staticClass:"tag"},[t._v("￥")]),e("span",{staticClass:"price-int"},[t._v(" "+t._s(t._f("formatPriceInt")(t._f("formatPrice")(t.groupInfo.basePrice)))+" ")]),e("span",{staticClass:"tag"},[t._v(" "+t._s(t._f("formatPriceFloat")(t._f("formatPrice")(t.groupInfo.basePrice)))+" ")])]),e("div",{staticStyle:{display:"flex",width:"100%",height:".34rem","align-items":"center"}},[e("div",{staticClass:"group-price",staticStyle:{position:"relative",top:".06rem"}},[e("span",{staticClass:"tag"},[t._v("￥")]),e("span",{staticClass:"price-int"},[t._v(" "+t._s(t._f("formatPriceInt")(t._f("formatPrice")(t.groupInfo.price)))+" ")]),e("span",{staticClass:"tag",staticStyle:{position:"relative",top:".01rem"}},[t._v(" "+t._s(t._f("formatPriceFloat")(t._f("formatPrice")(t.groupInfo.price)))+" ")])]),e("div",{staticClass:"top-book-num"},[e("span",[t._v(t._s(t.groupInfo.clustersNum)+"人团")])]),e("div",{staticClass:"top-num-des"},[t._v("已有"+t._s(t.groupInfo.successNum||0)+"人拼团成功")])])])])])]),e("booking-num-row",{attrs:{groupInfo:t.groupInfo},on:{refreshData:t.getGroupDetail}}),t.moreList.length?e("div",{staticClass:"more-list"},[e("div",{staticClass:"title-row"},[e("div"),e("span",[t._v("更多拼团")]),e("div")]),t._l(t.moreList,(function(o,n){return e("div",{key:n,staticClass:"booking-item",on:{click:function(e){return t.goGoodsDetail(o)}}},[e("img",{attrs:{src:o.picture}}),e("div",{staticClass:"right-box"},[e("div",{staticClass:"prod-title"},[t._v(t._s(o.productName))]),e("div",{staticClass:"sale-point"},[o.sellPoint.length?e("ul",t._l(o.sellPoint,(function(o,n){return e("li",{key:n},[t._v(t._s(o))])})),0):t._e()]),e("div",{staticClass:"origin-price"},[e("span",{staticClass:"tag"},[t._v("￥")]),e("span",{staticClass:"price-int"},[t._v(" "+t._s(t._f("formatPriceInt")(t._f("formatPrice")(o.basePrice)))+" ")]),e("span",{staticClass:"tag"},[t._v(" "+t._s(t._f("formatPriceFloat")(t._f("formatPrice")(o.basePrice)))+" ")])]),e("div",{staticClass:"group-price"},[e("span",{staticClass:"tag"},[t._v("团购价：￥")]),e("span",{staticClass:"price-int"},[t._v(" "+t._s(t._f("formatPriceInt")(t._f("formatPrice")(o.activityPrice)))+" ")]),e("span",{staticClass:"tag",staticStyle:{position:"relative",top:".01rem"}},[t._v(" "+t._s(t._f("formatPriceFloat")(t._f("formatPrice")(o.activityPrice)))+" ")])]),e("div",{staticClass:"button"},[e("span",[t._v("立即开团")])])]),e("div",{staticClass:"book-num"},[e("span",[t._v(t._s(o.clustersNum)+"人团")])])])}))],2):t._e(),t.moreList.length<3?e("guess-you-lick",{attrs:{more:!0}}):t._e()],1)],1)},r=[],s=e("a73f"),i=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"container"},[e("div",{ref:"headList",staticClass:"head-row",class:{active:t.allActorList.length<5}},t._l(t.allActorList,(function(o,n){return e("div",{key:n,staticClass:"avatar-row"},[e("img",{attrs:{src:o.memberHead}}),0===o.role?e("div",{staticClass:"tag"},[e("span",[t._v("拼主")])]):t._e()])})),0),e("div",{staticClass:"num-text"},[[1,2].indexOf(t.groupInfo.viewStatus)>-1?e("span",[t._v("还差"+t._s(t.groupInfo.clustersNum-t.groupInfo.actors.length)+"人即可拼团成功，"),e("count-down",{attrs:{time:t.groupInfo.endTime-t.groupInfo.sysTime},on:{finish:t.onTimeDown}}),t._v("后结束")],1):t._e(),3===t.groupInfo.viewStatus?e("span",[t._v("恭喜您拼团成功了")]):t._e(),4===t.groupInfo.viewStatus&&t.groupInfo.groupBuyToActorVos&&t.groupInfo.groupBuyToActorVos.length?e("span",[t._v("此团已满，推荐你加入以下团")]):t._e()]),4===t.groupInfo.viewStatus&&t.groupInfo.groupBuyToActorVos&&t.groupInfo.groupBuyToActorVos.length?e("div",{staticClass:"other-group"},[e("img",{attrs:{src:t.groupInfo.groupBuyToActorVos[0].actorList[0].memberHead}}),e("div",{staticClass:"name"},[t._v(t._s(t.groupInfo.groupBuyToActorVos[0].actorList[0].memberName))]),e("div",{staticClass:"rest-row"},[e("span",[t._v("还差"+t._s(t.groupInfo.groupBuyToActorVos[0].leftNum)+"人拼成")]),e("span",{staticStyle:{"margin-top":".08rem"}},[t._v("还剩"),e("count-down",{attrs:{time:t.groupInfo.groupBuyToActorVos[0].endTime-t.groupInfo.groupBuyToActorVos[0].sysTime},on:{finish:t.onTimeDown}})],1)]),e("div",{staticClass:"join-button",on:{click:function(o){return t.doJoin(t.groupInfo.groupBuyToActorVos[0].actorList[0].groupId)}}},[e("span",[t._v("去参团")])])]):t._e(),e("div",{staticClass:"button",on:{click:function(o){return t.doBtnClick(t.groupInfo.viewStatus,t.groupInfo)}}},[1===t.groupInfo.viewStatus?e("span",[t._v("邀人来拼团")]):t._e(),2===t.groupInfo.viewStatus?e("span",[t._v("立即参与")]):t._e(),3===t.groupInfo.viewStatus?e("span",[t._v("继续逛逛")]):t._e(),4===t.groupInfo.viewStatus?e("span",[t._v("我要开团")]):t._e()]),e("van-popup",{staticStyle:{"border-radius":"12px 12px 0px 0px"},attrs:{position:"bottom","get-container":"#app-warp"},model:{value:t.showInfoFlag,callback:function(o){t.showInfoFlag=o},expression:"showInfoFlag"}},[t.productInfo.sgAttribute&&t.productInfo.sgStoreAttribute?e("lazy-attr-modal",{attrs:{sgAttribute:t.productInfo.sgAttribute,sgStockInfo:t.dynamicInfo.sgStockInfo,sgStoreAttribute:t.productInfo.sgStoreAttribute,checkedAttr:t.productInfo.checkedAttr,stepperNum:t.stepperNum,ioucInfo:t.ioucInfo,btnType:10,hasSubProduct:t.hasSubProduct,activityInfo:t.dynamicInfo.activityInfo,attrLength:t.attrLen,priceInfo:t.dynamicInfo.priceInfo,notSaleStatus:t.notSaleStatus,baseInfo:t.dynamicInfo.baseInfo,products:t.productInfo.products},on:{attrConfirm:t.attrConfirm,fnShowInfo:t.fnShowInfo,fnChangeProductNumber:t.fnChangeProductNumber,changeGoodsNumber:t.changeGoodsNumber,attrNameChange:t.attrNameChange,fnSelectAttribute:t.fnSelectAttribute,buy:t.buy,fullBuy:t.buy}}):t._e()],1)],1)},a=[],c=(e("414a"),e("7a82")),u=e("21b1"),p=e("9a20"),l=e("2f62"),f=e("85e4"),d=e("b311"),g=e.n(d),h=e("5967");function m(t,o){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);o&&(n=n.filter((function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),e.push.apply(e,n)}return e}function I(t){for(var o=1;o<arguments.length;o++){var e=null!=arguments[o]?arguments[o]:{};o%2?m(Object(e),!0).forEach((function(o){b(t,o,e[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):m(Object(e)).forEach((function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(e,o))}))}return t}function b(t,o,e){return o in t?Object.defineProperty(t,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[o]=e,t}var v=new u["a"];v.initDeviceReady();var y={components:{CountDown:c["a"],lazyAttrModal:h["a"]},props:{groupInfo:{type:Object,default:function(){}}},data:function(){return{timeDown:5e6,showInfoFlag:!1,viewStatus:0,attrHasSelect:!1,productInfo:{products:{},sgAttribute:{},sgStoreAttribute:[],storeId:"",checkedAttr:""},dynamicInfo:{activityInfo:{},baseInfo:{},sgStockInfo:{},storeInfo:{},priceInfo:{}},hasSubProduct:!1,stepperNum:1,notSaleStatus:!1,ioucInfo:{feeInfo:"查看更多"},sku:"",skku:"",attrLen:0,attrValueNames:"",groupId:0}},watch:{groupInfo:function(t){2!==t.viewStatus&&4!==t.viewStatus||this.getProductInfo()}},mounted:function(){},computed:I(I(I({},Object(l["d"])({location:"getlocationInfo"})),Object(l["d"])(["mId","accessToken","ucId"])),{},{allActorList:function(){for(var t=[],o=this.groupInfo.actors.length,e=0;e<this.groupInfo.clustersNum;e++)e<o?t.push(this.groupInfo.actors[e]):t.push({memberHead:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/groupBooking/icon-head-default.png",role:1});return t}}),methods:{goGoodsDetail:function(t){this.$router.push("/goodsDetail?productId=".concat(t.productId,"&visitStore=").concat(t.storeId))},doBtnClick:function(t,o){switch(t){case 1:this.doShare(o.actors[0].groupId);break;case 2:this.doJoin();break;case 3:this.goHomePage();break;case 4:this.goGoodsDetail(o);break}},doShare:function(){var t=this,o=location.href;if(this.$util.isHaierApp())this.$util.inAppShare({title:"海尔智家",desc:"海尔智家好物拼团，邀你参与",url:o});else{var e=new g.a(".button",{text:function(t){return o}});e.on("success",(function(){t.$toast.success("链接复制成功")})),e.on("error",(function(){t.$toast.success("复制失败")}))}},goHomePage:function(){var t=this;this.$util.isHaierApp()?v.initDeviceReady().then((function(){v.upAppinfoModule.getAppInfo().then((function(o){var e=o.retData.appVersion;console.log(e,"appVersion"),e&&p["a"].gte(e,"6.20.0")?(console.log("aaaa"),t.$util.openNewWindow("https://uplus.haier.com/uplusapp/customize/index.html?close_current_page=true",!0,!0)):(console.log("bbb"),v.initDeviceReady().then((function(){v.closeH5ContainerView()})))}))})):this.$router.push({path:"/"})},doJoin:function(t){this.groupId=t,this.fnShowInfo()},getProductInfo:function(){var t=this;Object(f["Y"])({productId:this.groupInfo.productId,channel:"",openId:"",storeId:this.getShareId||""}).then((function(o){if(o.success){if(t.productInfo=o.data,t.hasSubProduct=!!o.data.sgStoreAttribute[0].haschildItems,t.hasSubProduct)if(t.skku)o.data.sgStoreAttribute.forEach((function(o){o.skku===t.skku&&(t.productInfo.checkedAttr=o.attrValueIds)}));else{var e=t.productInfo.sgStoreAttribute.filter((function(o){return o.attrValueIds===t.productInfo.checkedAttr}))[0];console.log(e,"defaultItem"),e&&(t.sku=e.sku,t.skku=e.skku)}else t.attrHasSelect=!0,t.productInfo.checkedAttr="0";t.dynamic()}}))},dynamic:function(){var t=this;return new Promise((function(o,e){Object(f["B"])({prodId:t.groupInfo.productId,number:t.stepperNum||1,provinceId:t.location.provinceId,cityId:t.location.cityId,regionId:t.location.districtId,streetId:t.location.townshipId,latitude:t.location.latitude,longitude:t.location.longitude,skku:t.skku||null,sku:t.productInfo.products.sku,visitStore:t.groupInfo.storeId}).then((function(o){o.success&&(t.dynamicInfo=o.data,t.fetchIoucCost())}))}))},fetchIoucCost:function(){var t=this;if(!this.$util.isNull(this.accessToken)&&!this.$util.isNull(this.ucId)){var o=0;o=this.dynamicInfo.activityInfo?this.dynamicInfo.priceInfo.finalPrice:this.dynamicInfo.priceInfo.actualPrice,Object(f["M"])({payAmt:o,proGroup:this.productInfo.products.department,sku:this.skku?this.skku:this.groupInfo.sku,token:this.accessToken}).then((function(o){o.success&&(t.ioucInfo=o.data)}))}},calcAttr:function(){var t=[];for(var o in this.dynamicInfo.sgAttribute)t.push(this.dynamicInfo.sgAttribute[o][0].attrName);this.holdSelected=t.join(","),this.hasSubProduct&&(this.attrLen=0)},onTimeDown:function(){this.$emit("refreshData")},buy:function(){this.$emit("fnGoBuy",1)},attrConfirm:function(){this.$store.getters.getLoginStatus||this.$store.dispatch("doLogin"),this.showInfoFlag=!1;var t=[{name:this.hasSubProduct&&this.attrValueNames||null,sku:this.hasSubProduct&&this.skku||null,proId:this.groupInfo.productId,num:this.stepperNum||1,visitStore:this.groupInfo.storeId,exclusivePriceId:""}],o={_proList:t,ac:0,isExclusive:!1,originSource:this.originSource,groupId:this.groupInfo.actors[0].groupId};console.log("createOrder-Param",o),this.$router.push({name:"create",query:o})},fnShowInfo:function(t){this.showInfoFlag=!this.showInfoFlag},attrNameChange:function(t){this.attrValueNames=t,this.attrLen=0===this.attrValueNames.length?"":this.attrValueNames.split(",").length,this.attrValueNames=0===t.length?this.holdSelected:this.attrValueNames},fnChangeProductNumber:function(t){this.stepperNum=t,this.$emit("fnChangeProductNumber",t)},changeGoodsNumber:function(t){this.stepperNum=t,this.$emit("changeGoodsNumber",t)},fnSelectAttribute:function(t,o){this.skku=t.skku,this.stepperNum=o,this.dynamic()}}},_=y,k=(e("0459"),e("2877")),S=Object(k["a"])(_,i,a,!1,null,"80e448d2",null),w=S.exports,P=e("2108");function C(t,o){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);o&&(n=n.filter((function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),e.push.apply(e,n)}return e}function O(t){for(var o=1;o<arguments.length;o++){var e=null!=arguments[o]?arguments[o]:{};o%2?C(Object(e),!0).forEach((function(o){N(t,o,e[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):C(Object(e)).forEach((function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(e,o))}))}return t}function N(t,o,e){return o in t?Object.defineProperty(t,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[o]=e,t}var A=function(){return Promise.all([e.e("chunk-3aea2a64"),e.e("chunk-0183282b")]).then(e.bind(null,"1c43"))},j={components:{skeleton:s["a"],bookingNumRow:w,guessYouLick:A},data:function(){return{isSkeletonLoading:!0,orderSn:"55555",groupInfo:{actors:[]},moreList:[],freeze:Object.freeze({localData:{orderSn:""}})}},created:function(){this.isSkeletonLoading=!1},mounted:function(){this.freeze.localData.orderSn=this.$route.query.orderSn||"",this.getGroupDetail(),this.getMoreList()},computed:O({},Object(l["d"])({location:"getlocationInfo"})),methods:{goShop:function(t){this.$router.push("/shopDetail?storeId=".concat(t.storeId))},goGoodsDetail:function(t){this.$router.push("/goodsDetail?productId=".concat(t.productId,"&visitStore=").concat(t.storeId))},getGroupDetail:function(){var t=this;Object(P["b"])({orderSn:this.freeze.localData.orderSn}).then((function(o){t.isSkeletonLoading=!1,o.success&&(t.groupInfo=o.data)}))},getMoreList:function(){var t=this;Object(P["c"])({streetId:this.location.townshipId}).then((function(o){o.success?(o.data.map((function(t){t.sellPoint=null!=t.sellPoints?t.sellPoints.split(","):[]})),t.moreList=o.data||[]):t.$toast(o.message)}))},sortList:function(t){for(var o=t.length,e=0;e<o;e++)for(var n=0;n<o-1-e;n++)if(t[n].tagOrder>t[n+1].tagOrder){var r=t[n+1];t[n+1]=t[n],t[n]=r}return t}}},D=j,L=(e("3054"),Object(k["a"])(D,n,r,!1,null,"7721700e",null));o["default"]=L.exports},"9a20":function(t,o,e){"use strict";var n=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=t.split("."),n=o.split("."),r=Math.max(e.length,n.length),s=0,i=0;i<r;i++){var a=e.length>i?e[i]:0,c=isNaN(Number(a))?a.charCodeAt():Number(a),u=n.length>i?n[i]:0,p=isNaN(Number(u))?u.charCodeAt():Number(u);if(c<p){s=-1;break}if(c>p){s=1;break}}return s};o["a"]={gte:function(t,o){return n(t,o)>=0},gt:function(t,o){return n(t,o)>0},lte:function(t,o){return n(t,o)<=0},lt:function(t,o){return n(t,o)<0},eq:function(t,o){return 0===n(t,o)}}},a73f:function(t,o,e){"use strict";var n=function(t,o){var e=o._c;return o.props.nums>0?e("div",{staticClass:"m-skeleton",style:{"z-index":o.props.zIndex||0}},[e("div",{style:{background:o.props.bgColor,height:o.props.fheight}}),o._l(o.props.nums-1,(function(t){return e("div",{key:t,style:{background:o.props.bgColor,height:o.props.iheight}})}))],2):o._e()},r=[],s=(e("80cc"),e("2877")),i={},a=Object(s["a"])(i,n,r,!0,null,null,null);o["a"]=a.exports}}]);
//# sourceMappingURL=groupBookingDetail.d2e10336.js.map