(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22ab826a"],{"0d0a":function(t,n,e){"use strict";e("89e7")},"347c":function(t,n,e){},"80cc":function(t,n,e){"use strict";e("347c")},"89e7":function(t,n,e){},a73f:function(t,n,e){"use strict";var i=function(t,n){var e=n._c;return n.props.nums>0?e("div",{staticClass:"m-skeleton",style:{"z-index":n.props.zIndex||0}},[e("div",{style:{background:n.props.bgColor,height:n.props.fheight}}),n._l(n.props.nums-1,(function(t){return e("div",{key:t,style:{background:n.props.bgColor,height:n.props.iheight}})}))],2):n._e()},s=[],a=(e("80cc"),e("2877")),o={},r=Object(a["a"])(o,i,s,!0,null,null,null);n["a"]=r.exports},e805:function(t,n,e){"use strict";e.r(n);var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"diamond"},[t.skeletonLoading?e("skeleton",{attrs:{nums:3}}):e("div",[e("div",{staticClass:"diamod-banner",class:{"diamod-center":!t.linkInfo}},[e("img",{staticClass:"bg-img",attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/mine/banner_bg.png"}}),e("div",{staticClass:"diamod-flex"},[e("h4",[e("img",{attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/mine/zuanshi.png"}}),t._v("当前钻石")]),e("div",[t._v(t._s(t.diamodCount)),e("small",[t._v("个")])])]),t.linkInfo?e("a",{attrs:{href:"javascript:;"},on:{click:t.goLink}},[t._v("立即使用")]):t._e()]),e("div",{staticClass:"diamond-warp"},[e("div",{staticClass:"diamond-tab"},t._l(t.tabTypes,(function(n){return e("div",{key:n.id,class:{active:t.curType==n.type},on:{click:function(e){return t.changeTab(n)}}},[t._v(t._s(n.name))])})),0),!t.lists.length&&t.finished?e("div",{staticClass:"diamond-empty"},[e("img",{attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/mine/none.png",alt:""}}),e("p",[t._v("暂无记录~")])]):e("div",{staticClass:"diamond-list"},[e("van-list",{attrs:{finished:t.finished},on:{load:t.fetchData},model:{value:t.loading,callback:function(n){t.loading=n},expression:"loading"}},t._l(t.lists,(function(n,i){return e("div",{key:i,staticClass:"diamond-item",class:{active:n.show}},[e("div",{staticClass:"item-title",on:{click:function(e){return t.toShow(n)}}},[e("h4",[t._v(t._s(t._f("formatterStr")(n.payTime)))]),e("span",[t._v(t._s(+n.transType?"收入":"支出"))]),e("div",[e("strong",[t._v(t._s(+n.transType?"+":"-")+t._s(n.changeCount))]),e("p",[t._v(t._s(n.remark))])]),e("img",{staticClass:"arrow",attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/mine/arrow.png"}})]),e("div",{staticClass:"item-body"},[t._v(t._s(n.userSideMsg))])])})),0),t.finished?e("p",{staticClass:"load-end"},[t._v("到底啦~")]):t._e()],1)])])],1)},s=[],a=e("a73f"),o=e("bbc2");function r(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,i)}return e}function c(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?r(Object(e),!0).forEach((function(n){l(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):r(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function l(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var d={name:"diamond",components:{skeleton:a["a"]},data:function(){return{skeletonLoading:!0,diamodCount:0,loading:!0,finished:!1,curPage:1,curType:null,tabTypes:[{type:null,name:"全部",id:0},{type:1,name:"收入",id:1},{type:0,name:"支出",id:2}],linkInfo:null,lists:[]}},filters:{formatterStr:function(t){return t.substring(0,4)+"年"+t.substring(4,6)+"月"+t.substring(6,8)+"日"}},mounted:function(){var t=this;this.$util.isUplus()?this.$store.dispatch("handleUpAuth").then((function(n){n?(t.loading=!1,t.fetchTotal(),t.fetchLink()):t.$store.dispatch("doLogin")})):this.$store.state.isLogin?(this.loading=!1,this.fetchTotal(),this.fetchLink()):this.$store.dispatch("doLogin")},methods:{fetchLink:function(){var t=this;this.$http.get(o["a"].GET_DIAMOND_LINK).then((function(n){var e=n.data;console.log(e,"link"),e.success&&(t.linkInfo=e.data&&e.data[0])}))},fetchTotal:function(){var t=this;this.$http.get(o["a"].GET_DIAMOND_TOTAL).then((function(n){var e=n.data;console.log(e,"total"),t.skeletonLoading=!1,e.success?t.diamodCount=e.data.usableDiamond:t.$toast(e.message)}))},fetchData:function(){var t=this;this.loading=!0,this.$http.get(o["a"].GET_DIAMOND_DETAIL,{params:{benefitType:"diamond",transType:this.curType,pageNo:this.curPage,pageSize:20}}).then((function(n){var e=n.data;if(t.loading=!1,console.log(e),e.success)if(e.data&&e.data.paymentList){var i=e.data.paymentList.map((function(t){return c(c({},t),{},{show:!1})}));t.lists=t.lists.concat(i),t.curPage+=1,i.length<20&&(t.finished=!0)}else t.finished=!0;else t.$toast(e.message)}))},toShow:function(t){t.show=!t.show},changeTab:function(t){this.curType!==t.type&&(this.curType=t.type,this.curPage=1,this.lists=[],this.loading=!1,this.finished=!1,this.fetchData())},goLink:function(){console.log(this.linkInfo),this.linkInfo&&this.$store.dispatch("goPageByType",{params:this.linkInfo.hyperParam,type:+this.linkInfo.hyperType})}}},u=d,h=(e("0d0a"),e("2877")),p=Object(h["a"])(u,i,s,!1,null,"41c5e20c",null);n["default"]=p.exports}}]);
//# sourceMappingURL=chunk-22ab826a.35c14800.js.map