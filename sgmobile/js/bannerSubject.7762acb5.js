(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["bannerSubject"],{"0274":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[t.isSkeletonLoading?i("skeleton",{attrs:{nums:4,iheight:".4rem"}}):i("div",[i("div",{ref:"contentContainer",staticClass:"content-container",on:{scroll:t.handleScroll}},[t.$route.query.browerFirstIn?t._e():i("div",{staticClass:"icon-back",on:{click:t.goBack}},[i("img",{attrs:{src:t.$globalIcon.whiteBackIcon}})]),t.isUplus||t.isFromRN||t.isFromIhaier?i("div",{staticClass:"share-btn",on:{click:t.doShare}},[i("img",{attrs:{alt:"",src:t.$globalIcon.whiteShareIcon}})]):t._e(),i("van-grid",{attrs:{border:!1,"column-num":2}},t._l(t.dataList,(function(e,o){return i("van-grid-item",{key:o,attrs:{id:"banner"+e.id},on:{click:function(i){return t.imgClick(e)}}},[i("div",{staticClass:"van-grid-item__content",style:{"background-image":t.getImgUrl(e),"background-size":"100%"}},[i("van-image",{attrs:{"lazy-load":"",width:"100%",src:t._f("imageToWebp")(e.imageUrl.replace("http:","https:"),t.$webpSurpport)}})],1)])})),1)],1)]),i("top-feedBack",{attrs:{isShow:t.showToTopFlag},on:{hiddenFeedBack:t.hiddenFeedBack,toTop:t.fnScrollToTop}})],1)},n=[],r=i("2f62"),a=i("6beb"),s=i("a73f"),c=i("fa7d"),u=i("1619"),l=i("21b1"),d=i("b311"),h=i.n(d),p=i("1669");function f(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function g(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?f(Object(i),!0).forEach((function(e){m(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function m(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var v=new l["a"];v.initDeviceReady();var b={activityInfo:{},isHost:0,storeId:"",scrollTop:0},y={name:"bannerSubject",mixins:[p["a"]],components:{Skeleton:s["a"]},data:function(){return{isSkeletonLoading:!0,isUplus:this.$util.isHaierApp(),isFromRN:this.$util.isSgRn(),isFromIhaier:this.$util.isIhaierApp(),dataList:[],scrollTarget:".content-container",userInfo:null}},beforeRouteEnter:function(t,e,i){if(c["a"].isSgRn()){var o=t.query.id,n=t.query.storeId;window.postMessage(JSON.stringify({type:"goBannerTheme",data:{bannerThemeId:o,storeId:n}})),i(!1)}else i()},mounted:function(){var t=this;this.$util.gioTrackWithVariable("mall_activity_view",{activity_id:this.$route.query.id,activity_type:"主题活动"}),this.isWdHost(),c["a"].isUplus()&&(this.doShowUplusLive(),console.log(this.$route.query,"just in url"),this.$route.query.taskCode&&this.$store.dispatch("doReviewTime",this.$route.query).then((function(e){e&&t.$toast("已达成浏览时长")})))},activated:function(){var t=this;this.$nextTick((function(){t.$refs.contentContainer&&t.$refs.contentContainer.scrollTo(0,b.scrollTop||0)}))},computed:g(g({},Object(r["d"])(["mId"])),Object(r["d"])({accessToken:"accessToken"})),methods:{getImgUrl:function(t){return"url(".concat(Object(u["imageToWebp"])(t.imageUrl.replace("http:","https:"),this.$webpSurpport),")")},option:function(){if(this.$refs.contentContainer){var t=this.$refs.contentContainer.scrollTop;this.showToTopFlag=t>200}},doShowUplusLive:function(){var t=this.$route.query.show_live;+t&&!sessionStorage.getItem("showlive")&&v.initDeviceReady().then((function(){v.upLiveModule.showFloatWindow()}))},doShare:function(){this.$util.gioTrackWithVariable("mall_activity_click_share",{activity_id:this.$route.query.id+"",activity_type:"主题活动"});var t=b.activityInfo.title,e=b.activityInfo.content||"海尔智家商城",i=b.activityInfo.imgUrl,o=this.$route.query.id,n=this.mId?"".concat(location.origin).concat(location.pathname,"?id=").concat(o,"&shareId=").concat(this.mId):"".concat(location.origin).concat(location.pathname,"?id=").concat(o);this.isFromRN?window.postMessage("custPageShare|"+t+"|"+e+"|"+i+"|"+n):(this.$util.isHaierApp()||this.$util.isIhaierApp())&&this.$util.inAppShare({title:t,url:n,desc:e,thumImage:i}).then((function(t){return console.log(t)}))},goBack:function(){this.$store.dispatch("doHistoryBack")},isWdHost:function(t){var e=this;a["a"].isWdHost().then((function(i){console.log("isWdHost:",i.data),i.data.success&&(b.isHost=i.data.data.isHost,b.storeId=i.data.data.storeMemberId,e.getActivityPage(t))}))["catch"]((function(t){console.log(t),b.isHost=0,b.storeId=0,e.getActivityPage()}))},getActivityPage:function(t){var e=this,i=this.$route.query.id;a["a"].getActivityPage({bannerId:i,storeId:b.storeId,isHost:b.isHost,backUrl:""}).then((function(i){console.log(i.data),i.data.success&&(e.isSkeletonLoading=!1,b.activityInfo=i.data.data,e.dataList=i.data.data.productList,setTimeout((function(){e.$refs.contentContainer.scrollTo(0,b.scrollTop||0)}),500)),t&&t(),e.$store.dispatch("WeChatSecondShare",{title:b.activityInfo.title,desc:b.activityInfo.content,thumImage:b.activityInfo.imgUrl})}))},imgClick:function(t){b.scrollTop=this.$refs.contentContainer.scrollTop,this.$store.dispatch("goPageByType",{type:Number(t.activityUrlType),params:t.activityUrl,elementId:t.id})},shareHandler:function(t){var e=this;if(this.$util.isHaierApp())this.$util.inAppShare({title:t.title||"海尔智家商城",desc:t.desc||"海尔智家商城",url:t.url});else{var i=new h.a("#banner".concat(t.id),{text:function(e){return t.url}});i.on("success",(function(){e.$toast("活动链接复制成功！")})),i.on("error",(function(){e.$toast("复制失败")}))}}}},T=y,I=(i("2eb7"),i("2877")),w=Object(I["a"])(T,o,n,!1,null,"0609c9d0",null);e["default"]=w.exports},1669:function(t,e,i){"use strict";var o=function(){return i.e("chunk-2b4715e4").then(i.bind(null,"c63d"))};e["a"]={components:{topFeedBack:o},data:function(){return{showToTopFlag:!1,scrollTarget:""}},mounted:function(){this.debouncedAction=this.$util.throttle(this.option,100)},methods:{handleScroll:function(t){this.debouncedAction()},option:function(){var t=this.$refs.toTop.scrollTop;this.showToTopFlag=t>200},hiddenFeedBack:function(){this.showToTopFlag=!1},fnScrollToTop:function(){this.scrollSmoothTo(0)},scrollSmoothTo:function(t){window.requestAnimationFrame||(window.requestAnimationFrame=function(t){return setTimeout(t,17)});var e=document.querySelector(this.scrollTarget),i=e.scrollTop,o=function o(){var n=t-i;i+=n/10,Math.abs(n)<1?e.scrollTo(0,t):(e.scrollTo(0,i),requestAnimationFrame(o))};o()}}}},"2eb7":function(t,e,i){"use strict";i("cae9")},"347c":function(t,e,i){},"6beb":function(t,e,i){"use strict";var o=i("bbc2"),n=i("1c03"),r=function(t){return n["a"].get(o["a"].GET_CUSTOM_PAGE,{params:t})},a=function(t){return n["a"].get(o["a"].GET_ACTIVITY_PAGE,{params:t})},s=function(t){return n["a"].get(o["a"].GET_COUPON_DETAIL,{params:t})},c=function(t){return n["a"].get(o["a"].REMIND_COUPONS_LIST,{params:t})},u=function(t){return n["a"].get(o["a"].receiveCoupon,{params:t})},l=function(t){return n["a"].get(o["a"].isWdHost,{params:t})};e["a"]={getCustomPage:r,getActivityPage:a,getCouponDetail:s,setCouponRemind:c,getCoupon:u,isWdHost:l}},"80cc":function(t,e,i){"use strict";i("347c")},a73f:function(t,e,i){"use strict";var o=function(t,e){var i=e._c;return e.props.nums>0?i("div",{staticClass:"m-skeleton",style:{"z-index":e.props.zIndex||0}},[i("div",{style:{background:e.props.bgColor,height:e.props.fheight}}),e._l(e.props.nums-1,(function(t){return i("div",{key:t,style:{background:e.props.bgColor,height:e.props.iheight}})}))],2):e._e()},n=[],r=(i("80cc"),i("2877")),a={},s=Object(r["a"])(a,o,n,!0,null,null,null);e["a"]=s.exports},cae9:function(t,e,i){}}]);
//# sourceMappingURL=bannerSubject.7762acb5.js.map