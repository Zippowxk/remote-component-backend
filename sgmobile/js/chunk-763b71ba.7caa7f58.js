(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-763b71ba"],{"0374":function(e,t,i){"use strict";i.r(t);var s,n,a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wrapper"},[e.isSkeletonLoading?i("div",{staticClass:"main",style:""!==e.bgImage&&e.bgImage&&{"background-image":"url("+e.bgImage+")"}},[e.$route.query.browerFirstIn||e.isAliMP?e._e():i("div",{staticClass:"left",on:{click:e.fnBack}},[i("img",{attrs:{alt:"",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABR9JREFUeAHdmstqFEEUhhMzamIUL8ELxFsEFckiILowS1d5CSHb+AqufQWzDfgSrlwGRNBECKKIYsJ4wWvUmKgT9f/aqaFnprunL1U91R74M5OerlP1/111qqvqDA64t92qYkzYJ4wKe4VdQq0JfQw0mvipz2/ChvBV+CD8EJzZoCPPB+R3XDgsQLyIIcQ7oS58LuIoqqxNAXiip4STAk/ZhdE7VoWXAr2msNkQYKdacUaYEPhehv1SJS+E5wLfc1sRASh7QrggMKb7YcSMx8Ka8CdPA/IKsEeVXRQO5qnUQZlP8vlA+J7V91DWArr/kHBFcDXOczRpYESFjgsIsZnFQVYBCHCXBAKebwYXhuSWsJ62cWkFYKhMCoz3vMMmbZuK3EfbjgkE4/dpHKURAKeXBdStihGb9guvejU4jQA8+SqRN5yJUQxVXqJirZcAjHm6fVWNnpAYE5IEINoT8Hwe82kezFHdRDyInB3iBGCeZ6rzMdqrWZnMBMbXKtX11rgjwhUFeMnp19tdRJMKX4ILnLp6c5QABLzS3/BmZ2fHQWGq8Q7g1BXMO7s482fpQQ/i8/PzN5ttv7GwsFCP51HoF7i1DYXOGHBWNxwpVEXGwob88PDwoVqtNjIzMzNdr9fvLy0tsQ9g2+D7W2CjJbDwEKA3TDSvl/IRJm8qRIi5ubmr5n8Hn3Bs9fywAGxmMARKsSjyVLyysnJnenr6tsNGwBGugYUF4KWnFEsiPzU1dWt7e9t1O1pcjQDs4ZWyvPWAPOLCFc4DRgCX0w/1BOYJedOcgLMRgN1bp+YZebgGnBGAffuiW9c4jDUPydNWOO9GAA4tnJmn5A3fMQRw9vQ9J48I+xBglG+2rQLkoTyKANanv4qQR4C9CGB12Vsh8giwCwFa78VcKWIVIw/VmlUBiojXp7KBANbqZh2vldyNra2tj2Gnk5OTM8vLy9eHhjpX3+G7+vOdHmDlmNk0v2IiNKwLgBAVEiEQgCNm61YREX7SA8i6cGIVEOEbAmw4Yd906rkIGwjgYvOxTVOPRfiKAK0d0rZWW/7HUxE+IAB5eM57AXp6JgKcfyAAlniE/O8WO389EiHgbARwdRITqZonIgScjQBkYDqbDqNUSBJhcXHxWlQZi9fgGmSdGgHwvWqxglSuokRgHaFzwrupHOS/qcU1vDohKJwWwtfyV5GyJGeAnAVyJthoNDZZTCFMyuJ5biNH4KHAGWHXefl5XTvHD2UbewnU6Zg8VTwVnvAF60wY4NzsqmB1l4iKPDHWPQwvekFg4RjABX4g9/Z/Nbi1yEOyUwCurQmknP5vBie4tVmUAGRdk3jsZJncVnt5/8AFTl0Z5XERn26CYuTUdMYJXaqUQfqe8CWq1XECcC95dSQZkntbZXukxr+JI5AkAGXWBWaG0rPGqNyCPZePZ0l+eglAWbIs9wvWT5Bw7tDeyvdyL/9pBMDHK4EDlKr0BJ485LuCnq61WVoBKMTykZhwVPA1MEKYMZ/Y7fV7y7IIQKF1gSFBYMxaVkWcGlMd0T424EXVnocEswPZlgyHkSinfbjGlB071SW1p0hXpizvCReEfq0deOq83q4JPce77umyIgIYZ0yTZ4QJge9lGC9qLwSCXdu7fdbKbQhg6mSWOCWcFFxNmezkrAovBStnmjYFUJtaRhLiuEAqWtEcJDZqmIHqQrCNpU9r5kqAcANJwxsTEGJUoHcQM+gxJjmDpwkY0zxlTqsgzpkF2/bO7C8zK+hsU2j9ZgAAAABJRU5ErkJggg=="}})]),i("div",{staticClass:"right",on:{click:e.showGameRules}}),i("div",{staticClass:"game-title"},[e._v(" "+e._s(e.gameInfo.gameTitle)+" ")]),i("div",{staticClass:"middle",staticStyle:{"z-index":"10"},on:{click:e.startRoll}},[-1===e.gameStatusType?i("div",{staticClass:"title"},[e._v("活动未开始")]):e._e(),-2===e.gameStatusType?i("div",{staticClass:"title"},[e._v("活动已结束")]):e._e(),0===e.gameStatusType?i("div",{staticClass:"title"},[e._v("你还有"),i("span",{staticStyle:{color:"#FF8700"}},[e._v(e._s(e.shotChanges?e.shotChanges:0))]),e._v("次抽奖机会")]):e._e(),i("img",{staticClass:"wheel-button",attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/gameofstore/button.png",alt:""}})]),i("div",{staticClass:"container wheel"},e._l(e.list,(function(t,s){return i("div",{key:t.number,staticClass:"box",class:{start:7===s,end:3===s},style:{order:t.order,zIndex:s===e.currentIndex?9:0}},[i("div",{staticClass:"in-box"},[i("div",{staticClass:"in-box-container",class:{isHighlight:s===e.currentIndex}},[i("div",{staticClass:"image-wrapper"},[i("img",{style:t.info.image?"":"width:0.52rem",attrs:{src:t.info.image?t.info.image:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/game/dzp_pity.png",alt:""}})]),i("div",{staticClass:"title"},[e._v(e._s(null!==t.info.prizeName&&"null"!==t.info.prizeName?t.info.prizeName:"谢谢参与"))])])])])})),0),i("div",{staticClass:"share"},[e.canShare?[i("div",{class:e.canShareHelp?"share-button-help":"share-button",on:{click:e.showShare}}),e.canShareHelp?i("div",{staticClass:"description"},[e._v("— 好友助力最多额外获得"),i("span",{staticStyle:{color:"#FFBD00"}},[e._v(e._s(e.helpInfo.chance))]),e._v("次机会 —")]):i("div",{staticStyle:{height:"0.2rem"}})]:[i("div",{staticStyle:{height:"1.5rem"}})]],2),i("div",{staticClass:"list"},[i("div",{staticClass:"list-view"},[i("ul",{staticClass:"list-view-ul",style:e.winnerListDuration},e._l(e.winnerList,(function(t,s){return i("li",{key:s,staticClass:"list-item"},[i("span",{staticClass:"mobile"},[e._v(e._s(e._f("replaceMobile")(t.mobile)))]),i("span",{staticClass:"prize"},[e._v(e._s(t.prizeName))])])})),0)])]),i("div",{staticClass:"my-gift"},[i("div",{staticClass:"gift-record",on:{click:e.fnRecord}}),i("div",{staticClass:"gift-address",on:{click:e.fnAddress}})]),i("van-popup",{staticStyle:{"background-color":"transparent"},model:{value:e.showPopup,callback:function(t){e.showPopup=t},expression:"showPopup"}},[e.popupType>=0&&e.popupType<=8?i("div",{staticClass:"type-0 flex-middle"},[i("div",{staticClass:"pop-top"},[0===e.popupType?i("img",{staticStyle:{width:"5.19rem"},attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/game/miss.png",alt:""}}):1===e.popupType||2===e.popupType||3===e.popupType?i("img",{staticStyle:{width:"7.5rem"},attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/game/bingo.png",alt:""}}):4===e.popupType?i("img",{staticStyle:{width:"7.5rem"},attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/game/no_more_free.png",alt:""}}):5===e.popupType?i("img",{staticStyle:{width:"5.42rem"},attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/game/no_more.png",alt:""}}):6===e.popupType?i("img",{staticStyle:{width:"3.68rem"},attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/game/dzp_suc.png",alt:""}}):7===e.popupType?i("img",{staticStyle:{width:"3.69rem"},attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/game/dzp_all.png",alt:""}}):8===e.popupType?i("img",{staticStyle:{width:"3.69rem"},attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/game/dzp_already.png",alt:""}}):e._e()]),e.popupType>=0&&e.popupType<=5?i("div",{staticClass:"pop-middle flex-middle"},[i("div",{staticClass:"flex-middle",staticStyle:{padding:"1rem 0rem 0rem 0rem",overflow:"hidden",position:"relative",height:"100%",width:"100%"}},[0===e.popupType?i("div",{staticClass:"title"},[e._v("很遗憾，您未抽中任何奖品")]):e._e(),1===e.popupType?i("div",{staticClass:"title"},[e._v("恭喜您抽中"+e._s(e.prizeInfo.prizeName))]):e._e(),2===e.popupType?i("div",{staticClass:"title"},[e._v(e._s(e.prizeInfo.message))]):e._e(),3===e.popupType&&2===e.prizeInfo.prizeType?i("div",{staticClass:"title"},[e._v("恭喜您抽中"+e._s(e.prizeInfo.prizeName)+"优惠券一张")]):e._e(),3===e.popupType&&6===e.prizeInfo.prizeType?i("div",{staticClass:"title"},[e._v("恭喜您抽中"+e._s(e.prizeInfo.prizeName))]):e._e(),4===e.popupType?i("div",{staticClass:"title"},[e._v("很遗憾，您的免费抽奖机会已用完")]):e._e(),0===e.popupType?i("img",{staticStyle:{width:"1.08rem"},attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/game/miss_icon.png",alt:""}}):e._e(),1===e.popupType||2===e.popupType||3===e.popupType?i("img",{staticStyle:{"max-width":"2.08rem","max-height":"2.2rem"},attrs:{src:e.list[this.target].info.image,alt:""}}):e._e(),0===e.popupType?i("div",{staticStyle:{color:"#E72536","font-size":"20px","margin-top":"0.2rem"}},[e._v("未中奖")]):e._e(),4===e.popupType?i("div",{staticClass:"flex-middle",staticStyle:{"margin-top":"0.5rem",color:"#D03336","font-size":"0.2rem","line-height":"0.3rem"}},[i("div",[e._v("分享活动，")]),i("div",[e._v("邀请好友助力，")]),i("div",[e._v("可额外获得助力机会哦！")])]):e._e(),5===e.popupType?i("div",{staticClass:"flex-middle",staticStyle:{"margin-top":"0.7rem",color:"##333333","font-size":"0.24rem","line-height":"0.36rem"}},[i("div",[e._v("很抱歉！")]),i("div",[e._v("您的抽奖机会已用完！")]),i("div",[e._v("感谢您的参与！")])]):e._e(),1===e.popupType?i("div",{staticClass:"description"},[e._v("我们的工作人员会尽快和您联系")]):e._e(),2===e.popupType?i("div",{staticClass:"description"},[e._v("请点击下一步登记填写收货信息！")]):e._e(),3===e.popupType&&2===e.prizeInfo.prizeType?i("div",{staticClass:"description"},[e._v('请点击"个人中心—我的优惠券"查看')]):e._e(),3===e.popupType&&6===e.prizeInfo.prizeType?i("div",{staticClass:"description"},[e._v('请点击"个人中心—我的钱包"查看')]):e._e(),0===e.popupType||1===e.popupType||5===e.popupType?i("img",{staticClass:"button-img",attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/game/dzp_confirm.png",alt:""},on:{click:e.fnConfirm}}):e._e(),2===e.popupType?i("img",{staticClass:"button-img",attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/game/dzp_next.png",alt:""},on:{click:e.gotoAddress}}):e._e(),3===e.popupType&&2===e.prizeInfo.prizeType?i("img",{staticClass:"button-img",attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/game/dzp_check.png",alt:""},on:{click:e.fnGotoMyCoupon}}):e._e(),3===e.popupType&&6===e.prizeInfo.prizeType?i("img",{staticClass:"button-img",attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/game/dzp_check.png",alt:""},on:{click:e.fnGotoMyDiamond}}):e._e(),4===e.popupType?i("img",{staticClass:"button-img",attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/game/dzp_goshare.png",alt:""},on:{click:e.showShare}}):e._e()])]):e._e(),e.popupType>=6&&e.popupType<=8?i("div",{staticClass:"pop-middle-card flex-middle"},[i("div",{staticClass:"flex-middle",staticStyle:{"justify-content":"center",padding:"1rem 0rem 0rem 0rem",overflow:"hidden",position:"relative",height:"100%",width:"100%"}},[6===e.popupType?i("img",{staticStyle:{width:"3.38rem"},attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/game/dzp_star.png",alt:""}}):e._e(),7===e.popupType?i("div",{staticStyle:{width:"2.88rem",color:"#DB3232","font-size":"0.24rem","line-height":"0.36rem","text-align":"center"}},[e._v("我已集齐助力，感谢您的帮助，一起来抢丰厚大奖吧！")]):e._e(),8===e.popupType?i("div",{staticStyle:{width:"2.88rem",color:"#DB3232","font-size":"0.24rem","line-height":"0.36rem","text-align":"center"}},[e._v("您已成功助力，每人最多助力一次哦！")]):e._e()])]):e._e(),6===e.popupType||8===e.popupType?i("img",{staticClass:"button-img",staticStyle:{width:"3.6rem",position:"relative",top:"-0.3rem"},attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/game/dzp_confirm.png",alt:""},on:{click:e.fnConfirm}}):e._e(),7===e.popupType?i("img",{staticClass:"button-img",staticStyle:{width:"3.85rem",position:"relative",top:"-0.3rem"},attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/game/dzp_goplay.png",alt:""},on:{click:e.fnConfirm}}):e._e(),i("div",{staticClass:"pop-bottom",on:{click:function(t){e.showPopup=!1}}})]):e._e(),e.popupType>=9&&e.popupType<=11?i("div",{staticClass:"type-0 flex-middle"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.popupType>=9&&e.popupType<=11,expression:"popupType>=9&&popupType<=11"}],staticStyle:{"align-self":"flex-end"},on:{click:function(t){e.showPopup=!1}}},[i("img",{staticStyle:{width:"0.56rem"},attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/game/close_little.png",alt:""}})]),9===e.popupType?i("div",{staticClass:"bg2"},[i("div",{staticStyle:{"padding-top":"1rem","padding-left":"0.4rem","padding-right":"0.4rem","font-size":"0.24rem","line-height":"0.36rem",color:"#666666"}},[e._v("海尔智家幸运大转盘，天天福利多！免费参与抽丰厚大奖，下一个幸运的小可爱就是你！")]),i("img",{staticStyle:{width:"3.6rem","margin-top":"0.3rem"},attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/game/dzp_help.png",alt:""},on:{click:e.fnDoHelp}}),i("img",{staticStyle:{width:"3.6rem","margin-top":"0.3rem"},attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/game/dzp_iplay.png",alt:""},on:{click:e.fnConfirm}})]):e._e(),10===e.popupType?i("div",{staticClass:"bg3"},[i("div",{staticStyle:{height:"6.36rem","padding-left":"0.4rem","padding-right":"0.4rem","font-size":"0.24rem","line-height":"0.36rem",color:"#666666",overflow:"scroll"},domProps:{innerHTML:e._s(e.gameInfo.activityDesc)}})]):e._e(),11===e.popupType?i("div",{staticClass:"bg4"},[i("div",{staticStyle:{"padding-left":"0.4rem","padding-right":"0.4rem","font-size":"0.24rem","line-height":"0.36rem",color:"#666666",overflow:"scroll",height:"1rem"},domProps:{innerHTML:e._s(e.helpInfo.helpDesc)}}),i("img",{staticStyle:{width:"3.6rem","margin-top":"0.3rem"},attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/game/dzp_invite.png",alt:""},on:{click:function(t){return e.fnShareWechat(!0)}}}),i("div",{staticStyle:{"margin-top":"0.1rem","padding-left":"0.4rem","padding-right":"0.4rem","font-size":"0.2rem","line-height":"0.2rem",color:"#999"}},[e._v("好友助力，最多额外获得"),i("span",{staticStyle:{color:"#F32E3F"}},[e._v(e._s(e.friendsHelp.canTakeMoreChance))]),e._v("次抽奖机会")]),i("div",{staticStyle:{"margin-top":"1.7rem",display:"flex","align-items":"center"}},[i("div",{staticStyle:{"font-size":"0.24rem",color:"#333","vertical-align":"bottom",position:"relative",top:"0.2rem"}},[e._v("抽奖机会")]),i("div",{ref:"progresser",staticClass:"progresser"},e._l(e.stepList,(function(t,s){return i("div",{key:s,staticStyle:{display:"flex","flex-direction":"column","justify-content":"flex-end","align-items":"center",overflow:"visible"}},[s<=e.friendsHelp.alreadyTake?i("div",{staticStyle:{position:"relative",left:"-0.15rem"}},[i("span",{staticClass:"counter"},[e._v(e._s(t.isDone?"已集齐"+e.friendsHelp.everyStep+"人":e.friendsHelp.current+"人"))])]):e._e(),i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("div",{class:0===s?"dzp-border-left":"",staticStyle:{"background-color":"#eee",width:"1.1rem",height:"0.1rem"}},[i("div",{staticClass:"progress",class:0===s?"dzp-border-left":s===e.friendsHelp.alreadyTake?"dzp-border-right":"",style:{width:100*t.progress+"%"}})]),i("div",{class:s<e.friendsHelp.alreadyTake?"dzp_slider_button":"dzp_slider_button_gray"},[e._v("+"+e._s(s+1))])])])})),0)]),i("div",{staticStyle:{"margin-top":"0.1rem","padding-left":"0.4rem","padding-right":"0.2rem","font-size":"0.2rem","line-height":"0.2rem",color:"#999"}},[e._v("已额外获得"),i("span",{staticStyle:{color:"#F32E3F"}},[e._v(e._s(e.friendsHelp.alreadyTake))]),e._v("次机会"),this.canShareHelp&&this.helpInfo.chance!==this.helpInfo.hasChanceNum?[e._v("，还差"),i("span",{staticStyle:{color:"#F32E3F"}},[e._v(e._s(e.friendsHelp.everyStep-e.friendsHelp.current))]),e._v("人助力即可获得一次额外机会！")]:e._e()],2)]):e._e()]):e._e()])],1):i("skeleton",{attrs:{nums:3,fheight:"4rem",iheight:"4rem"}})],1)},o=[],r=(i("e7e5"),i("d399")),p=i("efdb"),c=i("fa7d"),l=i("a73f"),h=i("bbc2"),u=i("2f62"),d=i("19e7"),m=i("b311"),g=i.n(m);function f(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function v(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?f(Object(i),!0).forEach((function(t){y(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function y(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var w={name:"StoreLuckyWheel",data:function(){return{isSkeletonLoading:!1,canShare:!1,canShareHelp:!1,gameId:"",prizeInfo:{},isRolling:!1,gameInfo:{},showPopup:!1,popupType:-1,currentIndex:0,list:[],animationStop:!0,target:-1,imgBaseUrl:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/game/",shotChanges:0,buttonAnimation:!1,animationFlag:!0,winnerList:[],openId:"",helpInfo:{chance:0,hasChanceNum:0,helpNum:0,helpedNum:0},totalPartNum:0,playTimes:0,partNum:0,gameStatusType:-1,isAliENV:!1,isAliMP:!1,bgImage:"",storeId:""}},components:{skeleton:l["a"]},computed:v(v({},Object(u["d"])(["mId"])),{},{stepList:function(){for(var e=[],t=0;t<this.helpInfo.chance;t++){var i=t<this.friendsHelp.alreadyTake?1:t===this.friendsHelp.alreadyTake?this.friendsHelp.current/this.friendsHelp.everyStep:0;e.push({index:t,isDone:t<this.friendsHelp.alreadyTake,progress:i})}return e},winnerListDuration:function(){return{"animation-duration":"".concat(this.winnerList.length<5?5:this.winnerList.length,"s"),"-webkit-animation-duration":"".concat(this.winnerList.length<5?5:this.winnerList.length,"s")}},friendsHelp:function(){return this.helpInfo?{canTakeMoreChance:0|this.helpInfo.chance,alreadyTake:0|this.helpInfo.hasChanceNum,everyStep:0|this.helpInfo.helpNum,current:this.helpInfo.helpedNum%this.helpInfo.helpNum|0}:{canTakeMoreChance:0,alreadyTake:0,everyStep:0,current:0}}}),created:function(){var e=this,t=this.$route.query,i=this;this.gameId=t.gameId,this.storeId=t.storeId,t.isHelp&&"true"===t.isHelp&&(c["a"].isWeixin()?t.code?i.$http.get(h["a"].WX_CODE_TO_PAYINFO,{params:{code:t.code}}).then((function(e){var t=e.data;i.openId=t.data.openid,i.popupType=9,i.showPopup=!0})):i._doGetWxCode():Object(r["a"])("请在微信环境打开链接助力")),this.isAliENV=navigator.userAgent.includes("AliApp"),this.isAliENV&&c["a"].loadScript("https://appx/web-view.min.js").then((function(){my.getEnv((function(s){console.log("是否为小程序环境：".concat(s.miniprogram)),s.miniprogram&&(e.isAliMP=!0,my.postMessage({event:"checkLogin"}),my.onMessage=function(e){if(console.log(e),!c["a"].isNull(e)&&!c["a"].isNull(e.event)&&("checkLogin"===e.event||"login"===e.event)&&!c["a"].isNull(e.result)){if(c["a"].isNull(e.result.userInfo))i.$store.dispatch("sgRnAccount/doLogin",{});else{var s=v({},e.result.userInfo.userMsg);s.sessionValue||(s.sessionValue=s.token),i.$store.dispatch("sgRnAccount/doLogin",s)}t&&(this._doGetHelpInfo(),i.getGameInfo())}})}))})),this._fetchWinnerList(),s=setInterval(this._fetchWinnerList,2e4),t?(this._doGetHelpInfo(),this.getGameInfo()):Object(r["a"])("无游戏信息")},activated:function(){this.$util.gioTrackWithVariable("mall_storeWheel_view",{storeId:this.storeId?this.storeId+"":"null"}),this._hidePopup()},deactivated:function(){this._hidePopup()},beforeDestroy:function(){clearInterval(s)},methods:{getGameInfo:function(){var e=this;Object(p["g"])({gameId:this.gameId}).then((function(t){var i=t.data;i.success&&(e.bgImage=i.data)}));var t=this;Object(p["f"])({gameId:this.gameId}).then((function(i){var s=i.data;if(console.log(s),s.success){t.shotChanges=s.data.totalPartNum-s.data.playTimes,t.totalPartNum=s.data.totalPartNum,t.playTimes=s.data.playTimes,t.partNum=s.data.partNum,t.gameInfo=s.data.game,t.canShareHelp=2===s.data.partType,1e3*t.gameInfo.beginTime>Date.now()?(Object(r["a"])("活动暂未开始"),t.shotChanges=-1,t.gameStatusType=-1):1e3*t.gameInfo.endTime<Date.now()?(Object(r["a"])("活动已经结束"),t.shotChanges=-1,t.gameStatusType=-2):(t.gameStatusType=0,t.startButtonAnimation());for(var a={4:7,5:6,6:5,3:4,7:3},o=[],p=function(e){o.push({number:e,order:a[e]?a[e]:e,info:s.data.gameImg.find((function(t){return t.postion===e+1}))})},c=0;c<8;c++)p(c);t.list=o,n=s.data.gameImg.find((function(e){return 3===e.prizeType})),e.isSkeletonLoading=!0}}))["catch"]((function(t){Object(r["a"])(t.message),e.isSkeletonLoading=!0}))},_scrollProgresser:function(){var e=this;if(this.helpInfo){var t=0;this.helpInfo.hasChanceNum>=2&&(t=1.55*(this.helpInfo.hasChanceNum+1)-4.2),this.$refs.progresser&&this.$nextTick((function(){e.$refs.progresser.scrollLeft=50*t}))}},fnDoHelp:function(){var e=this,t=this.$route.query;Object(p["b"])({openid:this.openId,memberId:t.memberId,channel:"1",gameId:this.gameId}).then((function(t){var i=t.data;e.showPopup=!1,i.success?e.$nextTick((function(){var t=i.message;-1!==t.indexOf("助力成功")?(e.popupType=6,e.showPopup=!0):-1!==t.indexOf("您已助力")?(e.popupType=8,e.showPopup=!0):-1!==t.indexOf("已达")?(e.popupType=7,e.showPopup=!0):Object(r["a"])(t)})):Object(r["a"])(i.message)}))["catch"]((function(e){Object(r["a"])(e.message)}))},_hidePopup:function(){this.popupType=-1,this.showPopup=!1},fnGotoMyCoupon:function(){this._hidePopup(),this.$router.push("/coupon")},fnGotoMyDiamond:function(){this._hidePopup(),this.$router.push("/diamond")},fnConfirm:function(){this._hidePopup()},fnShareWechat:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(c["a"].isSgRn()||c["a"].isHaierApp()){var t=location.href+(-1!==location.href.indexOf("?")?"&":"?")+"&memberId=".concat(this.mId,"&isHelp=").concat(e);c["a"].inAppShare({platformType:"WechatSession",shareType:"webPage",url:t,title:this.gameInfo.title})}else if(this.isAliENV&&this.isAliMP)my.postMessage({event:this.$store.getters.getLoginStatus?"share":"login"});else{var i=location.href,s=i.split("?");if(s.length>=1){var n=s[0],a="?gameId=".concat(this.gameId,"&memberId=").concat(this.mId,"&isHelp=").concat(e),o=n+a;this._copy(o)}else console.log("暂不支持拷贝功能")}},_copy:function(e){var t=this,i=document.createElement("a"),s=new g.a(i,{text:function(t){return e}});s.on("success",(function(){t.$toast.success("复制成功，请到微信内分享")})),s.on("error",(function(){t.$toast.success("复制失败")})),i.click()},_doGetWxCode:function(){var e=location.href;c["a"].getWxCode("wxb03a523baf487993",e)},_doGetHelpInfo:function(){var e=this;Object(p["c"])({gameId:this.gameId,memberId:this.mId}).then((function(t){e.helpInfo=t.data.data,e._scrollProgresser()}))["catch"]((function(e){Object(r["a"])(e.message)}))},_fetchWinnerList:function(){var e=this;Object(p["e"])({gameId:this.gameId}).then((function(t){var i=t.data;i.success?e.winnerList=i.data:Object(r["a"])(i.message)}))["catch"]((function(e){Object(r["a"])(e.message)}))},fnRecord:function(){if(!this.$store.getters.getLoginStatus)return this.isAliENV&&this.isAliMP?void my.postMessage({event:"login"}):void this.$store.dispatch("doLogin");this.$router.push("/games/giftRecord?gameId=".concat(this.$route.query.gameId,"&isStore=true"))},fnAddress:function(){if(!this.$store.getters.getLoginStatus)return this.isAliENV&&this.isAliMP?void my.postMessage({event:"login"}):void this.$store.dispatch("doLogin");this.$router.push("/addressEdit?gameId=".concat(this.$route.query.gameId))},gotoAddress:function(){this._hidePopup(),this.$router.push("/addressEdit?gameId=".concat(this.$route.query.gameId,"&uuid=").concat(this.prizeInfo.uuid,"&prizeId=").concat(""|this.prizeInfo.gamePrizeId))},fnBack:function(){this.$store.dispatch("doHistoryBack")},showGameRules:function(){this.popupType=10,this.showPopup=!0},showShare:function(){this.$util.gioTrackWithVariable("mall_wheel_click_share"),this.canShareHelp?(this._doGetHelpInfo(),this.popupType=11,this.showPopup=!0):this.fnShareWechat(!1)},startButtonAnimation:function(){!this.buttonAnimation&&this.shotChanges>0&&(this.buttonAnimation=!0,window.requestAnimationFrame(this.buttonAnimate.bind(this,new Date)))},stopButtonAnimation:function(){this.buttonAnimation=!1},buttonAnimate:function(e){var t=new Date,i=t-e>500;i&&(this.animationFlag=!this.animationFlag,e=t),this.buttonAnimation&&window.requestAnimationFrame(this.buttonAnimate.bind(this,e))},startRoll:function(){var e=this,t=this.$route.fullPath,i=this;if(!this.$store.getters.getLoginStatus)return this.isAliENV&&this.isAliMP?void my.postMessage({event:"login"}):void this.$store.dispatch("doLogin");if(-1!==this.shotChanges){if(this.shotChanges<=0)return this.canShareHelp&&this.helpInfo.chance===this.helpInfo.hasChanceNum||!this.canShareHelp?this.popupType=5:this.popupType=4,void(this.showPopup=!0);if(!this.isRolling){this.isRolling=!0,this.$util.gioTrackWithVariable("mall_storeWheel_click_game",{storeId:this.storeId?this.storeId+"":"null"}),this.beginRollAnimation();var s=Date.now(),a=d["a"].hex_md5("".concat(this.mId).concat(s));Object(p["d"])({gameId:this.gameId,timestamp:s,sign:a}).then((function(s){var a=s.data;if(a.success&&a.result.prizeType>0){var o=a.result;e.target=o.postion-1,e.shotChanges=o.surplusChance,e.prizeInfo=o;var r=Number(o.prizeType);e.popupType=1===r?2:2===r||6===r?3:5===r?1:0}else if(a&&a.result&&a.result.prizeType<0&&(e.shotChanges=a.result.surplusChance),"-100"===a.errorCode||-100===a.errorCode){if(e.isAliENV&&e.isAliMP)return void my.postMessage({event:"login"});e.$store.dispatch("doLogin").then((function(e){400!==e?(console.log(e),i.$router.push(t)):console.log("请求异常")}))}else e.prizeInfo=n,e.target=e.prizeInfo.postion-1}))["catch"]((function(t){e.prizeInfo=n,e.target=e.prizeInfo.postion-1}))}}},beginRollAnimation:function(){if(window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),this.animationStop){this.animationStop=!1,this.stopButtonAnimation();var e=350;window.requestAnimationFrame(this.speedControl.bind(this,new Date,e,!0))}},speedControl:function(e,t,i){var s=350,n=15;if(this.target===this.currentIndex&&t>s)this.endofRoll();else if(!this.animationStop){var a=new Date,o=a-e>t;o&&(this.nextStep(),e=a,i?t/=1.1:t*=1.06),window.requestAnimationFrame(this.speedControl.bind(this,e,t,!!i&&t>n))}},nextStep:function(){this.currentIndex===this.list.length-1?this.currentIndex=0:this.currentIndex++},endofRoll:function(){var e=this;this.animationStop=!0;var t=Number(this.prizeInfo.prizeType);this.popupType=1===t?2:2===t||6===t?3:5===t?1:0,this.startButtonAnimation(),setTimeout((function(){e.showPopup=!0,e.isRolling=!1}),500)}},filters:{replaceMobile:function(e){return(e+"").replace(/(\d{3})\d{4}(\d*)/,"$1****$2")}}},b=w,_=(i("f5ad"),i("2877")),I=Object(_["a"])(b,a,o,!1,null,"fa0a8126",null);t["default"]=I.exports},"1ab4":function(e,t,i){},"347c":function(e,t,i){},"80cc":function(e,t,i){"use strict";i("347c")},a73f:function(e,t,i){"use strict";var s=function(e,t){var i=t._c;return t.props.nums>0?i("div",{staticClass:"m-skeleton",style:{"z-index":t.props.zIndex||0}},[i("div",{style:{background:t.props.bgColor,height:t.props.fheight}}),t._l(t.props.nums-1,(function(e){return i("div",{key:e,style:{background:t.props.bgColor,height:t.props.iheight}})}))],2):t._e()},n=[],a=(i("80cc"),i("2877")),o={},r=Object(a["a"])(o,s,n,!0,null,null,null);t["a"]=r.exports},efdb:function(e,t,i){"use strict";i.d(t,"f",(function(){return a})),i.d(t,"d",(function(){return o})),i.d(t,"a",(function(){return r})),i.d(t,"e",(function(){return p})),i.d(t,"b",(function(){return c})),i.d(t,"c",(function(){return l})),i.d(t,"i",(function(){return h})),i.d(t,"h",(function(){return u})),i.d(t,"j",(function(){return d})),i.d(t,"g",(function(){return m}));var s=i("1c03"),n=i("bbc2"),a=function(e){return s["a"].request({url:n["a"].getGameInfo,method:"get",params:e})},o=function(e){return s["a"].request({timeout:6e3,url:n["a"].gameLuckDraw,method:"get",params:e})},r=function(e){return s["a"].request({url:n["a"].gameAddAddress,headers:{"Content-Type":"multipart/form-data"},method:"post",params:e})},p=function(e){return s["a"].request({url:n["a"].gameWinnerList,method:"get",params:e})},c=function(e){return s["a"].request({url:n["a"].gameHelp,method:"get",params:e})},l=function(e){return s["a"].request({url:n["a"].gameHelpInfo,method:"get",params:e})},h=function(e){return s["a"].request({url:n["a"].queryWinnerPrize,method:"get",params:e})},u=function(e){return s["a"].request({url:n["a"].queryWinnerAddress,method:"get",params:e})},d=function(e){return s["a"].request({url:n["a"].saveWinnerAddress,method:"get",params:e})},m=function(e){return s["a"].request({url:n["a"].getPicById,method:"get",params:e})}},f5ad:function(e,t,i){"use strict";i("1ab4")}}]);
//# sourceMappingURL=chunk-763b71ba.7caa7f58.js.map