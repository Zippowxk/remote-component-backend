(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ea8e8d3"],{"1e0d":function(t,e,a){"use strict";a("bfd5")},"311b":function(t,e,a){},5111:function(t,e,a){"use strict";a("7af0")},"68d6":function(t,e,a){"use strict";a("cc26")},"7af0":function(t,e,a){},bfd5:function(t,e,a){},cc26:function(t,e,a){},d3da:function(t,e,a){"use strict";a("311b")},e819:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content",style:t.styleBackground},[a("van-icon",{attrs:{name:"clear"},on:{click:t.goHistory}}),t.data.scenesProductsData?a("detail",{attrs:{parentData:t.data}}):t._e(),a("div",{staticClass:"footer"},[a("img",{attrs:{src:"http://cdn09.ehaier.com/shunguang/H5/www/img/linshi/qdh@2x.png",alt:""},on:{click:t.commodityListToggle}}),a("img",{attrs:{src:"http://cdn09.ehaier.com/shunguang/H5/www/img/linshi/cjjs@2x.png",alt:""},on:{click:t.sceneIntroductionToggle}})]),a("van-popup",{staticClass:"scene-introduction-dialog",style:{height:"33%"},attrs:{position:"bottom",closeable:"","overlay-class":"popup-overlay-light"},model:{value:t.data.sceneIntroductionDialog,callback:function(e){t.$set(t.data,"sceneIntroductionDialog",e)},expression:"data.sceneIntroductionDialog"}},[t.data.scenesImageDataChecked?a("div",{staticClass:"text"},[t._v(" "+t._s(t.data.scenesImageDataChecked.introduction)+" ")]):t._e()]),a("van-popup",{staticClass:"commodity-list-dialog",style:{height:"100%"},attrs:{position:"right",closeable:"","overlay-class":"popup-overlay-light"},model:{value:t.data.commodityListDialog,callback:function(e){t.$set(t.data,"commodityListDialog",e)},expression:"data.commodityListDialog"}},[t.data.scenesProductsData?a("product",{attrs:{parentCustomizeAlert:t.customizeAlert,parentData:t.data}}):t._e()],1),t.customizeAlert.dialog?a("customize-alert",{attrs:{parentData:t.customizeAlert}}):t._e()],1)},s=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"detail-block"},[a("img",{attrs:{src:t._f("imageToHttps")(t.parentData.scenesImageDataChecked.imageUrl),alt:""}}),a("div",{staticClass:"info"},[a("div",{staticClass:"scene-select"},[a("ul",t._l(t.parentData.scenesImageData[0].spaces,(function(e,n){return a("li",{key:n,class:{checked:t.parentData.scenesImageDataChecked.id===e.id},on:{click:function(a){return t.sceneSelect(e)}}},[t._v(" "+t._s(e.name)+" ")])})),0)]),t._l(t.parentData.scenesCoordinateData.labels,(function(e,n){return a("div",{key:n,staticClass:"product-space",style:1===e.direction?{left:100*e.x-5/t.parentData.windowWidth*100+"%",top:100*e.y-35/t.parentData.windowHeight*100+"%"}:{left:100*e.x+5/t.parentData.windowWidth*100+"%",top:100*e.y-35/t.parentData.windowHeight*100+"%"},on:{click:function(a){return t.productDialogToggle(e)}}},[a("van-tag",{attrs:{mark:"",type:"primary"}},[t._v(t._s(e.name))])],1)}))],2),a("van-popup",{attrs:{closeable:""},model:{value:t.productDialog,callback:function(e){t.productDialog=e},expression:"productDialog"}},[a("div",{staticClass:"product-dialog",on:{click:function(e){return t.toProductDetail(t.parentData.scenesProductsDataChecked.id)}}},[a("img",{attrs:{src:t._f("imageToHttps")(t.parentData.scenesProductsDataChecked.imageUrl),alt:""}}),a("div",{staticClass:"introduce"},[a("h3",[t._v(" "+t._s(t.parentData.scenesProductsDataChecked.name)+" ")]),a("div",{staticClass:"price"},[t._v(" ￥"+t._s(t._f("fmtMoneyFilter")(t.parentData.scenesProductsDataChecked.price))+" ")])])])])],1)},c=[],o=(a("8a58"),a("e41f")),r=(a("5f1a"),a("a3e2")),d=a("2b0e");d["a"].use({Tag:r["a"],Popup:o["a"]});var l={name:"detail",props:{parentData:{type:null,default:function(){return{}}}},data:function(){return{productDialog:!1}},mounted:function(){},methods:{sceneSelect:function(t){var e=this;e.parentData.scenesImageDataChecked=t,e.parentData.spaceId=t.id,e.$parent.getScenesCoordinate()},productDialogToggle:function(t){var e=this;e.parentData.scenesProductsData.map((function(a,n){t.productId===a.id&&(e.parentData.scenesProductsDataChecked=a)})),e.productDialog=!0},toProductDetail:function(t){var e=this;e.$router.push({path:"/goodsDetail?productId=".concat(t)})}}},u=l,p=(a("5111"),a("2877")),m=Object(p["a"])(u,i,c,!1,null,"706c0926",null),g=m.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"product-block"},[a("div",{staticClass:"title"},[a("van-checkbox",{on:{click:function(e){return t.checkedAll(!t.parentData.moreChoicesCheckedAll)}},model:{value:t.parentData.moreChoicesCheckedAll,callback:function(e){t.$set(t.parentData,"moreChoicesCheckedAll",e)},expression:"parentData.moreChoicesCheckedAll"}},[t._v("全套")])],1),a("ul",t._l(t.parentData.scenesProductsData,(function(e,n){return a("li",{key:n},[a("van-checkbox",{on:{change:t.checkedChange},model:{value:e.checked,callback:function(a){t.$set(e,"checked",a)},expression:"item.checked"}}),a("img",{attrs:{src:t._f("imageToHttps")(e.imageUrl),alt:""},on:{click:function(a){return t.viewDetail(e.id)}}}),a("div",{staticClass:"product",on:{click:function(a){return t.viewDetail(e.id)}}},[a("div",{staticClass:"product-title"},[t._v(t._s(e.name))]),a("div",{staticClass:"introduce"},[t._v(t._s(e.title))]),a("div",{staticClass:"price"},[a("span",[t._v(" ￥"+t._s(t._f("fmtMoneyFilter")(e.price))+" ")]),a("span",[t._v("x1")])])])],1)})),0),a("div",{staticClass:"total"},[a("div",{staticClass:"price"},[t._v(" 总计: "),a("font",[t._v("￥"+t._s(t._f("fmtMoneyFilter")(t.parentData.priceTotal)))])],1),a("div",{staticClass:"submit",on:{click:t.isLogin}},[t._v(" 一键下单 ")])])])},f=[],D=(a("3c32"),a("417e")),v=a("d3c8");d["a"].use({Checkbox:D["a"]});var C={name:"product",props:{parentData:{type:null,default:function(){return{}}},parentCustomizeAlert:{type:null,default:function(){return{}}}},data:function(){return{}},mounted:function(){},methods:{isLogin:function(){var t=this;t.$util.isHaierApp()?t.$store.dispatch("handleUpAuth").then((function(e){console.log(e),e?t.createOrder():(t.parentCustomizeAlert.title="用户信息异常",t.parentCustomizeAlert.type="fail",t.parentCustomizeAlert.dialog=!0)})):t.createOrder()},createOrder:function(){var t=this,e=t.parentData.scenesProductsData,a=[];e.map((function(t){t.checked&&(t.num=1,t.proId=t.id,a.push(t))}));var n={ac:1,ch:61,proList:a,street:t.parentData.streetId,v:2};if(0===n.proList.length)return t.parentCustomizeAlert.title="请至少选择1种商品",t.parentCustomizeAlert.type="fail",void(t.parentCustomizeAlert.dialog=!0);t.parentCustomizeAlert.title="订单创建中",t.parentCustomizeAlert.type="loading",t.parentCustomizeAlert.dialog=!0,v["a"].createOrder(n).then((function(e){var a=e;a.success?(t.parentCustomizeAlert.title="订单创建成功",t.parentCustomizeAlert.type="success",t.parentCustomizeAlert.dialog=!0,setTimeout((function(){t.parentCustomizeAlert.dialog=!1,t.$router.push({path:"/orderCreate"})}),1e3)):(t.parentCustomizeAlert.title=a.message,t.parentCustomizeAlert.type="fail",t.parentCustomizeAlert.dialog=!0)}))},viewDetail:function(t){var e=this;e.$router.push({path:"/goodsDetail?productId=".concat(t)})},checkedAll:function(t){var e=this,a=e.parentData.scenesProductsData,n=t,s=0,i=0;a.map((function(t,e){t.checked=n,n&&(s=parseFloat(s)+parseFloat(t.price),i=parseFloat(i)+1)})),e.parentData.priceTotal=s,e.parentData.countTotal=i},checkedChange:function(){var t=this,e=t.parentData.scenesProductsData,a=0,n=0,s=!0;e.map((function(t,e){!1===t.checked&&(s=!1),t.checked&&(a=parseFloat(a)+parseFloat(t.price),n=parseFloat(n)+1)})),t.parentData.moreChoicesCheckedAll=s,t.parentData.priceTotal=a,t.parentData.countTotal=n}}},I=C,k=(a("d3da"),Object(p["a"])(I,h,f,!1,null,"651e8d41",null)),y=k.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loading-block"},["loading"===t.parentData.type?a("van-loading",{attrs:{type:""}}):t._e(),"fail"===t.parentData.type?a("van-icon",{attrs:{size:"36px",name:"fail"}}):t._e(),"success"===t.parentData.type?a("van-icon",{attrs:{size:"36px",name:"success"}}):t._e(),a("div",{staticClass:"title"},[t._v(" "+t._s(t.parentData.title)+" ")])],1)},_=[],A=(a("ac1e"),a("543e"));d["a"].use({Loading:A["a"]});var b={name:"loading",props:{parentData:{type:null,default:function(){return{}}}},data:function(){return{}},mounted:function(){var t=this;if(console.log("context.parentData",t.parentData),t.parentData.time)setTimeout((function(){t.parentData.dialog=!1}),t.parentData.time);else{var e="loading"===t.parentData.type?999999:3e3;console.log("_time",e),setTimeout((function(){t.parentData.dialog=!1}),e)}},methods:{}},z=b,x=(a("68d6"),Object(p["a"])(z,w,_,!1,null,"46ee0aa4",null)),P=x.exports,$={name:"itSoluteList",components:{detail:g,product:y,customizeAlert:P},data:function(){return{data:{windowWidth:0,windowHeight:0,channel:1,scenesId:null,spaceId:null,provinceId:"",cityId:"",regionId:"",streetId:"",productsIds:"",memberId:"",countTotal:0,priceTotal:0,moreChoicesCheckedAll:!0,scenesImageData:null,scenesImageDataChecked:null,scenesCoordinateData:null,scenesProductsData:null,scenesProductsDataChecked:null,commodityListDialog:!1,sceneIntroductionDialog:!1},styleBackground:{width:0,height:0,top:0,left:0},customizeAlert:{title:"加载中",type:"loading",dialog:!1,time:null},isPlus:!1}},created:function(){var t=this,e=t.$route.query;t.data.scenesId=e.scenesId,t.data.provinceId=t.$store.state.locationInfo.provinceId||16,t.data.cityId=t.$store.state.locationInfo.cityId||173,t.data.regionId=t.$store.state.locationInfo.districtId||2450,t.data.streetId=t.$store.state.locationInfo.townshipId||12036596,t.data.memberId=t.$store.state.mId,t.data.windowWidth=window.screen.height,t.data.windowHeight=window.screen.width,t.styleBackground.width="".concat(t.data.windowWidth,"px"),t.styleBackground.height="".concat(t.data.windowHeight,"px"),t.styleBackground.top="".concat((t.data.windowWidth-t.data.windowHeight)/2,"px"),t.styleBackground.left="-".concat((t.data.windowWidth-t.data.windowHeight)/2,"px")},mounted:function(){var t=this;t.customizeAlert={title:"加载中",type:"loading",dialog:!0,time:null},t.getScenesImage()},methods:{getScenesImage:function(){var t=this,e={channel:t.data.channel,scenesId:t.data.scenesId};v["a"].scenesImage(e).then((function(e){var a=e.data;a.success?(t.customizeAlert.dialog=!1,t.data.scenesImageData=a.data,t.data.scenesImageDataChecked=a.data.productDetailVOS[0].spaces[0],t.data.spaceId=t.data.scenesImageDataChecked.id):t.customizeAlert={title:a.message,type:"fail",dialog:!0,time:null}})).then((function(e){t.getScenesCoordinate()}))},getScenesCoordinate:function(){var t=this,e={spaceId:t.data.spaceId};v["a"].scenesCoordinate(e).then((function(e){var a=e.data;a.success?(t.data.scenesCoordinateData=a.data,t.data.productsIds=a.data.productsIds):t.customizeAlert={title:a.message,type:"fail",dialog:!0,time:null}})).then((function(e){t.getScenesProducts()}))},getScenesProducts:function(){var t=this,e=this,a={productsIds:e.data.productsIds,streetId:e.data.streetId,memberId:e.data.memberId,cityId:e.data.cityId,provinceId:e.data.provinceId,regionId:e.data.regionId};v["a"].scenesProducts(a).then((function(a){var n=a.data;n.success?(n.data.map((function(t,e){t.checked=!0})),t.isPlus=n.data.plus,e.data.scenesProductsData=n.data.productDetailVOS,e.data.scenesProductsDataChecked=n.data.productDetailVOS[0]):e.customizeAlert={title:n.message,type:"fail",dialog:!0,time:null}}))},goHistory:function(){var t=this;t.$store.dispatch("doHistoryBack")},commodityListToggle:function(){var t=this;t.data.commodityListDialog=!0},sceneIntroductionToggle:function(){var t=this;t.data.sceneIntroductionDialog=!0}}},T=$,H=(a("1e0d"),Object(p["a"])(T,n,s,!1,null,"77789f90",null));e["default"]=H.exports}}]);
//# sourceMappingURL=chunk-3ea8e8d3.db3cae85.js.map