{"version":3,"sources":["webpack:///./src/views/goods/detail/components/comment-info.vue?f49b","webpack:///src/views/goods/detail/components/comment-info.vue","webpack:///./src/views/goods/detail/components/comment-info.vue?c110","webpack:///./src/views/goods/detail/components/comment-info.vue","webpack:///./src/views/goods/detail/components/comment-info.vue?e006"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","_s","_f","commentTotal","on","fnOpenCommentDetail","positiveRate","$cdnImageUrl","praiseList","length","Number","_l","hotItem","key","impressionName","labelNum","_e","commentList","finishedText","fnShowCommentContent","imgCommentList","toHotImgs","imgTotalCount","item","index","commentId","$event","fnPreviewImage","picList","picUrl","$webpSurpport","style","height","width","zIndex","model","value","callback","$$v","show","expression","ref","productId","storeId","closeComment","toggleShowStoreComment","staticStyle","imgPreShowList","onChange","preClose","scopedSlots","_u","fn","imgPreShowIndex","class","expandStatus","commentContent","toggleExpand","proxy","imgPreShow","staticRenderFns","components","commentDetail","props","data","isShowStoreComment","prevInstance","commentTextShowStatus","created","initImpressions","getCommentsByCondition","toAssessList","filters","formatNumber","toFixed","methods","res","success","forEach","_urls","push","element","v","param","Promise","commentType","pageSize","pageIndex","i","commentPics","concat","experiencePics","console","log","resolve","$emit","$util","gioTrackWithVariable","$router","path","query","component"],"mappings":"4HAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,YAAYC,MAAM,CAAC,GAAK,sBAAsB,CAACH,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,MAAM,CAACE,YAAY,SAAS,CAACF,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACE,YAAY,gBAAgBN,EAAIQ,GAAG,UAAUJ,EAAG,OAAO,CAACE,YAAY,eAAe,CAACN,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIU,GAAG,eAAPV,CAAuBA,EAAIW,oBAAoBP,EAAG,MAAM,CAACE,YAAY,QAAQM,GAAG,CAAC,MAAQZ,EAAIa,sBAAsB,CAACT,EAAG,OAAO,CAACA,EAAG,OAAO,CAACE,YAAY,QAAQ,CAACN,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIc,cAAc,OAAOd,EAAIQ,GAAG,SAASJ,EAAG,MAAM,CAACG,MAAM,CAAC,IAAM,GAAG,IAAOP,EAAIe,aAAe,mCAAqCf,EAAIgB,YAAchB,EAAIgB,WAAWC,OAAS,GAAKC,OAAOlB,EAAIW,cAAgB,EAAGP,EAAG,MAAM,CAACE,YAAY,oBAAoBN,EAAImB,GAAInB,EAAc,YAAE,SAASoB,GAAS,OAAOhB,EAAG,MAAM,CAACiB,IAAID,EAAQE,eAAehB,YAAY,mBAAmB,CAACN,EAAIQ,GAAGR,EAAIS,GAAGW,EAAQE,gBAAgB,IAAItB,EAAIS,GAAGW,EAAQG,UAAU,UAAS,GAAGvB,EAAIwB,KAAMxB,EAAIyB,YAAkB,OAAErB,EAAG,eAAe,CAACG,MAAM,CAAC,YAAcP,EAAIyB,YAAY,UAAW,EAAK,aAAezB,EAAI0B,aAAa,aAAc,EAAK,SAAU,GAAMd,GAAG,CAAC,qBAAuBZ,EAAI2B,wBAAwB3B,EAAIwB,KAA+B,IAAzBxB,EAAIyB,YAAYR,OAAYb,EAAG,MAAM,CAACE,YAAY,UAAU,CAACN,EAAIQ,GAAG,YAAYR,EAAIwB,KAAMxB,EAAI4B,gBAAkB5B,EAAI4B,eAAeX,OAAS,EAAGb,EAAG,MAAM,CAACE,YAAY,0BAA0B,CAACF,EAAG,MAAM,CAACE,YAAY,cAAcM,GAAG,CAAC,MAAQZ,EAAI6B,YAAY,CAACzB,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,MAAM,CAACE,YAAY,gBAAgBN,EAAIQ,GAAG,QAAQJ,EAAG,MAAM,CAACE,YAAY,eAAe,CAACN,EAAIQ,GAAGR,EAAIS,GAAGT,EAAI8B,oBAAoB1B,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,MAAM,CAACG,MAAM,CAAC,IAAM,GAAG,IAAOP,EAAIe,aAAe,mCAAoCX,EAAG,MAAM,CAACE,YAAY,kBAAkBN,EAAImB,GAAInB,EAAkB,gBAAE,SAAS+B,EAAKC,GAAO,OAAO5B,EAAG,MAAM,CAACiB,IAAIU,EAAKE,UAAU3B,YAAY,WAAWM,GAAG,CAAC,MAAQ,SAASsB,GAAQ,OAAOlC,EAAImC,eAAeJ,EAAKC,MAAU,CAAC5B,EAAG,MAAM,CAACE,YAAY,YAAYC,MAAM,CAAC,IAAM,GAAG,IAAMP,EAAIU,GAAG,cAAPV,CAAsBA,EAAIU,GAAG,aAAPV,CAAqBA,EAAIU,GAAG,eAAPV,CAAuB+B,EAAKK,QAAQ,GAAGC,QAAQ,OAAOrC,EAAIsC,kBAAkBlC,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACN,EAAIQ,GAAGR,EAAIS,GAAGsB,EAAKK,QAAQnB,QAAQ,YAAW,KAAKjB,EAAIwB,KAAKpB,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,MAAM,CAACE,YAAY,MAAMM,GAAG,CAAC,MAAQZ,EAAIa,sBAAsB,CAACb,EAAIQ,GAAG,eAAe,GAAGJ,EAAG,YAAY,CAACmC,MAAM,CAAGC,OAAQ,OAAOC,MAAM,OAAOC,OAAO,OAAO,SAAW,UAAWnC,MAAM,CAAC,GAAK,uBAAuB,SAAW,SAASoC,MAAM,CAACC,MAAO5C,EAAQ,KAAE6C,SAAS,SAAUC,GAAM9C,EAAI+C,KAAKD,GAAKE,WAAW,SAAS,CAAEhD,EAAQ,KAAEI,EAAG,iBAAiB,CAAC6C,IAAI,QAAQ1C,MAAM,CAAC,KAAOP,EAAI+C,KAAK,MAAQ/C,EAAIkD,UAAU,QAAUlD,EAAIc,aAAa,QAAUd,EAAImD,SAASvC,GAAG,CAAC,aAAeZ,EAAIoD,aAAa,uBAAyBpD,EAAIqD,0BAA0BrD,EAAIwB,MAAM,GAAGpB,EAAG,oBAAoB,CAACkD,YAAY,CAAC,WAAa,QAAQ/C,MAAM,CAAC,OAASP,EAAIuD,eAAe,cAAa,EAAM,gBAAgB,aAAa3C,GAAG,CAAC,OAASZ,EAAIwD,SAAS,MAAQxD,EAAIyD,UAAUC,YAAY1D,EAAI2D,GAAG,CAAC,CAACtC,IAAI,QAAQuC,GAAG,WAAW,MAAO,CAACxD,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,OAAO,CAACJ,EAAIQ,GAAGR,EAAIS,GAAGT,EAAI6D,gBAAgB,GAAG,IAAI7D,EAAIS,GAAGT,EAAIuD,eAAetC,aAAab,EAAG,MAAM,CAACE,YAAY,eAAewD,MAAM,CAAC,MAAQ9D,EAAI+D,eAAe,CAAC3D,EAAG,MAAM,CAACE,YAAY,aAAa,CAACN,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIgE,mBAAmB5D,EAAG,MAAM,CAACE,YAAY,aAAaM,GAAG,CAAC,MAAQZ,EAAIiE,eAAe,CAAEjE,EAAgB,aAAEI,EAAG,MAAM,CAACE,YAAY,SAASF,EAAG,MAAM,CAACE,YAAY,cAAcF,EAAG,MAAM,CAACE,YAAY,eAAeM,GAAG,CAAC,MAAQZ,EAAIyD,cAAcS,OAAM,KAAQvB,MAAM,CAACC,MAAO5C,EAAc,WAAE6C,SAAS,SAAUC,GAAM9C,EAAImE,WAAWrB,GAAKE,WAAW,iBAAiB,IAC5oHoB,EAAkB,G,gGCmEtB,mBACA,2BACA,OACEC,WAAY,CACV5C,YAAJ,OACI6C,cAAJ,cAEEC,MAAO,CAAC,YAAa,eAAgB,eAAgB,cAAe,OAAQ,WAC5EC,KANF,WAOI,MAAO,CACL9C,aAAc,GACdV,WAAY,GACZyD,oBAAoB,EACpB7C,eAAgB,GAChBE,cAAe,EACf4C,aAAc,KACdP,YAAY,EACZZ,eAAgB,GAChBM,gBAAiB,EACjBG,eAAgB,GAChBW,uBAAuB,EACvBZ,cAAc,IAGlBa,QAtBF,WAuBI3E,KAAK4E,kBACL5E,KAAK6E,yBACL7E,KAAK8E,gBAEPC,QAAS,CACPC,aADJ,SACA,GACM,OAAIrC,GAAS,IACJA,EACf,QACgBA,EAAQ,KAAMsC,QAAQ,GAAK,YAD3C,IAQEC,QAAS,CAIP1B,SAJJ,WAKMxD,KAAKkE,YAAa,EAClBlE,KAAK8D,cAAe,GAKtBE,aAXJ,WAYMhE,KAAK8D,cAAgB9D,KAAK8D,cAE5BP,SAdJ,SAcA,GACMvD,KAAK4D,gBAAkB7B,GAKzB+C,aApBJ,WAoBA,WACM,OAAN,QAAM,CAAN,CACQ7B,UAAWjD,KAAKiD,YACxB,kBACYkC,EAAIC,UACN,EAAV,oCAOIlD,eAhCJ,SAgCA,KACM,IAAN,KACMJ,EAAKK,QAAQkD,SAAQ,SAA3B,GACQC,EAAMC,KAAKC,EAAQpD,WAErBpC,KAAKsD,eAAiBgC,EACtBtF,KAAKkE,YAAa,EAClBlE,KAAKkE,YAAa,EAClBlE,KAAK+D,eAAiBjC,EAAKiC,gBAa7BX,uBArDJ,SAqDA,GACMpD,KAAKwE,mBAAqBiB,EAE1BzF,KAAK4E,kBACL5E,KAAK6E,0BAKPD,gBA9DJ,WA8DA,WACA,GACQ3B,UAAWjD,KAAKiD,WAEdjD,KAAKwE,qBACPkB,EAAMxC,QAAUlD,KAAKkD,SAEvB,OAAN,OAAM,CAAN,qBACYiC,EAAIC,UACN,EAAV,uBAOIP,uBA9EJ,WA8EA,WACM,OAAO,IAAIc,SAAQ,SAAzB,KACQ,IAAR,GACUC,YAAa,QACb3C,UAAW,EAArB,UACU4C,SAAU,GACVC,UAAW,GAET,EAAZ,qBACUJ,EAAMxC,QAAU,EAA1B,SAEQ,OAAR,OAAQ,CAAR,qBACciC,EAAIC,UACN,EAAZ,sBAGY,EAAZ,oCAScW,EAAE5D,QAAU4D,EAAEC,YAAYC,OAAOF,EAAEG,mBAErCC,QAAQC,IAAI,mBACZD,QAAQC,IAAI,EAAxB,gBAEYC,YAKRlD,aAjHJ,WAmHMnD,KAAKsG,MAAM,wBAEb1F,oBArHJ,WAsHMZ,KAAKuG,MAAMC,qBAAqB,WAEhCxG,KAAKsG,MAAM,wBAEb5E,qBA1HJ,SA0HA,GACM1B,KAAKsG,MAAM,uBAAwB/B,IAKrC3C,UAhIJ,WAiIM5B,KAAKyG,QAAQlB,KAAK,CAChBmB,KAAM,WACNC,MAAO,CACL1D,UAAWjD,KAAKiD,gBCjPyW,I,wBCQ/X2D,EAAY,eACd,EACA9G,EACAqE,GACA,EACA,KACA,WACA,MAIa,aAAAyC,E,oECnBf","file":"js/lazy-comment-info.f0ab89e8.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\",attrs:{\"id\":\"comment-container\"}},[_c('div',{staticClass:\"comment\"},[_c('div',{staticClass:\"title\"},[_c('div',{staticClass:\"left\"},[_c('div',{staticClass:\"before-left\"}),_vm._v(\" 商品评价 \"),_c('span',{staticClass:\"left-number\"},[_vm._v(_vm._s(_vm._f(\"formatNumber\")(_vm.commentTotal)))])]),_c('div',{staticClass:\"right\",on:{\"click\":_vm.fnOpenCommentDetail}},[_c('span',[_c('span',{staticClass:\"rate\"},[_vm._v(_vm._s(_vm.positiveRate)+\"%\")]),_vm._v(\" 好评\")]),_c('img',{attrs:{\"alt\":\"\",\"src\":(_vm.$cdnImageUrl + \"/goodsDetail/listmore.png\")}})])]),(_vm.praiseList && _vm.praiseList.length > 0 && Number(_vm.commentTotal) > 0)?_c('div',{staticClass:\"comment-hot-tips\"},_vm._l((_vm.praiseList),function(hotItem){return _c('div',{key:hotItem.impressionName,staticClass:\"comment-hot-btn\"},[_vm._v(_vm._s(hotItem.impressionName)+\"(\"+_vm._s(hotItem.labelNum)+\")\")])}),0):_vm._e(),(_vm.commentList.length)?_c('comment-list',{attrs:{\"commentList\":_vm.commentList,\"finished\":true,\"finishedText\":_vm.finishedText,\"collapsible\":true,\"hidePic\":true},on:{\"fnShowCommentContent\":_vm.fnShowCommentContent}}):_vm._e(),(_vm.commentList.length===0)?_c('div',{staticClass:\"nodata\"},[_vm._v(\"暂时没有评价\")]):_vm._e(),(_vm.imgCommentList && _vm.imgCommentList.length > 0)?_c('div',{staticClass:\"comment-imgs-container\"},[_c('div',{staticClass:\"imgs-header\",on:{\"click\":_vm.toHotImgs}},[_c('div',{staticClass:\"header-title\"},[_c('div',{staticClass:\"before-left\"}),_vm._v(\"晒图评价\"),_c('div',{staticClass:\"left-number\"},[_vm._v(_vm._s(_vm.imgTotalCount))])]),_c('div',{staticClass:\"right-arrow\"},[_c('img',{attrs:{\"alt\":\"\",\"src\":(_vm.$cdnImageUrl + \"/goodsDetail/listmore.png\")}})])]),_c('div',{staticClass:\"imgs-container\"},_vm._l((_vm.imgCommentList),function(item,index){return _c('div',{key:item.commentId,staticClass:\"img-item\",on:{\"click\":function($event){return _vm.fnPreviewImage(item,index)}}},[_c('img',{staticClass:\"img-thumb\",attrs:{\"alt\":\"\",\"src\":_vm._f(\"imageToWebp\")(_vm._f(\"imageThumb\")(_vm._f(\"imageToHttps\")(item.picList[0].picUrl),'300'),_vm.$webpSurpport)}}),_c('div',{staticClass:\"btm-right-num\"},[_vm._v(_vm._s(item.picList.length)+\"张\")])])}),0)]):_vm._e(),_c('div',{staticClass:\"comment-all\"},[_c('div',{staticClass:\"btn\",on:{\"click\":_vm.fnOpenCommentDetail}},[_vm._v(\"查看全部评价\")])])],1),_c('van-popup',{style:({ height: '100%',width:'100%',zIndex:'2020','overflow':'hidden'}),attrs:{\"id\":\"comment_detail_popup\",\"position\":\"right\"},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[(_vm.show)?_c('comment-detail',{ref:\"com-d\",attrs:{\"show\":_vm.show,\"proId\":_vm.productId,\"posRate\":_vm.positiveRate,\"storeId\":_vm.storeId},on:{\"closeComment\":_vm.closeComment,\"toggleShowStoreComment\":_vm.toggleShowStoreComment}}):_vm._e()],1),_c('van-image-preview',{staticStyle:{\"background\":\"#000\"},attrs:{\"images\":_vm.imgPreShowList,\"show-index\":false,\"get-container\":\"#app-warp\"},on:{\"change\":_vm.onChange,\"close\":_vm.preClose},scopedSlots:_vm._u([{key:\"cover\",fn:function(){return [_c('div',{staticClass:\"pic-pre-idx\"},[_c('span',[_vm._v(_vm._s(_vm.imgPreShowIndex+1)+\"/\"+_vm._s(_vm.imgPreShowList.length))])]),_c('div',{staticClass:\"comment-text\",class:{'fold':!_vm.expandStatus}},[_c('div',{staticClass:\"text-left\"},[_vm._v(_vm._s(_vm.commentContent))]),_c('div',{staticClass:\"text-right\",on:{\"click\":_vm.toggleExpand}},[(_vm.expandStatus)?_c('div',{staticClass:\"open\"}):_c('div',{staticClass:\"close\"})])]),_c('div',{staticClass:\"img-pre-back\",on:{\"click\":_vm.preClose}})]},proxy:true}]),model:{value:(_vm.imgPreShow),callback:function ($$v) {_vm.imgPreShow=$$v},expression:\"imgPreShow\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container\" id='comment-container'>\n    <div class=\"comment\">\n      <div class=\"title\">\n        <div class=\"left\"> <div class='before-left'></div> 商品评价 <span class='left-number'>{{commentTotal | formatNumber}}</span></div>\n        <div @click=\"fnOpenCommentDetail\" class=\"right\">\n          <span><span class=\"rate\">{{positiveRate}}%</span> 好评</span>\n          <img alt :src=\"`${$cdnImageUrl}/goodsDetail/listmore.png`\" />\n        </div>\n      </div>\n      <div class=\"comment-hot-tips\" v-if=\"praiseList && praiseList.length > 0 && Number(commentTotal) > 0\">\n        <div class=\"comment-hot-btn\" v-for=\"hotItem in praiseList\" :key=\"hotItem.impressionName\">{{hotItem.impressionName}}({{hotItem.labelNum}})</div>\n      </div>\n      <comment-list\n        :commentList=\"commentList\"\n        :finished=\"true\"\n        :finishedText=\"finishedText\"\n        :collapsible='true'\n        :hidePic=\"true\"\n        @fnShowCommentContent=\"fnShowCommentContent\"\n        v-if=\"commentList.length\"\n      ></comment-list>\n      <div class=\"nodata\" v-if=\"commentList.length===0\">暂时没有评价</div>\n      <div class=\"comment-imgs-container\" v-if=\"imgCommentList && imgCommentList.length > 0\">\n        <div class=\"imgs-header\" @click=\"toHotImgs\">\n          <div class=\"header-title\"><div class='before-left'></div>晒图评价<div class=\"left-number\">{{imgTotalCount}}</div></div>\n          <div class=\"right-arrow\">\n           <img alt :src=\"`${$cdnImageUrl}/goodsDetail/listmore.png`\" />\n          </div>\n        </div>\n        <div class=\"imgs-container\">\n          <!-- 缩略图项 -->\n          <div class=\"img-item\" v-for=\"(item,index) in imgCommentList\" :key=\"item.commentId\" @click=\"fnPreviewImage(item,index)\">\n           <img class=\"img-thumb\" alt :src=\"item.picList[0].picUrl | imageToHttps | imageThumb('300') | imageToWebp($webpSurpport)\" />\n            <div class=\"btm-right-num\">{{item.picList.length}}张</div>\n          </div>\n        </div>\n      </div>\n      <div class=\"comment-all\">\n        <div @click=\"fnOpenCommentDetail\" class=\"btn\">查看全部评价</div>\n      </div>\n    </div>\n    <van-popup v-model=\"show\" id=\"comment_detail_popup\" position=\"right\"  :style=\"{ height: '100%',width:'100%',zIndex:'2020','overflow':'hidden'}\">\n      <comment-detail ref='com-d' v-if=\"show\" :show=\"show\" :proId=\"productId\" :posRate=\"positiveRate\" :storeId='storeId' @closeComment=\"closeComment\" @toggleShowStoreComment=\"toggleShowStoreComment\"></comment-detail>\n    </van-popup>\n    <van-image-preview v-model=\"imgPreShow\" :images=\"imgPreShowList\" @change=\"onChange\" @close=\"preClose\" :show-index=\"false\" style=\"background:#000;\" get-container=\"#app-warp\">\n      <template v-slot:cover>\n        <div class=\"pic-pre-idx\"><span>{{imgPreShowIndex+1}}/{{imgPreShowList.length}}</span></div>\n        <div class=\"comment-text\" :class=\"{'fold':!expandStatus}\">\n          <div class=\"text-left\" >{{commentContent}}</div>\n          <div class=\"text-right\" @click=\"toggleExpand\">\n            <div class=\"open\" v-if=\"expandStatus\"></div>\n            <div class=\"close\" v-else></div>\n          </div>\n        </div>\n        <div class=\"img-pre-back\" @click=\"preClose\"></div>\n      </template>\n    </van-image-preview>\n  </div>\n</template>\n\n<script>\nimport Vue from 'vue';\nimport commentList from '../../components/comment-list'\nimport commentDetail from '../../comment/index'\n\nimport { Popup, ImagePreview } from 'vant';\nimport { toAssessList, getProductImpressions, getCommentsByCondition } from '@/http/service/goods'\nVue.use(ImagePreview);\nVue.use({ Popup });\nexport default {\n  components: {\n    commentList,\n    commentDetail\n  },\n  props: ['productId', 'commentTotal', 'positiveRate', 'commentList', 'show', 'storeId'],\n  data() {\n    return {\n      finishedText: '',\n      praiseList: [],\n      isShowStoreComment: false, // 切换是否展示店铺评价\n      imgCommentList: [], // 晒图模块数据源\n      imgTotalCount: 0, // 晒图评价总数\n      prevInstance: null,\n      imgPreShow: false, // 图片预览展示状态\n      imgPreShowList: [], // 图片预览展示 列表\n      imgPreShowIndex: 0,\n      commentContent: '', // 当前预览评论 内容\n      commentTextShowStatus: false, // 评价预览状态\n      expandStatus: false, // 评价折叠状态\n    }\n  },\n  created() {\n    this.initImpressions() // 获取买家印象\n    this.getCommentsByCondition() // 获取带图评价\n    this.toAssessList() // 获取当前 带图评价总数\n  },\n  filters: {\n    formatNumber(value) {\n      if (value <= 999) {\n        return value\n      } else if (value >= 1000) {\n        return (value / 1000).toFixed(0) + '000+'\n      }\n    }\n  },\n  // beforeDestroy() {\n  //   if (this.prevInstance) this.prevInstance.close()\n  // },\n  methods: {\n    /**\n     * @description 图片预览关闭\n    */\n    preClose() {\n      this.imgPreShow = false\n      this.expandStatus = false\n    },\n    /**\n     * @description 切换展开折叠评价\n    */\n    toggleExpand() {\n      this.expandStatus = !this.expandStatus\n    },\n    onChange(index) {\n      this.imgPreShowIndex = index;\n    },\n    /**\n     * @description 商品评价 各种类评价的数量\n     */\n    toAssessList() {\n      toAssessList({\n        productId: this.productId,\n      }).then(res => {\n        if (res.success) {\n          this.imgTotalCount = res.data.hasPicNum // 有图\n        }\n      })\n    },\n    /**\n     * @description 图片预览\n    */\n    fnPreviewImage(item, index) {\n      const _urls = []\n      item.picList.forEach(element => {\n        _urls.push(element.picUrl)\n      })\n      this.imgPreShowList = _urls\n      this.imgPreShow = false\n      this.imgPreShow = true\n      this.commentContent = item.commentContent\n      // this.prevInstance = ImagePreview({\n      //   images: _urls,\n      //   startPosition: index,\n      //   getContainer: document.getElementById('comment-container'),\n      //   onClose() {\n      //     // do something\n      //   },\n      // })\n    },\n    /**\n     * @description 评价页切换筛选条件时刷新单品页 家印象 与 带图评价\n    */\n    toggleShowStoreComment(v) {\n      this.isShowStoreComment = v\n      // 刷新 买家印象 与 带图评价\n      this.initImpressions()\n      this.getCommentsByCondition()\n    },\n    /**\n     * @description 初始化买家印象\n    */\n    initImpressions() {\n      let param = {\n        productId: this.productId\n      }\n      if (this.isShowStoreComment) {\n        param.storeId = this.storeId\n      }\n      getProductImpressions(param).then(res => {\n        if (res.success) {\n          this.praiseList = res.data\n        }\n      })\n    },\n    /**\n     * @description 获取展示带图评价\n     */\n    getCommentsByCondition() {\n      return new Promise((resolve, reject) => {\n        let param = {\n          commentType: 'image',\n          productId: this.productId,\n          pageSize: 10,\n          pageIndex: 1,\n        }\n        if (this.isShowStoreComment) {\n          param.storeId = this.storeId\n        }\n        getCommentsByCondition(param).then(res => {\n          if (res.success) {\n            this.imgCommentList = res.data\n\n            // 合并评价图片与追加图片\n            this.imgCommentList.forEach(i => {\n              // let realCommentPic = i.commentPics.filter(ii => {\n              //   return ii.picUrl\n              // })\n\n              // let realExperiencePic = i.experiencePics.filter(ii => {\n              //   return ii.picUrl\n              // })\n              // i.picList = [...i.commentPics, i.experiencePics]\n              i.picList = i.commentPics.concat(i.experiencePics)\n            })\n            console.log('imgCommentList:')\n            console.log(this.imgCommentList)\n\n            resolve()\n          }\n        })\n      })\n    },\n    closeComment() {\n      // this.show = false\n      this.$emit('toggleCommentHeader')\n    },\n    fnOpenCommentDetail() {\n      this.$util.gioTrackWithVariable('MB15623')\n      // this.show = true\n      this.$emit('toggleCommentHeader')\n    },\n    fnShowCommentContent(data) {\n      this.$emit('fnShowCommentContent', data)\n    },\n    /**\n     * @description 跳转晒图页面\n    */\n    toHotImgs() {\n      this.$router.push({\n        path: '/hotImgs',\n        query: {\n          productId: this.productId,\n        },\n      })\n    }\n\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n::v-deep .van-popup{\n  left: 0;\n  right: 0;\n  @include max-width;\n}\n.nodata {\n  font-size: 0.28rem;\n  color: rgba(153, 153, 153, 1);\n  line-height: 0.4rem;\n  padding-top: 0.24rem;\n  text-align: center;\n}\n.comment {\n  background-color: #fff;\n}\n.comment .title {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding-left: 0.32rem;\n  padding-right: 0.32rem;\n  height: 1rem;\n  // border-bottom: .02rem solid #eee;\n}\n.comment .title  .left{\n  display: flex;\n  flex-direction: row;\n  font-size: 0.28rem;\n  color: rgba(51, 51, 51, 1);\n  font-weight: 500;\n  align-items: center;\n}\n.comment .title .left .before-left{\n  height: .26rem;\n  width: .06rem;\n  background: linear-gradient(180deg,#37a4ff, #186eff);\n  border-radius: 0.04rem;\n  margin-right: 0.12rem;\n}\n.comment-hot-tips{\n  font-size: .22rem;\n  font-family: PingFangSC, PingFangSC-Regular;\n  font-weight: 400;\n  color: #333333;\n  line-height: .32rem;\n  display: flex;\n  justify-content: flex-start;\n  padding: .08rem 0 0 .28rem;\n  flex-wrap: wrap;\n  height: .72rem;\n  overflow: hidden;\n  .comment-hot-btn{\n    height: .48rem;\n    background: rgba(40,120,255,0.1);\n    border-radius: .24rem;\n    padding: 0 .18rem;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    margin-right: .2rem;\n    margin-bottom: .24rem;\n  }\n\n}\n.comment ::v-deep .comment-list .comment-list-item:nth-child(1){\n  padding-top: 0;\n}\n.left-number{\n  margin-left: 0.14rem;\n  font-size: 0.24rem;\n  font-weight: bold;\n}\n.comment .title .right {\n  display: flex;\n  align-items: center;\n  font-size: 0.24rem;\n  color: rgba(102, 102, 102, 1);\n  position: relative;\n  // padding-right: 0.2rem;\n  .rate{\n    display: inline-block;\n    color:#2878ff;\n    margin-right: 0.04rem;\n  }\n}\n.comment .title .right img {\n  width: 0.28rem;\n  height: 0.28rem;\n  margin-left: 0.1rem;\n  display: inline-block;\n  right: 0;\n  // top: calc(50% - 0.1rem);\n}\n.comment-imgs-container{\n\n    .imgs-header{\n      display: flex;\n      justify-content: space-between;\n      padding-left: .32rem;\n      // padding-right: .4rem;\n      align-items: center;\n      .header-title{\n        display: flex;\n        justify-content: flex-start;\n        align-items: center;\n        font-size: .28rem;\n        font-family: PingFangSC, PingFangSC-Medium;\n        font-weight: bold;\n        color: #333333;\n        line-height: .4rem;\n        .left-number{\n          font-size: .24rem;\n          font-family: PingFangSC, PingFangSC-Medium;\n          font-weight: bold;\n          color: #333333;\n          line-height: .34rem;\n        }\n        .before-left{\n          height: .26rem;\n          width: .06rem;\n          background: linear-gradient(180deg, #37a4ff, #186eff);\n          border-radius: 0.04rem;\n          margin-right: 0.12rem;\n        }\n      }\n      .right-arrow{\n\n        img{\n          width: 0.28rem;\n          height: 0.28rem;\n          margin-left: 0.1rem;\n          margin-right: .4rem;\n          display: inline-block;\n          right: 0;\n        }\n      }\n    }\n    .imgs-container{\n      width: 100%;\n      overflow-x: scroll;\n      -webkit-overflow-scrolling: touch;\n      padding-top: .18rem;\n      padding-left: .32rem;\n      display: flex;\n      &::-webkit-scrollbar{\n        display: none;\n      }\n      .img-item{\n        width: 1.86rem;\n        height: 1.86rem;\n        border-radius: .16rem;\n        overflow: hidden;\n        position: relative;\n        flex-shrink: 0;\n        margin-right: .12rem;\n        img{\n          width: 1.86rem;\n          height: 1.86rem;\n        }\n        .btm-right-num{\n          position: absolute;\n          width: .56rem;\n          height: .34rem;\n          opacity: 0.7;\n          background: rgb(0,0,0);\n          border-radius: .16rem 0px 0px 0px;\n          bottom: 0;\n          right: 0;\n          font-size: .2rem;\n          color: #fff;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n        }\n      }\n    }\n}\n.comment .comment-all {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  // height: 1.08rem;\n  margin: .36rem 0;\n}\n.comment{\n  border-radius: 0.24rem;\n  // border-bottom-right-radius: 0.24rem;\n  overflow: hidden;\n}\n.comment .comment-all .btn {\n  width: 2rem;\n  height: 0.56rem;\n  border-radius: 0.39rem;\n  border: 0.02rem solid $themeColor;\n  font-size: 0.24rem;\n  color: $themeColor;\n  text-align: center;\n  line-height: 0.58rem;\n}\n.comment-text{\n  width: 100%;\n  height: 2.18rem;\n  background: linear-gradient(180deg,rgba(0,0,0,0), #000000 35%, #000000 92%);\n  position: fixed;\n  bottom: 0;\n  display: flex;\n  justify-content: space-between;\n  .text-left{\n    height: 77px;\n    font-size: 12px;\n    font-family: PingFangSC, PingFangSC-Regular;\n    color: #ffffff;\n    line-height: .34rem;\n    margin-top: .44rem;\n    margin-left: .24rem;\n    width: 100%;\n    overflow-y: scroll;\n  }\n  .text-right{\n   padding-left: .16rem;\n   padding-right: .24rem;\n   .open{\n     background: url('https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/goods/open-icon.png') center center no-repeat;\n     background-size: cover;\n     width: .36rem;\n     height: .36rem;\n     margin-top: .46rem;\n   }\n   .close{\n     background: url('https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/goods/close-icon.png') center center no-repeat;\n     background-size: cover;\n     width: .36rem;\n     height: .36rem;\n     margin-top: .46rem;\n   }\n  }\n\n}\n.comment-text.fold{\n  height: 1rem;\n  overflow: hidden;\n  .text-left{\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n  }\n}\n.img-pre-back{\n  position: fixed;\n  background: url('https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/goods/img-pre-back.png') center center no-repeat;\n  background-size: cover;\n  width: .4rem;\n  height: .4rem;\n  top: .26rem;\n  left: .24rem;\n\n}\n.pic-pre-idx{\n  width: 100%;\n  position: fixed;\n  top: 0;\n  color: #fff;\n  font-size: .28rem;\n  line-height: .4rem;\n  display: flex;\n  justify-content: center;\n  height: 1.12rem;\n  background: linear-gradient(180deg,#000000, #000000 57%, rgba(0,0,0,0) 92%);\n\n  span{\n    margin-top: .26rem;\n  }\n}\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comment-info.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comment-info.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./comment-info.vue?vue&type=template&id=7600a0d5&scoped=true&\"\nimport script from \"./comment-info.vue?vue&type=script&lang=js&\"\nexport * from \"./comment-info.vue?vue&type=script&lang=js&\"\nimport style0 from \"./comment-info.vue?vue&type=style&index=0&id=7600a0d5&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7600a0d5\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../node_modules/@sg/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comment-info.vue?vue&type=style&index=0&id=7600a0d5&lang=scss&scoped=true&\""],"sourceRoot":""}