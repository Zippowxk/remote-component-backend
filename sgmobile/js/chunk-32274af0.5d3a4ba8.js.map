{"version":3,"sources":["webpack:///./src/views/order/refund/review.vue?e353","webpack:///src/views/order/refund/review.vue","webpack:///./src/views/order/refund/review.vue?70cd","webpack:///./src/views/order/refund/review.vue?1c51","webpack:///./src/views/order/refund/review.vue?9d4d"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","model","value","callback","$$v","description","expression","staticStyle","images","on","submit","staticRenderFns","components","UploadImg","data","loading","methods","$toast","forbidClick","message","duration","trim","context","length","base64s","map","imgRes","success","cOrderSn","experienceContent","fileIds","fileList","res","clear","$router","replace","fail","$route","query","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,MAAM,CAACE,YAAY,OAAO,CAACN,EAAIO,GAAG,UAAUH,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,iBAAiB,CAACA,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,WAAW,YAAc,UAAUC,MAAM,CAACC,MAAOV,EAAe,YAAEW,SAAS,SAAUC,GAAMZ,EAAIa,YAAYD,GAAKE,WAAW,kBAAkB,IAAI,KAAKV,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,aAAa,CAACW,YAAY,CAAC,aAAa,QAAQP,MAAM,CAAC,UAAW,EAAK,SAAW,EAAE,UAAY,MAAMC,MAAM,CAACC,MAAOV,EAAU,OAAEW,SAAS,SAAUC,GAAMZ,EAAIgB,OAAOJ,GAAKE,WAAW,aAAa,GAAGV,EAAG,MAAM,CAACE,YAAY,SAASW,GAAG,CAAC,MAAQjB,EAAIkB,SAAS,CAACd,EAAG,MAAM,CAACJ,EAAIO,GAAG,aAC3uBY,EAAkB,G,YCyCtB,qEAEA,GACEC,WAAY,CACVC,UAAJ,GAEEC,KAJF,WAKI,MAAO,CACLT,YAAa,GACbG,OAAQ,GACRO,SAAS,IAGbC,QAAS,CAIPN,OAJJ,WAIA,WAMM,GALAjB,KAAKwB,OAAOF,QAAQ,CAClBG,aAAa,EACbC,QAAS,SACTC,SAAU,IAEP3B,KAAKY,YAAYgB,OAAtB,CAIA,IAAIC,EAAU7B,KAEd,GAAI6B,EAAQd,OAAOe,OAAS,EAC1BD,EAAQP,SAAU,EAClB,EAAR,4BACUS,QAASF,EAAQd,OAAOiB,KAAI,SAAtC,uCACA,kBAEU,GADAH,EAAQP,SAAU,EACdW,EAAOZ,KAAKa,QAAS,CACvB,IAAZ,GACcC,SAAU,EAAxB,sBACcC,kBAAmBP,EAAQjB,YAC3ByB,QAASJ,EAAOZ,KAAKA,KAAKiB,SAASN,KAAI,SAArD,8BAEY,EAAZ,2CACkBO,EAAIlB,KAAKa,SACXL,EAAQL,OAAOgB,QAEfX,EAAQY,QAAQC,QAAQ,CAAxC,kEAEgBb,EAAQL,OAAOe,EAAIlB,KAAKK,iBAI5BG,EAAQL,OAAOS,EAAOZ,KAAKK,YApBvC,UAsBA,WACUG,EAAQP,SAAU,EAClBO,EAAQL,OAAOmB,KAAK,iBAE9B,CACQ,IAAR,GACUR,SAAUnC,KAAK4C,OAAOC,MAAMV,SAC5BC,kBAAmBP,EAAQjB,aAE7B,EAAR,2CACc2B,EAAIlB,KAAKa,SACX,EAAZ,eACY,EAAZ,mFAEY,EAAZ,gCA3CQlC,KAAKwB,OAAO,eClE0V,I,wBCQ1WsB,EAAY,eACd,EACAhD,EACAoB,GACA,EACA,KACA,WACA,MAIa,aAAA4B,E,oECnBf","file":"js/chunk-32274af0.5d3a4ba8.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"box\"},[_c('div',{staticClass:\"top\"},[_vm._v(\"追加评价\")]),_c('div',{staticClass:\"descripe\"},[_c('van-cell-group',[_c('van-field',{attrs:{\"type\":\"textarea\",\"placeholder\":\"说点什么吧~\"},model:{value:(_vm.description),callback:function ($$v) {_vm.description=$$v},expression:\"description\"}})],1)],1)]),_c('div',{staticClass:\"show-pic\"},[_c('upload-img',{staticStyle:{\"margin-top\":\"12px\"},attrs:{\"multiple\":true,\"maxCount\":6,\"cameraDes\":\"添加\"},model:{value:(_vm.images),callback:function ($$v) {_vm.images=$$v},expression:\"images\"}})],1),_c('div',{staticClass:\"bottom\",on:{\"click\":_vm.submit}},[_c('div',[_vm._v(\"提交\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"content\">\n    <div class=\"box\">\n      <div class=\"top\">追加评价</div>\n      <div class=\"descripe\">\n        <van-cell-group>\n          <van-field\n            type=\"textarea\"\n            v-model=\"description\"\n            placeholder=\"说点什么吧~\"\n          />\n        </van-cell-group>\n      </div>\n    </div>\n    <div class=\"show-pic\">\n      <upload-img\n        style=\"margin-top: 12px\"\n        :multiple=\"true\"\n        :maxCount=\"6\"\n        v-model=\"images\"\n        cameraDes=\"添加\"\n      ></upload-img>\n      <!-- <div class=\"photo-show\">\n        <van-uploader\n          v-model=\"images\"\n          multiple\n          :after-read=\"uploadImg\"\n          :max-count=\"6\"\n        >\n          <img class=\"camera\" :src=\"`${$cdnImageUrl}/pc/tianjia.png`\" />\n          <div class=\"camera-des\">添加</div>\n        </van-uploader>\n        <van-loading type=\"spinner\" color=\"#1989fa\" v-if=\"loading\"/>\n      </div> -->\n    </div>\n    <div class=\"bottom\" @click=\"submit\">\n      <div>提交</div>\n    </div>\n  </div>\n</template>\n<script>\nimport personalApi from '@/http/service/index';\nconst UploadImg = () => import('@/components/uploadImg');\n\nexport default {\n  components: {\n    UploadImg\n  },\n  data() {\n    return {\n      description: '',\n      images: [],\n      loading: false,\n    }\n  },\n  methods: {\n    /**\n     * @description  提交\n    */\n    submit() {\n      this.$toast.loading({\n        forbidClick: true,\n        message: '加载中...',\n        duration: 0\n      })\n      if (!this.description.trim()) {\n        this.$toast('请填写评价内容！')\n        return\n      }\n      var context = this\n      // 去空处理\n      if (context.images.length > 0) {\n        context.loading = true\n        personalApi.uploadPictureBybase64({\n          base64s: context.images.map(img => img.content.split(',')[1])\n        }).then(imgRes => {\n          context.loading = false\n          if (imgRes.data.success) {\n            const data = {\n              cOrderSn: this.$route.query.cOrderSn,\n              experienceContent: context.description,\n              fileIds: imgRes.data.data.fileList.map(img => img.imgUrl).join() // 图片url 最多6张 英文逗号分隔\n            }\n            personalApi.submitExperience(data).then(res => {\n              if (res.data.success) {\n                context.$toast.clear()\n                // context.$router.push({ path: '/reviewSuccess', query: { cOrderSn: this.$route.query.cOrderSn } })\n                context.$router.replace({ path: '/reviewSuccess', query: { cOrderSn: this.$route.query.cOrderSn } })\n              } else {\n                context.$toast(res.data.message)\n              }\n            })\n          } else {\n            context.$toast(imgRes.data.message)\n          }\n        }).catch(() => {\n          context.loading = false\n          context.$toast.fail('上传图片失败')\n        })\n      } else {\n        const data = {\n          cOrderSn: this.$route.query.cOrderSn,\n          experienceContent: context.description,\n        }\n        personalApi.submitExperience(data).then(res => {\n          if (res.data.success) {\n            this.$toast.clear()\n            this.$router.replace({ path: '/reviewSuccess', query: { cOrderSn: this.$route.query.cOrderSn } })\n          } else {\n            this.$toast(res.data.message)\n          }\n        })\n      }\n    },\n    /**\n     * @description  传本地完成后\n    */\n    // uploadImg(file) {\n    //   this.images.forEach(item => {\n    //     console.log('前', item.file)\n    //     if (/\\/(?:jpeg|png)/i.test(item.file.type) && item.file.size > 1000000) {\n    //     // 创建Canvas对象(画布)\n    //       let canvas = document.createElement('canvas')\n    //       // 获取对应的CanvasRenderingContext2D对象(画笔)\n    //       let context = canvas.getContext('2d')\n    //       // 创建新的图片对象\n    //       let img = new Image()\n    //       // 指定图片的DataURL(图片的base64编码数据)\n    //       img.src = item.content\n    //       // 监听浏览器加载图片完成，然后进行进行绘制\n    //       img.onload = () => {\n    //       // 指定canvas画布大小，该大小为最后生成图片的大小\n    //         canvas.width = 400\n    //         canvas.height = 300\n    //         /* drawImage画布绘制的方法。(0,0)表示以Canvas画布左上角为起点，400，300是将图片按给定的像素进行缩小。\n    //     如果不指定缩小的像素图片将以图片原始大小进行绘制，图片像素如果大于画布将会从左上角开始按画布大小部分绘制图片，最后的图片就是张局部图。 */\n    //         context.drawImage(img, 0, 0, 400, 300)\n    //         // 将绘制完成的图片重新转化为base64编码，file.file.type为图片类型，0.92为默认压缩质量\n    //         let blob = this.dataURLtoBlob(canvas.toDataURL(item.file.type, 0.92));\n    //         // let file = this.blobToFile(blob);\n    //         // blob转file\n    //         let file = new window.File([blob], item.file.name, { type: item.file.type })\n    //         item.file = file\n    //         console.log('item.file', item.file)\n    //       }\n    //     }\n    //   })\n    // },\n    /**\n     * @description  将base64转换为blob\n    */\n    // dataURLtoBlob: function(dataurl) {\n    //   var arr = dataurl.split(',');\n    //   var mime = arr[0].match(/:(.*?);/)[1];\n    //   var bstr = atob(arr[1]);\n    //   var n = bstr.length;\n    //   var u8arr = new Uint8Array(n);\n    //   while (n--) {\n    //     u8arr[n] = bstr.charCodeAt(n);\n    //   }\n    //   return new Blob([u8arr], { type: mime });\n    // },\n  }\n}\n</script>\n<style scoped>\n.content{\n  height: 12.06rem;\n}\n.box{\n  width:7.5rem;\n  height:3.76rem;\n  background:rgba(255,255,255,1);\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n}\n.top{\n  height: 0.76rem;\n  width:7.02rem;\n  display: flex;\n  align-items: center;\n  color: #333333;\n  font-size:0.28rem;\n}\n.descripe{\n  width:7.02rem;\n  height:3rem;\n  background:rgba(255,255,255,1);\n  border:0.01rem solid rgba(238,238,238,1);\n}\n.van-cell{\n  padding: 0.24rem;\n  height: 3rem;\n}\n.descripe ::v-deep .van-field--min-height .van-field__control{\n  height: 2.52rem;\n}\n.show-pic{\n  min-height: 2rem;\n  background: #fff;\n  overflow: hidden;\n}\n/* .photo-show{\n  display: flex;\n  justify-content: flex-start;\n  flex-wrap: wrap;\n  margin-top: 0.24rem;\n  margin-left: 0.24rem;\n  position: relative;\n}\n.photo-show ::v-deep .van-uploader__input-wrapper{\n  width:1.40rem;\n  height:1.40rem;\n  border-radius:0.06rem;\n  border:0.02rem dashed rgba(206,206,206,1);\n  margin-bottom: 0.20rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n}\n.photo-show ::v-deep .van-uploader__preview-image{\n  width: 1.4rem;\n  height: 1.4rem;\n}\n.photo-show ::v-deep .van-uploader__preview-delete{\n  top: 0;\n  right: 0;\n}\n.photo-show ::v-deep .van-uploader__preview{\n  margin: 0 0.2rem 0.2rem 0;\n}\n.camera {\n  width: 0.4rem;\n  height: 0.4rem;\n}\n.camera-des{\n  font-size:0.24rem;\n  font-weight:400;\n  color:rgba(206,206,206,1);\n  margin-top: 0.12rem;\n} */\n.bottom{\n  height: 0.88rem;\n  display: flex;\n  justify-content: center;\n  margin-top: 4.86rem;\n}\n.bottom div{\n  width:6.86rem;\n  height:0.88rem;\n  background:rgba(34,131,226,1);\n  border-radius:2rem;\n  text-align: center;\n  line-height: 0.88rem;\n  color: #fff;\n  font-size:0.34rem;\n}\n/* .van-loading{\n  position: absolute;\n  left: 45%;\n  top: 0.5rem;\n} */\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./review.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./review.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./review.vue?vue&type=template&id=2643863a&scoped=true&\"\nimport script from \"./review.vue?vue&type=script&lang=js&\"\nexport * from \"./review.vue?vue&type=script&lang=js&\"\nimport style0 from \"./review.vue?vue&type=style&index=0&id=2643863a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2643863a\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/@sg/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./review.vue?vue&type=style&index=0&id=2643863a&scoped=true&lang=css&\""],"sourceRoot":""}