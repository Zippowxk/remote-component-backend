{"version":3,"sources":["webpack:///./src/components/search/components/history-search.vue?15ca","webpack:///src/components/search/components/history-search.vue","webpack:///./src/components/search/components/history-search.vue?515e","webpack:///./src/components/search/components/history-search.vue","webpack:///./src/components/search/components/history-search.vue?1f95"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","attrs","_f","$cdnImageUrl","on","deleteHistorySearch","historySearchList","class","showMore","_l","item","index","key","$event","doHistorySearch","_v","_s","hasMoreBtn","toggleShowMore","_e","staticRenderFns","computed","props","data","historySearchListShow","created","mounted","toggleHistoryData","activated","watch","handler","immediate","deep","show","v","methods","length","$dialog","$nextTick","hisnode","ulChid","forEach","console","log","i","offsetLeft","count","idx","$emit","keyword","keyWord","type","component"],"mappings":"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","file":"js/chunk-bab4892a.58090017.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"history\"},[_c('div',{staticClass:\"title\"},[_vm._m(0),_c('div',{staticClass:\"right\"},[_c('img',{attrs:{\"alt\":\"\",\"src\":_vm._f(\"imageToHttps\")((_vm.$cdnImageUrl + \"/search/delete.png\"))},on:{\"click\":_vm.deleteHistorySearch}})])]),(_vm.historySearchList.length)?_c('ul',{class:{'history-content':true,'history-hide':!_vm.showMore}},[_vm._l((_vm.historySearchListShow),function(item,index){return _c('li',{key:index,staticClass:\"van-ellipsis\",on:{\"click\":function($event){return _vm.doHistorySearch(item)}}},[_vm._v(_vm._s(item))])}),(!_vm.showMore && _vm.hasMoreBtn)?_c('span',{staticClass:\"icon-more\",on:{\"click\":_vm.toggleShowMore}}):_vm._e(),(_vm.showMore && _vm.hasMoreBtn)?_c('span',{staticClass:\"icon-more-hide\",on:{\"click\":_vm.toggleShowMore}}):_vm._e()],2):_c('div',{staticClass:\"nodata\"},[_c('p',[_vm._v(\"暂无搜索记录\")])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"left\"},[_c('span',{staticClass:\"text-icon\"}),_vm._v(\"历史搜索\")])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"history\">\n    <div class=\"title\">\n      <div class=\"left\"><span class=\"text-icon\"></span>历史搜索</div>\n      <div class=\"right\">\n        <img @click=\"deleteHistorySearch\" alt :src=\"`${$cdnImageUrl}/search/delete.png` | imageToHttps\" />\n      </div>\n    </div>\n    <ul :class=\"{'history-content':true,'history-hide':!showMore}\" v-if=\"historySearchList.length\">\n      <li class=\"van-ellipsis\" v-for=\"(item, index) in historySearchListShow\" :key=\"index\" @click=\"doHistorySearch(item)\">{{ item }}</li>\n      <span class=\"icon-more\" v-if=\"!showMore && hasMoreBtn\" @click=\"toggleShowMore\"></span>\n      <span class=\"icon-more-hide\" v-if=\"showMore && hasMoreBtn\" @click=\"toggleShowMore\"></span>\n    </ul>\n    <div class=\"nodata\" v-else>\n      <p>暂无搜索记录</p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { createNamespacedHelpers } from 'vuex'\nconst { mapGetters } = createNamespacedHelpers('history')\nexport default {\n  computed: {\n    ...mapGetters(['historySearchList']),\n  },\n  props: {\n    'show': { type: Boolean, default: false },\n  },\n  data () {\n    return {\n      historySearchListShow: [],\n      showMore: false,\n      hasMoreBtn: false,\n    }\n  },\n  created() {\n    this.historySearchListShow = this.historySearchList\n    this.showMore = false\n    this.hasMoreBtn = false\n  },\n  mounted() {\n    this.toggleHistoryData()\n  },\n  activated() {\n    this.historySearchListShow = this.historySearchList\n    this.showMore = false\n    this.hasMoreBtn = false\n    this.toggleHistoryData()\n  },\n  watch: {\n    historySearchList: {\n      handler(newVal, oldVal) {\n        this.historySearchListShow = this.historySearchList\n        this.showMore = false\n        this.hasMoreBtn = false\n        this.toggleHistoryData()\n      },\n      immediate: true,\n      deep: true\n    },\n    show: {\n      handler: function(v, ov) {\n        if (v) {\n          this.historySearchListShow = this.historySearchList\n          this.showMore = false\n          this.hasMoreBtn = false\n          this.toggleHistoryData()\n        }\n      },\n      immediate: true\n    }\n  },\n  methods: {\n    /**\n     * @description 历史记录的删除事件\n     */\n    deleteHistorySearch () {\n      if (this.historySearchList.length === 0) {\n        return\n      }\n      this.$dialog\n        .confirm({\n          title: '确定清空搜索历史记录吗?',\n        })\n        .then(() => {\n          this.hasMoreBtn = false\n          this.$store.commit('history/deleteHistorySearchList')\n        })\n        .catch(() => {\n          // on cancel\n        })\n    },\n    /**\n     * @description 历史记录 页面超出两行截取数据\n     */\n    toggleHistoryData() {\n      let idx = 0\n      let count = 0\n      this.$nextTick(() => {\n        const hisnode = document.querySelector('.history-content')\n        if (!hisnode) { return }\n        let ulChid = hisnode.childNodes\n        ulChid.forEach((i, index) => {\n          console.log(i + '：', i.offsetLeft)\n          if (i.offsetLeft === 0) {\n            count++\n            if (count === 3) {\n              idx = index - 1\n              this.hasMoreBtn = true\n            }\n          }\n        })\n        // 超过2行截断数据\n        if (idx > 0) {\n          this.historySearchListShow = this.historySearchList.slice(0, idx)\n        } else {\n          this.historySearchListShow = this.historySearchList\n        }\n      })\n    },\n    toggleShowMore() {\n      this.showMore = !this.showMore\n      this.toggleHistoryData()\n    },\n    /**\n     * @description 历史记录的点击事件\n     */\n    doHistorySearch (keyWord) {\n      // 触发搜索\n      this.$emit('doSearch', {\n        keyword: keyWord,\n        type: 'history'\n      })\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.history {\n  background: #fff;\n  padding-left: 0.24rem;\n  padding-right: 0.24rem;\n  .title {\n    // height: 0.72rem;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    // border-bottom: 0.01rem solid #eee;\n    font-size: 0.28rem;\n    color: #000000;\n    margin-bottom: .36rem;\n    .right {\n      img {\n        width: 0.4rem;\n        height: 0.4rem;\n      }\n    }\n  }\n  ul {\n    li {\n      display: inline-block;\n      -webkit-box-align: center;\n      align-items: center;\n      border-radius: 1rem;\n      box-sizing: border-box;\n      height: 0.56rem;\n      line-height: 0.56rem;\n      margin-bottom: 0.24rem;\n      text-align: center;\n      padding: 0 0.28rem;\n      font-size: 0.24rem;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      color: #666;\n      background-color: #F6F7FA;\n      margin-right: .2rem;\n      max-width: 100%;\n    }\n  }\n  .nodata {\n    p {\n      font-size: 0.28rem;\n      color: #666;\n      line-height: 0.76rem;\n    }\n  }\n}\n.title .left{\n  font-weight: bold;\n  display: flex;\n  align-items: flex-end;\n  line-height: .36rem;\n}\n.title .left .text-icon{\n  background: url('https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/search/history.png') center center no-repeat;\n  display: inline-block;\n  width: .36rem;\n  height: .36rem;\n  margin-right: .04rem;\n  background-size: cover;\n}\n.history ul .icon-more{\n  background: url('https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/search/xiala.png') center center no-repeat;\n  display: inline-block;\n  width: .6rem;\n  height: .56rem;\n  margin-bottom: .2rem;\n  background-size: cover;\n}\n.history-hide{\n  max-height: 1.68rem;\n  overflow: hidden;\n}\n.history-content{\n  position: relative;\n  // padding-bottom: 0.1rem;\n  display: flex;\n  justify-content: flex-start;\n  flex-direction: row;\n  flex-wrap: wrap;\n}\n.icon-more-hide{\n  background: url('https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/search/shouqi.png') center center no-repeat;\n  display: inline-block;\n  width: .6rem;\n  height: .56rem;\n  margin-bottom: .2rem;\n  background-size: cover;\n}\n.unVisiable{\n  visibility: hidden;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./history-search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./history-search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./history-search.vue?vue&type=template&id=0b36344c&scoped=true&\"\nimport script from \"./history-search.vue?vue&type=script&lang=js&\"\nexport * from \"./history-search.vue?vue&type=script&lang=js&\"\nimport style0 from \"./history-search.vue?vue&type=style&index=0&id=0b36344c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0b36344c\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/@sg/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./history-search.vue?vue&type=style&index=0&id=0b36344c&lang=scss&scoped=true&\""],"sourceRoot":""}