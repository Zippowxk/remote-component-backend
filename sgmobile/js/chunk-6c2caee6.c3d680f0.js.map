{"version":3,"sources":["webpack:///./src/views/order/pay/index.vue?14d7","webpack:///src/views/order/pay/index.vue","webpack:///./src/views/order/pay/index.vue?1ff3","webpack:///./src/views/order/pay/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","goIndex","_v","attrs","$cdnImageUrl","goOrder","_m","copy","ref","saveImage","staticRenderFns","components","props","data","created","mounted","beforeDestroy","methods","instance","initDeviceReady","then","closeH5ContainerView","window","postMessage","JSON","stringify","type","$router","push","text","clipboard","setTimeout","_getPixelRatio","backingStore","devicePixelRatio","_html2canvas","Promise","canvas2","width","scale","height","ctx","canvas","allowTaint","useCORS","createALink","a","attrKey","dispatchEvent","event","computed","watch","component"],"mappings":"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","file":"js/chunk-6c2caee6.c3d680f0.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pay-resault\"},[_c('div',{staticClass:\"back-line\",on:{\"click\":_vm.goIndex}},[_vm._v(\"完成\")]),_c('div',{staticClass:\"resault-wrapper\"},[_c('div',{staticClass:\"img-wrapper\"},[_c('img',{staticClass:\"pay-success-img\",attrs:{\"src\":(_vm.$cdnImageUrl + \"/pay-resault/pay-success3x.png\"),\"alt\":\"\"}})]),_c('div',{staticClass:\"resault-text\"},[_vm._v(\"支付成功\")]),_c('div',{staticClass:\"btn-wrapper\"},[_c('div',{staticClass:\"btn go-index\",on:{\"click\":_vm.goIndex}},[_vm._v(\"返回首页\")]),_c('div',{staticClass:\"btn go-order\",on:{\"click\":_vm.goOrder}},[_vm._v(\"查看订单\")])])]),_c('div',{staticClass:\"wx-account-wrapper\"},[_c('div',{staticClass:\"avatar-wrapper\"},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":(_vm.$cdnImageUrl + \"/pay-resault/wx-logo3x.png\"),\"alt\":\"\"}})]),_vm._m(0),_c('div',{staticClass:\"btn-wrapper\"},[_c('div',{staticClass:\"btn copy\",on:{\"click\":_vm.copy}},[_vm._v(\"复制\")])])]),_c('div',{staticClass:\"wx-account-qrcode\"},[_c('div',{ref:\"qrcode\",staticClass:\"qrcode-wrapper\"},[_c('img',{staticClass:\"qrcode\",attrs:{\"src\":(_vm.$cdnImageUrl + \"/pay-resault/wx-qrcode.png\"),\"alt\":\"\"}})]),_c('div',{staticClass:\"qrcode-info\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"微信扫一扫关注公众号\")]),_c('div',{staticClass:\"btn download\",on:{\"click\":_vm.saveImage}},[_c('img',{staticClass:\"download-icon\",attrs:{\"src\":(_vm.$cdnImageUrl + \"/pay-resault/qr-download-icon3x.png\"),\"alt\":\"\"}}),_c('div',{staticClass:\"text\"},[_vm._v(\"保存到相册\")])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"info-wrapper\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"海尔智家公众号\")]),_c('div',{staticClass:\"content\"},[_vm._v(\"实时推送物流、发票等信息\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"pay-resault\">\n    <div class=\"back-line\" @click=\"goIndex\">完成</div>\n    <div class=\"resault-wrapper\">\n      <div class=\"img-wrapper\">\n        <img :src=\"`${$cdnImageUrl}/pay-resault/pay-success3x.png`\" alt=\"\" class=\"pay-success-img\">\n      </div>\n      <div class=\"resault-text\">支付成功</div>\n      <div class=\"btn-wrapper\">\n        <div class=\"btn go-index\" @click=\"goIndex\">返回首页</div>\n        <div class=\"btn go-order\" @click=\"goOrder\">查看订单</div>\n      </div>\n    </div>\n    <div class=\"wx-account-wrapper\">\n      <div class=\"avatar-wrapper\">\n        <img :src=\"`${$cdnImageUrl}/pay-resault/wx-logo3x.png`\" alt=\"\" class=\"avatar\">\n      </div>\n      <div class=\"info-wrapper\">\n        <div class=\"title\">海尔智家公众号</div>\n        <div class=\"content\">实时推送物流、发票等信息</div>\n      </div>\n      <div class=\"btn-wrapper\">\n        <div class=\"btn copy\" @click=\"copy\">复制</div>\n      </div>\n    </div>\n    <div class=\"wx-account-qrcode\">\n      <div class=\"qrcode-wrapper\" ref=\"qrcode\">\n        <img :src=\"`${$cdnImageUrl}/pay-resault/wx-qrcode.png`\" alt=\"\" class=\"qrcode\">\n      </div>\n      <div class=\"qrcode-info\">\n        <div class=\"title\">微信扫一扫关注公众号</div>\n        <div class=\"btn download\" @click=\"saveImage\">\n          <img :src=\"`${$cdnImageUrl}/pay-resault/qr-download-icon3x.png`\" alt=\"\" class=\"download-icon\">\n          <div class=\"text\">保存到相册</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport html2canvas from 'html2canvas'\nimport ClipboardJS from 'clipboard'\nimport util from '@/utils/utils'\nimport UplusApi from '@uplus/uplus-api';\nimport './index.scss'\n\nconst instance = new UplusApi();\n\nexport default {\n  components: {},\n  props: {},\n  data () {\n    return {\n\n    }\n  },\n  created () {},\n  mounted () {},\n  beforeDestroy () {},\n  methods: {\n    goIndex () {\n      // this.$router.push({ name: 'home' })\n      if (util.isHaierApp()) {\n        instance.initDeviceReady().then(function() {\n          instance.closeH5ContainerView();\n        });\n      } else if (util.isSgRn()) {\n        window.postMessage(JSON.stringify({\n          type: 'goHome',\n        }));\n      } else {\n        this.$router.push('/')\n      }\n      // E支付，智家APP会唤醒Safari，在Safari中通过scheme拉起智家APP商城tab页\n      // if (!util.isHaierApp() && !util.isSgRn()) {\n      //   window.parent && (window.parent.location = 'haieruplus://jump/https://uplus.haier.com/uplusapp/customize/index.html')\n      // }\n    },\n    goOrder() {\n      this.$router.push({ path: '/orderList' })\n    },\n    copy() {\n      const clipboard = new ClipboardJS('.pay-resault .copy', {\n        text: (trigger) => {\n          return 'shunguang01'\n        }\n      })\n      clipboard.on('success', () => {\n        this.$toast('复制成功')\n        window.setTimeout(() => {\n          this.createALink({ href: 'weixin://' })\n        }, 1000)\n      })\n      clipboard.on('error', () => {\n        this.$toast('复制失败')\n      })\n    },\n    async saveImage() {\n      const imgUrl = await this._html2canvas()\n      if (this.$util.isHaierApp()) {\n        this.$util.uplusSaveImage(imgUrl).then(res => {\n          if (res) {\n            this.$toast('保存成功')\n          } else {\n            this.$$toast('保存失败')\n          }\n        })\n      } else {\n        this.createALink({ download: Date.now(), href: imgUrl })\n      }\n    },\n    _getPixelRatio(context) {\n      var backingStore =\n        context.backingStorePixelRatio ||\n        context.webkitBackingStorePixelRatio ||\n        context.mozBackingStorePixelRatio ||\n        context.msBackingStorePixelRatio ||\n        context.oBackingStorePixelRatio ||\n        context.backingStorePixelRatio ||\n        1\n      return (window.devicePixelRatio || 1) / backingStore\n    },\n    _html2canvas() {\n      return new Promise((resolve, reject) => {\n        // 创建一个新的canvas\n        const _canvas = this.$refs['qrcode']\n        // 此处用于解决截图不清晰问题，将生成的canvas放大，然后再填充到原有的容器中就会清晰\n        const width = _canvas.offsetWidth\n        const height = _canvas.offsetHeight\n        const canvas2 = document.createElement('canvas')\n        const ctx = canvas2.getContext('2d')\n        const ratio = this._getPixelRatio(ctx)\n        const scale = ratio\n        canvas2.width = width * scale\n        canvas2.height = height * scale\n        ctx.scale(scale, scale)\n        const opts = {\n          scale: 1,\n          canvas: canvas2,\n          // logging: true, // 日志开关，便于查看html2canvas的内部执行流程\n          width,\n          height,\n          allowTaint: true,\n          useCORS: true, // 【重要】开启跨域配置\n        }\n        html2canvas(_canvas, opts).then(async canvas => {\n          const context = canvas.getContext('2d')\n          // 【重要】关闭抗锯齿\n          context.mozImageSmoothingEnabled = false\n          context.webkitImageSmoothingEnabled = false\n          context.msImageSmoothingEnabled = false\n          context.imageSmoothingEnabled = false\n\n          const screenUrl = canvas.toDataURL('image/png')\n          console.log('screenUrl', screenUrl)\n          resolve(screenUrl)\n        })\n      })\n    },\n    createALink (attrs) {\n      const a = document.createElement('a')\n      const event = new MouseEvent('click')\n      for (const attrKey of Object.keys(attrs)) {\n        a[attrKey] = attrs[attrKey]\n      }\n      a.dispatchEvent(event)\n    }\n  },\n  computed: {},\n  watch: {}\n}\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=136209d7&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}