(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0dc7e1d6","chunk-079cb250","chunk-2b4715e4"],{"0664":function(t,e,a){},1850:function(t,e,a){},"23d3":function(t,e,a){"use strict";var n=a("c63d");e["a"]={components:{topFeedBack:n["default"]},data:function(){return{showToTopFlag:!1}},activated:function(){this.fnScroll()},beforeRouteLeave:function(t,e,a){document.getElementById("app-warp").removeEventListener("scroll",this.addEventScrollFn),a()},beforeMount:function(){this.debouncedAction=this.$util.throttle(this.option,100)},methods:{fnScrollToTop:function(){this.scrollSmoothTo(0)},hiddenFeedBack:function(){this.showToTopFlag=!1},scrollSmoothTo:function(t){console.log("#app-warp scroll"),window.requestAnimationFrame||(window.requestAnimationFrame=function(t){return setTimeout(t,17)});var e=document.querySelector("#app-warp"),a=e.scrollTop;console.log(a,"scrollTop");var n=function n(){var o=t-a;a+=o/10,Math.abs(o)<1?e.scrollTo(0,t):(e.scrollTo(0,a),requestAnimationFrame(n))};n()},fnScroll:function(){document.getElementById("app-warp").addEventListener("scroll",this.addEventScrollFn)},addEventScrollFn:function(t){this.debouncedAction(t)},option:function(t){var e=t.target.scrollTop;this.showToTopFlag=e>200}}}},"25e9":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{class:{"coupon-value-label":!0,"home-style":t.forHomePage},style:{color:t.textColor}},["FIXED_CASH_COUPON"===t.couponType||"REBATE_COUPON"===t.couponType?a("span",{staticClass:"symbol"},[t._v("￥")]):t._e(),a("span",{staticClass:"integer",style:{fontSize:t.fontSize}},[t._v(t._s(t._f("formatPriceInt")(t.couponDisplayValue)))]),t.withFloat?a("span",{staticClass:"float"},[t._v(t._s(t._f("formatPriceFloat")(t.couponDisplayValue)))]):t._e(),"DISCOUNT_COUPON"===t.couponType?a("span",{staticClass:"sales"},[t._v("折")]):t._e()])])},o=[],s={name:"couponValueLabel",props:{couponValue:{type:String,default:"0"},couponType:{type:String,default:"FIXED_CASH_COUPON"},forHomePage:{type:Boolean,default:!1},maxFontSize:{type:String,default:"0.64"},textColor:{type:String,default:"#ED2856"}},computed:{fontSize:function(){return this.forHomePage?String(this.couponDisplayValue).length<6?"0.40rem":6===String(this.couponDisplayValue).length?"0.38rem":String(this.couponDisplayValue).length>6?"0.32rem":this.maxFontSize+"rem":String(this.couponDisplayValue).length<6?this.maxFontSize+"rem":6===String(this.couponDisplayValue).length?.875*this.maxFontSize+"rem":String(this.couponDisplayValue).length>6?.68*this.maxFontSize+"rem":this.maxFontSize+"rem"},withFloat:function(){var t=this.couponDisplayValue.split(".");return!!(t&&t.length>1&&"00"!==t[1]&&"0"!==t[1])},couponDisplayValue:function(){return"DISCOUNT_COUPON"===this.couponType?String(Number(this.couponValue)/10):this.couponValue}}},i=s,c=(a("4ff6"),a("2877")),r=Object(c["a"])(i,n,o,!1,null,"5a48cfec",null);e["a"]=r.exports},"32ad":function(t,e,a){},"469d":function(t,e,a){},"4b7d":function(t,e,a){"use strict";a("7fdc")},"4ff6":function(t,e,a){"use strict";a("0664")},6802:function(t,e,a){"use strict";a("469d")},"6beb":function(t,e,a){"use strict";var n=a("bbc2"),o=a("1c03"),s=function(t){return o["a"].get(n["a"].GET_CUSTOM_PAGE,{params:t})},i=function(t){return o["a"].get(n["a"].GET_ACTIVITY_PAGE,{params:t})},c=function(t){return o["a"].get(n["a"].GET_COUPON_DETAIL,{params:t})},r=function(t){return o["a"].get(n["a"].REMIND_COUPONS_LIST,{params:t})},l=function(t){return o["a"].get(n["a"].receiveCoupon,{params:t})},u=function(t){return o["a"].get(n["a"].isWdHost,{params:t})};e["a"]={getCustomPage:s,getActivityPage:i,getCouponDetail:c,setCouponRemind:r,getCoupon:l,isWdHost:u}},"7fdc":function(t,e,a){},8261:function(t,e,a){},9634:function(t,e,a){"use strict";a("32ad")},bcf4:function(t,e,a){},c63d:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isShow?a("div",{staticClass:"go-top",class:t.classList},[a("div",{staticClass:"top",on:{click:t.toGotop}},[a("img",{attrs:{src:t.$cdnImageUrl+"/common/common-to-top-icon.png"}}),a("span",[t._v("顶部")])]),t.isHaierApp&&t.feedShow?a("div",{staticClass:"divider"}):t._e(),t.isHaierApp&&t.feedShow?a("div",{staticClass:"bottom",on:{click:function(e){return t.toFeedBack()}}},[a("img",{attrs:{src:t.$cdnImageUrl+"/common/common-edit-icon.png"}}),a("span",[t._v("反馈")])]):t._e()]):t._e()},o=[],s={props:{isShow:{type:Boolean,default:function(){return!1}},classList:{type:Object,default:function(){return{}}},feedShow:{type:Boolean,default:function(){return!0}},code:{type:Number,default:function(){return null}}},data:function(){return{isHaierApp:!1,timer:null}},created:function(){this.isHaierApp=this.$util.isUplus()},watch:{isShow:{handler:function(t){var e=this;console.log(t),console.log("this.timer:",this.timer),t?this.timer?(clearTimeout(this.timer),this.timer=null):this.timer=setTimeout((function(){e.hiddenFeedBack()}),4e3):(clearTimeout(this.timer),this.timer=null)}}},methods:{hiddenFeedBack:function(){console.log("hiddenFeedBack"),this.$emit("hiddenFeedBack")},toGotop:function(){this.$emit("toTop")},toFeedBack:function(){if(this.$store.getters.getLoginStatus){var t="https://uplus.haier.com/uplusapp/problemFeedBack/feedback.html";this.code&&(t="https://uplus.haier.com/uplusapp/problemFeedBack/feedback.html?code="+this.code),this.$util.openNewWindow(t,!0,!1,!1)}else this.$store.dispatch("doLogin").then((function(t){400===t&&console.log("请求异常")}))}}},i=s,c=(a("4b7d"),a("2877")),r=Object(c["a"])(i,n,o,!1,null,"7733b653",null);e["default"]=r.exports},ca9b:function(t,e,a){"use strict";a("bcf4")},d7a6:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"refresh-load"},[a("div",{staticClass:"spinner"},t._l(t.rectlist,(function(e){return a("div",{key:e,class:"rect"+e,style:{"background-color":t.color}})})),0),t.text?a("div",{staticClass:"spinner-text",style:{color:t.textColor}},[t._v(t._s(t.text))]):t._e()])},o=[],s={name:"refreshLoading",props:["text","color","textColor"],data:function(){return{rectlist:[1,2,3,4,5]}}},i=s,c=(a("ef69"),a("2877")),r=Object(c["a"])(i,n,o,!1,null,"9448457e",null);e["default"]=r.exports},d92f:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"toTop",staticClass:"content"},[a("div",{staticClass:"switch"},[a("div",{staticClass:"tab"},[a("div",{class:"1"===t.data.status&&"checked",attrs:{id:"1"},on:{click:t.switchTabChange}},[t._v("未使用")]),a("div",{class:"2"===t.data.status&&"checked",attrs:{id:"2"},on:{click:t.switchTabChange}},[t._v("已使用")]),a("div",{class:"4"===t.data.status&&"checked",attrs:{id:"4"},on:{click:t.switchTabChange}},[t._v("即将过期")]),a("div",{class:"3"===t.data.status&&"checked",attrs:{id:"3"},on:{click:t.switchTabChange}},[t._v("已过期")])])]),a("van-pull-refresh",{attrs:{disabled:t.refreshDisable},on:{refresh:t.onRefresh},scopedSlots:t._u([{key:"pulling",fn:function(){return[a("refreshLoading",{attrs:{text:"下拉刷新"}})]},proxy:!0},{key:"loosing",fn:function(){return[a("refreshLoading",{attrs:{text:"下拉刷新"}})]},proxy:!0},{key:"loading",fn:function(){return[a("refreshLoading",{attrs:{text:"加载中"}})]},proxy:!0},{key:"success",fn:function(){return[a("refreshLoading",{attrs:{text:"加载完成"}})]},proxy:!0}]),model:{value:t.data.isLoading,callback:function(e){t.$set(t.data,"isLoading",e)},expression:"data.isLoading"}},[a("van-list",{class:{block:!(0===t.data.list.length&&!t.data.isLoading&&!t.data.loading),blockWhite:0===t.data.list.length&&!t.data.isLoading&&!t.data.loading},attrs:{finished:t.data.finished,finishedText:t.data.list.length>0?"没有更多啦~":"","van-clearfix":"","immediate-check":!1},on:{load:t.onLoad},model:{value:t.data.loading,callback:function(e){t.$set(t.data,"loading",e)},expression:"data.loading"}},[a("coupon-list-component",{attrs:{parentData:t.data},on:{toggleRefreshDisable:t.toggleRefreshDisable,onRefresh:t.onRefresh}})],1),0!==t.data.list.length||t.data.isLoading||t.data.loading?t._e():a("no-coupon")],1),t.data.list.length?a("div",{class:{"bottom-footer":!(0===t.data.list.length&&!t.data.isLoading&&!t.data.loading),"bottom-footer-height":0===t.data.list.length&&!t.data.isLoading&&!t.data.loading}},[a("div",{staticClass:"to-coupon-btn",on:{click:t.toVoucher}},[t._v(" 去领券中心逛逛 ")])]):t._e(),a("top-feedBack",{attrs:{isShow:t.showToTopFlag},on:{hiddenFeedBack:t.hiddenFeedBack,toTop:t.fnScrollToTop}})],1)},o=[],s=(a("ab71"),a("58e6")),i=(a("e7e5"),a("d399")),c=(a("2994"),a("2bdd")),r=a("d7a6"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("img",{staticClass:"coupon",attrs:{src:t._f("imageToHttps")(t.$cdnImageUrl+"/personalCenter/noCoupon.png"),alt:""}}),a("div",{staticClass:"title"},[t._v("您目前没有相关的优惠券")])])},u=[],p={name:"noCoupon",props:{parentData:{type:null,default:function(){return{}}}},data:function(){return{}},onLoad:function(){},methods:{}},d=p,f=(a("ca9b"),a("2877")),h=Object(f["a"])(d,l,u,!1,null,"7912236e",null),m=h.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"coupon-list-component"},[t._l(t.parentData.list,(function(e){return a("div",{key:e.couponCode,staticClass:"voucher-item",class:{"voucher-available":"1"===t.parentData.status||"4"===t.parentData.status,"voucher-disable":"2"===t.parentData.status||"3"===t.parentData.status}},[a("div",{staticClass:"voucher-left"},[a("coupon-value-label",{attrs:{couponValue:e.couponValue,couponType:e.couponType,descText:e.description}}),a("span",{staticClass:"voucher-type-tag",class:{"voucher-type-shop":!e.applyType&&"SHOP"===e.couponUseType,"voucher-type-order":!e.applyType&&"ORDER"===e.couponUseType,"voucher-type-scene":e.applyType}}),"2"===t.parentData.status?a("span",{staticClass:"use-status-bg used"}):t._e(),"3"===t.parentData.status?a("span",{staticClass:"use-status-bg time-out"}):t._e()],1),a("div",{staticClass:"voucher-right"},[a("div",{staticClass:"info"},[a("div",{staticClass:"info-price"},["PRODUCT"===e.scope?a("span",{staticClass:"scope"},[t._v("单品")]):t._e(),"ORDER"===e.scope?a("span",{staticClass:"scope"},[t._v("订单")]):t._e(),a("span",{staticClass:"info-text"},[t._v(t._s(e.description))])]),a("div",{staticClass:"info-desc"},[a("span",{staticClass:"desc-text"},[t._v(t._s(e.couponTemplateName))])]),a("div",{staticClass:"info-time"},[a("span",{staticClass:"time-text"},[t._v(t._s(t.timeHandler(e.startTime))+"-"+t._s(t.timeHandler(e.endTime)))])])]),a("div",{staticClass:"option"},[a("div",{staticClass:"applicable",on:{click:function(a){return a.stopPropagation(),t.toCommodity(e)}}},[a("span",[t._v(t._s(e.applyType?"适用场景":"适用商品"))])]),e.transferable?a("div",{staticClass:"transfer",on:{click:function(a){return a.stopPropagation(),t.transfer(e)}}},[t._m(0,!0)]):t._e(),a("div",{staticClass:"instructions",on:{click:function(a){return a.stopPropagation(),t.openPopup(e)}}},[t._m(1,!0)])])])])})),a("van-popup",{on:{close:t.popupHide},model:{value:t.popup.show,callback:function(e){t.$set(t.popup,"show",e)},expression:"popup.show"}},[a("h1",{staticClass:"pop-title"},[t._v("使用说明")]),a("div",{staticClass:"pop-content"},t._l(t.popup.contentArr,(function(e,n){return a("p",{key:"pop-"+n,staticClass:"text-line"},[t._v(t._s(e))])})),0),a("button",{staticClass:"pop-ok",on:{click:t.closePopup}},[t._v("我知道了")])]),a("van-popup",{attrs:{id:"transBox"},on:{close:t.popupHide},model:{value:t.showTransfer,callback:function(e){t.showTransfer=e},expression:"showTransfer"}},[a("div",{staticClass:"transfer-container"},[a("div",{staticClass:"transfer-header"},[a("span",{staticClass:"transfer-title"},[t._v("转赠优惠券")])]),a("div",{staticClass:"transfer-content"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.transMobile,expression:"transMobile"}],attrs:{type:"text",placeholder:"请输入手机号"},domProps:{value:t.transMobile},on:{input:function(e){e.target.composing||(t.transMobile=e.target.value)}}})]),a("div",{staticClass:"transfer-option"},[a("div",{staticClass:"transfer-confirm-btn",on:{click:t.postTransfer}},[a("span",[t._v("确定")])])]),a("div",{staticClass:"transfer-close",on:{click:t.closeTransfer}})])])],2)},v=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t._v("转赠"),a("span",{staticClass:"transfer-icon"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"text"},[t._v("使用说明"),a("span",{staticClass:"instructions-icon"})])}],C=(a("8a58"),a("e41f")),b=a("2b0e"),y=(a("1850"),a("6beb")),_=a("e9ad"),T=a("25e9");function x(t,e){var a="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=S(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,c=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return i=t.done,t},e:function(t){c=!0,s=t},f:function(){try{i||null==a["return"]||a["return"]()}finally{if(c)throw s}}}}function S(t,e){if(t){if("string"===typeof t)return w(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?w(t,e):void 0}}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}b["a"].use({Toast:i["a"]});var k={name:"couponList",components:{"van-popup":C["a"],couponValueLabel:T["a"]},props:{parentData:{type:null,default:function(){return{}}}},data:function(){return{popup:{show:!1,contentArr:[]},activityStartDate:"",expandMap:{},allowExpandMap:{},showTransfer:!1,transMobile:"",memberCouponId:""}},filters:{removeHHMMSS:function(t){return t.toString().split(" ")[0]}},mounted:function(){},methods:{popupHide:function(){this.$emit("toggleRefreshDisable",!1)},idOfItem:function(t){return t.activityCode+"|"+t.couponTemplateCode},openPopup:function(t){this.getCouponDetail({activityCode:t.activityCode,couponTemplateCode:t.couponTemplateCode,sourceChannel:t.sourceChannel,couponCode:t.couponCode}),this.$set(this.popup,"show",!0),this.$emit("toggleRefreshDisable",!0)},closePopup:function(){this.$set(this.popup,"show",!1),this.$set(this.popup,"contentArr",[])},closeTransfer:function(){this.showTransfer=!1},postTransfer:function(){var t=this,e=this.memberCouponId,a=this.transMobile;_["a"].transfer({couponCode:e,mobile:a}).then((function(e){t.showTransfer=!1,e.data.success?(Object(i["a"])("转赠成功"),t.$emit("onRefresh")):i["a"].fail(e.data.message)}))["catch"]((function(t){i["a"].fail(t.message)}))},getCouponDetail:function(t){var e=this,a=t.activityCode,n=t.couponTemplateCode,o=t.sourceChannel,s=t.couponCode,i={activityCode:a,couponTemplateCode:n,sourceChannel:o,couponCode:s};y["a"].getCouponDetail(i).then((function(t){if(t.data.success){var a=t.data.data,n=a.useRule.replace(/\[|]/g,"").replace(/"/g,"");a.useRule=n.split(","),e.$set(e.popup,"contentArr",a.useRule)}}))["catch"]((function(){e.$set(e.popup,"contentArr",[])}))},expandSrc:function(t){return this.expandMap[this.idOfItem(t)]?this.bgSrc["expand"]:this.bgSrc["default"]},toCommodity:function(t){"2"!==this.parentData.status&&"3"!==this.parentData.status&&this.$router.push({path:"/usablecouponlist?couponCode=".concat(t.couponCode,"&activityCode=").concat(t.activityCode,"&couponTemplateCode=").concat(t.couponTemplateCode,"&couponType=").concat(t.couponType,"&sourceChannel=").concat(t.sourceChannel)})},transfer:function(t){"2"!==this.parentData.status&&"3"!==this.parentData.status&&(this.transMobile="",this.showTransfer=!0,this.memberCouponId=t.couponCode,this.$emit("toggleRefreshDisable",!0))},toCouponDetail:function(t){var e=this;"2"!==e.parentData.status?"3"===e.parentData.status&&i["a"].fail("优惠券已过期"):i["a"].fail("优惠券已使用")},isBigVal:function(t){return t.couponValue>1e3},iconSrc:function(t){return this.couponIcon[t.couponUseType]},expand:function(t){this.$set(this.expandMap,t,!this.expandMap[t])},timeHandler:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.split(" ")[0].replace(/-/g,".")},computeAllowExpand:function(){this.allowExpandMap={};var t=this.$refs["bottom-text"];if(t&&t.length){var e,a=x(t);try{for(a.s();!(e=a.n()).done;){var n=e.value;n.offsetHeight>=22&&this.$set(this.allowExpandMap,n.dataset.id,!0)}}catch(o){a.e(o)}finally{a.f()}}}},computed:{bgSrc:function(){var t={expand:"".concat(this.$cdnImageUrl,"/shop/coupon-bg-1.png"),default:"".concat(this.$cdnImageUrl,"/shop/coupon-bg-2.png")};return t},couponIcon:function(){var t={ORDER:"".concat(this.$cdnImageUrl,"/shop/icon-coupon-card.png"),SHOP:"".concat(this.$cdnImageUrl,"/shop/icon-coupon-shop.png")};return t}},watch:{"parentData.list":{handler:function(t){var e=this;this.expandMap={},this.$nextTick((function(){e.computeAllowExpand()}))},immediate:!0}}},D=k,$=(a("6802"),Object(f["a"])(D,g,v,!1,null,"4f5b30b3",null)),L=$.exports,I=a("d3c8"),E=a("23d3");b["a"].use({List:c["a"],Toast:i["a"],PullRefresh:s["a"]});var O={name:"couponIndex",mixins:[E["a"]],components:{refreshLoading:r["default"],noCoupon:m,couponListComponent:L},data:function(){return{data:{status:"1",pageIndex:0,pageSize:10,list:[],error:!1,loading:!1,finished:!1,isLoading:!1},refreshDisable:!1}},created:function(){},mounted:function(){var t=this;t.$util.isHaierApp()?t.$store.dispatch("handleUpAuth").then((function(e){console.log(e),e?t.onRefresh():i["a"].fail("用户信息异常")})):t.onRefresh()},methods:{toggleRefreshDisable:function(t){this.refreshDisable=t},onRefresh:function(){var t=this;t.data.pageIndex=1,t.data.isLoading=!0,t.getList()},onLoad:function(){var t=this;t.data.pageIndex=t.data.pageIndex+1,t.getList()},getList:function(){var t=this,e={pageSize:t.data.pageSize,pageIndex:t.data.pageIndex,status:t.data.status};I["a"].getMyCouponList(e).then((function(e){1===t.data.pageIndex&&(t.data.list=[]);var a=e.data,n=a.data||[];a.success?(t.data.list=t.data.list.concat(n),t.data.finished=!1,t.data.loading=!1,t.data.isLoading&&(t.data.isLoading=!1),(n.length<t.data.pageSize||0===n.length)&&(t.data.finished=!0)):i["a"].fail(a.message)}))},switchTabChange:function(t){var e=t.target.id,a=this;a.data.status=e,a.data.isLoading=!1,a.data.list=[],a.onRefresh()},toVoucher:function(){var t=this;this.$util.gioTrackWithVariable("MB15605").then((function(e){var a=t;a.$router.push({path:"/voucher"})}))}}},F=O,A=(a("9634"),Object(f["a"])(F,n,o,!1,null,"42a43520",null));e["default"]=A.exports},ef69:function(t,e,a){"use strict";a("8261")}}]);
//# sourceMappingURL=chunk-0dc7e1d6.8d27c164.js.map