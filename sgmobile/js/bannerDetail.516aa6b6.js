(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["bannerDetail"],{"347c":function(t,e,a){},"6aa9":function(t,e,a){t.exports=a.p+"img/im-yl.0668cce7.png"},"6beb":function(t,e,a){"use strict";var i=a("bbc2"),o=a("1c03"),n=function(t){return o["a"].get(i["a"].GET_CUSTOM_PAGE,{params:t})},s=function(t){return o["a"].get(i["a"].GET_ACTIVITY_PAGE,{params:t})},r=function(t){return o["a"].get(i["a"].GET_COUPON_DETAIL,{params:t})},c=function(t){return o["a"].get(i["a"].REMIND_COUPONS_LIST,{params:t})},l=function(t){return o["a"].get(i["a"].receiveCoupon,{params:t})},u=function(t){return o["a"].get(i["a"].isWdHost,{params:t})};e["a"]={getCustomPage:n,getActivityPage:s,getCouponDetail:r,setCouponRemind:c,getCoupon:l,isWdHost:u}},"6cc0":function(t,e,a){"use strict";a("8214")},"80cc":function(t,e,a){"use strict";a("347c")},8214:function(t,e,a){},"864b":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",{ref:"nvaHeader",staticClass:"header-container"},[t.isMiniProgram||t.isByteDanceMP?t._e():i("van-nav-bar",{attrs:{title:t.title,fixed:""}},[t.$route.query.browerFirstIn?t._e():i("div",{staticClass:"back-container",attrs:{slot:"left"},on:{click:t.goBack},slot:"left"},[i("img",{staticClass:"icon-back",attrs:{src:t.$globalIcon.blackBackIcon}})]),t.isFromRN||t.isUplus||t.isFromIhaier?i("div",{staticClass:"back-container",attrs:{slot:"right"},on:{click:t.toShare},slot:"right"},[i("img",{staticClass:"icon-share",attrs:{src:t.$globalIcon.blackShareIcon}})]):t._e()])],1),t.isSkeletonLoading?i("skeleton",{attrs:{nums:4,iheight:".4rem"}}):i("div",[i("div",{ref:"contentContainer",staticClass:"content-container",style:{paddingTop:t.isMiniProgram||t.isByteDanceMP?0:"0.92rem"}},t._l(t.modualList,(function(e,o){return i("div",{key:o+"-"+e.id,attrs:{id:e.id}},["SWITCH"===e.modualType?i("div",{ref:"anchor"+e.id,refInFor:!0,style:{backgroundColor:e.backgroundColor},attrs:{id:"anchor"+e.id}},[i("van-swipe",{attrs:{autoplay:3e3,"indicator-color":"black"}},t._l(e.imageList,(function(e,a){return i("van-swipe-item",{key:a},[i("van-image",{staticClass:"banner",attrs:{"lazy-load":"",fit:"cover",width:"100%",height:"auto",src:t._f("imageToWebp")(e.imageUrl.replace("http:","https:"),t.$webpSurpport)},on:{click:function(a){return t.bannerClick(e)}}})],1)})),1)],1):t._e(),"NAVIGATIONBAR"==e.modualType&&1==e.col&&e.navigationList&&"NAVIGATIONBAR"==e.itemType?i("div",{ref:"anchor"+e.id,refInFor:!0,staticStyle:{"{backgroundColor":"'white'}"},attrs:{id:"anchor"+e.id}},[i("van-tabs",{attrs:{color:"black"},on:{click:t.changeNavigationbar},model:{value:t.activeNavId,callback:function(e){t.activeNavId=e},expression:"activeNavId"}},t._l(e.navigationList,(function(t,e){return i("van-tab",{key:e,attrs:{title:t.modualTitle,name:t.modualId,"title-style":"tab-title"}})})),1)],1):t._e(),e.bannerImage&&"TABLE"==e.modualType&&"COUPON"==e.itemType&&e.couponList?i("div",{staticClass:"customxvv_header_image",style:{backgroundColor:e.backgroundColor},attrs:{id:e.id}},[i("img",{attrs:{"v-lazy":t._f("imageToWebp")(e.bannerImage.replace("http:","https:"),t.$webpSurpport)}})]):t._e(),"TABLE"==e.modualType&&"COUPON"==e.itemType&&e.couponList?i("div",{staticClass:"showyhj",style:{backgroundColor:e.backgroundColor},attrs:{id:e.id}},t._l(e.couponList,(function(e,o){return i("div",{key:o,staticClass:"coupon-block"},[i("img",{attrs:{src:a("d72b"),alt:"",width:"100%",height:"100%"}}),i("div",{staticClass:"text1"},[i("span",[t._v("¥")]),i("span",[t._v(t._s(t.couponMap[e.couponId].couponValue))])]),i("div",{staticClass:"text2"},[t._v(t._s(t.couponMap[e.couponId].couponName))]),i("div",{staticClass:"text3",on:{click:function(a){return t.getCoupon(e.activityCode,e.couponTemplateCode,e.sourceChannel)}}},[i("span",[t._v("立即领取")])]),t.couponMap[e.couponId].getNum>=t.couponMap[e.couponId].personLimitNum?i("img",{staticClass:"showyhjimg",attrs:{src:a("6aa9")}}):t._e(),t.couponMap[e.couponId].totalGetNum>=t.couponMap[e.couponId].totalLimitNum?i("img",{staticClass:"showyhjimg",attrs:{src:a("96a3")}}):t._e()])})),0):t._e(),"TABLE"===e.modualType&&e.tableImageList&&"IMAGE"===e.itemType?i("div",{ref:"anchor"+e.id,refInFor:!0,style:{backgroundColor:e.backgroundColor},attrs:{id:"anchor"+e.id}},[e.bannerImage?i("div",{staticClass:"custom-banner-image"},[i("img",{attrs:{"v-lazy":t._f("imageToWebp")(e.bannerImage.replace("http:","https:"),t.$webpSurpport)}})]):t._e(),i("van-grid",{attrs:{border:!1,"column-num":2}},t._l(e.tableImageList,(function(e,a){return i("van-grid-item",{key:a,on:{click:function(a){return t.bannerClick(e)}}},[i("van-image",{attrs:{"lazy-load":"",src:t._f("imageToWebp")(e.imageUrl.replace("http:","https:"),t.$webpSurpport)}})],1)})),1)],1):t._e(),"TABLE"!=e.modualType||2!=e.col||e.tabList||"SKU"!=e.itemType?t._e():i("div",{ref:"anchor"+e.id,refInFor:!0,style:{backgroundColor:e.backgroundColor},attrs:{id:"anchor"+e.id}},[e.bannerImage?i("div",{staticClass:"custom-banner-image"},[i("img",{attrs:{"v-lazy":t._f("imageToWebp")(e.bannerImage.replace("http:","https:"),t.$webpSurpport)}})]):t._e(),i("div",{staticClass:"img-container"},t._l(e.skuList,(function(e,a){return i("div",{key:a,staticStyle:{display:"inline-block",position:"relative"}},[void 0!==t.skuMap[e.sku]?i("div",{staticClass:"col-two",attrs:{id:e.sku},on:{click:function(a){return t.toProdDetail(t.skuMap[e.sku],e.sku)}}},[i("van-image",{staticClass:"prod-img",attrs:{"lazy-load":"",src:t._f("imageToWebp")(t.skuMap[e.sku].defaultImageUrl.replace("http:","https:"),t.$webpSurpport),fit:"contain",height:"3.6rem",width:"3.2rem"}}),i("div",{staticClass:"title"},[t._v(t._s(t.skuMap[e.sku].productFullName))]),i("div",{staticClass:"float-price"},[i("span",{staticClass:"int-price"},[t._v("￥"+t._s(t._f("splitInt")(t.skuMap[e.sku].finalPrice)))]),t._v(" "+t._s(t._f("splitFloat")(t.skuMap[e.sku].finalPrice))+" ")]),e.tagColor&&e.tagName?i("div",{staticClass:"saleTag",style:{"border-color":e.tagColor+" !important","background-color":e.tagColor+" !important"}},[t._v(t._s(e.tagName))]):t._e()],1):t._e()])})),0)]),"TABLE"!=e.modualType||3!=e.col||e.tabList||"SKU"!=e.itemType?t._e():i("div",{ref:"anchor"+e.id,refInFor:!0,style:{backgroundColor:e.backgroundColor},attrs:{id:"anchor"+e.id}},[e.bannerImage?i("div",{staticClass:"custom-banner-image"},[i("img",{attrs:{"v-lazy":t._f("imageToWebp")(e.bannerImage.replace("http:","https:"),t.$webpSurpport)}})]):t._e(),i("div",{staticClass:"col-three-container"},t._l(e.skuList,(function(e,a){return i("div",{key:a,staticClass:"col-three",on:{click:function(a){return t.toProdDetail(t.skuMap[e.sku],e.sku)}}},[i("van-image",{staticClass:"col-three-img",attrs:{"lazy-load":"",src:t._f("imageToWebp")(t.skuMap[e.sku].defaultImageUrl.replace("http:","https:"),t.$webpSurpport),fit:"contain",width:"93%",height:"2.1rem"}}),i("div",{staticClass:"title"},[t._v(t._s(t.skuMap[e.sku].productFullName))]),i("div",{staticClass:"float-price"},[i("span",{staticClass:"int-price"},[t._v("￥"+t._s(t._f("splitInt")(t.skuMap[e.sku].finalPrice)))]),t._v(" "+t._s(t._f("splitFloat")(t.skuMap[e.sku].finalPrice))+" ")]),e.tagColor&&e.tagName?i("div",{staticClass:"saleTag",style:{"border-color":e.tagColor+" !important","background-color":e.tagColor+" !important"}},[t._v(t._s(e.tagName))]):t._e()],1)})),0)])])})),0)]),t.showNavBar?i("div",t._l(t.modualList,(function(e,a){return i("div",{key:"nav"+a,style:{position:"absolute",top:t.headerHeight+"px",width:"100vw"}},["NAVIGATIONBAR"==e.modualType&&1==e.col&&e.navigationList&&"NAVIGATIONBAR"==e.itemType?i("div",{staticStyle:{"{backgroundColor":"'white'}"},attrs:{id:"anchor"+e.id}},[i("van-tabs",{attrs:{color:"black"},on:{click:t.changeNavigationbar},model:{value:t.activeNavId,callback:function(e){t.activeNavId=e},expression:"activeNavId"}},t._l(e.navigationList,(function(t,e){return i("van-tab",{key:e,attrs:{title:t.modualTitle,name:t.modualId,"title-style":"tab-title"}})})),1)],1):t._e()])})),0):t._e()],1)},o=[],n=a("fa7d"),s=a("6beb"),r=a("a73f"),c=a("2f62"),l=a("f121");function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function p(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){d(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function d(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var g="https://cdn09.ehaier.com/shunguang/H5/www/img/share_default.png",h={sharedesp:"",navBarHeight:0,navBarOffsetTop:0,shareimg:g,scrollTopMap:new Map},m={name:"bannerDetail",components:{Skeleton:r["a"]},data:function(){return{isSkeletonLoading:!0,title:"",modualList:[],skuMap:{},couponMap:{},showNavBar:!1,headerHeight:0,activeNavId:0,isMiniProgram:!1,isByteDanceMP:!1,isUplus:this.$util.isHaierApp(),isFromRN:this.$util.isSgRn(),isFromIhaier:this.$util.isIhaierApp()}},computed:p(p({},Object(c["d"])(["mId"])),Object(c["d"])({location:"getlocationInfo",accessToken:"accessToken"})),watch:{"$route.path":function(t,e){console.log("newVal:",t),console.log("oldVal:",e),console.log("route:",this.$route),t.includes("banner")&&!t.includes("bannerTheme")&&(console.log("重新获取数据"),this.getDetail())}},created:function(){var t=this;n["a"].isHaierApp()||(n["a"].loadScript("//res.wx.qq.com/open/js/jweixin-1.3.2.js").then((function(){wx.miniProgram.getEnv((function(e){console.log("是否为小程序环境：".concat(e.miniprogram)),e.miniprogram?t.isMiniProgram=!0:t.isMiniProgram=!1}))})),n["a"].loadScript("//s3.pstatp.com/toutiao/tmajssdk/jssdk-1.0.1.js").then((function(){var e=navigator.userAgent.toLowerCase().includes("toutiaomicroapp");t.isByteDanceMP=e})))},mounted:function(){var t=this;this.getDetail(),setTimeout((function(){t.headerHeight=document.querySelector(".van-nav-bar").clientHeight}),500)},activated:function(){var t=this,e=h.scrollTopMap.get(this.$route.params.id);this.$nextTick((function(){t.$refs.contentContainer&&t.$refs.contentContainer.scrollTo(0,e||0)}))},methods:{getCoupon:function(t,e,a){var i=this;if(this.$store.getters.getLoginStatus){var o=this.$store.getters["getlocationInfo"].townshipId;s["a"].getCoupon({activityCode:t,couponTemplateCode:e,sourceChannel:a,streetId:o}).then((function(t){i.$toast(t.data.message),t.data.success&&i.getDetail()}))}else this.$store.dispatch("doLogin")},handleScroll:function(){this.$refs.contentContainer.scrollTop>=h.navBarOffsetTop?this.showNavBar=!0:this.showNavBar=!1},getCurrentLoaction:function(){var t=this;console.log("开始定位"),this.$store.dispatch("doLocation").then((function(e){console.log("开始定位",e),400===e?console.log("定位异常"):(console.log(e,"bbb"),t.$store.dispatch("doLocationInfo",e).then((function(e){console.log(e,"result"),t.getDetail()})))}))},getDetail:function(){var t=this,e=this.$route.params.id;e&&s["a"].getCustomPage({customPageId:e,streetId:this.location.townshipId}).then((function(a){var i=a.data;if(console.log(a.data),i.success){t.title=i.data.name,h.sharedesp=i.data.description||"海尔智家商城",t.modualList=i.data.modualList,t.skuMap=i.data.skuMap,t.couponMap=i.data.couponMap,t.modualList.map((function(e){"SWITCH"===e.modualType&&h.shareimg===g&&(h.shareimg=e.imageList[0].imageUrl),"NAVIGATIONBAR"===e.modualType&&"NAVIGATIONBAR"===e.itemType&&(e.navigationList&&(t.activeNavId=e.navigationList[0].modualId),setTimeout((function(){h.navBarHeight=t.$refs["anchor".concat(e.id)][0].clientHeight,h.navBarOffsetTop=t.$refs["anchor".concat(e.id)][0].offsetTop-t.$refs.nvaHeader.clientHeight}),500),t.$nextTick((function(){t.$refs.contentContainer.addEventListener("scroll",t.handleScroll,!1)})))})),t.isSkeletonLoading=!1,console.log("滚动位置:",h.scrollTopMap);var o=h.scrollTopMap.get(e);console.log("滚动位置1:",o),void 0!==o&&setTimeout((function(){t.$refs.contentContainer.scrollTo(0,o||0)}),500)}t.$store.dispatch("WeChatSecondShare",{title:t.title,desc:h.sharedesp,thumImage:h.shareimg})}))},bannerClick:function(t){var e=t.hyperType,a=t.hyperParam,i=t.linkType,o=t.param;if(h.scrollTopMap.set(this.$route.params.id,this.$refs.contentContainer.scrollTop),e)this.$store.dispatch("goPageByType",{type:Number(e),params:a});else{var n="";o.indexOf("relationId=")>=0&&(n=o.split("relationId=")[1]),this.$store.dispatch("bannerClick",{hyperType:i,hyperLink:o,relationId:n,isMiniProgram:this.isMiniProgram,isByteDanceMP:this.isByteDanceMP,accessToken:this.accessToken})}},toProdDetail:function(t,e){var a=t.productId;this.isMiniProgram?wx.miniProgram.navigateTo({url:"/pages/product/detail/index?productId=".concat(a)}):this.isByteDanceMP?tt.miniProgram.navigateTo({url:"/pages/product/detail/index?productId=".concat(a)}):this.isFromRN?window.postMessage(JSON.stringify({type:"goProduct",data:{id:a}})):(h.scrollTopMap.set(this.$route.params.id,this.$refs.contentContainer.scrollTop),this.$router.push("/goodsDetail?productId=".concat(a)))},changeNavigationbar:function(t,e){var a=this;this.activeNavId=t,setTimeout((function(){a.$refs.contentContainer.scrollTo(0,a.$refs["anchor".concat(t)][0].offsetTop-h.navBarHeight-a.headerHeight)}),100)},goBack:function(){this.isFromRN&&h.scrollTopMap.size<=1?window.postMessage(JSON.stringify({type:"goBack"})):(h.scrollTopMap["delete"](this.$route.params.id),this.$store.dispatch("doHistoryBack"),this.modualList=[],this.couponMap=[],this.skuMap=[],this.title="")},toShare:function(){var t=this.title,e=h.sharedesp,a=h.shareimg,i=l["a"].HOST+"/sgmobile/bannerCustom?id="+this.$route.params.id+"&shareId="+this.mId;this.isFromRN?window.postMessage("custPageShare|"+t+"|"+e+"|"+a+"|"+i):(this.$util.isHaierApp()||this.$util.isIhaierApp())&&this.$util.inAppShare({title:t,desc:e,url:i,thumImage:a}).then((function(t){return console.log(t)}))}},filters:{splitInt:function(t){return t?t.toFixed(2).split(".")[0]:0},splitFloat:function(t){return t?".".concat(t.toFixed(2).split(".")[1]):".00"}}},f=m,v=(a("6cc0"),a("2877")),b=Object(v["a"])(f,i,o,!1,null,"1ca39413",null);e["default"]=b.exports},"96a3":function(t,e){t.exports="data:image/png;base64,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"},a73f:function(t,e,a){"use strict";var i=function(t,e){var a=e._c;return e.props.nums>0?a("div",{staticClass:"m-skeleton",style:{"z-index":e.props.zIndex||0}},[a("div",{style:{background:e.props.bgColor,height:e.props.fheight}}),e._l(e.props.nums-1,(function(t){return a("div",{key:t,style:{background:e.props.bgColor,height:e.props.iheight}})}))],2):e._e()},o=[],n=(a("80cc"),a("2877")),s={},r=Object(n["a"])(s,i,o,!0,null,null,null);e["a"]=r.exports},d72b:function(t,e,a){t.exports=a.p+"img/im-quan.4a53d1fe.png"}}]);
//# sourceMappingURL=bannerDetail.516aa6b6.js.map