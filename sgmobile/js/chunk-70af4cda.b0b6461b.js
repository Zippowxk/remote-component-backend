(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70af4cda"],{"8f2a":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"good-class-picture"},[i("ul",{staticClass:"spu-list"},t._l(t.pictureList,(function(e,s){return i("li",{key:e.imgSrc,staticClass:"spu-item",class:{selected:t.selectPictureList.includes(e.imgSrc)},on:{click:function(i){return t.selectPicture(e.imgSrc,s)}}},[i("div",{staticClass:"img-wrapper"},[i("img",{attrs:{src:e.imgSrc,alt:"",crossorigin:""}})]),i("div",{staticClass:"name"},[t._v(t._s(e.skuShortName))])])})),0),i("div",{staticClass:"picture-content",class:{unvisitable:0===t.pictureList.length}},[i("div",{staticClass:"picture-list"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.topPictureUrl,expression:"topPictureUrl"}],staticClass:"top-line"},[i("img",{attrs:{src:t.topPictureUrl,alt:"",crossorigin:""}})]),i("div",{staticClass:"other-picture-list"},t._l(t.otherPictureUrlList,(function(t){return i("img",{key:t,attrs:{src:t,alt:"",crossorigin:""}})})),0)]),i("div",{staticClass:"good-info"},[i("div",{staticClass:"title-line"},[i("div",{staticClass:"name"},[t._v(t._s(t.mainProductName))]),i("div",{staticClass:"price"},[i("span",{staticClass:"price-icon"},[t._v("￥")]),i("span",{staticClass:"price-int"},[t._v(t._s(t.priceInt))]),i("span",{staticClass:"price-float"},[t._v("."+t._s(t.priceFloat))])])]),i("div",{staticClass:"qr-wrapper"},[i("img",{staticClass:"qr",attrs:{src:t.canvasSrc,alt:""}}),t._m(0),i("img",{staticClass:"logo",attrs:{src:t.storeLogo,alt:""}})]),i("div",{staticClass:"share-name-line"},[t.isPartner?i("div",{staticClass:"share-name"},[t._v("由"+t._s(t.$store.state.userInfo.username)+"分享")]):t._e()])])])])},r=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"qr-desc"},[i("div",{staticClass:"line"},[i("b",[t._v("①")]),t._v(" 保存图片到相册")]),i("div",{staticClass:"line"},[i("b",[t._v("②")]),t._v(" 微信扫一扫浏览")])])}],a=i("f2e5"),c=i("85e4"),n=i("d354"),o=i("fa7d"),u={components:{},props:{},data:function(){return{actualPrice:0,pictureList:[],isPartner:!1,mainProductName:"",canvasSrc:"",selectPictureList:[],topPictureUrl:"",otherPictureUrlList:[],storeLogo:""}},created:function(){this.storeLogo="".concat(this.$cdnImageUrl,"/").concat(this.$util.isSyBird()?"new_sybird_logo":"zhijia",".png"),this.getIdentify();var t=this.$util.strJSONParse(localStorage.getItem("shareMessage"));t&&(this.createQRCode(t.mdCode||""),this.actualPrice=t.actualPrice,t.spuList.length&&(this.mainProductName=t.spuList[0].productFullName,this.getProductInfo(t)))},mounted:function(){},beforeDestroy:function(){},methods:{shareLinkFactory:function(t){var e="".concat(location.origin).concat(location.pathname),i=this.getCleanQuerys(),s=localStorage.getItem("mId");s&&(i.storeId=s,i.shareId=s),t&&(i.mdCode=t);var r=o["a"].parseParamsToQuery(i);return e+r},createQRCode:function(t){var e=this,i=this.shareLinkFactory(t);this.$nextTick((function(){var t=Object(a["a"])({data:decodeURIComponent(i),size:152});e.canvasSrc=t.toDataURL("image/png")}))},handleSelectPictureList:function(){this.topPictureUrl="",this.otherPictureUrlList=[],this.selectPictureList.length%2===1?(this.topPictureUrl=this.selectPictureList[0],this.selectPictureList.length>2&&(this.otherPictureUrlList=this.selectPictureList.slice(1))):this.otherPictureUrlList=this.selectPictureList},selectPicture:function(t,e){if(0!==e){var i=this.selectPictureList.indexOf(t);-1===i?this.selectPictureList.length<6?this.selectPictureList.push(t):this.$toast("商品规格分类最多选择6个"):this.selectPictureList.splice(i,1)}},getProductInfo:function(t){var e=this,i=t.spuList.map((function(t){return Object(c["Y"])({productId:t.productId,channel:"",openId:"",sceneCode:e.$route.query.fkcode||""})}));Promise.all(i).then((function(i){var s=[];for(var r in i){var a=i[r];a.success&&s.push({skuShortName:t.spuList[r].skuShortName,imgSrc:a.data.swiperImgs[0]})}e.pictureList=s,e.selectPictureList=[s[0].imgSrc]}))},getIdentify:function(){var t=this;Object(n["g"])().then((function(e){e.success&&e.data.data.identifyFlag&&[22,21,31].includes(e.data.data.identifyFlag)&&(t.isPartner=!0)}))}},computed:{priceInt:function(){return Math.floor(this.actualPrice)},priceFloat:function(){var t=String(this.actualPrice.toFixed(2)).split(".")[1];return t}},watch:{selectPictureList:{handler:function(){this.handleSelectPictureList()},immediate:!0}}},l=u,d=i("2877"),h=Object(d["a"])(l,s,r,!1,null,null,null);e["default"]=h.exports},d354:function(t,e,i){"use strict";i.d(e,"g",(function(){return a})),i.d(e,"d",(function(){return c})),i.d(e,"f",(function(){return n})),i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return u})),i.d(e,"c",(function(){return l})),i.d(e,"e",(function(){return d}));var s=i("1c03"),r=i("bbc2"),a=function(t,e){return s["a"].request({url:r["a"].myManage,method:"get",params:{_t:Date.now()},noLogin:e})},c=function(t){return s["a"].request({url:r["a"].getOrderCount,method:"get",params:{chId:60}})},n=function(t){return s["a"].request({url:r["a"].wallet,method:"get",params:{}})},o=function(t){return s["a"].request({url:r["a"].checkBindByType,method:"get",params:t})},u=function(t){return s["a"].request({url:r["a"].getComminsionSumInfo,method:"POST",data:t,headers:{"Content-Type":"application/json"}})},l=function(t){return s["a"].request({url:r["a"].getGoodsAmountList,method:"POST",data:t,headers:{"Content-Type":"application/json"}})},d=function(t){return s["a"].request({url:r["a"].getServiceCharge,method:"get",params:t})}}}]);
//# sourceMappingURL=chunk-70af4cda.b0b6461b.js.map