(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-988cb19a"],{"0363":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[t.data.resData?t.data.resData.length>0?a("address-list",{attrs:{parentData:t.data}}):a("div",{staticClass:"no-data"},[a("span",{staticClass:"no-data-thumb"}),a("span",{staticClass:"no-data-text"},[t._v("暂无收货地址")])]):a("skeleton",{attrs:{nums:3}}),a("div",{staticClass:"bottom-footer"},[a("div",{staticClass:"create-btn",on:{click:t.toAddressEdit}},[a("img",{staticClass:"plus",attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAAm0lEQVRIS+2WsQ1CMRBDnxsWgUEomYBdoOHTwC5MQMkewCI0RpEiRPcvQaS6k66KnZMsy7JoGNtL4FopG0nPKF1RYMHZ3gGnytlLOkf5rYcOwFQ/nyQd81BIAdsp3UepdF2/GWqsbIFFwHproGyZW9052gu4yPYdWM2hf3x/DD1UEvn/0rVIksnwrVYmQ38ypOtGlZNhdau7QL4BxvSGC/FEQ20AAAAASUVORK5CYII=",alt:""}}),a("span",[t._v("新建收货地址")])])])],1)},s=[],r=(a("ac1e"),a("543e")),i=(a("ab71"),a("58e6")),o=(a("2994"),a("2bdd")),c=(a("e7e5"),a("d399")),d=a("a73f"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("div",{staticClass:"list"},t._l(t.addressList,(function(e,n){return a("div",{key:n,staticClass:"line"},[a("div",{staticClass:"line-box",on:{click:function(a){return t.goToOrder(e.id)}}},[a("div",{staticClass:"title"},[a("div",[t._v(" "+t._s(e.co?e.co.length>3?e.co.slice(0,3)+"...":e.co:"")+" ")]),a("div",[t._v(" "+t._s(e.mo||"")+" ")]),e.id.toString()===t.parentData.current?a("div",{staticClass:"titleDefault"},[t._v(" 默认 ")]):t._e(),e.label?a("div",{staticClass:"titleAddress"},[t._v(" "+t._s(e.label)+" ")]):t._e()]),a("div",{staticClass:"detail"},[t._v(" "+t._s(e.rn||"")+t._s(e.ar||"")+" ")])]),a("div",{staticClass:"operation"},[a("div",{staticClass:"data-operation"},[a("div",{staticClass:"edit",on:{click:function(a){return t.toEditAddress(e.id)}}},[a("span",{staticClass:"icon-edit"})]),a("div",{staticClass:"delete",on:{click:function(a){return t.showDeleteDialog(e.id)}}},[a("span",{staticClass:"icon-delete"})])])])])})),0),t.loading?a("van-loading",{attrs:{id:"loadingClass",type:"spinner",color:"#1989fa"}}):t._e()],1)},u=[],f=a("a34a"),p=a.n(f),g=a("2f62"),h=a("d3c8"),v=a("85e4");function m(t,e,a,n,s,r,i){try{var o=t[r](i),c=o.value}catch(d){return void a(d)}o.done?e(c):Promise.resolve(c).then(n,s)}function b(t){return function(){var e=this,a=arguments;return new Promise((function(n,s){var r=t.apply(e,a);function i(t){m(r,n,s,i,o,"next",t)}function o(t){m(r,n,s,i,o,"throw",t)}i(void 0)}))}}function A(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function D(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?A(Object(a),!0).forEach((function(e){C(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function C(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var y={name:"addressList",props:{parentData:{type:Object,default:function(){return{}}}},data:function(){return{deleteId:"",loading:!1}},created:function(){console.log(this.parentData)},mounted:function(){},computed:{addressList:function(){var t=this.parentData.resData||[],e=this.parentData.current||"";if(t.length<1)return t;var a,n=[];return t.forEach((function(t,s){t.id===+e?a=t:n.push(t)})),a?[a].concat(n):[].concat(n)}},methods:D(D(D({},Object(g["e"])(["setLocationInfo","setLoaction"])),Object(g["c"])(["getLatLongByLocationInfo"])),{},{goToOrder:function(t){var e=this,a=this;if("1"===a.parentData.from||1===a.parentData.from){a.loading=!0;var n={address:t};h["a"].changeAddressId(n).then((function(t){var n=t.data;n.success?(a.loading=!1,a.$store.dispatch("doHistoryBack")):(a.loading=!1,e.$toast.fail(n.message))}))["catch"]((function(){e.loading=!1}))}else if("2"===a.parentData.from||2===a.parentData.from){a.loading=!0;var s={addressId:t,orderSn:a.parentData.orderSn};Object(v["s"])(s).then((function(t){var n=t.data;n?(a.loading=!1,a.$store.dispatch("doHistoryBack")):(a.loading=!1,e.$toast(t.message))}))["catch"]((function(){e.loading=!1}))}},setDefaultAddress:function(t){var e=this;return b(p.a.mark((function a(){var n,s,r,i,o,c;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e,s={m:n.parentData.current},a.next=4,h["a"].updateDefaultAddress(s);case 4:return r=a.sent,a.next=7,e.getLatLongByLocationInfo({townshipId:t.si,region:t.rn});case 7:i=a.sent,400!==i&&r.data.success?(o=t.rn.split(" "),c={region:t.rn,provinceId:t.pi,province:o[0],cityId:t.ci,city:o[1],districtId:t.ri,district:o[2],townshipId:t.si,township:o[3],latitude:i.latitude,longitude:i.longitude},localStorage.setItem("latitude",i.latitude),localStorage.setItem("longitude",i.longitude),localStorage.setItem("provinceId",t.pi),localStorage.setItem("cityId",t.ci),localStorage.setItem("districtId",t.ri),localStorage.setItem("townshipId",t.si),e.setLocationInfo(c),e.setLoaction({latitude:c.latitude,longitude:c.longitude})):e.$toast.fail("请求失败，请重试");case 9:case"end":return a.stop()}}),a)})))()},toEditAddress:function(t){var e=this;e.$router.push({path:"/addressEdit?id=".concat(t)})},onConfirm:function(){var t=this,e=this,a={m:e.deleteId};h["a"].deleteAddress(a).then((function(a){var n=a.data;n.success?(t.$toast.success("删除成功"),e.$parent.getAddress()):t.$toast.fail(n.message)}))},radioChange:function(t){console.log("item",t),console.log("parentData.current",this.parentData.current);for(var e=this,a=0;a<e.parentData.resData.length;a++)if(e.parentData.resData[a].id.toString()===t.id.toString()){e.parentData.current=t.id.toString(),e.setDefaultAddress(t);break}},showDeleteDialog:function(t){var e=this;e.deleteId=t,this.$dialog.confirm({title:"确定删除该地址？",message:""}).then((function(){e.onConfirm()}))["catch"]((function(){}))}})},O=y,I=(a("a458"),a("2877")),w=Object(I["a"])(O,l,u,!1,null,"f092b70c",null),k=w.exports,S=a("2b0e");S["a"].use({Toast:c["a"],List:o["a"],PullRefresh:i["a"],Loading:r["a"]});var _={name:"addressIndex",components:{addressList:k,skeleton:d["a"]},data:function(){return{data:{resData:null,current:0,loading:!1,from:"0"}}},activated:function(){var t=this;t.$util.isHaierApp()?t.$store.dispatch("handleUpAuth").then((function(e){console.log(e),e?t.getAddress():c["a"].fail("用户信息异常")})):t.getAddress()},created:function(){var t=this,e=t.$route.query;t.data.from=e.from?e.from:t.data.from,t.data.orderSn=e.orderSn},mounted:function(){},onPullDownRefresh:function(){var t=this;t.getAddress()},methods:{getAddress:function(){var t=this;t.data.loading=!0;var e={};h["a"].getAddressList(e).then((function(e){var a=e.data;if(a.success){t.data.resData=a.data||[],t.data.loading=!1;for(var n=0;n<a.data.length;n++)if("1"===a.data[n].de){t.data.current=a.data[n].id.toString(),t.$store.dispatch("personalCenter/defaultAddressUpdate",a.data[n]);break}}else c["a"].fail(a.message)}))},toAddressEdit:function(){var t=this;t.$router.push({path:"/addressEdit"})}}},L=_,j=(a("2783"),Object(I["a"])(L,n,s,!1,null,"fd7f1a96",null));e["default"]=j.exports},2783:function(t,e,a){"use strict";a("f606")},"347c":function(t,e,a){},"80cc":function(t,e,a){"use strict";a("347c")},9523:function(t,e,a){},a458:function(t,e,a){"use strict";a("9523")},a73f:function(t,e,a){"use strict";var n=function(t,e){var a=e._c;return e.props.nums>0?a("div",{staticClass:"m-skeleton",style:{"z-index":e.props.zIndex||0}},[a("div",{style:{background:e.props.bgColor,height:e.props.fheight}}),e._l(e.props.nums-1,(function(t){return a("div",{key:t,style:{background:e.props.bgColor,height:e.props.iheight}})}))],2):e._e()},s=[],r=(a("80cc"),a("2877")),i={},o=Object(r["a"])(i,n,s,!0,null,null,null);e["a"]=o.exports},f606:function(t,e,a){}}]);
//# sourceMappingURL=chunk-988cb19a.85d58c4a.js.map