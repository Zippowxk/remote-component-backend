(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72b17dd9"],{d354:function(t,e,a){"use strict";a.d(e,"g",(function(){return i})),a.d(e,"d",(function(){return r})),a.d(e,"f",(function(){return c})),a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return u})),a.d(e,"c",(function(){return d})),a.d(e,"e",(function(){return l}));var n=a("1c03"),s=a("bbc2"),i=function(t,e){return n["a"].request({url:s["a"].myManage,method:"get",params:{_t:Date.now()},noLogin:e})},r=function(t){return n["a"].request({url:s["a"].getOrderCount,method:"get",params:{chId:60}})},c=function(t){return n["a"].request({url:s["a"].wallet,method:"get",params:{}})},o=function(t){return n["a"].request({url:s["a"].checkBindByType,method:"get",params:t})},u=function(t){return n["a"].request({url:s["a"].getComminsionSumInfo,method:"POST",data:t,headers:{"Content-Type":"application/json"}})},d=function(t){return n["a"].request({url:s["a"].getGoodsAmountList,method:"POST",data:t,headers:{"Content-Type":"application/json"}})},l=function(t){return n["a"].request({url:s["a"].getServiceCharge,method:"get",params:t})}},fefe:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"good-main-picture",class:{unvisitable:!t.mainPicture}},[a("div",{staticClass:"good-pic"},[a("img",{ref:"mainPicture",attrs:{width:"100%",height:"100%",src:t.mainPictureBase64,alt:""}})]),a("div",{staticClass:"good-info"},[a("div",{staticClass:"title-line"},[a("div",{staticClass:"name"},[t._v(t._s(t.mainProductName))]),a("div",{staticClass:"price"},[a("span",{staticClass:"price-icon"},[t._v("￥")]),a("span",{staticClass:"price-int"},[t._v(t._s(t.priceInt))]),a("span",{staticClass:"price-float"},[t._v("."+t._s(t.priceFloat))]),a("span",{directives:[{name:"show",rawName:"v-show",value:t.hasSubProduct,expression:"hasSubProduct"}],staticClass:"has-sub"},[t._v("起")])])]),a("div",{staticClass:"qr-wrapper"},[a("img",{staticClass:"qr",attrs:{src:t.canvasSrc,alt:""}}),t._m(0),a("img",{staticClass:"logo",attrs:{src:t.storeLogo,alt:""}})]),a("div",{staticClass:"share-name-line"},[t.isPartner?a("div",{staticClass:"share-name"},[t._v("由"+t._s(t.$store.state.userInfo.username)+"分享")]):t._e()])])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"qr-desc"},[a("div",{staticClass:"line"},[a("b",[t._v("①")]),t._v(" 保存图片到相册")]),a("div",{staticClass:"line"},[a("b",[t._v("②")]),t._v(" 微信扫一扫浏览")])])}],i=a("f2e5"),r=a("fa7d"),c=a("85e4"),o=a("d354"),u={components:{},props:["randomkey"],data:function(){return{actualPrice:0,mainPicture:"",mainProductName:"",isPartner:!1,canvasSrc:"",hasSubProduct:!1,storeLogo:"",mainPictureBase64:""}},created:function(){this.storeLogo="".concat(this.$cdnImageUrl,"/").concat(this.$util.isSyBird()?"new_sybird_logo":"zhijia",".png"),this.getIdentify();var t=this.$util.strJSONParse(localStorage.getItem("shareMessage"));t&&(this.createQRCode(t.mdCode||""),this.actualPrice=t.actualPrice,t.spuList.length&&(this.mainProductName=t.spuList[0].productFullName,this.getProductInfo(t)))},mounted:function(){},beforeDestroy:function(){},methods:{shareLinkFactory:function(t){var e="".concat(location.origin).concat(location.pathname),a=this.getCleanQuerys(),n=localStorage.getItem("mId");n&&(a.storeId=n,a.shareId=n),t&&(a.mdCode=t);var s=r["a"].parseParamsToQuery(a);return e+s},createQRCode:function(t){var e=this,a=this.shareLinkFactory(t);this.$nextTick((function(){var t=Object(i["a"])({data:decodeURIComponent(a),size:152});e.canvasSrc=t.toDataURL("image/png")}))},getUrlBase64:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"png",a=arguments.length>2?arguments[2]:void 0,n=document.createElement("canvas"),s=n.getContext("2d"),i=new Image;i.crossOrigin="Anonymous",i.src=t,i.onload=function(){n.height=500,n.width=500,s.drawImage(i,0,0,500,500);var t=n.toDataURL("image/"+e,1);a.call(this,t),n=null}},getIdentify:function(){var t=this;Object(o["g"])().then((function(e){e.success&&e.data.data.identifyFlag&&[22,21,31].includes(e.data.data.identifyFlag)&&(t.isPartner=!0)}))},getProductInfo:function(t){var e=this;Object(c["Y"])({productId:t.spuList[0].productId,channel:"",openId:"",sceneCode:this.$route.query.fkcode||""}).then((function(t){t.success&&(e.hasSubProduct=Boolean(t.data.sgStoreAttribute[0].haschildItems),t.data.swiperImgs&&t.data.swiperImgs.length&&(e.mainPicture=t.data.swiperImgs[0].replace("http:","https:")+"?_t=".concat(Date.now()),e.getUrlBase64(e.mainPicture,"png",(function(t){e.mainPictureBase64=t}))))}))}},computed:{mainPictureRandom:function(){return this.mainPicture+"&t=".concat(this.randomkey)},priceInt:function(){return Math.floor(this.actualPrice)},priceFloat:function(){var t=String(this.actualPrice.toFixed(2)).split(".")[1];return t}},watch:{}},d=u,l=a("2877"),m=Object(l["a"])(d,n,s,!1,null,null,null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-72b17dd9.5a96e0c6.js.map