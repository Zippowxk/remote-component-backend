(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4241931c"],{"01eb":function(t,e,i){"use strict";i("0472")},"0472":function(t,e,i){},"050f":function(t,e,i){"use strict";i("e747")},"2c92":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"subscribe-store"},[i("van-pull-refresh",{on:{refresh:t.onRefresh},scopedSlots:t._u([{key:"pulling",fn:function(){return[i("refreshLoading",{attrs:{text:"下拉刷新"}})]},proxy:!0},{key:"loosing",fn:function(){return[i("refreshLoading",{attrs:{text:"下拉刷新"}})]},proxy:!0},{key:"loading",fn:function(){return[i("refreshLoading",{attrs:{text:"加载中"}})]},proxy:!0},{key:"success",fn:function(){return[i("refreshLoading",{attrs:{text:"加载完成"}})]},proxy:!0}]),model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[i("div",{staticClass:"store-content"},[i("van-list",{attrs:{finished:t.finished,finishedText:t.storeList.length>0?"没有更多啦~":"","van-clearfix":"","immediate-check":!1},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[i("store-list",{attrs:{storeList:t.storeList,isNoData:!t.isLoading&&!t.loading},on:{cancelStoreBack:t.cancelStore}})],1)],1)])],1)},n=[],o=(i("ab71"),i("58e6")),a=(i("2994"),i("2bdd")),r=(i("e7e5"),i("d399")),c=i("2b0e"),l=i("d3c8"),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("van-row",{staticClass:"store-block"},[t._l(t.storeList,(function(e,s){return i("van-col",{key:s,on:{click:function(i){return t.tostoreDetail(e.collectId)}}},[i("div",{staticClass:"store-wrapper"},[i("div",{staticClass:"default-block line"},[i("div",{staticClass:"head-portrait"},[e.pic?i("img",{attrs:{src:t._f("imageToHttps")(e.pic),alt:"商店封面图"}}):i("img",{attrs:{src:t.getDefaultImageUrl(e),alt:"商店封面图"}})]),i("div",{staticClass:"detail"},[i("div",{staticClass:"info"},[i("div",{staticClass:"title"},[t._v(t._s(e.name))]),i("div",{staticClass:"score"},[i("van-rate",{attrs:{"allow-half":"",size:10,readonly:"",icon:t.$cdnImageUrl+"/shop/star.png","void-icon":t.$cdnImageUrl+"/shop/star-void.png"},model:{value:e.score,callback:function(i){t.$set(e,"score",i)},expression:"item.score"}}),i("span",[t._v(t._s(t._f("formatCollectionNum")(e.collectionNum))+"人关注")])],1)]),i("div",{staticClass:"icon",on:{click:function(i){return i.stopPropagation(),t.cancelStore(e)}}},[i("vanImg",{attrs:{src:t.$cdnImageUrl+"/shop/subscribe.png"}})],1)])])])])})),i("div",{directives:[{name:"show",rawName:"v-show",value:0===t.storeList.length&&t.isNoData,expression:"storeList.length === 0 && isNoData"}],staticClass:"no-data"},[i("img",{attrs:{src:t._f("imageToHttps")(t.$cdnImageUrl+"/personalCenter/new_collect.png"),alt:""}}),i("div",[t._v(" 暂无收藏店铺 ")])])],2)},u=[],h=(i("4142"),i("39d1")),f=i("4aea");c["a"].use(h["a"]);var g={name:"collectionList",props:{storeList:{type:Array,default:function(){return[]}},isNoData:{type:null,default:function(){return{}}}},data:function(){return{}},filters:{formatCollectionNum:function(t){var e=Number(t),i=(e/1e4).toFixed(1)+"万";return e<=9999?e:i}},methods:{getDefaultImageUrl:function(t){return this.$util.isSyBird()||9!==Number(t.synStoreType)?"".concat(this.$cdnImageUrl,"/sybird_default_logo.png"):f},cancelStore:function(t){console.log(t);var e=this;e.$emit("cancelStoreBack",t)},tostoreDetail:function(t){var e=this;e.$router.push({path:"/shopDetail?storeId=".concat(t,"&routerkey=").concat(t).concat((new Date).getTime())})}}},p=g,v=(i("01eb"),i("2877")),m=Object(v["a"])(p,d,u,!1,null,"913f8118",null),b=m.exports,L=function(){return i.e("chunk-079cb250").then(i.bind(null,"d7a6"))};c["a"].use({Toast:r["a"],List:a["a"],PullRefresh:o["a"]});var y={components:{refreshLoading:L,storeList:b},data:function(){return{isLoading:!1,loading:!1,finished:!1,storeList:[],pageIndex:1,pageSize:10}},activated:function(){var t=this,e=this;e.pageIndex=0,e.$util.isHaierApp()?this.$store.state.isLogin?(e.isLoading=!0,e.storeList=[],e.onLoad()):this.$store.dispatch("handleUpAuth").then((function(i){i?(e.isLoading=!0,e.storeList=[],e.onLoad()):t.$store.dispatch("doLogin")})):(e.isLoading=!0,e.storeList=[],e.onLoad())},methods:{onLoad:function(){var t=this,e=this;e.pageIndex=e.pageIndex+1;var i={page:e.pageIndex,pageSize:e.pageSize,type:1};l["a"].storeCollectionList(i).then((function(i){var s=i.data;t.skeletonLoading=!1,s.success?(e.isLoading&&(e.storeList=[],e.isLoading=!1),e.storeList=e.storeList.concat(s.data),e.finished=!1,e.loading=!1,e.finished=!1,(0===s.data.length||e.storeList.length>=s.totalCount)&&(e.finished=!0),console.log(e.isLoading,e.finished)):r["a"].fail(s.message)}))},cancelStore:function(t){console.log("item",t);var e=this,i={collectId:t.collectId,type:1};l["a"].collectStore(i).then((function(t){var i=t.data;i.success?(Object(r["a"])({message:"您已取消关注",duration:1e3}),e.isLoading=!0,e.onRefresh()):Object(r["a"])({message:i.message||"网络不可用，请稍后重试或检查网络设置",duration:1e3})}))},onRefresh:function(){var t=this;t.pageIndex=0,t.onLoad()}}},x=y,S=(i("050f"),Object(v["a"])(x,s,n,!1,null,"de7cc3a0",null));e["default"]=S.exports},"39d1":function(t,e,i){"use strict";var s=i("d282"),n=i("ea8e"),o=i("1325"),a=i("3875"),r=i("78eb"),c=i("ad06"),l=Object(s["a"])("rate"),d=l[0],u=l[1];function h(t,e,i){return t>=e?"full":t+.5>=e&&i?"half":"void"}e["a"]=d({mixins:[a["a"],r["a"]],props:{size:[Number,String],color:String,gutter:[Number,String],readonly:Boolean,disabled:Boolean,allowHalf:Boolean,voidColor:String,iconPrefix:String,disabledColor:String,value:{type:Number,default:0},icon:{type:String,default:"star"},voidIcon:{type:String,default:"star-o"},count:{type:[Number,String],default:5},touchable:{type:Boolean,default:!0}},computed:{list:function(){for(var t=[],e=1;e<=this.count;e++)t.push(h(this.value,e,this.allowHalf));return t},sizeWithUnit:function(){return Object(n["a"])(this.size)},gutterWithUnit:function(){return Object(n["a"])(this.gutter)}},mounted:function(){this.bindTouchEvent(this.$el)},methods:{select:function(t){this.disabled||this.readonly||t===this.value||(this.$emit("input",t),this.$emit("change",t))},onTouchStart:function(t){var e=this;if(!this.readonly&&!this.disabled&&this.touchable){this.touchStart(t);var i=this.$refs.items.map((function(t){return t.getBoundingClientRect()})),s=[];i.forEach((function(t,i){e.allowHalf?s.push({score:i+.5,left:t.left},{score:i+1,left:t.left+t.width/2}):s.push({score:i+1,left:t.left})})),this.ranges=s}},onTouchMove:function(t){if(!this.readonly&&!this.disabled&&this.touchable&&(this.touchMove(t),"horizontal"===this.direction)){Object(o["c"])(t);var e=t.touches[0].clientX;this.select(this.getScoreByPosition(e))}},getScoreByPosition:function(t){for(var e=this.ranges.length-1;e>0;e--)if(t>this.ranges[e].left)return this.ranges[e].score;return this.allowHalf?.5:1},genStar:function(t,e){var i,s=this,n=this.$createElement,o=this.icon,a=this.color,r=this.count,l=this.voidIcon,d=this.disabled,h=this.voidColor,f=this.disabledColor,g=e+1,p="full"===t,v="void"===t;return this.gutterWithUnit&&g!==+r&&(i={paddingRight:this.gutterWithUnit}),n("div",{ref:"items",refInFor:!0,key:e,attrs:{role:"radio",tabindex:"0","aria-setsize":r,"aria-posinset":g,"aria-checked":String(!v)},style:i,class:u("item")},[n(c["a"],{attrs:{size:this.sizeWithUnit,name:p?o:l,color:d?f:p?a:h,classPrefix:this.iconPrefix,"data-score":g},class:u("icon",{disabled:d,full:p}),on:{click:function(){s.select(g)}}}),this.allowHalf&&n(c["a"],{attrs:{size:this.sizeWithUnit,name:v?l:o,color:d?f:v?h:a,classPrefix:this.iconPrefix,"data-score":g-.5},class:u("icon",["half",{disabled:d,full:!v}]),on:{click:function(){s.select(g-.5)}}})])}},render:function(){var t=this,e=arguments[0];return e("div",{class:u({readonly:this.readonly,disabled:this.disabled}),attrs:{tabindex:"0",role:"radiogroup"}},[this.list.map((function(e,i){return t.genStar(e,i)}))])}})},4142:function(t,e,i){"use strict";i("68ef"),i("9d70"),i("3743"),i("8199")},"4aea":function(t,e,i){t.exports=i.p+"img/logo.6ca4023e.png"},8199:function(t,e,i){},e747:function(t,e,i){}}]);
//# sourceMappingURL=chunk-4241931c.65f1a1ef.js.map