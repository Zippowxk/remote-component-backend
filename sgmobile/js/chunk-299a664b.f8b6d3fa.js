(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-299a664b"],{"1ebb":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dialog-mask",on:{click:t.doClose}},[a("div",{staticClass:"dialog"},[a("div",{staticClass:"dialog-title"},[a("h4",[t._v("安全验证")]),a("a",{staticClass:"dialog-close",class:{refreshing:t.isRefreshing},attrs:{href:"javascript:;"},on:{click:function(e){return e.stopPropagation(),t.doRefresh.apply(null,arguments)}}},[a("img",{attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/vertify/refresh.png",alt:""}})])]),a("div",{staticClass:"dialog-body"},[t._l(t.vertifyArr,(function(e,s){return a("div",{key:e,staticClass:"vertify-item",class:["vertify-pos"+s,{"vertify-success":t.curSelected==e}],on:{click:function(a){return a.stopPropagation(),t.doVertify(e)}}},[t.curSelected==e?a("div",[t.vertifySuccess?a("img",{attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/cart/icon-success.png",alt:""}}):a("img",{attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/cart/icon-fail.png",alt:""}})]):t._e(),a("img",{attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/vertify/"+t.mapJson[e]+".png",alt:""}})])})),a("img",{staticClass:"vertify-bg",attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/vertify/vertiify_bg.png",alt:""}})],2),a("div",{staticClass:"dialog-footer"},[a("p",[t._v("请点击上图中的：")]),a("div",[a("img",{attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/vertify/"+t.mapJson[t.vertifySelected]+".png",alt:""}})])])])])},i=[],r={name:"VertifyComp",data:function(){return{isRefreshing:!1,vertifyArr:[0,1,2,3].sort((function(){return Math.random()-.5})),curSelected:-1,vertifySelected:Math.ceil(3*Math.random()),vertifySuccess:!1,mapJson:{0:"dog",1:"lu",2:"house",3:"bird"}}},methods:{doVertify:function(t){this.curSelected=t,t===this.vertifySelected?(this.vertifySuccess=!0,this.$emit("vertifySuccess")):(this.vertifySuccess=!1,this.doRefresh())},doClose:function(){this.$emit("vertifyClose")},doRefresh:function(){var t=this;this.isRefreshing=!0,this.vertifySelected=Math.ceil(3*Math.random());var e=setTimeout((function(){t.vertifySuccess=!1,t.curSelected=-1,clearTimeout(e),t.vertifyArr=[0,1,2,3].sort((function(){return Math.random()-.5})),t.isRefreshing=!1}),500)}}},c=r,n=(a("f2bb"),a("2877")),o=Object(n["a"])(c,s,i,!1,null,"42962527",null);e["a"]=o.exports},3179:function(t,e,a){},"51f8":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ecard-item-warp"},[a("div",{staticClass:"ecard-item",class:{gray:1!=t.cardInfo.cardStatus,"ecard-normal":"normal"==t.size,"ecard-small":"small"==t.size},on:{click:t.doSelect}},[a("div",{staticClass:"ecard-header"},[a("div",{staticClass:"ecard-header-warp"},[a("div",{staticClass:"ecard-header-fl"},[a("img",{attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/mine/ecard/ecard_logo.png",alt:""}}),a("div",[a("h4",[t._v(t._s(t.cardInfo.baseName||"智家E卡"))]),a("p",[t._v("面值："+t._s(t.cardInfo.amount)+"元")])])]),a("div",{staticClass:"ecard-header-fr"},[t.isBind||t.limitProd||t.canSelect?a("h4",[t._v("卡号："+t._s(t.cardInfo.cardNo))]):a("h4",{on:{click:function(e){return e.stopPropagation(),t.getDetail(t.cardInfo)}}},[t._v("消费记录")]),a("p",[t._v(t._s(t._f("formatDateYMD")(t.cardInfo.expireDate))+" 到期")])])]),a("img",{staticClass:"ecard-header-bg",attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/mine/ecard/ecard_header.png",alt:""}})]),a("div",{staticClass:"ecard-body"},[t.canSelect&&1==t.cardInfo.cardStatus?a("div",{staticClass:"ecard-select",class:{active:t.cardInfo.isSelected}},[a("i")]):t._e(),a("div",{staticClass:"ecard-body-warp"},[a("p",[t._v("余额 "),a("span",[t._v("¥")]),a("strong",[t._v(t._s(t._f("formatPriceInt")(t.cardInfo.balance)))]),a("small",[t._v(t._s(t._f("formatPriceFloat")(t.cardInfo.balance)))])]),t.isBind||1!=t.cardInfo.cardStatus?t._e():a("a",{staticClass:"ecard-usebtn",attrs:{href:"javascript:;"},on:{click:function(e){return e.stopPropagation(),t.gotoUse.apply(null,arguments)}}},[t._v("适用商品")])]),a("img",{staticClass:"ecard-img-footer",attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/mine/ecard/ecard_footer.png",alt:""}}),2==t.cardInfo.cardStatus?a("img",{staticClass:"ecard-img-use",attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/mine/ecard/used.png",alt:""}}):t._e(),3==t.cardInfo.cardStatus?a("img",{staticClass:"ecard-img-use",attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/mine/ecard/ecard_guoqi.png",alt:""}}):t._e()])]),t.limitProd?a("div",{staticClass:"ecard-limit-list",on:{click:t.switchChange}},[a("p",[t._v("以下商品不符合该卡使用条件")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.switchShow,expression:"switchShow"}],staticClass:"limit-imgs"},[a("div",t._l(t.limitList,(function(t){return a("img",{key:t.productId,attrs:{src:t.defaultImageUrl,alt:""}})})),0)]),a("a",{staticClass:"open-btn",class:{active:t.switchShow},attrs:{href:"javascript:;"}})]):t._e()])},i=[],r=a("bbc2"),c={props:{cardInfo:{type:Object,default:function(){}},size:{type:String,default:function(){return"normal"}},canSelect:{type:Boolean,default:!1},isBind:{type:Boolean,default:!1},limitProd:{type:Boolean,default:!1},isTailOrder:{type:String,default:function(){return""}}},data:function(){return{limitList:[],switchShow:!1}},methods:{getDetail:function(t){this.$router.push("/ecarddetail/".concat(t.cardNo))},doSelect:function(){this.canSelect&&this.$emit("doSelect",this.cardInfo)},gotoUse:function(){this.$router.push("/ecardUseProd/".concat(this.cardInfo.baseInfoId,"?readonly=").concat(this.limitProd?1:0))},switchChange:function(){var t=this,e=this.isTailOrder?r["a"].getUnSupportProductsForTailOrder:r["a"].getUnSupportProductsForOrder;this.switchShow?this.switchShow=!this.switchShow:this.$http.post(e,{smartEcardId:this.cardInfo.smartEcardId,smartEcardBaseInfoId:this.cardInfo.baseInfoId}).then((function(e){console.log(e);var a=e.data;a.data&&a.data.productList&&(t.limitList=a.data.productList),t.switchShow=!t.switchShow}))}}},n=c,o=(a("ccbc"),a("2877")),d=Object(o["a"])(n,s,i,!1,null,"3306e74c",null);e["a"]=d.exports},"59a0":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bind-page"},[a("h4",[t._v("请输入礼品卡密码")]),a("div",{staticClass:"bind-input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.ecardCode,expression:"ecardCode"}],attrs:{type:"text",placeholder:"卡密码不区分大小写",maxlength:"19"},domProps:{value:t.ecardCode},on:{input:[function(e){e.target.composing||(t.ecardCode=e.target.value)},t.inputVal]}})]),a("a",{staticClass:"bind-btn",attrs:{href:"javascript:;"},on:{click:t.toBind}},[t._v("绑定")]),t.vertifyShow?a("VertifyComp",{on:{vertifySuccess:t.vertifySuccess,vertifyClose:t.vertifyClose}}):t._e(),t.bindShow?a("div",{staticClass:"dialog-mask"},[a("div",{staticClass:"dialog"},[a("h4",[t._v("绑定到您的智家账号？")]),a("p",[t._v("确认绑定后该卡不得转赠，只可在当前账号使用")]),a("Ecard",{attrs:{cardInfo:t.cardInfo,isBind:!0,size:"small"}}),a("div",{staticClass:"dialog-btn"},[a("a",{attrs:{href:"javascript:;"},on:{click:t.cancel}},[t._v("再想想")]),a("a",{attrs:{href:"javascript:;"},on:{click:t.sure}},[t._v("确定")])])],1)]):t._e()],1)},i=[],r=a("51f8"),c=a("1ebb"),n=a("bbc2"),o=a("f121"),d={name:"Ecardbind",components:{Ecard:r["a"],VertifyComp:c["a"]},data:function(){return{ecardCode:"",vertifyShow:!1,bindShow:!1,cardInfo:{}}},methods:{inputVal:function(){/\S{5}/.test(this.ecardCode)&&(this.ecardCode=this.ecardCode.replace(/\s/g,"").replace(/(.{4})/g,"$1 ").substr(0,19))},getBindCardInfo:function(){var t=this,e=n["a"].getSmartEcardDetails+"?password="+this.ecardCode.replace(/\s/g,"");this.$http.post(e,null,{baseURL:o["a"].OHOST}).then((function(e){var a=e.data,s=a;s.success?(t.bindShow=!0,t.cardInfo=s.data,t.cardInfo.cardStatus=1):t.$dialog.alert({message:s.errMessage,theme:"round-button",allowHtml:!0,confirmButtonColor:"#2878ff",confirmButtonText:"我知道了"}).then((function(){})),t.vertifyShow=!1}))},toBind:function(){this.ecardCode?(console.log(/^\w{16}$/.test(this.ecardCode),"reg"),/^\w{16}$/.test(this.ecardCode.replace(/\s/g,""))?(this.ecardCode=this.ecardCode.toUpperCase(),this.vertifyShow=!0):this.$toast("该卡密不存在，请重新输入")):this.$toast("请输入礼品卡密码")},vertifySuccess:function(){this.getBindCardInfo()},vertifyClose:function(){this.vertifyShow=!1},cancel:function(){this.bindShow=!1},sure:function(){var t=this,e=n["a"].getBindEcard+"?password="+this.ecardCode.replace(/\s/g,"");this.$http.post(e,null,{baseURL:o["a"].OHOST}).then((function(e){var a=e.data,s=a;console.log(s),s.success?(t.bindShow=!1,t.$dialog.alert({title:"绑卡成功",message:"您可以在确认订单时使用此卡， 以抵扣订单金额",theme:"round-button",allowHtml:!0,confirmButtonColor:"#2878ff",confirmButtonText:"确定"}).then((function(){t.$router.replace("/ecardlist")}))):(t.bindShow=!1,t.$dialog.alert({message:s.errMessage,theme:"round-button",allowHtml:!0,confirmButtonColor:"#2878ff",confirmButtonText:"我知道了"}).then((function(){})))}))}}},l=d,u=(a("b581"),a("2877")),f=Object(u["a"])(l,s,i,!1,null,"01665f12",null);e["default"]=f.exports},"65d3":function(t,e,a){},"9fc8":function(t,e,a){},b581:function(t,e,a){"use strict";a("9fc8")},ccbc:function(t,e,a){"use strict";a("3179")},f2bb:function(t,e,a){"use strict";a("65d3")}}]);
//# sourceMappingURL=chunk-299a664b.f8b6d3fa.js.map