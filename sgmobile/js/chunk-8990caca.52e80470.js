(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8990caca","chunk-2b4715e4"],{"4b7d":function(t,e,o){"use strict";o("7fdc")},"5c3d":function(t,e,o){},"7fdc":function(t,e,o){},c63d:function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.isShow?o("div",{staticClass:"go-top",class:t.classList},[o("div",{staticClass:"top",on:{click:t.toGotop}},[o("img",{attrs:{src:t.$cdnImageUrl+"/common/common-to-top-icon.png"}}),o("span",[t._v("顶部")])]),t.isHaierApp&&t.feedShow?o("div",{staticClass:"divider"}):t._e(),t.isHaierApp&&t.feedShow?o("div",{staticClass:"bottom",on:{click:function(e){return t.toFeedBack()}}},[o("img",{attrs:{src:t.$cdnImageUrl+"/common/common-edit-icon.png"}}),o("span",[t._v("反馈")])]):t._e()]):t._e()},i=[],a={props:{isShow:{type:Boolean,default:function(){return!1}},classList:{type:Object,default:function(){return{}}},feedShow:{type:Boolean,default:function(){return!0}},code:{type:Number,default:function(){return null}}},data:function(){return{isHaierApp:!1,timer:null}},created:function(){this.isHaierApp=this.$util.isUplus()},watch:{isShow:{handler:function(t){var e=this;console.log(t),console.log("this.timer:",this.timer),t?this.timer?(clearTimeout(this.timer),this.timer=null):this.timer=setTimeout((function(){e.hiddenFeedBack()}),4e3):(clearTimeout(this.timer),this.timer=null)}}},methods:{hiddenFeedBack:function(){console.log("hiddenFeedBack"),this.$emit("hiddenFeedBack")},toGotop:function(){this.$emit("toTop")},toFeedBack:function(){if(this.$store.getters.getLoginStatus){var t="https://uplus.haier.com/uplusapp/problemFeedBack/feedback.html";this.code&&(t="https://uplus.haier.com/uplusapp/problemFeedBack/feedback.html?code="+this.code),this.$util.openNewWindow(t,!0,!1,!1)}else this.$store.dispatch("doLogin").then((function(t){400===t&&console.log("请求异常")}))}}},r=a,n=(o("4b7d"),o("2877")),c=Object(n["a"])(r,s,i,!1,null,"7733b653",null);e["default"]=c.exports},d941:function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("div",{staticClass:"pic-top-bg",style:{height:t.scrollHeight+"rem",background:"url("+t.storeSign.storeBgImg+") 0% 0% / 100% 5.96rem no-repeat"}},[o("div",{staticClass:"top-bg-masking"}),o("div",{staticClass:"top-gradient"})]),o("div",{staticClass:"shop-nav-bar"},[o("div",{staticClass:"pic-top-bg",style:{background:"url("+t.storeSign.storeBgImg+") 0% 0% / 100% 5.96rem no-repeat",height:"1.1rem"}},[o("div",{staticClass:"top-bg-masking",staticStyle:{height:"1.1rem"}})]),t.$route.query.browerFirstIn?t._e():o("div",{staticClass:"top-back-btn",on:{click:t.goBack}}),o("div",{staticClass:"search-bar",on:{click:t.openSearch}},[o("div"),o("img",{attrs:{src:t.$cdnImageUrl+"/shop/icon_shop_search.png"}}),o("span",[t._v("搜索")])]),t.showShare?o("div",{staticClass:"share-btn",on:{click:t.openShareModal}}):t._e()]),t.isSkeletonLoading?o("skeleton",{attrs:{zIndex:3,nums:4,iheight:".4rem"}}):o("div",[o("div",{staticClass:"content",attrs:{id:"shop-container"}},[t.shopBasicInfo?o("shop-header",{attrs:{taskId:t.taskId,stageId:t.stageId,shopInfo:t.shopBasicInfo,storeSign:t.storeSign,hasSubStore:t.subStoreList.length>0},on:{toogleModal:t.toogleModal,updateShopInfo:t.getMemberStoreId}}):t._e(),t.isOutOfLoaction?o("address-no-data",{attrs:{location:t.location},on:{changeAddr:t.changeLocation}}):o("keep-alive",["tab-home"===t.bottomTabType?o("tab-recommend",{attrs:{storeId:t.shopStoreId,shareId:t.shareId,storeSign:t.storeSign,storeSceneData:t.storeSceneData},on:{scroll:t.scrollInfo}}):t._e(),"tab-product"===t.bottomTabType?o("tab-product",{attrs:{storeId:t.shopStoreId,shareId:t.shareId,isBottomBar:!0}}):t._e(),"tab-category"===t.bottomTabType?o("tab-category",{attrs:{storeId:t.shopStoreId,shareId:t.shareId,storeSign:t.storeSign}}):t._e()],1)],1)]),t.isSkeletonLoading||t.isOutOfLoaction?t._e():o("bottom-tab",{attrs:{storeId:t.shopStoreId,showSceneTab:"9"!==t.storeSign.synStoreType,storeSceneData:t.storeSceneData,storeCode:t.storeSign.storeCode,currentTab:t.bottomTabType},on:{changeTab:t.changeBottomTab}}),o("address-list-modal",{attrs:{storeId:t.shopStoreId,subStoreList:t.subDisplayStoreList,showAddress:t.showAddress},on:{"update:showAddress":function(e){t.showAddress=e},"update:show-address":function(e){t.showAddress=e}}}),o("van-popup",{style:{width:"6.22rem",height:"100vh"},attrs:{"overlay-class":"zindex9998",position:"right"},model:{value:t.addrShow,callback:function(e){t.addrShow=e},expression:"addrShow"}},[t.addrShow?o("addr-select",{attrs:{addrList:t.addrData},on:{onHide:t.onHideAddr,handleLocation:t.handleLocation,otherLocation:t.otherLocationOption}}):t._e()],1),o("van-popup",{style:{width:"6.22rem",height:"100vh"},attrs:{"overlay-class":"zindex9998",position:"right"},model:{value:t.locationshow,callback:function(e){t.locationshow=e},expression:"locationshow"}},[t.locationshow?o("change-geographic-location",{attrs:{storeId:t.shopStoreId,isShowBack:!0},on:{onHide:t.onHideLocation,closeAndBack:t.onHideLocation,handleLocation:t.handleLocation}}):t._e()],1),o("top-feedBack",{attrs:{isShow:t.showTotop,fromTitle:"店铺详情",classList:{"has-bottom-bar":!0}},on:{hiddenFeedBack:t.hiddenFeedBack,toTop:t.toGotop}}),o("custom-share",{attrs:{show:t.showShareModal,copyCustomLink:!0},on:{"update:show":function(e){t.showShareModal=e},copyLink:t.copyLink,customShare:t.doShare,pictureShare:t.openPictureShare}}),o("picture-share",{attrs:{show:t.showPictureShare},on:{"update:show":function(e){t.showPictureShare=e}}})],1)},i=[],a=o("b311"),r=o.n(a),n=o("2f62"),c=o("bbc2"),d=o("a73f"),h=o("c63d"),l=o("5457"),u=o("c9b2"),p=o("815f"),g=o("c3f5"),m=o("d3c8");function b(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,s)}return o}function f(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?b(Object(o),!0).forEach((function(e){S(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):b(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function S(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var I=function(){return o.e("chunk-771825f2").then(o.bind(null,"8ce6"))},y=function(){return o.e("chunk-76c71264").then(o.bind(null,"a69d"))},w=function(){return Promise.all([o.e("chunk-2d216257"),o.e("chunk-0ae0a366")]).then(o.bind(null,"8052"))},k=function(){return o.e("chunk-e9915004").then(o.bind(null,"71d1"))},v=function(){return Promise.all([o.e("chunk-3aea2a64"),o.e("chunk-3bda9849")]).then(o.bind(null,"8331"))},T=function(){return o.e("chunk-2fdc3395").then(o.bind(null,"5870"))},$=function(){return o.e("chunk-82b13368").then(o.bind(null,"d118"))},L=function(){return o.e("chunk-1601c6db").then(o.bind(null,"67a4"))},_="H5",B={H5:{val:5,urlKey:"detailUrl"},WeChat:{val:22,urlKey:"weChatDetailUrl"},Flutter:{val:16,urlKey:"flutterDetailUrl"}}[_],O={components:{skeleton:d["a"],shopHeader:l["a"],bottomTab:u["a"],tabRecommend:p["a"],tabCategory:k,tabProduct:v,addressListModal:I,addressNoData:T,changeGeographicLocation:L,addrSelect:$,customShare:y,pictureShare:w,topFeedBack:h["default"]},data:function(){return{scrollHeight:5.96,showShare:this.$util.isSgRn()||this.$util.isHaierApp()||this.$util.isIhaierApp(),isSkeletonLoading:!0,bottomTabType:"tab-home",shopStoreId:"",shareId:"",shopBasicInfo:{},storeSign:{showLogo:1,logoUrl:"".concat(this.$cdnImageUrl,"/uplus_logo.png"),storeType:1,shopStoreCategory:"",storeBgImg:"",storeCode:"",storeAddress:"",latitude:"",longitude:"",storeName:"",o2oStoreName:"",chosenTab:1},storeSceneData:{},showAddress:!1,showTotop:!1,addrShow:!1,locationshow:!1,addrData:[],isOutOfLoaction:!1,subStoreList:[],showShareModal:!1,showPictureShare:!1,taskId:"",stageId:"",freeze:Object.freeze({localData:{scrollTop:0,isFirst:!0}})}},computed:f(f(f({},Object(n["d"])(["mId"])),Object(n["d"])("mymanage",["getIdentify"])),{},{location:function(){return this.$store.getters["getlocationInfo"]},subDisplayStoreList:function(){var t=this;return this.storeSign.mdCode&&1===this.storeSign.shareUserIdentify&&0===this.getIdentify?this.subStoreList.filter((function(e){return e.mdCode===t.storeSign.mdCode})):this.subStoreList}}),activated:function(){var t=this;this.$util.gioTrackWithVariable("MB15615",{storeId:this.$route.query.storeId?this.$route.query.storeId+"":"null"}),this.$nextTick((function(){setTimeout((function(){document.getElementById("app-warp")&&document.getElementById("app-warp").scrollTo(0,t.freeze.localData.scrollTop||0)}),100)})),this.freeze.localData.isFirst?this.freeze.localData.isFirst=!1:this.getMemberStoreId()},created:function(){var t=this;this.$store.dispatch("mymanage/fetchManageInfo"),this.shareId=this.$route.query.shareId||"",this.taskId=this.$route.query.taskId||"",this.stageId=this.$route.query.stageId||"",this.getMemberStoreId(),this.$store.getters.getLoginStatus&&this.getAddress(),this.$util.isSgRn()&&setTimeout((function(){window.changeH5Location=function(e){console.log("掌柜定位信息",e),e.longitude&&t.$store.dispatch("doLocationInfo",{latitude:e.latitude,longitude:e.longitude,force:!0})}}),0),this.fetchRecordShareRelation()},destroyed:function(){document.getElementById("app-warp").removeEventListener("scroll",this.bindScroll)},beforeRouteLeave:function(t,e,o){document.getElementById("app-warp")&&(this.freeze.localData.scrollTop=document.getElementById("app-warp").scrollTop),localStorage.removeItem("baseStoreId"),localStorage.removeItem("mdCode"),o()},methods:{scrollInfo:function(t){t.isFixed?this.scrollHeight=1.66:this.scrollHeight=5.96,console.log("===>scroll",t)},getSceneList:function(){var t=this,e={current:1,size:4,storeId:this.storeSign.storeId};Object(g["getStoreSceneNew"])(e).then((function(e){if(t.loading=!1,e.success){var o="";e.data["senceList".concat(_,"Url")]&&(o=e.data["senceList".concat(_,"Url")],o.includes("?")?o+="&":o+="?",o+="userId=".concat(t.$store.state.ucId?t.$store.state.ucId:"","&userAccessToken=").concat(t.$store.getters.getUserCenterToken)),t.storeSceneData=f(f({},e.data),{},{storeSenceUrl:t.$util.injectISOAddressCodeToURL(o,t.$store.getters.getlocationInfo),jumpType:B.val,sceneUrlKey:B.urlKey}),console.log("场景数据",t.storeSceneData)}else t.$toast(e.message||"获取数据失败，请稍后重试")}))},fetchRecordShareRelation:function(){this.$store.state.shareId&&this.$http.get(c["a"].recordShareRelation,{params:{sharerMemberId:this.$store.state.shareId||"",storeProductId:"",storeId:this.$route.query.storeId||""}})},getMemberStoreId:function(){var t=this;Object(g["manage"])({storeId:this.$route.query.storeId,provinceId:this.location.provinceId,cityId:this.location.cityId,ionId:this.location.districtId,street:this.location.townshipId,shareStoreId:this.shareId}).then((function(e){e.success?(t.shopStoreId=e.data.storeId?e.data.storeId+"":"",t.shopBasicInfo=e.data,localStorage.setItem("baseStoreId",t.shopStoreId),t.getStoreSign(),t.checkPrivateDomain(),t.getSubStore()):t.$toast(e.message)}))},hiddenFeedBack:function(){this.showTotop=!1},getStoreSign:function(){var t=this,e={shareId:sessionStorage.getItem("shareUserId")||"",storeId:this.shopBasicInfo.storeId,mdCode:sessionStorage.getItem("shareMdCode")||""};this.location&&(e.longitude=this.location.longitude,e.latitude=this.location.latitude),Object(g["getStoreSign"])(e).then((function(e){t.isSkeletonLoading=!1,e.success?(t.storeSign=f(f({},t.storeSign),e.data),e.data.logoUrl||(9!==Number(e.data.synStoreType)||t.$util.isSyBird()?t.storeSign.logoUrl="".concat(t.$cdnImageUrl,"/sybird_default_logo.png"):t.storeSign.logoUrl="".concat(t.$cdnImageUrl,"/uplus_logo.png")),"9"!==e.data.synStoreType&&t.getSceneList(),localStorage.setItem("mdCode",e.data.mdCode),t.$nextTick((function(){document.getElementById("app-warp").addEventListener("scroll",t.bindScroll)}))):(console.log("获取店招模块失败"),t.$toast(e.message||"获取店招模块失败"))}))},checkPrivateDomain:function(){var t=this;Object(g["checkPrivateDomain"])({storeId:this.shopStoreId,street:this.location.townshipId}).then((function(e){e.success&&(t.isOutOfLoaction=!e.data)}))},goBack:function(){this.$store.dispatch("doHistoryBack")},changeBottomTab:function(t){switch(console.log("changeBottomTab",t),this.scrollHeight=5.96,t){case"tab-home":this.$util.gioTrackWithVariable("mall_store_click_bottomTab",{store_bottomTab_name:"店铺首页"});break;case"tab-product":this.$util.gioTrackWithVariable("mall_store_click_bottomTab",{store_bottomTab_name:"全部商品"});break;case"tab-category":this.$util.gioTrackWithVariable("mall_store_click_bottomTab",{store_bottomTab_name:"商品分类"});break}this.bottomTabType!==t&&(this.bottomTabType=t)},openSearch:function(){this.$util.gioTrackWithVariable("mall_store_click_search",{storeId:this.shopStoreId?this.shopStoreId+"":"null"}),this.$router.push("/goodsSearch?visitStore=".concat(this.shopStoreId,"&storeType=").concat(this.storeSign.storeType))},openShareModal:function(){this.$util.isSgRn()?this.doShare():(this.$util.gioTrackWithVariable("mall_store_click_share",{storeId:this.$route.query.storeId?this.$route.query.storeId+"":"null"}),this.showShareModal=!0)},shareLinkFactory:function(){var t="".concat(location.origin).concat(location.pathname),e=this.getCleanQuerys();this.mId&&(e.shareId=this.mId),this.storeSign.mdCode&&(e.mdCode=this.storeSign.mdCode);var o=this.$util.parseParamsToQuery(e);return t+o},copyLink:function(){var t=this,e=this.shareLinkFactory(),o=document.createElement("a"),s=new r.a(o,{text:function(t){return e}});s.on("success",(function(){t.$toast("复制链接成功")})),s.on("error",(function(){t.$toast("复制链接失败")})),o.click()},doShare:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.shareLinkFactory();this.$util.inAppShare(f({title:this.storeSign.o2oStoreName||this.shopBasicInfo.storeName,desc:this.$util.isSyBird()?"定制智慧家 就找三翼鸟":"海尔智家商城，海尔家电正品保障",url:e},t))},toogleModal:function(t){this.showAddress=t},bindScroll:function(t){var e=t.target.scrollTop;this.showTotop=e>200},scrollSmoothTo:function(t){console.log("#app-warp scroll"),window.requestAnimationFrame||(window.requestAnimationFrame=function(t){return setTimeout(t,17)});var e=document.querySelector("#app-warp"),o=e.scrollTop;console.log(o,"scrollTop");var s=function s(){var i=t-o;o+=i/10,Math.abs(i)<1?e.scrollTo(0,t):(e.scrollTo(0,o),requestAnimationFrame(s))};s()},toGotop:function(){this.scrollSmoothTo(0)},changeLocation:function(){this.addrShow=!0},onHideAddr:function(){this.addrShow=!1},handleLocation:function(){this.locationshow=!1,this.addrShow=!1,this.$util.isSgRn()&&window.postMessage(JSON.stringify({type:"setLocation",data:{location:this.location}})),this.isOutOfLoaction=!1,this.getMemberStoreId()},otherLocationOption:function(){this.locationshow=!0},onHideLocation:function(){this.locationshow=!1},getAddress:function(){var t=this,e={s:this.$route.query.storeId};m["a"].getAddressList(e).then((function(e){var o=e.data;o.success&&(console.log("addrData"),t.addrData=o.data||[],console.log(t.addrData))}))},getSubStore:function(){var t=this;Object(g["getSubStoreList"])({storeId:this.shopStoreId||this.$route.query.storeId,longitude:this.location.longitude,latitude:this.location.latitude}).then((function(e){e.success?t.subStoreList=e.data||[]:t.$toast(e.message||"获取店铺列表失败，请稍后重试")}))},openPictureShare:function(){this.showPictureShare=!0}}},C=O,D=(o("eb4e"),o("2877")),A=Object(D["a"])(C,s,i,!1,null,"bbc2b340",null);e["default"]=A.exports},eb4e:function(t,e,o){"use strict";o("5c3d")}}]);
//# sourceMappingURL=chunk-8990caca.52e80470.js.map