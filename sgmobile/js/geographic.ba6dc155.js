(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["geographic"],{"0d8d":function(t,i,a){"use strict";a.d(i,"a",(function(){return n})),a.d(i,"b",(function(){return c}));var o=a("1c03"),e=a("bbc2"),n=function(t){return o["a"].request({url:e["a"].GET_PROVINCE_LIST,method:"get",params:t})},c=function(t){return o["a"].request({url:e["a"].GET_PROVINCE_LIST_BY_STOREOWNERID,method:"get",params:t})}},"2b57":function(t,i,a){},"2edf":function(t,i,a){"use strict";a.r(i);var o=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"box"},[a("div",{staticClass:"address",on:{click:function(t){t.stopPropagation()}}},[a("div",{staticClass:"top",on:{touchmove:function(t){t.preventDefault()}}},[a("div",{staticClass:"title"},[a("img",{directives:[{name:"show",rawName:"v-show",value:t.isShowBack,expression:"isShowBack"}],attrs:{src:t.$cdnImageUrl+"/common/back-common.svg"},on:{click:t.closeAndBack}}),t._v(" 选择地址 ")]),a("div",{staticClass:"change"},[t.province?a("span",{on:{click:t.provinceClick}},[t._v(t._s(t.provinceData.text))]):t._e(),t.city?a("span",{on:{click:t.cityClick}},[t._v(t._s(t.cityData.text))]):t._e(),t.area?a("span",{on:{click:t.areaClick}},[t._v(t._s(t.areaData.text))]):t._e(),a("span",{staticClass:"placeChange"},[t._v("请选择")])])]),t.list.length>6?a("div",{staticClass:"bottom"},[t.showLoading?a("van-loading",{staticClass:"loadingClass",attrs:{vertical:""}},[t._v("加载中...")]):t._e(),t._l(t.list,(function(i,o){return a("div",{key:o,staticClass:"address-item",on:{click:function(a){return t.cityListClick(i)}}},[t._v(t._s(i.text))])}))],2):a("div",{staticClass:"bottom",on:{touchmove:function(t){t.preventDefault()}}},[t.showLoading?a("van-loading",{staticClass:"loadingClass",attrs:{vertical:""}},[t._v("加载中...")]):t._e(),t._l(t.list,(function(i,o){return a("div",{key:o,staticClass:"address-item",on:{click:function(a){return t.cityListClick(i)}}},[t._v(t._s(i.text))])}))],2)])])},e=[],n=a("2f62"),c=a("0d8d");function s(t,i){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),a.push.apply(a,o)}return a}function r(t){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?s(Object(a),!0).forEach((function(i){l(t,i,a[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(a,i))}))}return t}function l(t,i,a){return i in t?Object.defineProperty(t,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[i]=a,t}var d={props:["onlyread","isShowBack"],data:function(){return{showLoading:!1,location:null,show:!0,list:[],windowHeight:"",province:!1,provinceData:"",city:!1,cityData:"",area:!1,areaData:!1,clickNum:0,townData:"",firstValue:0,secondValue:0}},methods:r(r(r({},Object(n["e"])(["setLocationInfo","setLoaction"])),Object(n["c"])(["getLatLongByLocationInfo"])),{},{hideParent:function(t){},removeHidden:function(t){},chooseCurrent:function(){this.location?(this.onlyread||(localStorage.setItem("latitude",this.location.latitude),localStorage.setItem("longitude",this.location.longitude),localStorage.setItem("provinceId",this.location.provinceId),localStorage.setItem("cityId",this.location.cityId),localStorage.setItem("districtId",this.location.districtId),localStorage.setItem("townshipId",this.location.townshipId),this.setLocationInfo(this.location),this.setLoaction({latitude:this.location.latitude,longitude:this.location.longitude})),this.$emit("handleLocation",this.location)):(console.log("手动定位"),this.getLocation())},closeModal:function(){this.$emit("onHide")},closeAndBack:function(){this.initLocation(),this.$emit("closeAndBack")},provinceClick:function(){var t=this;this.showLoading=!0,this.list=[],Object(c["a"])({parentId:0,regionType:0}).then((function(i){t.province=!1,t.city=!1,t.area=!1,t.clickNum=0,t.showLoading=!1,200===i.status?t.list=i.data.data:t.$toast("请求失败，请重试")}))["catch"]((function(i){t.$toast("请求失败，请重试")}))},cityClick:function(){var t=this;this.showLoading=!0,this.list=[],Object(c["a"])({parentId:this.firstValue,regionType:1}).then((function(i){t.city=!1,t.area=!1,t.clickNum=1,t.showLoading=!1,200===i.status?t.list=i.data.data:t.$toast("请求失败，请重试")}))["catch"]((function(i){t.$toast("请求失败，请重试")}))},areaClick:function(){var t=this;this.showLoading=!0,this.list=[],Object(c["a"])({parentId:this.secondValue,regionType:2}).then((function(i){t.clickNum=2,t.area=!1,t.showLoading=!1,200===i.status?t.list=i.data.data:t.$toast("请求失败，请重试")}))["catch"]((function(i){t.$toast("请求失败，请重试")}))},cityListClick:function(t){var i=this;if(this.showLoading=!0,0===this.clickNum){this.provinceData=t,this.list=[];var a={parentId:t.value,regionType:1};this.firstValue=t.value,Object(c["a"])(a).then((function(t){i.showLoading=!1,200===t.status?i.list=t.data.data:i.$toast("请求失败，请重试")}))["catch"]((function(t){i.$toast("请求失败，请重试")})),this.province=!0,this.clickNum++}else 1===this.clickNum?(this.list=[],this.cityData=t,Object(c["a"])({parentId:t.value,regionType:2}).then((function(t){i.showLoading=!1,200===t.status?i.list=t.data.data:i.$toast("请求失败，请重试")}))["catch"]((function(t){i.$toast("请求失败，请重试")})),this.secondValue=t.value,this.city=!0,this.clickNum++):2===this.clickNum?(this.list=[],this.area=!0,this.areaData=t,Object(c["a"])({parentId:t.value,regionType:3}).then((function(t){i.showLoading=!1,200===t.status?i.list=t.data.data:i.$toast("请求失败，请重试"),0===t.data.data.length&&(i.clickNum=0,i.resetLocation())}))["catch"]((function(t){i.$toast("请求失败，请重试")})),this.clickNum++):3===this.clickNum&&(this.list=[],this.townData=t,this.clickNum=0,this.resetLocation())},resetLocation:function(){var t=this,i={region:"".concat(this.provinceData.text," ").concat(this.cityData.text," ").concat(this.areaData.text," ").concat(this.townData.text),provinceId:this.provinceData.value,province:this.provinceData.text,cityId:this.cityData.value,city:this.cityData.text,districtId:this.areaData.value,district:this.areaData.text,townshipId:this.townData.value,township:this.townData.text};this.getLatLongByLocationInfo(i).then((function(a){400===a?t.$toast("根据位置信息获取经纬度失败"):(i.latitude=a.latitude,i.longitude=a.longitude,i.aId="",t.onlyread||(localStorage.setItem("latitude",a.latitude),localStorage.setItem("longitude",a.longitude),localStorage.setItem("provinceId",i.provinceId),localStorage.setItem("cityId",i.cityId),localStorage.setItem("districtId",i.districtId),localStorage.setItem("townshipId",i.townshipId),t.setLocationInfo(i),t.setLoaction(a)),t.$emit("handleLocation",i))}))},getLocation:function(){var t=this;this.$store.dispatch("doLocation",!0).then((function(i){400===i?t.$toast("定位失败，请自行选择位置信息"):t.$store.dispatch("doLocationInfo",{latitude:i.latitude,longitude:i.longitude,noStore:!0,force:!0}).then((function(i){t.location=i,t.location.aId=""}))}))},initLocation:function(){var t=this,i={parentId:0,regionType:0};Object(c["a"])(i).then((function(i){t.showLoading=!1,200===i.status?t.list=i.data.data:t.$toast("请求失败，请重试")}))["catch"]((function(i){t.$toast("请求失败，请重试")}))}}),mounted:function(){this.hideParent(),this.initLocation()},beforeDestroy:function(){this.removeHidden()}},u=d,h=(a("7b0f"),a("2877")),f=Object(h["a"])(u,o,e,!1,null,"9416803a",null);i["default"]=f.exports},"7b0f":function(t,i,a){"use strict";a("2b57")}}]);
//# sourceMappingURL=geographic.ba6dc155.js.map