(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["specialtyStore"],{"0fd4":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"toTop",staticClass:"specialty-store-page",attrs:{id:"target"},on:{scroll:t.handleScroll}},[t.skeletonLoading?s("skeleton",{attrs:{nums:3,fheight:"4rem"}}):s("div",[t.searchComponentLoad?s("lazy-search",{directives:[{name:"show",rawName:"v-show",value:t.searchComponentShow,expression:"searchComponentShow"}],attrs:{hiddenId:"pop-up-hidden",defaultRoute:"",show:t.searchComponentShow},on:{"go-back":function(e){t.searchComponentShow=!1},search:t.searchEvent}}):t._e(),s("div",{attrs:{id:"topAnchor"}}),t.$route.meta.hideHeader?t._e():s("Header",{staticClass:"specialty-store-header",attrs:{leftArrow:!t.$route.query.browerFirstIn,leftClick:t.goBack}},[s("span",{attrs:{slot:"right"},on:{click:t.share},slot:"right"},[s("img",{directives:[{name:"show",rawName:"v-show",value:t.showShareFlag,expression:"showShareFlag"}],staticClass:"header-img",attrs:{src:t.$globalIcon.blackShareIcon}})])]),s("div",{staticClass:"search-area"},[s("div",{staticClass:"search",on:{click:t.fnOpenSearch}},[s("img",{attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYBAMAAAASWSDLAAAALVBMVEVHcEyXl5eZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmWlpaZmZmYmJiUlJSZmZkXrFhnAAAADnRSTlMABYpx6jnTolQqHrqwE/x1RjcAAACtSURBVBjTY2BAB1yhE+HsS3nvnlRC2RJ+7sZq7xQhHD1nAUaGsNcCIDbHswVAkrGuAMS54gWWl34BVmUAMfEZiEwRgGitmwAUeQ41tA+ogvUxlBOngMSZB+RwPkJSxugG5egFgEwJALMZXUCmzksEc5jAepmegy3qA4sx7tsFJIXebQQrEH9XEdnkl/0G4pK2d+/eOQueOwgxdbKSqQCDDFQKYva5AKRgEUUNJQAAKSuahllXMwAAAABJRU5ErkJggg=="}}),s("span",{staticClass:"text"},[t._v(t._s(t.searchWord))])])]),s("div",{staticClass:"main",attrs:{id:"pop-up-hidden"}},[t.bannerList&&t.bannerList.length>0?[s("van-swipe",{ref:"vanSwiper",staticClass:"banner",attrs:{autoplay:1e5,"indicator-color":"white"}},t._l(t.bannerList,(function(e,n){return s("van-swipe-item",{key:n,staticClass:"banner-items"},[s("van-image",{attrs:{height:"2.8rem",width:"100%",src:t._f("imageToWebp")(t._f("imageThumb")(t._f("imageToHttps")(e.pic),"500"),t.$webpSurpport)},on:{click:function(s){return t.bannerClick(e)}}})],1)})),1)]:t._e(),s("div",{staticClass:"province-store",class:t.regionList.length>4?"orbit-wrapper":"box-wrapper"},t._l(t.regionList,(function(e,n){return s("div",{key:e.titlg,staticClass:"p-items",on:{click:function(s){return t.goSpecialDetils(e)}}},[s("div",{staticClass:"p-img",style:{background:t.bgColor[n%4]}},[t._v(t._s(e.simpleName))]),s("span",{staticClass:"p-title"},[t._v(t._s(e.regionName))])])})),0),t.showFlash.products&&t.showFlash.products.length?s("flash-Sale",{attrs:{activeStatus:t.activeStatus,flash:t.showFlash}}):t._e(),t.reverse&&t.reverse.acReserveList&&t.reverse.acReserveList.length?s("lazy-component",[s("div",{staticClass:"fa-title"},[s("p",{staticClass:"fa-text"},[t._v("新品预约")]),s("div",{staticClass:"more",on:{click:t.goAppointment}},[s("span",{staticClass:"more-text"},[t._v("更多")]),s("van-icon",{attrs:{name:"arrow",color:"#bbb"}})],1)]),s("new-order",{attrs:{reverse:t.reverseTwo}})],1):t._e(),t.drinkList.bannerList&&t.drinkList.topBanner?s("lazy-component",[s("special-drink",{attrs:{drinkList:t.drinkList}})],1):t._e(),t.foodList.productList||t.foodList.topBanner?s("lazy-component",[s("special-snacks",{attrs:{foodList:t.foodList}})],1):t._e(),s("lazy-component",[s("div",{ref:"bl"},[s("bottom-list",{attrs:{typeList:t.typeList,tabFixed:t.tabFixed}})],1)])],2),s("top-feedBack",{attrs:{isShow:t.showToTopFlag},on:{hiddenFeedBack:t.hiddenFeedBack,toTop:t.fnScrollToTop}})],1)],1)},o=[],i=s("a34a"),r=s.n(i),a=s("a73f"),c=s("e725"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flash-sale-parts"},[s("div",{staticClass:"fa-title"},[s("p",{staticClass:"fa-text"},[t._v("限时抢购")]),s("div",{staticClass:"more",on:{click:t.goMore}},[s("span",{staticClass:"more-text"},[t._v("更多")]),s("van-icon",{attrs:{name:"arrow",color:"#bbb"}})],1)]),s("van-count-down",{staticClass:"count-down",attrs:{time:t.downTime},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"count-down-name"},[t._v(t._s(t.flash.timeStr)+"场")]),s("span",{staticClass:"text"},[t._v(t._s(t.activeStatus?"距结束":"距开始"))]),s("span",{staticClass:"block"},[t._v(t._s(e.hours))]),s("span",{staticClass:"colon"},[t._v(":")]),s("span",{staticClass:"block"},[t._v(t._s(e.minutes))]),s("span",{staticClass:"colon"},[t._v(":")]),s("span",{staticClass:"block"},[t._v(t._s(e.seconds))])]}}])}),s("div",{staticClass:"fa-goods-list"},t._l(t.flash.products||[],(function(e){return s("div",{key:e.productId,staticClass:"list-items",on:{click:function(s){return t.goDetail(e)}}},[s("van-image",{attrs:{height:"2rem",width:"2rem",fit:"cover","lazy-load":"",src:t._f("imageToWebp")(t._f("imageThumb")(t._f("imageToHttps")(e.imageUrl),"200"),t.$webpSurpport)}}),s("div",{staticClass:"goods-name"},[t._v(t._s(e.productName))]),s("div",{staticClass:"prod-price"},[s("span",{staticClass:"symbol"},[t._v("￥")]),t._v(t._s(t._f("formatPrice")(e.flashsalePrice))+" ")])],1)})),0)],1)},u=[],h={props:{flash:{type:Object,default:function(){return{}}},activeStatus:{type:Number,default:1}},data:function(){return{}},computed:{downTime:function(){return this.activeStatus?this.flash.endTime-this.flash.systemTime:this.flash.startTime-this.flash.systemTime}},methods:{goMore:function(){this.$router.push({path:"/flashMore",query:{}})},goDetail:function(t){this.$router.push("/goodsDetail?productId=".concat(t.productId))}}},d=h,p=(s("5b3b"),s("2877")),f=Object(p["a"])(d,l,u,!1,null,null,null),m=f.exports,g=s("73bcd"),v=s("2f62"),b=s("1669"),w=s("1771");function y(t,e,s,n,o,i,r){try{var a=t[i](r),c=a.value}catch(l){return void s(l)}a.done?e(c):Promise.resolve(c).then(n,o)}function k(t){return function(){var e=this,s=arguments;return new Promise((function(n,o){var i=t.apply(e,s);function r(t){y(i,n,o,r,a,"next",t)}function a(t){y(i,n,o,r,a,"throw",t)}r(void 0)}))}}function S(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function T(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?S(Object(s),!0).forEach((function(e){A(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):S(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function A(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var C=function(){return s.e("searchComponent").then(s.bind(null,"1427"))},L=function(){return s.e("zhixuan").then(s.bind(null,"ea6b"))},_=function(){return s.e("zhixuan").then(s.bind(null,"7896"))},F=function(){return s.e("zhixuan").then(s.bind(null,"830f"))},O=function(){return s.e("zhixuan").then(s.bind(null,"f460"))},I={mixins:[b["a"]],components:{skeleton:a["a"],Header:c["a"],flashSale:m,newOrder:L,specialDrink:_,specialSnacks:F,bottomList:O,lazySearch:C},activated:function(){var t=this.$route.meta.scrollTop;if(t&&0!==t){var e=document.querySelector("#target");e&&this.$nextTick((function(){e.scrollTop=t}))}},data:function(){return{searchComponentLoad:!1,searchComponentShow:!1,skeletonLoading:!0,showShareFlag:!1,searchWord:"搜索更多特产",showArrow:!1,baseInfo:{},bannerList:[],foodList:{},regionList:[],drinkList:{},flash:{},showFlash:{},reverse:{},bgColor:["linear-gradient(-45deg, #FF9700, #FFD161 )","linear-gradient(-45deg, #FF7998, #ED2856 )","linear-gradient(-45deg, #00E5AD, #03B77B )","linear-gradient(-45deg, #42C8FF, #1496FF )"],typeList:[],activeStatus:1,tabFixed:!1,scrollTarget:"#target"}},computed:T(T({location:function(){return this.$store.getters["getlocationInfo"]}},Object(v["f"])("cart",["cartNumber"])),{},{userId:function(){return this.$store.getters["mId"]},reverseTwo:function(){return Array.isArray(this.reverse.acReserveList)?this.reverse.acReserveList.length>2?this.reverse.acReserveList.slice(0,2):this.reverse.acReserveList:[]}}),watch:{flash:function(){var t=this,e=[],s=[];Array.isArray(this.flash.list)?(this.flash.list.map((function(t){t.startTime<t.systemTime?e.push(t):s.push(t)})),e.length?(this.activeStatus=1,this.showFlash=e.reduce((function(t,e){return t.startTime<e.startTime?t:e}))):s.length?(this.activeStatus=0,this.feature.sort((function(t,e){return t.startTime>e.startTime?1:-1})),this.feature.map((function(e){t.showFlash=e.products[0].preheatingTime<=e.systemTime?e:{}}))):this.showFlash={}):this.showFlash={}}},created:function(){this.initData()},beforeRouteLeave:function(t,e,s){if(this.tabFixed=!1,e.meta.keepAlive){var n=document.querySelector("#target"),o=n?n.scrollTop:0;console.log("scrollTop",o),e.meta.scrollTop=o}s()},mounted:function(){document.documentElement.scrollTop=0,w["a"].swipeResize(this,"vanSwiper")},methods:T(T({},Object(v["c"])("cart",["getCartNumber"])),{},{initData:function(){var t=this;return k(r.a.mark((function e(){var s;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.getSpecialGoodsMain(),t.getActiveInfo(),t.getGoodsType(),!t.$util.isHaierApp()&&!t.$util.isSgRn()){e.next=11;break}return t.showShareFlag=!0,e.next=7,t.$store.dispatch("handleUpAuth");case 7:s=e.sent,s&&t.getCartNumber(),e.next=12;break;case 11:t.$store.getters.getLoginStatus&&t.getCartNumber();case 12:case"end":return e.stop()}}),e)})))()},getSpecialGoodsMain:function(){var t=this;return new Promise((function(e,s){Object(g["d"])({streetId:t.location.townshipId}).then((function(e){t.skeletonLoading=!1,e.success?(t.bannerList=e.data.topBannerList.bannerList||[],t.foodList=e.data.foodList||{},t.regionList=e.data.regionList.regionList||[],t.drinkList=e.data.drinkList):t.$toast(e.message)}))["catch"]((function(t){console.log(t)}))}))},getActiveInfo:function(){var t=this;console.log(this.location),Object(g["a"])({cityId:this.location.cityId,districtId:this.location.districtId,from:2,provinceId:this.location.provinceId,streetId:this.location.townshipId}).then((function(e){e.success?(t.flash=e.data.flash,t.reverse=e.data.reverse):t.$toast(e.message)}))["catch"]((function(t){console.log(t)}))},getGoodsType:function(){var t=this;Object(g["b"])({type:3}).then((function(e){e.success?t.typeList=e.data||[]:t.$toast(e.message)}))["catch"]((function(t){console.log(t)}))},share:function(){this.$util.gioTrackWithVariable("mall_specialty_click_share");var t=location.href;this.$util.inAppShare({url:t.includes("?")?"".concat(t,"&shareId=").concat(this.userId):"".concat(t,"?shareId=").concat(this.userId)})},fnOpenSearch:function(){var t=this;this.searchComponentLoad?this.searchComponentShow=!0:C().then((function(){t.searchComponentLoad=!0,t.searchComponentShow=!0}))},searchEvent:function(t){this.searchComponentShow=!1},bannerClick:function(t){var e=t.linkType,s=t.link,n=t.relationId;this.$store.dispatch("bannerClick",{hyperLinkType:String(e),hyperLink:s,relationId:n})},hiddenFeedBack:function(){this.showToTopFlag=!1},goAppointment:function(){this.$router.push({path:"/orderMore",query:{list:JSON.stringify(this.reverse.acReserveList||[])}})},goSpecialDetils:function(t){this.$router.push({name:"smartChoiceProvince",query:{regionId:t.regionId}})},handleScroll:function(){var t=this.$refs.bl.getBoundingClientRect().top;this.tabFixed=t<46;var e=this.$refs.toTop.scrollTop;this.showToTopFlag=e>300},toHead:function(){document.querySelector("#topAnchor").scrollIntoView({block:"start",behavior:"smooth"}),this.showArrow=!1},goCart:function(){this.$router.push("/cart")},goBack:function(){this.$keepAliveDestroy(),this.$store.dispatch("doHistoryBack")}}),beforeDestroy:function(){window.removeEventListener("scroll",this.handleScroll)}},x=I,$=(s("f509"),Object(p["a"])(x,n,o,!1,null,"16681453",null));e["default"]=$.exports},1669:function(t,e,s){"use strict";var n=function(){return s.e("chunk-2b4715e4").then(s.bind(null,"c63d"))};e["a"]={components:{topFeedBack:n},data:function(){return{showToTopFlag:!1,scrollTarget:""}},mounted:function(){this.debouncedAction=this.$util.throttle(this.option,100)},methods:{handleScroll:function(t){this.debouncedAction()},option:function(){var t=this.$refs.toTop.scrollTop;this.showToTopFlag=t>200},hiddenFeedBack:function(){this.showToTopFlag=!1},fnScrollToTop:function(){this.scrollSmoothTo(0)},scrollSmoothTo:function(t){window.requestAnimationFrame||(window.requestAnimationFrame=function(t){return setTimeout(t,17)});var e=document.querySelector(this.scrollTarget),s=e.scrollTop,n=function n(){var o=t-s;s+=o/10,Math.abs(o)<1?e.scrollTo(0,t):(e.scrollTo(0,s),requestAnimationFrame(n))};n()}}}},1771:function(t,e,s){"use strict";var n;e["a"]={swipeResize:function(t,e){var s=e,o=t;(function(){var t;function e(){o&&o.$refs&&o.$refs[s]&&o.$refs[s].resize()}n=function(){t||(t=setTimeout((function(){t=null,e()}),1e3))},window.addEventListener("resize",n,!1)})()},removeSwipeResize:function(){window.removeEventListener("resize",n,!1)}}},"347c":function(t,e,s){},"52cd":function(t,e,s){},"5b3b":function(t,e,s){"use strict";s("52cd")},"73bcd":function(t,e,s){"use strict";s.d(e,"d",(function(){return i})),s.d(e,"a",(function(){return r})),s.d(e,"b",(function(){return a})),s.d(e,"c",(function(){return c}));var n=s("bbc2"),o=s("1c03"),i=function(t){return Object(o["b"])(n["a"].getSpecialGoodsMain,t)},r=function(t){return Object(o["b"])(n["a"].getActiveInfo,t)},a=function(t){return Object(o["b"])(n["a"].getGoodsType,t)},c=function(t){return Object(o["b"])(n["a"].getISGoodsTypeInfo,t)}},"80cc":function(t,e,s){"use strict";s("347c")},a73f:function(t,e,s){"use strict";var n=function(t,e){var s=e._c;return e.props.nums>0?s("div",{staticClass:"m-skeleton",style:{"z-index":e.props.zIndex||0}},[s("div",{style:{background:e.props.bgColor,height:e.props.fheight}}),e._l(e.props.nums-1,(function(t){return s("div",{key:t,style:{background:e.props.bgColor,height:e.props.iheight}})}))],2):e._e()},o=[],i=(s("80cc"),s("2877")),r={},a=Object(i["a"])(r,n,o,!0,null,null,null);e["a"]=a.exports},bb27:function(t,e,s){},f509:function(t,e,s){"use strict";s("bb27")}}]);
//# sourceMappingURL=specialtyStore.74d3ddd8.js.map