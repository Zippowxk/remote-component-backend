{"version":3,"sources":["webpack:///./src/views/shopDetail/component/shop-ewm.vue?9810","webpack:///src/views/shopDetail/component/shop-ewm.vue","webpack:///./src/views/shopDetail/component/shop-ewm.vue?6f50","webpack:///./src/views/shopDetail/component/shop-ewm.vue","webpack:///./src/views/shopDetail/component/shop-ewm.vue?92b7"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","fnShowShopEWM","$event","preventDefault","stopPropagation","attrs","_f","shopBasicInfo","avatarImageFileId","_v","_s","storeName","_m","collectors","canvasSrc","fnSaveImage","qrcode","btnText","$cdnImageUrl","staticRenderFns","props","data","created","mounted","path","location","href","$nextTick","decodeURIComponent","url","size","computed","methods","$emit","utils","res","window","postMessage","JSON","stringify","type","qrCodeUrl","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,WAAWC,GAAG,CAAC,MAAQP,EAAIQ,cAAc,UAAY,SAASC,GAAQA,EAAOC,oBAAqB,CAACN,EAAG,MAAM,CAACE,YAAY,UAAUC,GAAG,CAAC,MAAQ,SAASE,GAAQA,EAAOE,qBAAsB,CAACP,EAAG,MAAM,CAACE,YAAY,SAASM,MAAM,CAAC,IAAMZ,EAAIa,GAAG,eAAPb,CAAuBA,EAAIc,cAAcC,mBAAmB,IAAM,MAAMX,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACN,EAAIgB,GAAGhB,EAAIiB,GAAGjB,EAAIc,cAAcI,cAAclB,EAAImB,GAAG,GAAGf,EAAG,MAAM,CAACE,YAAY,OAAO,CAACN,EAAIgB,GAAG,MAAMhB,EAAIiB,GAAGjB,EAAIc,cAAcM,YAAY,MAAMhB,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,MAAM,CAACQ,MAAM,CAAC,IAAMZ,EAAIqB,UAAU,IAAM,QAAQjB,EAAG,MAAM,CAACE,YAAY,OAAOC,GAAG,CAAC,MAAQ,SAASE,GAAQ,OAAOT,EAAIsB,YAAYtB,EAAIc,cAAcS,WAAW,CAACvB,EAAIgB,GAAGhB,EAAIiB,GAAGjB,EAAIwB,YAAYpB,EAAG,MAAM,CAACE,YAAY,QAAQM,MAAM,CAAC,IAAM,GAAG,IAAOZ,EAAIyB,aAAe,4BAA6BlB,GAAG,CAAC,MAAQP,EAAIQ,sBACx6BkB,EAAkB,CAAC,WAAa,IAAI1B,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACN,EAAIgB,GAAG,c,uuBC6BxL,OACEW,MAAO,CAAC,gBAAiB,WACzBC,KAFF,WAGI,MAAO,CACLP,UAAW,GACXG,QAAS,KAGbK,QARF,aASEC,QATF,WASA,WAEA,wBACMC,KAAMC,SAASC,OACrB,oBAEA,gGACIhC,KAAKiC,WAAU,WACb,IAAN,kBACQN,KAAMO,mBAAmBC,GACzBC,KAAM,MAER,EAAN,sCAGIpC,KAAKuB,QAAU,EAAnB,mDAGEc,SAAU,EAAZ,GACA,yBAEEC,QAAS,CACP/B,cADJ,WAEMP,KAAKuC,MAAM,kBAoBblB,YAtBJ,SAsBA,cACUmB,EAAV,kBACQA,EAAR,sDACcC,EACF,EAAZ,uBAEY,EAAZ,uBAGA,kBACQC,OAAOC,YAAYC,KAAKC,UAAU,CAChCC,KAAM,aACNnB,KAAM,CACJoB,UAAW/C,KAAKoB,cAGpBpB,KAAKuC,MAAM,qBClG6V,I,wBCQ5WS,EAAY,eACd,EACAlD,EACA2B,GACA,EACA,KACA,WACA,MAIa,aAAAuB,E,oECnBf","file":"js/chunk-53825816.2330712c.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"shop-ewm\",on:{\"click\":_vm.fnShowShopEWM,\"touchmove\":function($event){$event.preventDefault();}}},[_c('div',{staticClass:\"content\",on:{\"click\":function($event){$event.stopPropagation();}}},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm._f(\"imageToHttps\")(_vm.shopBasicInfo.avatarImageFileId),\"alt\":\"\"}}),_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.shopBasicInfo.storeName))]),_vm._m(0),_c('div',{staticClass:\"fan\"},[_vm._v(\"粉丝数\"+_vm._s(_vm.shopBasicInfo.collectors||0))]),_c('div',{staticClass:\"ewm-box\"},[_c('img',{attrs:{\"src\":_vm.canvasSrc,\"alt\":\"\"}})]),_c('div',{staticClass:\"save\",on:{\"click\":function($event){return _vm.fnSaveImage(_vm.shopBasicInfo.qrcode)}}},[_vm._v(_vm._s(_vm.btnText))]),_c('img',{staticClass:\"close\",attrs:{\"alt\":\"\",\"src\":(_vm.$cdnImageUrl + \"/shop/icon-ewm-close.png\")},on:{\"click\":_vm.fnShowShopEWM}})])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tags\"},[_c('div',{staticClass:\"tag-item gfrz\"},[_vm._v(\"官方认证\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div @click=\"fnShowShopEWM\" @touchmove.prevent class=\"shop-ewm\">\n    <div @click.stop class=\"content\">\n      <img :src=\"shopBasicInfo.avatarImageFileId | imageToHttps\" alt class=\"avatar\" />\n      <div class=\"name\">{{shopBasicInfo.storeName}}</div>\n      <div class=\"tags\">\n        <div class=\"tag-item gfrz\">官方认证</div>\n        <!-- <div class=\"tag-item\">{{shopBasicInfo.storeTypeName}}</div> -->\n      </div>\n      <div class=\"fan\">粉丝数{{shopBasicInfo.collectors||0}}</div>\n      <div class=\"ewm-box\">\n         <img :src=\"canvasSrc\" alt=\"\">\n      </div>\n      <!-- <div class=\"ewm-box\" id=\"qrcode\"></div> -->\n      <div @click=\"fnSaveImage(shopBasicInfo.qrcode)\" class=\"save\">{{btnText}}</div>\n      <img\n        @click=\"fnShowShopEWM\"\n        alt\n        class=\"close\"\n        :src=\"`${$cdnImageUrl}/shop/icon-ewm-close.png`\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport utils from '@/utils/utils'\nimport { qrcanvas } from 'qrcanvas';\nimport { mapGetters } from 'vuex'\nimport config from '@/config'\nexport default {\n  props: ['shopBasicInfo', 'storeId'],\n  data() {\n    return {\n      canvasSrc: '',\n      btnText: ''\n    }\n  },\n  created() {},\n  mounted () {\n    // DSG-14740 新M站店铺二维码携带分享ID\n    const storeId = this.$router.resolve({\n      path: location.href\n    }).route.query.storeId\n    // let shareUrl = this.shopBasicInfo.qrcode ? this.shopBasicInfo.qrcode : url\n    const url = `${config.HOST}/sgmobile/shopDetail?storeId=${storeId}&shareId=${this.mId}`\n    this.$nextTick(() => {\n      const canvas1 = qrcanvas({\n        data: decodeURIComponent(url), // 分享链接（根据需求来）\n        size: 152 // 二维码大小\n      })\n      this.canvasSrc = canvas1.toDataURL('image/png')\n    })\n    // web端文字更换为：长按二维码保存，不提供下载功能  dsg-15176\n    this.btnText = (utils.isUplus() || utils.isSgRn()) ? '保存到相册' : '长按二维码保存'\n  },\n\n  computed: {\n    ...mapGetters(['mId']),\n  },\n  methods: {\n    fnShowShopEWM() {\n      this.$emit('fnShowShopEWM')\n    },\n    // base64Img2Blob (code) {\n    //   var parts = code.split(';base64,');\n    //   var contentType = parts[0].split(':')[1];\n    //   var raw = window.atob(parts[1]);\n    //   var rawLength = raw.length;\n\n    //   var uInt8Array = new Uint8Array(rawLength);\n\n    //   for (var i = 0; i < rawLength; ++i) {\n    //     uInt8Array[i] = raw.charCodeAt(i);\n    //   }\n\n    //   return new Blob([uInt8Array], { type: contentType });\n    // },\n    /**\n     *保存图片到相册\n     *\n     */\n    fnSaveImage(Url) {\n      if (utils.isHaierApp()) {\n        utils.uplusSaveImage(this.canvasSrc).then(res => {\n          if (res) {\n            this.$toast.success('保存成功')\n          } else {\n            this.$toast.fail('保存失败')\n          }\n        })\n      } else if (utils.isSgRn()) {\n        window.postMessage(JSON.stringify({\n          type: 'saveQrCode',\n          data: {\n            qrCodeUrl: this.canvasSrc,\n          },\n        }));\n        this.$emit('fnShowShopEWM');\n      }\n    },\n  },\n}\n</script>\n\n<style scoped lang=\"scss\">\n.shop-ewm {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  @include max-width;\n  background: rgba(0, 0, 0, 0.7);\n  /* z-index: 9999; */\n  z-index: 6;\n}\n.shop-ewm .content {\n  background-color: #fff;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  border-radius: 0.16rem;\n  padding-top: 0.54rem;\n  padding-bottom: 0.48rem;\n  width: calc(100% - 1.4rem);\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n}\n.shop-ewm .content img.avatar {\n  width: 1.22rem;\n  height: 1.22rem;\n  border-radius: 50%;\n}\n.shop-ewm .content .name {\n  font-size: 0.28rem;\n  color: rgba(0, 0, 0, 1);\n  line-height: 0.28rem;\n  margin-top: 0.24rem;\n}\n.shop-ewm .content .tags {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-top: 0.2rem;\n  margin-bottom: 0.2rem;\n}\n.shop-ewm .content .tags .tag-item {\n  height: 0.28rem;\n  background: rgba(11, 120, 227, 1);\n  border-radius: 0.14rem;\n  padding-left: 0.1rem;\n  padding-right: 0.1rem;\n  font-size: 0.18rem;\n  color: rgba(238, 238, 238, 1);\n  line-height: 0.28rem;\n}\n.shop-ewm .content .tags .tag-item.gfrz {\n  background: rgba(255, 71, 61, 1);\n  margin-right: 0.1rem;\n}\n.shop-ewm .content .fan {\n  font-size: 0.22rem;\n  color: rgba(153, 153, 153, 1);\n  line-height: 0.22rem;\n}\n.shop-ewm .content .ewm-box {\n  padding: 0.16rem;\n  width: 4rem;\n  height: 4rem;\n  border: 0.02rem solid #f2f2f2;\n  box-sizing: border-box;\n  margin-top: 0.32rem;\n  margin-bottom: 0.32rem;\n}\n.shop-ewm .content .ewm-box img {\n  width: 3.64rem;\n  height: 3.64rem;\n}\n.shop-ewm .content .save {\n  width: calc(100% - 0.8rem);\n  height: 0.88rem;\n  border-radius: 0.44rem;\n  box-sizing: border-box;\n  border: 0.01rem solid #2283E2;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 0.32rem;\n  color: #2283E2;\n}\n.shop-ewm .content img.close {\n  position: absolute;\n  bottom: -1.02rem;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 0.64rem;\n  height: 1.02rem;\n}\n#qrcode ::v-deep canvas{\n  width: 100%;\n  height: 100%;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shop-ewm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shop-ewm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./shop-ewm.vue?vue&type=template&id=2262adc8&scoped=true&\"\nimport script from \"./shop-ewm.vue?vue&type=script&lang=js&\"\nexport * from \"./shop-ewm.vue?vue&type=script&lang=js&\"\nimport style0 from \"./shop-ewm.vue?vue&type=style&index=0&id=2262adc8&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2262adc8\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/@sg/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shop-ewm.vue?vue&type=style&index=0&id=2262adc8&scoped=true&lang=scss&\""],"sourceRoot":""}