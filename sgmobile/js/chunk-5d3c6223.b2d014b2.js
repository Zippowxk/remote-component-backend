(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d3c6223"],{"0622":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ul",{staticClass:"coupon-list"},t._l(t.list,(function(e,n){return o("li",{key:n,staticClass:"content-wrapper",on:{click:function(o){return t.fnSelectVoucher(e)}}},[o("div",{staticClass:"value-wrapper"},[o("coupon-value-label",{attrs:{couponValue:e.couponValue,textColor:"#ffffff",couponType:e.couponType}})],1),o("div",{staticClass:"info-wrapper"},[o("div",{staticClass:"info"},[o("p",{staticClass:"info-text"},["PRODUCT"===e.scope?o("span",{staticClass:"singleItem"},[t._v("单品")]):t._e(),"ORDER"===e.scope?o("span",{staticClass:"singleItem"},[t._v("订单")]):t._e(),t._v(" "+t._s(e.description)+" ")]),o("p",{staticClass:"info-text"},[t._v(t._s(e.couponTemplateName))]),e.startTime?o("p",{staticClass:"info-text"},[t._v(t._s(t._f("formatDateEndOfDay")(e.startTime))+" — "+t._s(t._f("formatDateEndOfDay")(e.endTime)))]):o("p",{staticClass:"info-text"},[t._v(t._s(e.validityPeriod))])])]),o("div",{staticClass:"select-wrapper"},[o("img",{staticClass:"select-icon",attrs:{src:t.selectIconSrc(e),alt:""}})]),o("img",{staticClass:"type-icon",attrs:{src:t.iconSrc(e),alt:""}}),o("img",{staticClass:"new-coupon-bg",attrs:{src:t.$cdnImageUrl+"/shop/order-voucher-bg.png"}}),e.isSuperposed?o("img",{staticClass:"superpose-tag",attrs:{src:t.$cdnImageUrl+"/shop/order-coupon-diejia.png"}}):t._e()])})),0)},s=[],i=o("25e9"),r={default:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/orders/icon-coupon-default.png",selected:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/shop/checked-orange.svg"},c={components:{couponValueLabel:i["a"]},props:["list","superposeIds"],data:function(){return{receiveFlag:!1}},computed:{couponIcon:function(){var t={ORDER:"".concat(this.$cdnImageUrl,"/shop/kaquan.png"),SCENE:"".concat(this.$cdnImageUrl,"/mine/mine-voucher-scene.png"),SHOP:"".concat(this.$cdnImageUrl,"/shop/dianpuquan.png")};return t}},mounted:function(){},methods:{isBigVal:function(t){return t.couponValue>1e3},fnSelectVoucher:function(t){this.$emit("fnSelectVoucher",t)},iconSrc:function(t){var e=t.couponUseType;return t.applyType&&(e="SCENE"),this.couponIcon[e]||e},selectIconSrc:function(t){return r[t.isForUse?"selected":"default"]},timeHandler:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.split(" ")[0]}}},a=c,u=o("2877"),l=Object(u["a"])(a,n,s,!1,null,null,null);e["a"]=l.exports},"0664":function(t,e,o){},"10af":function(t,e,o){},"25e9":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("div",{class:{"coupon-value-label":!0,"home-style":t.forHomePage},style:{color:t.textColor}},["FIXED_CASH_COUPON"===t.couponType||"REBATE_COUPON"===t.couponType?o("span",{staticClass:"symbol"},[t._v("￥")]):t._e(),o("span",{staticClass:"integer",style:{fontSize:t.fontSize}},[t._v(t._s(t._f("formatPriceInt")(t.couponDisplayValue)))]),t.withFloat?o("span",{staticClass:"float"},[t._v(t._s(t._f("formatPriceFloat")(t.couponDisplayValue)))]):t._e(),"DISCOUNT_COUPON"===t.couponType?o("span",{staticClass:"sales"},[t._v("折")]):t._e()])])},s=[],i={name:"couponValueLabel",props:{couponValue:{type:String,default:"0"},couponType:{type:String,default:"FIXED_CASH_COUPON"},forHomePage:{type:Boolean,default:!1},maxFontSize:{type:String,default:"0.64"},textColor:{type:String,default:"#ED2856"}},computed:{fontSize:function(){return this.forHomePage?String(this.couponDisplayValue).length<6?"0.40rem":6===String(this.couponDisplayValue).length?"0.38rem":String(this.couponDisplayValue).length>6?"0.32rem":this.maxFontSize+"rem":String(this.couponDisplayValue).length<6?this.maxFontSize+"rem":6===String(this.couponDisplayValue).length?.875*this.maxFontSize+"rem":String(this.couponDisplayValue).length>6?.68*this.maxFontSize+"rem":this.maxFontSize+"rem"},withFloat:function(){var t=this.couponDisplayValue.split(".");return!!(t&&t.length>1&&"00"!==t[1]&&"0"!==t[1])},couponDisplayValue:function(){return"DISCOUNT_COUPON"===this.couponType?String(Number(this.couponValue)/10):this.couponValue}}},r=i,c=(o("4ff6"),o("2877")),a=Object(c["a"])(r,n,s,!1,null,"5a48cfec",null);e["a"]=a.exports},"2a78":function(t,e,o){"use strict";o("5918")},"4ff6":function(t,e,o){"use strict";o("0664")},5918:function(t,e,o){},ae7d:function(t,e,o){"use strict";o("dfb2")},af53:function(t,e,o){"use strict";o("10af")},b9c8:function(t,e,o){"use strict";o("fa38")},ce6b:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"available-voucher"},[o("div",{staticClass:"available-voucher-list-wrap"},[o("div",{staticClass:"ul-box"},[o("coupon-list",{attrs:{list:t.list,memberCouponId:t.memberCouponId},on:{fnSelectVoucher:t.fnSelectVoucher,received:t.fnConfirm}})],1),o("div",{staticClass:"btn-wrap"},[o("div",{staticClass:"btn",on:{click:t.fnConfirm}},[t._v("确定")])])]),t.list.length?t._e():o("no-data")],1)},s=[],i=o("0622"),r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("div",{staticClass:"no-data"},[o("img",{attrs:{alt:"",src:t.$cdnImageUrl+"/cart/yhq-no.png"}}),o("div",{staticClass:"text"},[t._v("您目前没有可用的优惠券")])])])},c=[],a={},u=a,l=(o("af53"),o("2877")),p=Object(l["a"])(u,r,c,!1,null,"1e540ffe",null),f=p.exports,h=o("85e4");function d(t){return y(t)||g(t)||C(t)||m()}function m(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function C(t,e){if(t){if("string"===typeof t)return v(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?v(t,e):void 0}}function g(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function y(t){if(Array.isArray(t))return v(t)}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,n=new Array(e);o<e;o++)n[o]=t[o];return n}var b={components:{couponList:i["a"],noData:f},data:function(){return{type:"",productId:"",sku:"",orderSn:"",list:[],memberCouponId:"",showVoucherTypeFlag:!1,plantType:"",activityId:"",itemType:"",couponValue:"",couponFrom:"",scope:""}},created:function(){if(console.log("进来没"),this.type=this.$route.query.type,"tailOrder"===this.$route.query.from)return this.orderSn=this.$route.query.orderSn,void this.getTailCoupons();console.log("我在这"),console.log(this.type),"1"===this.type?(this.productId=this.$route.query.productId,this.sku=this.$route.query.sku,this.getStoreCoupon()):this.getOrderCoupon()},methods:{getStoreCoupon:function(){var t=this;Object(h["fb"])({productId:this.productId}).then((function(e){e.success?(e.data.forEach((function(t,e){t.voucherType=1})),t.list=d(e.data),t.list.forEach((function(e){1===e.isForUse&&(t.memberCouponId=e.couponCode,t.couponValue=e.couponValue)}))):t.$toast(e.message)}))},getOrderCoupon:function(){var t=this;Object(h["P"])().then((function(e){if(e.success){for(var o=0;o<e.data.length;o++);e.data.forEach((function(t,e){t.voucherType=2})),t.list=d(e.data),t.list.forEach((function(e){1===e.isForUse&&(t.memberCouponId=e.couponCode,t.scope=e.scope)}))}else t.$toast(e.message)}))},getTailCoupons:function(){var t=this;Object(h["gb"])({orderSn:this.orderSn}).then((function(e){e.success?(e.data.forEach((function(t,e){t.voucherType=2,t.memberCouponId&&(t.couponCode=t.memberCouponId+"")})),t.list=d(e.data),t.list.forEach((function(e){1===e.isForUse&&(t.memberCouponId=e.couponCode,t.couponValue=e.couponValue,t.scope=e.scope)}))):t.$toast(e.message)}))},fnSelectVoucher:function(t){if("tailOrder"===this.$route.query.from)return this.memberCouponId,t.couponCode,this.couponValue=t.couponValue,this.memberCouponId=this.memberCouponId===t.couponCode?"":t.couponCode,void(this.scope=t.scope);this.couponFrom=t.type,"1"===this.type&&(this.memberCouponId,t.couponCode,this.couponValue=t.couponValue),this.memberCouponId=this.memberCouponId===t.couponCode?"":t.couponCode},fnConfirm:function(){var t=this;"tailOrder"!==this.$route.query.from?"1"===this.type?this.choiceStoreCoupon():this.choiceOrderCoupon():Object(h["t"])({orderSn:this.orderSn,couponCode:this.memberCouponId,scope:this.scope}).then((function(e){e.success?t.$router.go(-1):t.$toast(e.message)}))},choiceStoreCoupon:function(){var t=this;Object(h["r"])({couponCode:this.memberCouponId,sku:this.sku}).then((function(e){e.success?t.$router.go(-1):t.$toast(e.message)}))},choiceOrderCoupon:function(){var t=this;Object(h["q"])({couponCode:this.memberCouponId}).then((function(e){e.success?t.$router.go(-1):t.$toast(e.message)}))},fnShowVoucherType:function(){this.showVoucherTypeFlag=!this.showVoucherTypeFlag}}},S=b,_=(o("ae7d"),o("2a78"),o("b9c8"),Object(l["a"])(S,n,s,!1,null,"0d435ff0",null));e["default"]=_.exports},dfb2:function(t,e,o){},fa38:function(t,e,o){}}]);
//# sourceMappingURL=chunk-5d3c6223.b2d014b2.js.map