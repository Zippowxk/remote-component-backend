{"version":3,"sources":["webpack:///./src/components/custom-share/custom-share.vue?3f48","webpack:///src/components/custom-share/custom-share.vue","webpack:///./src/components/custom-share/custom-share.vue?285d","webpack:///./src/components/custom-share/custom-share.vue","webpack:///./src/http/service/mine.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","attrs","model","value","callback","$$v","showModal","expression","_l","item","key","label","on","$event","shareHandler","params","img","_v","_s","staticRenderFns","instance","initDeviceReady","WechatSession","WechatTimeLine","QQ","QQzone","Sina","CopyLink","Picture","shopDetail","ways","detail","utils","pageFunctions","components","props","show","Boolean","copyCustomLink","type","default","data","shareWayList","created","getShareWay","mounted","beforeDestroy","methods","changeStyleIndex","overlay","style","linkShare","$emit","text","window","location","href","clipboard","a","click","pictureShare","$route","name","map","shareWayMap","way","getShareAuth","$store","getters","getLoginStatus","Promise","all","promiseList","then","values","success","identifyFlag","includes","isPartner","push","computed","watch","handler","val","immediate","component","myManageinfo","noLogin","http","request","url","myManage","method","Date","now","getOrderCount","chId","getWallet","wallet","checkBindByType","getComminsionSumInfo","headers","getGoodsAmountList","getServiceCharge"],"mappings":"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","file":"js/chunk-76c71264.5827f362.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('van-popup',{staticClass:\"custom-share\",staticStyle:{\"border-radius\":\"0.24rem 0.24rem 0 0\"},attrs:{\"get-container\":\"#app-warp\",\"position\":\"bottom\"},model:{value:(_vm.showModal),callback:function ($$v) {_vm.showModal=$$v},expression:\"showModal\"}},[_c('div',{staticClass:\"share-wrapper\"},[_c('ul',{staticClass:\"share-way-list\"},_vm._l((_vm.shareWayList),function(item){return _c('li',{key:item.label,staticClass:\"share-item\",on:{\"click\":function($event){return _vm.shareHandler(item.params)}}},[_c('div',{staticClass:\"icon-wrapper\"},[_c('img',{attrs:{\"src\":item.img,\"alt\":\"\"}})]),_c('div',{staticClass:\"share-name\"},[_vm._v(_vm._s(item.label))])])}),0)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <van-popup v-model=\"showModal\" get-container=\"#app-warp\" position=\"bottom\" class=\"custom-share\" style=\"border-radius: 0.24rem 0.24rem 0 0;\">\n    <div class=\"share-wrapper\">\n      <!-- <div class=\"title-line\">您的好友通过分享购买，您将赚到不菲的佣金</div> -->\n      <ul class=\"share-way-list\">\n        <li v-for=\"item of shareWayList\" class=\"share-item\" :key=\"item.label\" @click=\"shareHandler(item.params)\">\n          <div class=\"icon-wrapper\">\n            <img :src=\"item.img\" alt=\"\">\n          </div>\n          <div class=\"share-name\">{{item.label}}</div>\n        </li>\n      </ul>\n    </div>\n  </van-popup>\n</template>\n\n<script>\nimport './custom-share.scss'\nimport ClipboardJS from 'clipboard';\nimport UplusApi from '@uplus/uplus-api'\nimport { checkIdentity } from '@/http/service/shop'\nimport { myManageinfo } from '@/http/service/mine'\nimport utils from '@/utils/utils'\n\nconst instance = new UplusApi()\ninstance.initDeviceReady()\n\nconst shareWayMap = {\n  WechatSession: {\n    img: 'https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/share/wx-icon3x.png',\n    label: '微信',\n    params: { platformType: 'WechatSession' }\n  },\n  WechatTimeLine: {\n    img: 'https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/share/wx-time-line-icon3x.png',\n    label: '朋友圈',\n    params: { platformType: 'WechatTimeLine' }\n  },\n  QQ: {\n    img: 'https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/share/qq-icon3x.png',\n    label: 'QQ',\n    params: { platformType: 'QQ' }\n  },\n  QQzone: {\n    img: 'https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/share/qq-zone-icon3x.png',\n    label: 'QQ空间',\n    params: { platformType: 'QQzone' }\n  },\n  Sina: {\n    img: 'https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/share/sina-icon3x.png',\n    label: '微博',\n    params: { platformType: 'Sina' }\n  },\n  CopyLink: {\n    img: 'https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/share/link-icon3x.png',\n    label: '复制链接',\n    params: { callback: 'linkShare' }\n  },\n  Picture: {\n    img: 'https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/share/picture-icon3x.png',\n    label: '画报分享',\n    params: { callback: 'pictureShare' }\n  }\n}\n\n// 根据路由区分不同页面需要不同的分享途径  shopDetail=店铺主页  detail=单品页\nconst pageFunctions = {\n  shopDetail: {\n    ways: ['WechatSession', 'WechatTimeLine', 'QQ', 'QQzone', 'Sina', 'CopyLink'],\n    params: 'storeId'\n  },\n  detail: {\n    ways: ['WechatSession', 'WechatTimeLine', 'QQ', 'QQzone', 'Sina', 'CopyLink', 'Picture'],\n    params: 'productId'\n  }\n}\n\n// ihaier内分享仅支持【微信，朋友圈】，对pageFunctions进行重置\nif (utils.isIhaierApp()) {\n  pageFunctions['shopDetail']['ways'] = ['WechatSession', 'WechatTimeLine']\n  pageFunctions['detail']['ways'] = ['WechatSession', 'WechatTimeLine']\n}\n\nexport default {\n  components: {},\n  props: {\n    show: Boolean,\n    copyCustomLink: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data () {\n    return {\n      showModal: true,\n      shareWayList: []\n    }\n  },\n  created () {\n    this.getShareWay()\n  },\n  mounted () {},\n  beforeDestroy () {},\n  methods: {\n    changeStyleIndex () {\n      const overlay = document.querySelector('.tab-recommend .van-sticky--fixed')\n      if (overlay) {\n        overlay.style['z-index'] = this.showModal ? 99 : null\n      }\n    },\n    linkShare() {\n      if (this.copyCustomLink) {\n        this.$emit('copyLink')\n      } else {\n        const a = document.createElement('a')\n        const clipboard = new ClipboardJS(a, {\n          text: function (trigger) {\n            return window.location.href\n          }\n        });\n        clipboard.on('success', () => {\n          this.$toast('复制链接成功');\n        })\n        clipboard.on('error', () => {\n          this.$toast('复制链接失败');\n        })\n        a.click()\n      }\n    },\n    pictureShare() {\n      this.$emit('pictureShare')\n    },\n    shareHandler (params) {\n      if (params.callback) {\n        this[params.callback]()\n      } else {\n        if (this.$route.name === 'detail') {\n          this.$emit('customShare', { platformType: params.platformType })\n        }\n        if (this.$route.name === 'shopDetail') {\n          this.$emit('customShare', { platformType: params.platformType })\n        }\n      }\n      this.showModal = false\n    },\n    getShareWay () {\n      if (pageFunctions[this.$route.name]) {\n        this.shareWayList = pageFunctions[this.$route.name].ways.map((way) => {\n          return shareWayMap[way]\n        })\n        // ihaier内不展示画报分享\n        if (this.$route.name === 'shopDetail' && !utils.isIhaierApp()) {\n          this.getShareAuth()\n        }\n      }\n    },\n    // ajax\n    getShareAuth () {\n      if (!this.$store.getters.getLoginStatus) {\n        this.shareWayList.push(shareWayMap['Picture'])\n        return\n      }\n      const promiseList = [myManageinfo(), checkIdentity({ storeOwnerId: this.$route.query.storeId })]\n      Promise.all(promiseList).then((values) => {\n        let isPartner = false\n        if (values[0].data.success) {\n          if (values[0].data.data.identifyFlag && [22, 21, 31].includes(values[0].data.data.identifyFlag)) {\n            isPartner = true\n          }\n        }\n        if (isPartner && values[1].success) {\n          if (!values[1].data) { return }\n        }\n        this.shareWayList.push(shareWayMap['Picture'])\n      })\n    }\n  },\n  computed: {},\n  watch: {\n    show: {\n      handler (val) {\n        this.showModal = val\n        this.changeStyleIndex()\n      },\n      immediate: true\n    },\n    showModal: {\n      handler (val) {\n        if (!val) {\n          this.$emit('update:show', false)\n        }\n        // val ? this.getShareWay() : this.$emit('update:show', false)\n      },\n      immediate: true\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./custom-share.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./custom-share.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./custom-share.vue?vue&type=template&id=42750f96&\"\nimport script from \"./custom-share.vue?vue&type=script&lang=js&\"\nexport * from \"./custom-share.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/**\n * 分类模块\n * 导出至'@/http/service/category'\n */\nimport http from '../http'\nimport url from '../url'\n\n// 个人中心信息\nexport const myManageinfo = (data, noLogin) => {\n  return http.request({\n    url: url.myManage,\n    method: 'get',\n    params: { '_t': Date.now() },\n    noLogin\n  })\n}\n// 个人中心信息\nexport const getOrderCount = data => {\n  return http.request({\n    url: url.getOrderCount,\n    method: 'get',\n    params: {\n      chId: 60\n    }\n  })\n}\n\n// 个人中心 - 钱包信息\nexport const getWallet = data => {\n  return http.request({\n    url: url.wallet,\n    method: 'get',\n    params: {}\n  })\n}\n\n// 个人中心 - 营收模块 判断绑卡\nexport const checkBindByType = params => {\n  return http.request({\n    url: url.checkBindByType,\n    method: 'get',\n    params\n  })\n}\n\n// 个人中心 - 营收模块 信息汇总\nexport const getComminsionSumInfo = (data) => {\n  return http.request({\n    url: url.getComminsionSumInfo,\n    method: 'POST',\n    data,\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  })\n}\n\n// 个人中心 - 营收模块 账单列表\nexport const getGoodsAmountList = (data) => {\n  return http.request({\n    url: url.getGoodsAmountList,\n    method: 'POST',\n    data,\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  })\n}\n\n// 个人中心 - 营收模块 服务费信息\nexport const getServiceCharge = (params) => {\n  return http.request({\n    url: url.getServiceCharge,\n    method: 'get',\n    params\n  })\n}\n"],"sourceRoot":""}