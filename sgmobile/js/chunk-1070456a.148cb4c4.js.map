{"version":3,"sources":["webpack:///./src/views/mine/myBankCard/veriftyCode.vue?b8d3","webpack:///./src/views/mine/myBankCard/veriftyCode.vue?e991","webpack:///src/views/mine/myBankCard/veriftyCode.vue","webpack:///./src/views/mine/myBankCard/veriftyCode.vue?a5bb","webpack:///./src/views/mine/myBankCard/veriftyCode.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","phone","attrs","on","inputFn","model","value","callback","$$v","sms","expression","disabled","doSend","slot","text","tipsClick","class","isValild","doVeritfy","staticRenderFns","name","data","realPhone","destination","undefined","computed","mounted","$route","query","$router","back","replace","bankPhone","countdown","methods","$dialog","alert","message","length","count","clearInterval","timer","setInterval","run","$http","post","url","then","result","success","clearTimeout","window","location","href","indexOf","get","component"],"mappings":"gHAAA,W,gECAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,IAAI,CAACJ,EAAIO,GAAG,WAAWP,EAAIQ,GAAGR,EAAIS,UAAUL,EAAG,iBAAiB,CAACA,EAAG,YAAY,CAACM,MAAM,CAAC,OAAS,GAAG,UAAY,GAAG,UAAY,IAAI,MAAQ,QAAQ,YAAc,YAAYC,GAAG,CAAC,MAAQX,EAAIY,SAASC,MAAM,CAACC,MAAOd,EAAO,IAAEe,SAAS,SAAUC,GAAMhB,EAAIiB,IAAID,GAAKE,WAAW,QAAQ,CAACd,EAAG,aAAa,CAACM,MAAM,CAAC,KAAO,SAAS,KAAO,QAAQ,KAAO,OAAO,SAAWV,EAAImB,UAAUR,GAAG,CAAC,MAAQX,EAAIoB,QAAQC,KAAK,UAAU,CAACrB,EAAIO,GAAGP,EAAIQ,GAAGR,EAAIsB,UAAU,IAAI,GAAGlB,EAAG,MAAM,CAACE,YAAY,YAAYK,GAAG,CAAC,MAAQX,EAAIuB,YAAY,CAACvB,EAAIO,GAAG,aAAaH,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,IAAI,CAACoB,MAAM,CAAC,OAAUxB,EAAIyB,UAAUf,MAAM,CAAC,KAAO,gBAAgBC,GAAG,CAAC,MAAQX,EAAI0B,YAAY,CAAC1B,EAAIO,GAAG,QAAQH,EAAG,IAAI,CAACJ,EAAIO,GAAG,oBAAoB,IACl1BoB,EAAkB,G,+sBC2BtB,OACEC,KAAM,cACNC,KAFF,WAGI,MAAO,CACLpB,MAAO,GACPqB,UAAW,GACXb,IAAK,GACLK,KAAM,MACNH,UAAU,EACVM,UAAU,EACVM,iBAAaC,IAGjBC,SAAU,EAAZ,GACA,+CAEEC,QAhBF,WAiBIjC,KAAK8B,YAAc9B,KAAKkC,OAAOC,MAAQnC,KAAKkC,OAAOC,MAAML,iBAAcC,EACvE,IAAJ,8CACSvB,GAAOR,KAAKoC,QAAQC,OACzBrC,KAAK6B,UAAYrB,EACjBR,KAAKQ,MAAQA,EAAM8B,QAAQ,wBAAyB,YACpDtC,KAAKuC,UAAYA,EACjBvC,KAAKwC,aAEPC,QAAS,CACPnB,UADJ,WAEM,IAAN,gCACMtB,KAAK0C,QAAQC,MAAM,CACjBC,QAAS,oEAAsEL,EAAY,4BAA8BA,EAAY,mBAC7I,sBAII5B,QATJ,WAU8B,IAApBX,KAAKgB,IAAI6B,OACX7C,KAAKwB,UAAW,EAEhBxB,KAAKwB,UAAW,GAGpBgB,UAhBJ,WAgBA,WACA,KACA,OACA,aACQ,GAAIM,GAAS,EAIX,OAHAC,cAAcC,GACd,EAAV,iBACU,EAAV,aAGQF,IACA,EAAR,YAEME,EAAQC,YAAYC,EAAK,MAE3BzB,UA/BJ,WA+BA,WACA,gFASA,+KACMzB,KAAKmD,MAAMC,KAAKC,GAAKC,MAAK,SAAhC,GACQ,IAAR,SACQ,GAAIC,EAAOC,QAAS,CAClB,EAAV,sBACU,IAAV,yBACYC,aAAaT,GACR,EAAjB,YAOc,EAAd,+BANkBU,OAAOC,WAA2D,IAA/CD,OAAOC,SAASC,KAAKC,QAAQ,aAClD,EAAhB,uCAEgB,EAAhB,+BAKA,UAEU,EAAV,sBAII1C,OA/DJ,WA+DA,WACMnB,KAAKmD,MAAMW,IAAI,EAArB,6DACQ,IAAR,SACYP,EAAOC,SACT,EAAV,YACU,EAAV,aAEU,EAAV,wBC3HmX,I,wBCQ/WO,EAAY,eACd,EACAjE,EACA4B,GACA,EACA,KACA,WACA,MAIa,aAAAqC,E","file":"js/chunk-1070456a.148cb4c4.js","sourcesContent":["export * from \"-!../../../../node_modules/@sg/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./veriftyCode.vue?vue&type=style&index=0&id=c8b16eea&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"send-code-page\"},[_c('p',[_vm._v(\"验证码已经发送到\"+_vm._s(_vm.phone))]),_c('van-cell-group',[_c('van-field',{attrs:{\"center\":\"\",\"clearable\":\"\",\"maxlength\":\"6\",\"label\":\"短信验证码\",\"placeholder\":\"请输入短信验证码\"},on:{\"input\":_vm.inputFn},model:{value:(_vm.sms),callback:function ($$v) {_vm.sms=$$v},expression:\"sms\"}},[_c('van-button',{attrs:{\"slot\":\"button\",\"size\":\"small\",\"type\":\"info\",\"disabled\":_vm.disabled},on:{\"click\":_vm.doSend},slot:\"button\"},[_vm._v(_vm._s(_vm.text))])],1)],1),_c('div',{staticClass:\"send-tips\",on:{\"click\":_vm.tipsClick}},[_vm._v(\"收不到验证码?\")]),_c('div',{staticClass:\"send-btn\"},[_c('a',{class:{'active': _vm.isValild},attrs:{\"href\":\"javascript:;\"},on:{\"click\":_vm.doVeritfy}},[_vm._v(\"确定\")]),_c('p',[_vm._v(\"本服务由海尔海融易服务\")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"send-code-page\">\n    <p>验证码已经发送到{{phone}}</p>\n    <van-cell-group>\n      <van-field\n        v-model=\"sms\"\n        center\n        clearable\n        maxlength=\"6\"\n        label=\"短信验证码\"\n        placeholder=\"请输入短信验证码\"\n        @input=\"inputFn\"\n      >\n        <van-button slot=\"button\" size=\"small\" type=\"info\" :disabled=\"disabled\" @click=\"doSend\">{{text}}</van-button>\n      </van-field>\n    </van-cell-group>\n    <div class=\"send-tips\" @click=\"tipsClick\">收不到验证码?</div>\n    <div class=\"send-btn\">\n      <a href=\"javascript:;\" :class=\"{'active': isValild}\" @click=\"doVeritfy\">确定</a>\n      <p>本服务由海尔海融易服务</p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport URL from '@/http/url'\nimport { mapGetters } from 'vuex'\n\nexport default {\n  name: 'veriftycode',\n  data() {\n    return {\n      phone: '',\n      realPhone: '',\n      sms: '',\n      text: '60s',\n      disabled: true,\n      isValild: false,\n      destination: undefined, // 成功后跳转目标地址\n    }\n  },\n  computed: {\n    ...mapGetters('bankcard', ['getBankRegInfo'])\n  },\n  mounted() {\n    this.destination = this.$route.query ? this.$route.query.destination : undefined\n    let { phone, bankPhone } = this.getBankRegInfo;\n    if (!phone) this.$router.back();\n    this.realPhone = phone\n    this.phone = phone.replace(/^(\\d{3})\\d{4}(\\d{4})$/, '$1****$2')\n    this.bankPhone = bankPhone\n    this.countdown();\n  },\n  methods: {\n    tipsClick() {\n      let bankPhone = this.getBankRegInfo.bankPhone\n      this.$dialog.alert({\n        message: '<p>银行预留手机号是您在办理该银行卡时所填写的手机号。如忘记、停用或无预留手机号，请拨打银行客服电话 <a href=\"tel:' + bankPhone + '\" style=\"color: #1989fa\">' + bankPhone + '</a> 更新处理!</p>'\n      }).then(() => {\n        // on close\n      });\n    },\n    inputFn() {\n      if (this.sms.length === 6) {\n        this.isValild = true\n      } else {\n        this.isValild = false\n      }\n    },\n    countdown() {\n      let count = 60;\n      let timer = null;\n      let run = () => {\n        if (count <= 0) {\n          clearInterval(timer);\n          this.text = '重新获取'\n          this.disabled = false\n          return;\n        }\n        count--;\n        this.text = count + 's'\n      }\n      timer = setInterval(run, 1000)\n    },\n    doVeritfy() {\n      let { name, phone, cardNo, identityNo, bankCode } = this.getBankRegInfo\n      // let params = {\n      //   ownerName: name,\n      //   cardNo: cardNo,\n      //   bankNo: bankCode,\n      //   mobile: phone,\n      //   captcha: this.sms,\n      //   identityNo: identityNo\n      // }\n      let url = `${URL.POST_BANKDATA}?ownerName=${name}&cardNo=${cardNo}&bankNo=${bankCode}&mobile=${phone}&captcha=${this.sms}&identityNo=${identityNo}`\n      this.$http.post(url).then(res => {\n        let result = res.data\n        if (result.success) {\n          this.$toast('绑定成功,请稍等...')\n          let timer = setTimeout(() => {\n            clearTimeout(timer)\n            if (!this.destination) {\n              if (window.location && window.location.href.indexOf('sg_rn_app') !== -1) {\n                this.$router.replace('/bankcard?sg_rn_app')\n              } else {\n                this.$router.replace('/bankcard')\n              }\n            } else {\n              this.$router.replace(this.destination)\n            }\n          }, 2000)\n        } else {\n          this.$toast(result.message)\n        }\n      })\n    },\n    doSend() {\n      this.$http.get(URL.GET_CODEID + '?mobile=' + this.realPhone).then(res => {\n        let result = res.data\n        if (result.success) {\n          this.disabled = true\n          this.countdown();\n        } else {\n          this.$toast(result.message)\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n// @import '@/assets/styles/mixin';\n.send-code-page{\n  > p{\n    padding: .3rem;\n    font-size: .28rem;\n    color: #999;\n  }\n}\n.send-tips{\n  padding: .3rem;\n  text-align: right;\n  font-size: .24rem;\n  color: #666;\n}\n.send-btn{\n  padding: 0 .3rem;\n  a{\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: .8rem;\n    font-size: .3rem;\n    color: #fff;\n    border-radius: .4rem;\n    background: $themeColor;\n    opacity: .7;\n    &.active{\n      opacity: 1;\n    }\n  }\n  p{\n    padding: .3rem;\n    text-align: center;\n    font-size: .22rem;\n    color: #666;\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./veriftyCode.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./veriftyCode.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./veriftyCode.vue?vue&type=template&id=c8b16eea&scoped=true&\"\nimport script from \"./veriftyCode.vue?vue&type=script&lang=js&\"\nexport * from \"./veriftyCode.vue?vue&type=script&lang=js&\"\nimport style0 from \"./veriftyCode.vue?vue&type=style&index=0&id=c8b16eea&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c8b16eea\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}