(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-16040466"],{"1c3c":function(t,o,i){},"90e36":function(t,o,i){"use strict";i("94b8")},"94b8":function(t,o,i){},c4eb:function(t,o,i){"use strict";i("1c3c")},f034:function(t,o,i){"use strict";i.r(o);var n=function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("div",{staticClass:"mixin-container"},[i("van-popup",{style:{height:"9.6rem","border-radius":"12px 12px 0 0"},attrs:{position:"bottom","get-container":"#app-warp"},on:{close:t.onHide,click:t.onHide},model:{value:t.showChooseLoaction,callback:function(o){t.showChooseLoaction=o},expression:"showChooseLoaction"}},[t.showChooseLoaction?i("lazy-change-geographic-location",{attrs:{isShowBack:!0,storeId:t.storeId},on:{onHide:t.onHide,closeAndBack:t.closeAndBack,handleLocation:t.handleGeoLocation}}):t._e()],1),i("van-popup",{style:{height:"9.6rem","border-radius":"12px 12px 0 0"},attrs:{position:"bottom","get-container":"#app-warp"},on:{close:t.onHideAddr,click:t.onHideAddr},model:{value:t.addrListShow,callback:function(o){t.addrListShow=o},expression:"addrListShow"}},[i("addr-select",{attrs:{addrList:t.addrData},on:{onHide:t.onHideAddr,handleLocation:t.handleLocation,otherLocation:t.otherLocationOption}})],1)],1)},e=[],a=function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("div",{staticClass:"box"},[i("div",{staticClass:"top",on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"top-bar"},[i("div",{staticClass:"title"},[i("span",[t._v("配送至")]),i("img",{attrs:{src:t.$cdnImageUrl+"/common/control-close.png",alt:""},on:{click:t.closeModal}})])]),i("div",{staticClass:"addr-content"},[t.location?i("div",{staticClass:"nowAddress location",on:{click:t.chooseCurrent}},[i("img",{attrs:{src:t.$cdnImageUrl+"/location/icon_addr_bule.png",alt:""}}),i("span",[t._v("定位地址("+t._s(t.location.district)+"/"+t._s(t.location.township)+")")])]):i("div",{staticClass:"nowAddress location",on:{click:t.chooseCurrent}},[i("img",{attrs:{src:t.$cdnImageUrl+"/common/location-icon-blue.svg",alt:""}}),i("span",[t._v("点击自动定位")])]),i("div",{staticClass:"addr-list"},[t._l(t.addrList,(function(o,n){return i("div",{key:n,staticClass:"info",on:{click:function(o){return t.selectDefaultAddr(n)}}},[i("img",{attrs:{src:t.$cdnImageUrl+"/location/icon_addr.png",alt:""}}),i("span",[t._v(t._s(o.rn)+" "+t._s(o.ar))])])})),i("div",{staticClass:"bottom-margin"})],2)]),i("div",{staticClass:"addr-bottom"},[i("div",{staticClass:"addr-bottom-btn",on:{click:function(o){return o.stopPropagation(),t.otherLocation.apply(null,arguments)}}},[t._v(" 选择其他地址 ")])])])])},c=[],s=i("2f62");function d(t,o){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);o&&(n=n.filter((function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),i.push.apply(i,n)}return i}function r(t){for(var o=1;o<arguments.length;o++){var i=null!=arguments[o]?arguments[o]:{};o%2?d(Object(i),!0).forEach((function(o){l(t,o,i[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(i,o))}))}return t}function l(t,o,i){return o in t?Object.defineProperty(t,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[o]=i,t}var h={props:["onlyread","showAddr","addrList"],data:function(){return{showLoading:!1,location:null,show:!0,windowHeight:""}},methods:r(r(r({},Object(s["e"])(["setLocationInfo","setLoaction"])),Object(s["c"])(["getLatLongByLocationInfo"])),{},{chooseCurrent:function(){this.location?(this.onlyread||(localStorage.setItem("latitude",this.location.latitude),localStorage.setItem("longitude",this.location.longitude),localStorage.setItem("provinceId",this.location.provinceId),localStorage.setItem("cityId",this.location.cityId),localStorage.setItem("districtId",this.location.districtId),localStorage.setItem("townshipId",this.location.townshipId),this.setLocationInfo(this.location),this.setLoaction({latitude:this.location.latitude,longitude:this.location.longitude})),this.$emit("handleLocation",this.location),this.closeModal()):this.getLocation()},closeModal:function(){this.$emit("onHide")},getLocation:function(){var t=this;this.$store.dispatch("doLocation",!0).then((function(o){400===o?t.$toast("定位失败，请自行选择位置信息"):(t.$toast("自动定位成功"),t.$store.dispatch("doLocationInfo",{latitude:o.latitude,longitude:o.longitude,force:!0}).then((function(o){t.location=o,t.location.aId="",console.log("自动定位成功：",o),t.$emit("handleLocation",o),t.closeModal()})))}))},otherLocation:function(){this.$emit("otherLocation")},selectDefaultAddr:function(t){var o=this,i=this.addrList[t],n={region:i.rn,provinceId:i.pi,province:i.pt,cityId:i.ci,city:i.ct,districtId:i.ri,district:i.rt,townshipId:i.si,township:i.st,latitude:"",longitude:""};this.getLatLongByLocationInfo(n).then((function(t){console.log("getLatLongByLocationInfo:",t),400===t?o.$toast("根据位置信息获取经纬度失败"):(n.latitude=t.latitude,n.longitude=t.longitude,n.aId=i.id,n.district=n.region.split(" ")[2],localStorage.setItem("latitude",t.latitude),localStorage.setItem("longitude",t.longitude),localStorage.setItem("provinceId",n.provinceId),localStorage.setItem("cityId",n.cityId),localStorage.setItem("districtId",n.districtId),localStorage.setItem("townshipId",n.townshipId),o.setLocationInfo(n),o.setLoaction(t),o.closeModal(),o.$emit("handleLocation",n))}))}}),mounted:function(){this.showLoading=!0},beforeDestroy:function(){}},u=h,p=(i("90e36"),i("2877")),g=Object(p["a"])(u,a,c,!1,null,"4a97f0ad",null),f=g.exports,L=i("d3c8"),m=function(){return i.e("chunk-20178db3").then(i.bind(null,"5aa7"))},w={props:["storeId"],components:{lazyChangeGeographicLocation:m,addrSelect:f},data:function(){return{showChooseLoaction:!1,addrListShow:!1,addrData:[],addrLoad:!1}},created:function(){this.$store.getters.getLoginStatus&&this.getAddress()},computed:{},methods:{openAddr:function(){this.addrListShow=!0},changeLocation:function(t){this.showChooseLoaction=t},onHide:function(){this.showChooseLoaction=!1},closeAndBack:function(){this.showChooseLoaction=!1,this.addrListShow=!0},handleGeoLocation:function(t){this.showChooseLoaction=!1,this.handleLocation(t)},handleLocation:function(t){this.$emit("handleLocation",t)},getAddress:function(){var t=this;L["a"].getAddressList(null,!0).then((function(o){var i=o.data;i.success&&(t.addrData=i.data||[])}))},onHideAddr:function(){this.addrListShow=!1},otherLocationOption:function(){var t=this;this.addrLoad?(this.addrListShow=!1,this.showChooseLoaction=!0):m().then((function(){t.addrLoad=!0,t.addrListShow=!1,t.showChooseLoaction=!0}))}},watch:{}},I=w,b=(i("c4eb"),Object(p["a"])(I,n,e,!1,null,"0db0b182",null));o["default"]=b.exports}}]);
//# sourceMappingURL=chunk-16040466.ebb7c527.js.map