(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37f26112"],{"1ba8":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"recharge-result-page"},[a("div",{staticClass:"recharge-result",class:{"result-success":1==t.status,"result-fail":2==t.status}},[a("div",{staticClass:"result-icon"}),1==t.status?a("p",[t._v("支付成功")]):2==t.status?a("p",[t._v("支付失败")]):t._e()]),a("div",{staticClass:"result-warp"},[a("div",{staticClass:"result-list"},[a("div",[a("span",[t._v("充值号码")]),a("strong",[t._v(t._s(t._f("mobileFormate")(t.mobile)))])]),a("div",[a("span",[t._v("面值")]),a("strong",[t._v("￥"+t._s(t.money))])]),a("div",[a("span",[t._v("支付金额")]),a("strong",[t._v("￥"+t._s(t.payAmt))])]),t.payType?a("div",[a("span",[t._v("支付方式")]),a("strong",[t._v(t._s(t.payType))])]):t._e(),a("div",[a("span",[t._v("创建时间")]),a("strong",[t._v(t._s(t.createTime))])]),a("div",[a("span",[t._v("订单编号")]),a("strong",[t._v(t._s(t.orderSn))])]),2==t.status?a("div",[a("span",[t._v("失败原因")]),a("strong",[t._v(t._s(t.orderMessage))])]):t._e()]),2==t.status&&"cancel"!=t.orderStatus?a("payMethod",{attrs:{mobile:t.mobile,money:t.payAmt,repay:!0,orderSn:t.orderSn}}):t._e()],1),a("div",{staticClass:"recharge-tips"},[t._v("温馨提示：本业务不提供发票")])])},n=[],r=a("bbc2"),i=a("5f99"),o={name:"rechargeresult",components:{payMethod:i["a"]},filters:{mobileFormate:function(t){if(!t)return"";var e=t.split(""),a="";return e.forEach((function(t,e){3!==e&&7!==e||(a+=" "),a+=t})),a}},data:function(){return{status:0,mobile:"",money:"",payAmt:"",orderSn:"",createTime:"",paying:!1,payType:"",orderStatus:"cancel",orderMessage:""}},mounted:function(){var t=this;this.status=this.$route.query.status,this.orderSn=this.$route.query.orderSn,"weixin"===this.$route.query.payType&&this.$dialog.confirm({title:"支付结果确认",message:"是否完成本次支付",confirmButtonText:"已完成",cancelButtonText:"重新支付"}).then((function(){t.$router.push("/rechargeresult?orderSn="+t.orderSn)}))["catch"]((function(){})),this.fetchData()},methods:{fetchData:function(){var t=this,e=r["a"].GET_RECHARGE_DETAIL;this.$http.get("".concat(e,"?orderSn=").concat(this.orderSn,"&type=2")).then((function(e){var a=e.data;t.mobile=a.data.billKey,t.money=a.data.rechargeValue,t.payAmt=a.data.payAmt,t.createTime=a.data.orderTime,t.orderSn=a.data.orderSn,t.orderStatus=a.data.showStatus,t.orderMessage=a.data.showStatusDesc,t.payType=a.data.payType,t.status="paid"===a.data.payStatus?1:2}))}}},c=o,u=(a("4d89"),a("2877")),d=Object(u["a"])(c,s,n,!1,null,"271baf36",null);e["default"]=d.exports},"1bf8":function(t,e,a){"use strict";a("a28c")},"4d89":function(t,e,a){"use strict";a("9a74")},"5f99":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"recharge-methods"},t._l(t.payWay,(function(e){return a("div",{key:e.key,staticClass:"recharge-pay-item",class:{selected:e.key===t.curSelect},on:{click:function(a){return t.doSelect(e.key)}}},[a("div",{staticClass:"pay-logo",class:"logo-"+e.key},[a("i"),t._v(t._s(e.name))]),t._m(0,!0)])})),0),a("div",{staticClass:"recharge-btn"},[a("a",{class:{disable:t.paying},attrs:{href:"javascript:;"},on:{click:t.goPay}},[t.paying?a("span",[t._v("支付中...")]):a("span",[t.repay?a("span",[t._v("重新支付￥"+t._s(t._f("moneyFormate")(t.money)))]):a("span",[t._v("立即支付￥"+t._s(t._f("moneyFormate")(t.money)))])])]),t.hasCancel?a("a",{staticClass:"cancel-btn",attrs:{href:"javascript:;"},on:{click:t.deleteRecharge}},[t._v("取消充值订单")]):t._e()])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pay-selected"},[a("i")])}],r=a("fa7d"),i=a("bbc2"),o={name:"paymethod",props:{mobile:{default:""},orderSn:{default:""},money:{default:0},hasCancel:{default:!1},repay:{default:!1}},data:function(){return{curSelect:"alipay",paying:!1,payWay:[{key:"alipay",name:"支付宝支付"},{key:"weixin",name:"微信支付"}]}},filters:{moneyFormate:function(t){return r["a"].formatNumber(t)}},methods:{doSelect:function(t){this.curSelect=t},checkOrderInfo:function(){return this.$http.post(i["a"].RECHARGE_PHONE_SAVEORDER,{lifePayType:"mobile",payAmt:this.money,orderAmt:this.money,diamondCount:0,phoneConfigId:"",rechargeValue:this.money,billKey:this.mobile,version:1})},doPay:function(t,e){var a=this;"alipay"===this.curSelect?r["a"].openNewWindow("".concat(t,"?orderSn=").concat(e)):"weixin"===this.curSelect&&this.$http.get("".concat(t,"?orderSn=").concat(e)).then((function(t){var e=t.data;e.success?"SUCCESS"===e.data.returnCode&&"SUCCESS"===e.data.resultCode?r["a"].openNewWindow(e.data.mwebUrl,!0):a.$toast(e.data.returnMsg):a.$toast(e.message),a.paying=!1}))},goPay:function(){var t=this;if(!this.paying){this.paying=!0;var e="";"alipay"===this.curSelect?e=i["a"].PHONE_RECHARGE_ALIPAY:"weixin"===this.curSelect&&(e=i["a"].PHONE_RECHARGE_WEIXIN),this.hasCancel||this.repay?this.doPay(e,this.orderSn):this.checkOrderInfo().then((function(a){var s=a.data;if(s.success){var n=s.data.orderSn;t.doPay(e,n)}else{if("1100"===s.errorCode){t.$toast("请重新登录");var r=setTimeout((function(){clearTimeout(r),t.$store.dispatch("doLogin")}),2e3);return}if("您有未付款的充值订单，请优先处理!"===s.message)return t.$dialog.confirm({title:"充值提示",message:"您有未付款的充值订单，请优先处理!",confirmButtonText:"去处理"}).then((function(){t.$router.push("/rechargelist")}))["catch"]((function(){})),void(t.paying=!1);t.$toast(s.message),t.paying=!1}}))["catch"]((function(){t.paying=!1}))}},deleteRecharge:function(){var t=this;this.$dialog.confirm({title:"订单状态变更提醒",message:"确定取消当前充值订单吗？",confirmButtonText:"确定"}).then((function(){t.$http.get("".concat(i["a"].DELETE_RECHARGE,"?orderSn=").concat(t.orderSn)).then((function(e){var a=e.data;a.success?t.$router.replace("/rechargelist"):t.$toast(a.message)}))}))["catch"]((function(){}))}}},c=o,u=(a("1bf8"),a("2877")),d=Object(u["a"])(c,s,n,!1,null,"bbb3a36e",null);e["a"]=d.exports},"9a74":function(t,e,a){},a28c:function(t,e,a){}}]);
//# sourceMappingURL=chunk-37f26112.3dbeb2dd.js.map