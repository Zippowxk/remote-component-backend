(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57174cef"],{"0664":function(t,o,e){},"25e9":function(t,o,e){"use strict";var n=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"container"},[e("div",{class:{"coupon-value-label":!0,"home-style":t.forHomePage},style:{color:t.textColor}},["FIXED_CASH_COUPON"===t.couponType||"REBATE_COUPON"===t.couponType?e("span",{staticClass:"symbol"},[t._v("￥")]):t._e(),e("span",{staticClass:"integer",style:{fontSize:t.fontSize}},[t._v(t._s(t._f("formatPriceInt")(t.couponDisplayValue)))]),t.withFloat?e("span",{staticClass:"float"},[t._v(t._s(t._f("formatPriceFloat")(t.couponDisplayValue)))]):t._e(),"DISCOUNT_COUPON"===t.couponType?e("span",{staticClass:"sales"},[t._v("折")]):t._e()])])},i=[],a={name:"couponValueLabel",props:{couponValue:{type:String,default:"0"},couponType:{type:String,default:"FIXED_CASH_COUPON"},forHomePage:{type:Boolean,default:!1},maxFontSize:{type:String,default:"0.64"},textColor:{type:String,default:"#ED2856"}},computed:{fontSize:function(){return this.forHomePage?String(this.couponDisplayValue).length<6?"0.40rem":6===String(this.couponDisplayValue).length?"0.38rem":String(this.couponDisplayValue).length>6?"0.32rem":this.maxFontSize+"rem":String(this.couponDisplayValue).length<6?this.maxFontSize+"rem":6===String(this.couponDisplayValue).length?.875*this.maxFontSize+"rem":String(this.couponDisplayValue).length>6?.68*this.maxFontSize+"rem":this.maxFontSize+"rem"},withFloat:function(){var t=this.couponDisplayValue.split(".");return!!(t&&t.length>1&&"00"!==t[1]&&"0"!==t[1])},couponDisplayValue:function(){return"DISCOUNT_COUPON"===this.couponType?String(Number(this.couponValue)/10):this.couponValue}}},s=a,c=(e("4ff6"),e("2877")),u=Object(c["a"])(s,n,i,!1,null,"5a48cfec",null);o["a"]=u.exports},4714:function(t,o,e){"use strict";e.r(o);var n=function(){var t=this,o=t.$createElement,e=t._self._c||o;return t.couponList.length?e("div",{staticClass:"horionzal-content"},[e("div",{staticClass:"horionzal-row"},[t._l(t.couponList.slice(0,3),(function(o,n){return e("div",{key:o.couponTemplateCode,staticClass:"coupon-item",on:{click:function(e){return t.doGetCoupon(o,n)}}},[e("div",{staticClass:"coupon-info"},[e("coupon-value-label",{attrs:{fontSize:".42rem",forHomePage:!0,couponValue:o.couponValue,couponType:o.couponType}}),e("div",{staticClass:"coupon-text"},[t._v(" "+t._s(o.description)+" ")])],1),e("div",{staticClass:"coupon-btn"},[t._v(" "+t._s("2"==o.displayType?"去 使 用":"领 取")+" ")]),"2"==o.displayType?e("div",{staticClass:"icon-getted"}):t._e()])})),t.couponList.length>3?e("div",{staticClass:"coupon-more",on:{click:function(o){return t.more()}}}):t._e()],2)]):t._e()},i=[],a=e("c3f5"),s=e("25e9"),c={props:{data:{type:Object,default:function(){}},storeId:{type:String,default:""}},components:{couponValueLabel:s["a"]},data:function(){return{couponList:[]}},watch:{storeId:function(){this.getCouponList()}},mounted:function(){this.getCouponList()},methods:{getCouponList:function(){var t=this,o={storeId:this.storeId,couponCateId:"",startIndex:1,pageSize:20};Object(a["getCouponsCenter"])(o).then((function(o){o.success?t.couponList=o.data:t.$toast(o.message||"获取数据失败，请稍后重试！")}))},doGetCoupon:function(t,o){var e=this;console.log("coupon",t);var n=t.activityCode,i=t.couponTemplateCode,s=t.displayType,c=t.couponType,u=this.storeId;this.$util.gioTrackWithVariable("mall_store_click_model",{modelName:"优惠券列表",modelCode:"coupon",site_number:o+1+"",itemCode:i+""}),2===Number(s)?(this.$util.gioTrackWithVariable("MB15618",{ad_coupon_id:t.couponTemplateCode?t.couponTemplateCode+"":"null"}),this.$router.push("/usablecouponlist?activityCode=".concat(n,"&couponTemplateCode=").concat(i,"&couponType=").concat(c,"&storeId=").concat(u))):(this.$util.gioTrackWithVariable("MB15617",{ad_coupon_id:t.couponTemplateCode?t.couponTemplateCode+"":"null"}),this.$store.state.isLogin?Object(a["receiveCoupon"])({activityCode:n,couponTemplateCode:i,streetId:this.$store.getters["getlocationInfo"].townshipId}).then((function(t){if(t.success){var o=e.couponList;o.forEach((function(t){t.activityCode===n&&t.couponTemplateCode===i&&(t.displayType="2")}))}else e.$toast(t.message)})):this.$store.dispatch("doLogin"))},more:function(){this.$util.gioTrackWithVariable("mall_store_click_model",{modelName:"优惠券列表",modelCode:"coupon",site_number:"null",itemCode:"更多"}),this.$router.push("/voucher?storeCouponid=".concat(this.storeId))}}},u=c,l=(e("ac08"),e("2877")),p=Object(l["a"])(u,n,i,!1,null,"09aab4fd",null);o["default"]=p.exports},"4ff6":function(t,o,e){"use strict";e("0664")},ac08:function(t,o,e){"use strict";e("adb2")},adb2:function(t,o,e){}}]);
//# sourceMappingURL=chunk-57174cef.0406e55f.js.map