(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["goodsSearch","chunk-079cb250"],{1669:function(t,e,s){"use strict";var i=function(){return s.e("chunk-2b4715e4").then(s.bind(null,"c63d"))};e["a"]={components:{topFeedBack:i},data:function(){return{showToTopFlag:!1,scrollTarget:""}},mounted:function(){this.debouncedAction=this.$util.throttle(this.option,100)},methods:{handleScroll:function(t){this.debouncedAction()},option:function(){var t=this.$refs.toTop.scrollTop;this.showToTopFlag=t>200},hiddenFeedBack:function(){this.showToTopFlag=!1},fnScrollToTop:function(){this.scrollSmoothTo(0)},scrollSmoothTo:function(t){window.requestAnimationFrame||(window.requestAnimationFrame=function(t){return setTimeout(t,17)});var e=document.querySelector(this.scrollTarget),s=e.scrollTop,i=function i(){var o=t-s;s+=o/10,Math.abs(o)<1?e.scrollTo(0,t):(e.scrollTo(0,s),requestAnimationFrame(i))};i()}}}},"30d2":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"want-btn-container",class:{gray:"gray"===t.type,blue:"blue"===t.type,white:"white"===t.type}},[t.isHaierApp?s("div",{staticClass:"want-btn",on:{click:t.toFeedBack}},[s("span",{staticClass:"icon"}),s("span",{staticClass:"text"},[t._v("把你想要的告诉我们")])]):s("div",{staticClass:"want-text"},[s("span",[t._v("没有更多啦~")])])])},o=[],n={props:["type","classList"],data:function(){return{isHaierApp:!1}},created:function(){this.isHaierApp=this.$util.isUplus()},methods:{toFeedBack:function(){this.$store.getters.getLoginStatus?this.$util.openNewWindow("https://uplus.haier.com/uplusapp/problemFeedBack/feedback.html",!0,!1,!1):this.$store.dispatch("doLogin").then((function(t){400===t&&console.log("请求异常")}))}}},r=n,a=(s("eca0"),s("2877")),c=Object(a["a"])(r,i,o,!1,null,"f1f8e376",null);e["a"]=c.exports},"5f53":function(t,e,s){"use strict";s("7033")},"67e1":function(t,e,s){"use strict";s("73a9")},7033:function(t,e,s){},"73a9":function(t,e,s){},"7f6b":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"root-container",class:{"list-type-img":t.switchStyle},on:{scroll:t.handleScroll}},[t.isSkeletonLoading?s("skeleton",{attrs:{nums:2}}):s("div",{staticStyle:{height:"100%"}},[s("div",{staticClass:"search-result-contenter",staticStyle:{height:"100%"}},[s("div",{staticClass:"search_box",class:{"hide-scroll":!t.showSearchBar}},[s("van-sticky",[s("van-nav-bar",{attrs:{"left-arrow":""},on:{"click-left":t.goBack}},[t._t("left",(function(){return[s("i",{staticClass:"icon-back"})]}),{slot:"left"}),t._t("title",(function(){return[s("div",{staticStyle:{display:"flex","flex-direction":"row","align-items":"center",height:"0.92rem"}},[s("div",{staticClass:"search-input",on:{click:function(e){return e.stopPropagation(),t.showSearchComponent.apply(null,arguments)}}},[s("img",{staticClass:"search-input-img",attrs:{src:t.$globalIcon.commonSearchIcon,alt:""}}),s("div",{staticClass:"search-hotwords",class:{holderfont:!t.keyword}},[t._v(t._s(t.keyword||t.placeholder))]),s("van-icon",{staticClass:"search-clear",attrs:{size:"0.32rem",name:"clear"},on:{click:t.clearFn}})],1),s("div",{staticClass:"layoutImg",attrs:{slot:"action"},on:{click:t.layout},slot:"action"},[t.switchStyle?s("img",{attrs:{alt:"",src:t._f("imageToHttps")(t.$cdnImageUrl+"/search/home_navigation_search_goodslist_gongge@3x.png")}}):s("img",{attrs:{alt:"",src:t._f("imageToHttps")(t.$cdnImageUrl+"/search/home_navigation_search_goodslist_liebiao@3x.png")}})])])]}),{slot:"title"})],2),s("div",{directives:[{name:"show",rawName:"v-show",value:(t.keyword||"请输入搜索内容"!==t.placeholder)&&!t.keySearchShowFlag&&t.searchFlag&&"goods"===t.searchType,expression:"(keyword || placeholder!=='请输入搜索内容') && !keySearchShowFlag && searchFlag && searchType === 'goods'"}],staticClass:"filter-wrap"},[s("div",{staticClass:"left"},[s("ul",[s("li",{class:{active:"isHotDesc"===t.qs||"comments"===t.qs},on:{click:t.fnChangeHotModuleShowFlag}},[s("div",{staticClass:"text"},[t._v(t._s("isHotDesc"===t.qs?"综合":"comments"===t.qs?"评论":"综合"))]),s("div",{staticClass:"icon combined_icon"},["isHotDesc"===t.qs||"comments"===t.qs?s("img",{attrs:{alt:"",src:t._f("imageToHttps")(t.$cdnImageUrl+"/search/zonghe_blue.png")}}):t._e(),"isHotDesc"!==t.qs&&"comments"!==t.qs?s("img",{attrs:{alt:"",src:t._f("imageToHttps")(t.$cdnImageUrl+"/search/zonghe_gray.png")}}):t._e()])]),s("li",{class:{active:"saleDesc"===t.qs},on:{click:function(e){return t.doFilter("sale")}}},[s("div",{staticClass:"text"},[t._v("销量")])]),t.$toggleSwitch.commissionDisplay?s("li",{class:{active:"commission"===t.qs||"commissionDesc"===t.qs},on:{click:function(e){return t.doFilter("commission")}}},[s("div",{staticClass:"text"},[t._v("佣金")]),s("div",{staticClass:"icon"},["commission"!==t.qs?s("img",{attrs:{alt:"",src:t._f("imageToHttps")(t.$cdnImageUrl+"/search/triangle_up_light.png")}}):t._e(),"commission"===t.qs?s("img",{attrs:{alt:"",src:t._f("imageToHttps")(t.$cdnImageUrl+"/search/triangle_up_dark.png")}}):t._e(),"commissionDesc"!==t.qs?s("img",{attrs:{alt:"",src:t._f("imageToHttps")(t.$cdnImageUrl+"/search/triangle_down_light.png")}}):t._e(),"commissionDesc"===t.qs?s("img",{attrs:{alt:"",src:t._f("imageToHttps")(t.$cdnImageUrl+"/search/triangle_down_dark.png")}}):t._e()])]):t._e(),s("li",{class:{active:"price"===t.qs||"priceDesc"===t.qs},on:{click:function(e){return t.doFilter("price")}}},[s("div",{staticClass:"text"},[t._v("价格")]),s("div",{staticClass:"icon price-icon"},["price"!==t.qs?s("img",{attrs:{alt:"",src:t._f("imageToHttps")(t.$cdnImageUrl+"/search/price_up_gray.png")}}):t._e(),"price"===t.qs?s("img",{attrs:{alt:"",src:t._f("imageToHttps")(t.$cdnImageUrl+"/search/price_up_blue.png")}}):t._e(),"priceDesc"!==t.qs?s("img",{attrs:{alt:"",src:t._f("imageToHttps")(t.$cdnImageUrl+"/search/price_down_gray.png")}}):t._e(),"priceDesc"===t.qs?s("img",{attrs:{alt:"",src:t._f("imageToHttps")(t.$cdnImageUrl+"/search/price_down_blue.png")}}):t._e()])]),s("li",{class:{filter:!0,"filter-actived":t.fnChangeFlag},on:{click:t.fnShowGoodsFilter}},[s("div",{staticClass:"text"},[t._v("筛选")]),s("span",{staticClass:"filter-icon"})])])])]),t.activityTabs.length?s("div",{staticClass:"activity-tabs"},t._l(t.activityTabs,(function(e){return s("div",{key:e.id,class:{active:e.id==t.curActiveTab},on:{click:function(s){return t.changeActivityTab(e)}}},[t._v("优先展示"+t._s(e.tagName)+"商品")])})),0):t._e()],1)],1),s("div",{ref:"toTop",staticClass:"target"}),s("lazy-search",{directives:[{name:"show",rawName:"v-show",value:t.searchComponentShow,expression:"searchComponentShow"}],attrs:{from:"goodsSearch",hiddenId:"pop-up-hidden",storeId:t.storeId,show:t.searchComponentShow,words:t.clear?"":t.keyword},on:{"go-back":t.hideSearchComponent,search:t.searchEvent}}),s("div",{class:{search_content:!0,"scroll-hidden":t.scrollHidden}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.hotModuleShowFlag,expression:"hotModuleShowFlag"}],staticClass:"popup",style:{top:t.showSearchBar?"1.66rem":"0.86rem"},on:{touchmove:function(t){t.preventDefault()},click:t.fnChangeHotModuleShowFlag}},[s("ul",{on:{click:function(t){t.stopPropagation()}}},[s("li",{class:{active:"isHotDesc"===t.qs},on:{click:function(e){return t.doFilter("hot")}}},[s("div",{staticClass:"left"},[t._v("综合排序")]),s("div",{staticClass:"right"})]),s("li",{class:{active:"comments"===t.qs},on:{click:function(e){return t.doFilter("comment")}}},[s("div",{staticClass:"left"},[t._v("评论数从高到低")]),s("div",{staticClass:"right"})])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:(t.keyword||"请输入搜索内容"!==t.placeholder)&&("goods"===t.searchType&&!t.productList.length||"shop"===t.searchType&&!t.storeList.length)&&t.searchFlag&&!t.requestFlag,expression:"(keyword || placeholder!=='请输入搜索内容') && ((searchType === 'goods' && !productList.length) || (searchType === 'shop' && !storeList.length)) && searchFlag && !requestFlag"}],class:{"product-nodata":!0,"img-top-30":"shop"===t.searchType,"has-storeinfo":t.storeInfo&&t.storeInfo.id}},[t.storeInfo&&t.storeInfo.id?s("lazy-store-info",{attrs:{storeInfo:t.storeInfo}}):t._e(),s("img",{attrs:{alt:"",src:t.$cdnImageUrl+"/search/noWord.png"}}),s("p",[t._v("换个词试一下")]),t.isUplus?s("want-btn",{attrs:{type:"blue"}}):t._e()],1),s("van-pull-refresh",{directives:[{name:"show",rawName:"v-show",value:(t.keyword||"请输入搜索内容"!==t.placeholder)&&t.productList.length&&"goods"===t.searchType,expression:"(keyword || placeholder!=='请输入搜索内容') && productList.length && searchType === 'goods'"}],staticClass:"search-warp",class:{hasTab:t.activityTabs.length},on:{refresh:t.onRefresh},scopedSlots:t._u([{key:"pulling",fn:function(){return[s("refreshLoading",{attrs:{text:"下拉刷新"}})]},proxy:!0},{key:"loosing",fn:function(){return[s("refreshLoading",{attrs:{text:"下拉刷新"}})]},proxy:!0},{key:"loading",fn:function(){return[s("refreshLoading",{attrs:{text:"加载中"}})]},proxy:!0},{key:"success",fn:function(){return[s("refreshLoading",{attrs:{text:"加载完成"}})]},proxy:!0}]),model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[s("div",{staticClass:"list-header"},[t.storeInfo&&t.storeInfo.id?s("lazy-store-info",{attrs:{storeInfo:t.storeInfo}}):t._e()],1),s("van-list",{attrs:{finished:t.finished,"immediate-check":!1,offset:10,"finished-text":"没有更多啦~"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[s("lazy-public-product-list",{attrs:{id:"pop-up-hidden",skulive:t.productSkus,productList:t.productList,switchStyle:t.switchStyle,visitStore:t.storeId,taskId:t.taskId,stageId:t.stageId}}),s("template",{slot:"finished"},[s("want-btn",{attrs:{type:t.switchStyle?"white":"gray"}})],1)],2)],1)],1),t.filterLoad?s("van-popup",{style:{width:"7rem",height:"100vh"},attrs:{"overlay-class":"zindex9998",position:"right"},on:{close:t.onGoodsFilterHide},model:{value:t.filterFlag,callback:function(e){t.filterFlag=e},expression:"filterFlag"}},[s("lazy-goods-filter",{ref:"filter",attrs:{stock:t.stock,price:t.price,brandList:t.brandList,lstAttributes:t.lstAttributes,location:t.location},on:{fnConfirm:t.fnConfirm,fnFold:t.fnFold,fnReset:t.fnReset,fnSelect:t.fnSelect,fnShowGoodsFilter:t.fnShowGoodsFilter,changeAddr:t.changeAddr}})],1):t._e(),s("top-feedBack",{attrs:{isShow:t.showToTopFlag&&!!t.productList.length},on:{hiddenFeedBack:t.hiddenFeedBack,toTop:t.fnScrollToTop}}),s("van-popup",{style:{width:"7rem",height:"100vh"},attrs:{"overlay-class":"zindex9998",position:"right"},model:{value:t.addrShow,callback:function(e){t.addrShow=e},expression:"addrShow"}},[t.addrShow?s("lazy-addr-select",{attrs:{addrList:t.addrData},on:{onHide:t.onHideAddr,handleLocation:t.handleLocation,otherLocation:t.otherLocationOption}}):t._e()],1),s("van-popup",{style:{width:"7rem",height:"100vh"},attrs:{"overlay-class":"zindex9998",position:"right"},model:{value:t.locationshow,callback:function(e){t.locationshow=e},expression:"locationshow"}},[t.locationshow?s("lazy-change-geographic-location",{attrs:{isShowBack:!0},on:{onHide:t.onHideLocation,closeAndBack:t.closeAndBack,handleLocation:t.handleLocation}}):t._e()],1)],1)])],1)},o=[],n=s("a34a"),r=s.n(n),a=s("d7a6"),c=s("1669"),l=s("30d2"),u=s("99fe"),d=s("c3f5"),h=s("d3c8"),f=function(t,e){var s=e._c;return s("div",e._l(e.props.nums,(function(t){return s("div",{key:t,staticClass:"skeleton"},[s("div",{staticClass:"skeleton-img"}),e._m(0,!0)])})),0)},g=[function(t,e){var s=e._c;return s("div",{staticClass:"skeleton-body"},[s("div",{staticClass:"skeleton-big"}),s("div",{staticClass:"skeleton-middle"}),s("div",{staticClass:"skeleton-small"}),s("div",{staticClass:"skeleton-big"}),s("div",{staticClass:"skeleton-small"})])}],p={},b=p,m=(s("5f53"),s("2877")),S=Object(m["a"])(b,f,g,!0,null,"1b5bdb29",null),w=S.exports;function v(t,e,s,i,o,n,r){try{var a=t[n](r),c=a.value}catch(l){return void s(l)}a.done?e(c):Promise.resolve(c).then(i,o)}function y(t){return function(){var e=this,s=arguments;return new Promise((function(i,o){var n=t.apply(e,s);function r(t){v(n,i,o,r,a,"next",t)}function a(t){v(n,i,o,r,a,"throw",t)}r(void 0)}))}}function k(t){return O(t)||L(t)||I(t)||T()}function T(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function I(t,e){if(t){if("string"===typeof t)return _(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(t):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?_(t,e):void 0}}function L(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function O(t){if(Array.isArray(t))return _(t)}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,i=new Array(e);s<e;s++)i[s]=t[s];return i}function C(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function F(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?C(Object(s),!0).forEach((function(e){A(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):C(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function A(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var P=function(){return s.e("store-info").then(s.bind(null,"b301"))},x=function(){return Promise.all([s.e("chunk-3aea2a64"),s.e("productList")]).then(s.bind(null,"e569"))},j=function(){return s.e("addrSelect").then(s.bind(null,"981c"))},H=function(){return s.e("geographic").then(s.bind(null,"2edf"))},q=function(){return s.e("searchComponent").then(s.bind(null,"1427"))},E=function(){return s.e("goodsFilter").then(s.bind(null,"67a6"))},$=!1,D=0,U={name:"goodsSearch",mixins:[c["a"]],components:{skeleton:w,refreshLoading:a["default"],lazySearch:q,lazyGoodsFilter:E,lazyChangeGeographicLocation:H,lazyAddrSelect:j,lazyPublicProductList:x,lazyStoreInfo:P,wantBtn:l["a"]},data:function(){return{isSkeletonLoading:!0,searchComponentLoad:!1,searchComponentShow:!1,searchComponentShowDelay:!1,activityTabs:[],curActiveTab:"",filterLoad:!1,placeholder:"",currentIndex:0,searchType:"goods",keySearchShowFlag:!1,searchFlag:!1,hotModuleShowFlag:!1,keyword:"",qs:"isHotDesc",filterData:"hasStock@all@0",pageIndex:1,pageSize:10,productList:[],finished:!1,loading:!1,isLoading:!1,filterFlag:!1,stock:"hasStock",price:"",brandList:[],lstAttributes:[],requestFlag:!1,storeList:[],fromType:"1",visitStore:"",switchStyle:!1,newKeyWord:!1,addrShow:!1,locationshow:!1,addrData:[],fnChangeFlag:!1,storeId:"",oldLocationStr:"",oldStoreId:"",scrollPosition:0,scrollHidden:!1,productSkus:{},clear:!1,showSearchBar:!0,storeInfo:void 0,isUplus:!1,scrollTarget:".root-container",stageId:"",taskId:""}},computed:{location:function(){return this.$store.getters["getlocationInfo"]},memberId:function(){return sessionStorage.getItem("shareUserId")||""}},created:function(){this.storeId=this.$route.query.visitStore,this.isUplus=this.$util.isUplus(),this.taskId=this.$route.query.taskId||"",this.stageId=this.$route.query.stageId||"",this.storeId?this.fromType=2:this.fromType=1,this.showToTopFlag=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop>150,console.log(this.showToTopFlag),sessionStorage.setItem("search-keyword",""),this.$store.getters.getLoginStatus&&this.getAddress(),this.getSelectBoxTagList(),this.oldLocationStr=this.location.provinceId+"|"+this.location.cityId+"|"+this.location.districtId+"|"+this.location.townshipId,this.oldStoreId=this.storeId},mounted:function(){var t=this;if(this.$route.query.productCateId)return this.initParam(),this.showToTopFlag=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop>150,this.productCateId=this.$route.query.productCateId,this.filterData=this.$route.query.filterData||"hasStock@all@0",this.filterData&&(this.stock=this.filterData.split("@")[0],this.brandListIds=this.filterData.split("@")[1].split(";"),this.lstAttributesIds=this.filterData.split("@")[3]?this.filterData.split("@")[3].split(";"):""),void this.wdCommonSearchNew().then((function(e){t.$util.gioTrackWithVariable("MB15630",{search_words:t.keyword?t.keyword+"":"null",category_id:t.productCateId?t.productCateId+"":"null",storeId:t.storeId?t.storeId+"":"null"})}))["catch"]((function(t){console.log(t)}));this.storeId=this.$route.query.visitStore,this.storeId?this.fromType=2:this.fromType=1;var e=this.$route.query.keyword;this.newKeyWord=!e,e&&e!==sessionStorage.getItem("search-keyword")?(sessionStorage.setItem("search-keyword",e),this.pageIndex=1,this.keyword=this.$route.query.keyword,this.doSearch()):$&&e!==sessionStorage.getItem("search-keyword")&&(this.initParam(),$=!1),this.storeId!==this.oldStoreId&&this.storeId&&this.oldStoreId&&(console.log("店铺发生变化"),this.oldStoreId=this.storeId,this.initParam(),this.keyword=this.$route.query.keyword);var s=this.location.provinceId+"|"+this.location.cityId+"|"+this.location.districtId+"|"+this.location.townshipId;if(s!==this.oldLocationStr&&(console.log("地址发生变化"),this.oldLocationStr=s,this.keyword&&(this.requestFlag=!1,this.doSearch())),!this.keyword)var i=setTimeout((function(){clearTimeout(i),q().then((function(){t.isSkeletonLoading=!1,t.showSearchComponent()}))}),100)},beforeRouteEnter:function(t,e,s){"home"===e.name&&($=!0,t.meta.scrollTop=0),s()},beforeRouteLeave:function(t,e,s){this.scrollPosition=document.querySelector(".root-container").scrollTop,console.log(e,"=======from========");var i=history.state?history.state:{};console.log(i);var o=Object.assign(i,{title:"",url:window.location.href}),n=this.$util.parseParamsToQuery(F(F({},e.query),{},{keyword:this.keyword})),r=Object({NODE_ENV:"production",VUE_APP_ENV:"development",VUE_APP_V_CONSLOE:"hide",VUE_APP_LOG:"hide",VUE_APP_PUBLIC_PATH:"/sgmobile",VUE_APP_HOST_PIC:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile",VUE_APP_HOST4:"https://m-test.ehaier.com",VUE_APP_MHOSTA:"https://m-test.ehaier.com",VUE_APP_PHOST:"https://m-test.ehaier.com",VUE_APP_DHOST:"https://d-test.ehaier.com",VUE_APP_OHOST:"https://o-test.ehaier.com",VUE_APP_SHOST:"https://s-test.ehaier.com",VUE_APP_FHOST:"https://m-test.ehaier.com",VUE_APP_THOST:"https://m-test.ehaier.com",VUE_APP_ADMINEHOST:"https://uadmin.testehaier.com",VUE_APP_STOREHOST:"https://store-test.ehaier.com",VUE_APP_SYNHOST:"https://sanyiniao-test.haier.net",BASE_URL:"/sgmobile/"}).VITE_ENV?"":"/sgmobile",a=r+e.path+n;history.replaceState(o,"",a),s()},activated:function(){var t=this;this.$nextTick((function(){var e=t.scrollPosition;document.querySelector(".root-container").scrollTo(0,e||0)}))},deactivated:function(){},methods:{getSelectBoxTagList:function(){var t=this;Object(u["d"])().then((function(e){var s=e.data;console.log(s,"result getSelectBoxTagList"),t.activityTabs=s||[]}))},changeActivityTab:function(t){this.curActiveTab===t.id?this.curActiveTab="":this.curActiveTab=t.id,console.log("changeActivityTab"),this.doSearch()},showSearchComponent:function(){this.searchComponentShow=!0},hideSearchComponent:function(){this.clear=!1,this.keyword||this.goBack(),this.searchComponentShow=!1},handleScroll:function(t){this.showToTopFlag=t.target.scrollTop>200,t.target.scrollTop-D>=0&&t.target.scrollTop>100?this.showSearchBar=!1:this.showSearchBar=!0,D=t.target.scrollTop},changeAddr:function(){this.addrShow=!0},onHideAddr:function(){this.addrShow=!1},handleLocation:function(){this.locationshow=!1,this.addrShow=!1},otherLocationOption:function(){this.locationshow=!0},onHideLocation:function(){this.locationshow=!1},closeAndBack:function(){this.locationshow=!1},layout:function(){this.switchStyle=!this.switchStyle},fnChangeSearchType:function(t){this.searchType!==t&&(this.requestFlag||(this.searchType=t,this.searchFlag&&this.doSearch()))},searchEvent:function(t){this.clear=!1,this.searchComponentShow=!1,this.productCateId="",t&&t.alreayRoute&&(this.searchComponentShow=!0),"string"===typeof t&&(console.log("++++++++keyword+++++++++++"),this.curActiveTab="",this.doSearch(t))},doSearch:function(t){var e=this;t?this.keyword=t:t=this.keyword,sessionStorage.setItem("search-keyword",t),this.$store.commit("history/addHistoryItem",t),this.stock="hasStock",this.price="",this.qs="isHotDesc",this.filterData="hasStock@all@0",this.brandList=[],this.lstAttributes=[],this.pageIndex=1,this.wdCommonSearchNew().then((function(t){e.$util.gioTrackWithVariable("MB15630",{search_words:e.keyword?e.keyword+"":"null",category_id:e.productCateId?e.productCateId+"":"null",storeId:e.storeId?e.storeId+"":"null"}),e.$nextTick((function(){e.$el.querySelector(".target").scrollIntoView({block:"start"})}))}))["catch"]((function(t){console.log(t)}))},doFilter:function(t){if("hot"===t){if(this.hotModuleShowFlag=!1,"isHotDesc"===this.qs)return;this.qs="isHotDesc"}else if("sale"===t){if(this.$util.gioTrackWithVariable("MB15632"),this.hotModuleShowFlag=!1,"saleDesc"===this.qs)return;this.qs="saleDesc"}else if("commission"===t)this.hotModuleShowFlag=!1,"commission"===this.qs?this.qs="commissionDesc":this.qs="commission";else if("price"===t)this.$util.gioTrackWithVariable("MB15633",{sort:"price"===this.qs?"降序":"升序"}),this.hotModuleShowFlag=!1,"price"===this.qs?this.qs="priceDesc":this.qs="price";else if("comment"===t){if(this.hotModuleShowFlag=!1,"comments"===this.qs)return;this.qs="comments"}this.pageIndex=1,this.wdCommonSearchNew()["catch"]((function(t){console.log(t)})),this.$el.querySelector(".target").scrollIntoView({block:"start"})},fnShowGoodsFilter:function(){var t=this;this.scrollHidden=!0,this.filterFlag?(this.filterFlag=!this.filterFlag,this.fnHasChanged()):E().then((function(){t.filterLoad=!0,t.$nextTick((function(e){t.filterFlag=!t.filterFlag,t.fnHasChanged()}))})),this.hotModuleShowFlag=!1},onGoodsFilterHide:function(){this.scrollHidden=!1},fnFold:function(t){this.lstAttributes.forEach((function(e){e.id===t&&(e.foldFlag=!e.foldFlag)})),this.lstAttributes.splice(0,1,this.lstAttributes[0])},fnSelect:function(t){var e;if("brand"===t.type){if(0===t.index)this.brandList.forEach((function(t){t.selected=!1})),this.brandList[0].selected=!0;else{this.brandList[0].selected=!1,this.brandList[t.index].selected=!this.brandList[t.index].selected;var s=k(this.brandList);s.splice(0,1),e=s.some((function(t){return!1===t.selected})),e||(this.brandList.forEach((function(t){t.selected=!1})),this.brandList[0].selected=!0)}e=this.brandList.some((function(t){return!0===t.selected})),e||(this.brandList[0].selected=!0),this.brandList.splice(t.index,1,this.brandList[t.index])}else if("other"===t.type){if(0===t.subIndex)this.lstAttributes[t.index].lstAttributeOptions.forEach((function(t){t.selected=!1})),this.lstAttributes[t.index].lstAttributeOptions[0].selected=!0;else{this.lstAttributes[t.index].lstAttributeOptions[0].selected=!1,this.lstAttributes[t.index].lstAttributeOptions[t.subIndex].selected=!this.lstAttributes[t.index].lstAttributeOptions[t.subIndex].selected;var i=k(this.lstAttributes[t.index].lstAttributeOptions);i.splice(0,1),e=i.some((function(t){return!1===t.selected})),e||(this.lstAttributes[t.index].lstAttributeOptions.forEach((function(t){t.selected=!1})),this.lstAttributes[t.index].lstAttributeOptions[0].selected=!0)}e=this.lstAttributes[t.index].lstAttributeOptions.some((function(t){return!0===t.selected})),e||(this.lstAttributes[t.index].lstAttributeOptions[0].selected=!0),this.lstAttributes.splice(t.index,1,this.lstAttributes[t.index])}else"stock"===t.type&&(this.stock=t.index)},clearFn:function(){this.clear=!0,this.curActiveTab=""},fnReset:function(){this.stock="hasStock",this.price="",this.brandList.length>0&&(this.brandList.forEach((function(t){t.selected=!1})),this.brandList[0].selected=!0,this.brandList.splice(0,1,this.brandList[0])),this.lstAttributes.length>0&&(this.lstAttributes.forEach((function(t,e){t.lstAttributeOptions.forEach((function(t,e){t.selected=!1,0===e&&(t.selected=!0)}))})),this.lstAttributes.splice(0,1,this.lstAttributes[0])),this.fnHasChanged()},fnHasChanged:function(){var t=this;this.fnChangeFlag=!1,this.$nextTick((function(){"hasStock"!==t.stock&&(t.fnChangeFlag=!0),""!==t.price&&(t.fnChangeFlag=!0),t.$refs.filter&&(t.$refs.filter.lowestPrice||t.$refs.filter.highestPrice)&&(t.fnChangeFlag=!0),t.brandList.length>0&&t.brandList.forEach((function(e,s){e.selected&&0!==s&&(t.fnChangeFlag=!0)})),t.lstAttributes.length>0&&t.lstAttributes.forEach((function(e,s){e.lstAttributeOptions.forEach((function(e,s){e.selected&&0!==s&&(t.fnChangeFlag=!0)}))}))}))},fnConfirm:function(t){this.price=t.price;var e=[];e.push(this.location.region),e.push(this.stock),e.push(this.price);var s="";this.brandList.length>0&&(this.brandList.forEach((function(t,i){t.selected&&(s="".concat(s).concat(t.id,";"),e.push(t.brandName))})),s=s.slice(0,s.length-1));var i=[];this.lstAttributes.length>0&&this.lstAttributes.forEach((function(t,s){var o=[];t.lstAttributeOptions.forEach((function(t){t.selected&&(o.push(t.id),e.push(t.optionValue))})),i.push(o.join(";"))})),this.$util.gioTrackWithVariable("MB15634",{filter:e.join(",")}),i=i.join(","),this.filterData="".concat(this.stock,"@").concat(s,"@").concat(t.price,"@").concat(i),console.log("this.filterData:",this.filterData),this.pageIndex=1,this.wdCommonSearchNew()["catch"]((function(t){console.log(t)})),this.$el.querySelector(".target").scrollIntoView({block:"start"}),this.fnHasChanged()},associatedSearchStore:function(t,e,s){var i,o=this;e&&-1!==e.indexOf("@")&&(i=e.split("@")[1]),"all"===i&&(i=void 0),Object(u["a"])({keyName:t,brandId:i,productCateId:s||void 0,visitStore:this.storeId||"",shareId:this.$store.getters.getShareId||""}).then((function(t){t.success?o.storeInfo=t.data:console.log(t.message)}))["catch"]((function(t){console.log(t)}))},wdCommonSearchNew:function(){var t=this;return this.requestFlag?Promise.reject(new Error("this.requestFlag is true")):(this.associatedSearchStore(this.keyword||this.placeholder||"",this.filterData,this.productCateId),this.requestFlag=!0,new Promise((function(e,s){Object(u["j"])({provinceId:t.location.provinceId,cityId:t.location.cityId,districtId:t.location.districtId,streetId:t.location.townshipId,fromType:t.fromType,visitStore:t.storeId,memberId:t.memberId,keyword:t.keyword||t.placeholder||"",qs:t.qs,filterData:t.filterData,pageIndex:t.pageIndex,pageSize:t.pageSize,actTagId:t.curActiveTab||"",productCateId:t.productCateId}).then(function(){var s=y(r.a.mark((function s(i){var o,n;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.isSkeletonLoading=!1,!i.success){s.next=26;break}if(t.finished=i.data.productList.length!==t.pageSize,o=[],!i.data.productList.length){s.next=14;break}return s.next=7,t.getPriceByProductList(i.data.traceId);case 7:n=s.sent,i.data.productList.forEach((function(e){o.push(e.productId),n.forEach((function(t){e.sku===t.sku&&(e.finalPrice=t.lowestFlashPrice||t.finalPrice,e.isLowestFlash=!!t.lowestFlashPrice,e.skku=t.skku,e.commission=t.commission,e.productAct=t.productAct,e.productActNew=t.productActNew,e.productActTerm=t.productActTerm,e.priceType=t.priceType,e.defaultPrice=t.defaultPrice,e.promotion=t.promotion,e.plusPrice=t.plusPrice,e.minCommission=t.minCommission,e.maxCommission=t.maxCommission,e.clustersNum=t.clustersNum)})),t.activityTabs.forEach((function(t){t.id===e.actTagId&&(e.productActNew=t.tagName,e.productActTerm="",e.hasTag=!0)}))})),t.getSkusLive(o),1===t.pageIndex&&(t.productList=[]),t.productList=t.productList.concat(i.data.productList),s.next=15;break;case 14:1===t.pageIndex&&(t.productList=[]);case 15:t.newKeyWord=!!t.productList,console.log(t.newKeyWord),0===t.brandList.length&&0===t.lstAttributes.length&&t.wdMarketFiltrate(t.productCateId||i.data.productCateIds||""),t.$util.gioTrackWithVariable("MB13406",{search_words:t.keyword?t.keyword+"":"null",productId_var:o.join()||"null",pageNumber:t.pageIndex+""||"null"}),t.searchFlag=!0,t.requestFlag=!1,t.loading=!1,t.isLoading=!1,e(),s.next=31;break;case 26:t.productList=[],t.searchFlag=!0,t.requestFlag=!1,t.loading=!1,t.isLoading=!1;case 31:case"end":return s.stop()}}),s)})));return function(t){return s.apply(this,arguments)}}())["catch"]((function(){t.isSkeletonLoading=!1}))})))},getSkusLive:function(t){var e=this;Object(u["e"])(t).then((function(t){var s=t.data;console.log(s,"result"),e.productSkus=F(F({},e.productSkus),s),console.log(e.productSkus,"===++++ productSkus ++++===")}))},getPriceByProductList:function(t){var e=this;return new Promise((function(s,i){Object(d["getPriceByProductList"])({traceId:t}).then((function(t){t.success?s(t.products):(e.searchFlag=!0,e.$toast(t.message))}))}))},wdMarketFiltrate:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Object(d["wdMarketFiltrate"])({productCateId:e,key:this.keyword}).then((function(e){if(e.success){t.brandList=e.data.brandList||[],"5"===t.$route.query.storeType&&(t.brandList=[]),t.lstAttributes=e.data.filterMap?e.data.filterMap.lstAttributes:[],t.brandList.forEach((function(t,e){t.selected=!1,0===e&&(t.selected=!0,t.id="all")}));var s=new Set(t.lstAttributes);s["delete"](null),t.lstAttributes=Array.from(s),t.lstAttributes.forEach((function(t,e){t.foldFlag=!0,t.lstAttributeOptions.forEach((function(t,e){t.selected=!1,0===e&&(t.selected=!0)}))}))}else t.$toast(e.message)}))},searchStore:function(){var t=this;if(!this.requestFlag)return this.requestFlag=!0,new Promise((function(e,s){Object(u["i"])({k:t.keyword||t.placeholder,p:t.pageIndex,s:t.pageSize}).then(function(){var s=y(r.a.mark((function s(i){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:i.success?(t.finished=!i.data||i.data.length!==t.pageSize,1===t.pageIndex&&(t.storeList=[]),t.storeList=t.storeList.concat(i.data||[]),t.searchFlag=!0,t.requestFlag=!1,t.loading=!1,t.isLoading=!1,e()):(t.searchFlag=!0,t.requestFlag=!1,t.loading=!1,t.isLoading=!1,t.$toast(i.message));case 1:case"end":return s.stop()}}),s)})));return function(t){return s.apply(this,arguments)}}())}))},fnChangeHotModuleShowFlag:function(){this.$util.gioTrackWithVariable("MB15631"),this.hotModuleShowFlag=!this.hotModuleShowFlag},onLoad:function(){this.requestFlag||(this.pageIndex++,"shop"!==this.searchType?this.wdCommonSearchNew()["catch"]((function(t){console.log(t)})):this.searchStore())},onRefresh:function(){this.pageIndex=1,"shop"!==this.searchType?this.wdCommonSearchNew()["catch"]((function(t){console.log(t)})):this.searchStore()},goBack:function(){this.$store.dispatch("doHistoryBack")},initParam:function(){console.log("===================================="),console.log("initParam"),console.log("===================================="),this.searchType="goods",this.keySearchShowFlag=!1,this.searchFlag=!1,this.hotSearchList=[],this.keywordsList=[],this.hotModuleShowFlag=!1,this.keyword="",this.qs="isHotDesc",this.filterData="hasStock@all@0",this.pageIndex=1,this.pageSize=10,this.productList=[],this.finished=!1,this.loading=!1,this.isLoading=!1,this.filterFlag=!1,this.stock="hasStock",this.price="",this.brandList=[],this.lstAttributes=[],this.showToTopFlag=!1,this.requestFlag=!1,this.storeList=[]},getAddress:function(){var t=this,e={};h["a"].getAddressList(e).then((function(e){var s=e.data;s.success&&(console.log("addrData"),t.addrData=s.data||[],console.log(t.addrData))}))}}},B=U,N=(s("67e1"),Object(m["a"])(B,i,o,!1,null,"07ba4300",null));e["default"]=N.exports},8261:function(t,e,s){},"99fe":function(t,e,s){"use strict";s.d(e,"b",(function(){return r})),s.d(e,"f",(function(){return a})),s.d(e,"d",(function(){return c})),s.d(e,"c",(function(){return l})),s.d(e,"g",(function(){return u})),s.d(e,"j",(function(){return d})),s.d(e,"e",(function(){return h})),s.d(e,"i",(function(){return f})),s.d(e,"h",(function(){return g})),s.d(e,"a",(function(){return p}));var i=s("bbc2"),o=s("1c03"),n=s("f121"),r=function(t){return Object(o["b"])(i["a"].defaultSearch,t,{baseURL:n["a"].SHOST})},a=function(t){return Object(o["b"])(i["a"].hotSearch,t,{baseURL:n["a"].SHOST})},c=function(t){return Object(o["b"])(i["a"].getSelectBoxTagList,t,{baseURL:n["a"].SHOST})},l=function(t){return Object(o["c"])(i["a"].topSearch,t,{baseURL:n["a"].SHOST})},u=function(t){return Object(o["b"])(i["a"].searchDropdown,t,{baseURL:n["a"].SHOST})},d=function(t){return Object(o["b"])(i["a"].wdCommonSearchNew,t,{baseURL:n["a"].SHOST},!0)},h=function(t){return Object(o["c"])(i["a"].getSkuLives,t,{baseURL:n["a"].HOST},!0)},f=function(t){return Object(o["b"])(i["a"].getStoreInformation,t,{baseURL:n["a"].SHOST},!0)},g=function(t){return Object(o["b"])(i["a"].getGuessYouLikeIt,t,{baseURL:n["a"].SHOST},!1)},p=function(t){return Object(o["b"])(i["a"].associatedSearchStore,t,{baseURL:n["a"].SHOST},!1)}},c3f5:function(t,e,s){"use strict";s.r(e),s.d(e,"manage",(function(){return r})),s.d(e,"collectStore",(function(){return a})),s.d(e,"enterprise",(function(){return c})),s.d(e,"getNavigations",(function(){return l})),s.d(e,"getImgCaptcha",(function(){return u})),s.d(e,"getViewCouponCate",(function(){return d})),s.d(e,"getCouponsCenter",(function(){return h})),s.d(e,"receiveCoupon",(function(){return f})),s.d(e,"commonLoadItemNew",(function(){return g})),s.d(e,"getPriceByProductList",(function(){return p})),s.d(e,"wdMarketFiltrate",(function(){return b})),s.d(e,"getNearbyList",(function(){return m})),s.d(e,"getBusinessCustomer",(function(){return S})),s.d(e,"GET_BANNER",(function(){return w})),s.d(e,"getLiveByStoreId",(function(){return v})),s.d(e,"getStoreFlashSale",(function(){return y})),s.d(e,"getCate",(function(){return k})),s.d(e,"getStoreSign",(function(){return T})),s.d(e,"getSelectedModel",(function(){return I})),s.d(e,"getCustomPageModel",(function(){return L})),s.d(e,"getUserCases",(function(){return O})),s.d(e,"getRecommendList",(function(){return _})),s.d(e,"getVRPreviews",(function(){return C})),s.d(e,"getPreSales",(function(){return F})),s.d(e,"getStoreSceneTabs",(function(){return A})),s.d(e,"getStoreScene",(function(){return P})),s.d(e,"getStoreSceneNew",(function(){return x})),s.d(e,"getSubStoreList",(function(){return j})),s.d(e,"getShopPreview",(function(){return H})),s.d(e,"getCustomPagePreview",(function(){return q})),s.d(e,"getStoreSignPreview",(function(){return E})),s.d(e,"getStoreNewProducts",(function(){return $})),s.d(e,"checkPrivateDomain",(function(){return D})),s.d(e,"getSuitList",(function(){return U})),s.d(e,"getSuitImage",(function(){return B})),s.d(e,"getSuitDetail",(function(){return N})),s.d(e,"validateTabOrSpace",(function(){return R})),s.d(e,"checkIdentity",(function(){return M})),s.d(e,"getFindGoods",(function(){return V}));var i=s("bbc2"),o=s("1c03"),n=s("f121"),r=function(t){return Object(o["b"])(i["a"].manage,t)},a=function(t){return Object(o["b"])(i["a"].collectStore,t)},c=function(t){return Object(o["b"])(i["a"].enterprise,t)},l=function(t){return Object(o["b"])(i["a"].getNavigations,t)},u=function(t){return Object(o["b"])(i["a"].getImgCaptcha,t)},d=function(t){return Object(o["b"])(i["a"].getViewCouponCate,t)},h=function(t){return Object(o["b"])(i["a"].getCouponsCenter,t,{},!0)},f=function(t){return Object(o["b"])(i["a"].receiveCoupon,t)},g=function(t){return Object(o["b"])(i["a"].commonLoadItemNew,t,{baseURL:n["a"].SHOST},!0)},p=function(t){return Object(o["b"])(i["a"].getPriceByProductList,t,{baseURL:n["a"].SHOST},!0)},b=function(t){return Object(o["b"])(i["a"].wdMarketFiltrate,t,{baseURL:n["a"].SHOST})},m=function(t){return Object(o["b"])(i["a"].nearbyList,t,{})},S=function(t){return Object(o["b"])(i["a"].getBusinessCustomer,t,{baseURL:n["a"].HOST4})},w=function(t){return Object(o["b"])(i["a"].GET_BANNER,t)},v=function(t){return Object(o["b"])(i["a"].getLiveByStoreId,t)},y=function(t){return Object(o["b"])(i["a"].getStoreFlashSale,t)},k=function(t){return Object(o["b"])(i["a"].getCate,t)},T=function(t){return Object(o["b"])(i["a"].storeSign,t)},I=function(t){return Object(o["b"])(i["a"].storeSelectedModel,t)},L=function(t){return Object(o["b"])(i["a"].getCustomPage,t)},O=function(t){return Object(o["b"])(i["a"].GET_STORE_SCENE,t)},_=function(t){return Object(o["b"])(i["a"].recommendProducts,t)},C=function(t){return Object(o["b"])(i["a"].storeVRPreviewList,t)},F=function(t,e){return e?Object(o["b"])(i["a"].platformPreSale,t):Object(o["c"])("".concat(i["a"].preSaleList,"?storeId=").concat(t.storeId))},A=function(t){return Object(o["b"])(i["a"].sceneTabList,t)},P=function(t){return Object(o["c"])(i["a"].sceneList,t)},x=function(t){return Object(o["b"])(i["a"].sceneListNew,t,{baseURL:n["a"].DHOST})},j=function(t){return Object(o["b"])(i["a"].subStoreList,t)},H=function(t){return Object(o["c"])(i["a"].shopPreview,t,{baseURL:n["a"].STOREHOST})},q=function(t){return Object(o["c"])(i["a"].customPagePreview,t,{baseURL:n["a"].STOREHOST})},E=function(t){return Object(o["b"])(i["a"].storeSignPreview,t,{baseURL:n["a"].STOREHOST})},$=function(t){return Object(o["b"])(i["a"].storeNewProducts,t)},D=function(t){return Object(o["b"])(i["a"].checkPrivateDomain,t,{cancelRepeat:!0})},U=function(t){return Object(o["b"])(i["a"].getShopSuitList,t)},B=function(t){return Object(o["b"])(i["a"].getShopSuitImage,t)},N=function(t){return Object(o["c"])(i["a"].getShopSuitDetail,t,{cancelRepeat:!0})},R=function(t){return Object(o["c"])(i["a"].validateTabOrSpace,t)},M=function(t){return Object(o["b"])(i["a"].checkIdentity,t)},V=function(t){return Object(o["b"])(i["a"].storeFindGoods,t)}},d7a6:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"refresh-load"},[s("div",{staticClass:"spinner"},t._l(t.rectlist,(function(e){return s("div",{key:e,class:"rect"+e,style:{"background-color":t.color}})})),0),t.text?s("div",{staticClass:"spinner-text",style:{color:t.textColor}},[t._v(t._s(t.text))]):t._e()])},o=[],n={name:"refreshLoading",props:["text","color","textColor"],data:function(){return{rectlist:[1,2,3,4,5]}}},r=n,a=(s("ef69"),s("2877")),c=Object(a["a"])(r,i,o,!1,null,"9448457e",null);e["default"]=c.exports},da31:function(t,e,s){},eca0:function(t,e,s){"use strict";s("da31")},ef69:function(t,e,s){"use strict";s("8261")}}]);
//# sourceMappingURL=goodsSearch.4a98a0ff.js.map