(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00399858"],{3319:function(t,e,r){"use strict";r("37c4")},"37c4":function(t,e,r){},3939:function(t,e,r){"use strict";var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("van-row",t._l(t.parentData,(function(e,o){return r("van-col",{key:o,staticClass:"line"},[r("div",{staticClass:"title"},[r("div",{staticClass:"order-type"},[r("span",[t._v(t._s(e.poiId?e.poiId:"商城订单"))])]),"售后处理"!==e.orderStatusName?r("div",{class:{state:!0,"color-wine-red":"已确认"===e.orderStatusName}},["已付款待分享"===e.orderStatusName?r("span",[t._v(" 已支付，待分享")]):r("span",[t._v(t._s(e.orderStatusName||""))])]):t._e()]),t._l(e.orderProducts,(function(o,a){return[r("div",{key:"commodity"+a,staticClass:"commodity",on:{click:function(r){return t.viewDetail(o,e)}}},[o.isBook&&!e.zActivityOrder?r("div",{staticClass:"reserve"},[t._v("预订")]):t._e(),r("img",{staticClass:"thumbnail",attrs:{src:t._f("imageToHttps")(o.defaultImageUrl?o.defaultImageUrl:"http://cdn02.ehaier.com/product/4e2fbaa934198c4c7a00001e.jpg"),alt:"商品封面图"}}),r("div",{staticStyle:{width:"4.7rem"}},[r("div",{staticStyle:{display:"flex","flex-direction":"'row"}},[r("div",{staticClass:"introduce"},[r("div",{staticClass:"product-title"},[t._v(" "+t._s(o.productFullName||"")+" ")]),r("div",{staticClass:"model"},[t._v(" "+t._s(o.productName||"")+" ")]),o.attrName?r("div",{staticClass:"model"},[t._v(" 已选 "+t._s(o.attrName||"")+" ")]):t._e()]),r("div",{staticClass:"amount-money"},[e.ordersExtendVo&&e.ordersExtendVo.isThirdOrder&&"ET_YLH"===e.source?t._e():[e.displayPriceFlag?[e.poiName&&e.orderType>=30&&e.orderType<=50?r("div",{staticClass:"unit-price"},[r("div",[t._v(" "+t._s(o.price)+t._s(e.poiName)+" ")])]):r("div",{staticClass:"unit-price"},[r("div",[t._v(t._s(e.poiName?e.poiName:"￥"))]),r("div",[t._v(" "+t._s(t._f("formatPrice")(o.price))+" ")])])]:t._e()],r("div",{staticClass:"commodities"},[r("div",[t._v("x")]),r("div",[t._v(t._s(o.number||"1"))])])],2)]),r("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"space-between",width:"4.7rem","margin-top":".2rem"}},[100===e.orderType&&o.discounts&&o.discounts.length?t._l(o.discounts,(function(o,a){return r("div",{key:a,staticClass:"secondary"},[r("span",[t._v(t._s(o.cateName+o.amount)+t._s(e.poiName?e.poiName:"元"))])])})):Number(o.orderPromotionAmount)>0?r("div",{staticClass:"secondary"},[r("span",[t._v("下单立减"+t._s(o.orderPromotionAmount)+"元")])]):r("div"),r("div",{staticStyle:{flex:"0"}},[100!==e.orderType&&o.canComment?r("div",{staticClass:"commondity-comment",on:{click:function(e){return e.stopPropagation(),t.goComment(o.cOrderSn)}}},[t._v("立即评价")]):100!==e.orderType&&o.canExperience?r("div",{staticClass:"commondity-comment",on:{click:function(e){return e.stopPropagation(),t.goExperience(o.cOrderSn)}}},[t._v("追加评价")]):t._e(),!o.orderRepairs||"STORE"!==o.stockType&&"O2O"!==o.stockType&&"SYN"!==o.stockType?t._e():[r("div",{staticClass:"repire-btn",on:{click:function(e){return e.stopPropagation(),t.toOrderRepair(o.orderProductId)}}},[t._v("退款详情")])]],2)],2)])])]})),"售后处理"!==e.orderStatusName?r("div",{staticClass:"total"},[e.ordersExtendVo&&e.ordersExtendVo.isThirdOrder&&"ET_YLH"===e.source?t._e():[r("div",{staticClass:"total-info"},[r("div",{staticClass:"count"},[t._v(" 共"+t._s(e.productTotalNo||0)+"件商品 ")]),r("div",[t._v(" 合计: ")]),e.poiName&&e.orderType>=30&&e.orderType<=50?r("div",{staticClass:"total-price"},[r("div",[t._v(" "+t._s(e.totalAmount)+" "+t._s(e.poiName)+" ")])]):r("div",{staticClass:"total-price"},[r("div",[t._v(t._s(e.poiName?e.poiName:"￥"))]),r("div",{staticStyle:{"font-weight":"bold"}},[t._v(" "+t._s(t._f("fmtMoneyFilterInt")(e.totalAmount))),r("font",[t._v(t._s(t._f("fmtMoneyFilterDecimal")(e.totalAmount)))])],1),r("br")]),(e.totalShippingFeeAmount+"").length+(e.totalAmount+"").length<=10?[e.poiName&&e.orderType>=30&&e.orderType<=50?r("div",[t._v(" (含运费"+t._s(e.totalShippingFeeAmount)+t._s(e.poiName)+") ")]):r("div",[t._v(" (含运费"+t._s(e.poiName?e.poiName:"￥")+t._s(t._f("formatPrice")(e.totalShippingFeeAmount))+") ")])]:t._e(),(e.totalShippingFeeAmount+"").length+(e.totalAmount+"").length>10?[e.poiName&&e.orderType>=30&&e.orderType<=50?r("div",[t._v(" (含运费"+t._s(e.totalShippingFeeAmount)+t._s(e.poiName)+") ")]):r("div",[t._v(" (含运费"+t._s(e.poiName?e.poiName:"￥")+t._s(t._f("formatPrice")(e.totalShippingFeeAmount))+") ")])]:t._e()],2)],r("div",{staticClass:"date"},[t._v(" 下单时间："+t._s(e.addTime||"")+" ")])],2):t._e(),r("div",{staticClass:"number"},[t._v(" 订单号："+t._s(e.orderSn||"")+" ")]),100==e.orderType?[e.ordersExtendVo&&e.ordersExtendVo.isThirdOrder?r("div",{staticClass:"operation"},[e.ordersExtendVo&&e.ordersExtendVo.operEvents&&e.ordersExtendVo.operEvents.length&&("ET_STQY"!==e.source||t.isUplus)?t._l(e.ordersExtendVo.operEvents,(function(o,a){return r("div",{key:a,staticClass:"returned-goods",on:{click:function(r){return t.goThridUrl(o.linkUrl,e)}}},[t._v(" "+t._s(o.eventName)+" ")])})):t._e(),e.immediatePay?r("div",{staticClass:"orange",on:{click:function(r){return t.toPayment(e.orderSn)}}},[t._v(" 立即支付 ")]):t._e(),e.commentStatus?r("div",{staticClass:"tracking-orders",on:{click:function(r){return t.goThridComment(e)}}},[t._v(" "+t._s(1===e.commentStatus?"去评价":2===e.commentStatus?"追加评价":"查看评价")+" ")]):t._e(),"ET_YLH"===e.source?r("div",{staticClass:"tracking-orders",on:{click:function(r){return t.trackingOrders(e)}}},[t._v(" 查看物流 ")]):t._e()],2):t._e()]:[e.isReceived?t._e():r("div",{staticClass:"operation-title"},[t._v("您的商品正在飞奔您的家中！")]),r("div",{staticClass:"operation"},[e.paidToShare?r("span",{staticClass:"group-buy",on:{click:function(r){return t.shareToGroupBuy(e)}}},[r("span",[t._v("邀请拼团")])]):t._e(),e.canCancel?r("div",{staticClass:"returned-goods",on:{click:function(r){return t.cancellationOrder(e.orderId)}}},[t._v(" 取消订单 ")]):t._e(),e.canDelete?r("div",{staticClass:"returned-goods",on:{click:function(r){return t.deleteOrder(e.orderId)}}},[t._v(" 删除订单 ")]):t._e(),e.canCd?r("div",{staticClass:"returned-goods",on:{click:function(r){return t.dividOrder(e.orderId)}}},[t._v(" 拆单发货 ")]):t._e(),e.immediatePay?r("div",{staticClass:"orange",on:{click:function(r){return t.toPayment(e.orderSn)}}},[t._v(" 立即支付 ")]):t._e(),e.isMyOrder&&e.payOnline&&e.payRelationOrder?r("div",{class:{orange:!0,"button--disabled":e.paymentTimeOut},on:{click:function(r){return t.toPaymentTail(e.relationOrderSn,e.paymentTimeOut)}}},[t._v(" 支付尾款 ")]):t._e(),e.canTrack?r("div",{staticClass:"tracking-orders",on:{click:function(r){return t.trackingOrders(e)}}},[t._v(" 查看物流 ")]):t._e(),e.buttonBuyAgain?r("div",{staticClass:"re-buy",on:{click:function(r){return t.reBuy(e)}}},[t._v("再次购买")]):t._e()])]],2)})),1)},a=[],i=(r("e17f"),r("2241")),n=(r("2994"),r("2bdd")),s=(r("e7e5"),r("d399")),c=(r("ab71"),r("58e6")),d=r("d3c8"),u=r("90dd"),l=r("2b0e");l["a"].use({PullRefresh:c["a"],Toast:s["a"],List:n["a"],Dialog:i["a"]});var p={name:"list",props:{parentData:{type:null,default:function(){return{}}},parentStatus:{type:null,default:function(){return{}}}},data:function(){return{isUplus:this.$util.isUplus()}},computed:{location:function(){return this.$store.getters["getlocationInfo"]}},created:function(){},mounted:function(){},methods:{shareToGroupBuy:function(t){this.$router.push("/groupBookingDetail?orderSn=".concat(t.orderSn))},goExperience:function(t){this.$router.push({path:"/review",query:{cOrderSn:t}})},reBuy:function(t){var e=this,r={productParams:[],streetId:this.location.townshipId,fromPage:document.URL};t.orderProducts.forEach((function(t){var e={productId:t.productId,number:t.number,attrValueNames:t.attrName};t.attrName?e.sku=t.sku:e.spu=t.sku,r.productParams.push(e)})),d["a"].addBatch(r).then((function(t){t.success?e.$router.push({path:"/cart"}):s["a"].fail(t.message)})),console.log("reBuy:",r)},viewDetail:function(t,e){if("ET_YLH"===e.source);else if(e.ordersExtendVo&&e.ordersExtendVo.isThirdOrder)t.linkUrl&&this.goThridUrl(t.linkUrl,e);else{var r=this;r.$router.push({path:"/orderDetail",query:{cOrderSn:t.cOrderSn,cOrderId:t.orderProductId}})}},trackingOrders:function(t){var e=this;if("ET_YLH"!==t.source){var r=this;this.$util.gioTrackWithVariable("mall_order_viewlogistics",{order_id:t.orderSn||"null"}).then((function(){e.initTrackinfo(t.orderSn).then((function(e){switch(e){case 1:202===t.orderStatus||200===t.orderStatus||"B2B2C"!==t.orderProducts[0].shippingMode||"WA"!==t.orderProducts[0].stockType&&"OCO"!==t.orderProducts[0].stockType?r.$router.push({path:"/trackingOrders?cOrderSn=".concat(t.orderProducts[0].cOrderSn)}):r.$router.push({path:"/mapTrackingOrders?cOrderSn=".concat(t.orderProducts[0].cOrderSn)});break;case 2:r.$router.push({path:"/trackingDetail?orderSn=".concat(t.orderSn)});break}}))}))}else this.$router.push({path:"/trackingDetail?soNo=".concat(t.orderSn)})},deleteOrder:function(t){var e=this;this.$dialog.confirm({allowHtml:!0,title:"您确定要删除当前订单吗？",message:'<span style="color: #666">订单删除后将无法恢复，可能影响订单的退货/退款</span>',cancelButtonColor:"#666",confirmButtonText:"确定"}).then((function(){var r={orderId:t};d["a"].deleteOrder(r).then((function(t){var r=t.data;r.success?(s["a"].success("删除成功"),e.$emit("onRefreshParent")):s["a"].fail(r.message)}))}))["catch"]((function(){}))},dividOrder:function(t){Object(s["a"])("请到智家掌柜APP支付尾款")},goThridUrl:function(t,e){var r=this;("ET_STQY"!==e.source||this.isUplus)&&t&&Object(u["a"])({redirectUri:t,target:e.ordersExtendVo.authTarget||"",targetTest:e.ordersExtendVo.authTarget||"",redirectUriTest:t}).then((function(e){var o=e.data;o.success?r.$util.debounceImmediate(r.$util.openNewWindow(o.data,!0,!1,!1)):r.$util.debounceImmediate(r.$util.openNewWindow(t,!0,!1,!1))}))},cancellationOrder:function(t){var e=this;this.$dialog.confirm({title:"提示",message:"您确定要取消当前订单吗？"}).then((function(){var r={orderId:t,cancelFlag:"mstore"};d["a"].cancelOrder(r).then((function(t){var r=t.data;r.success?(s["a"].success("取消成功"),e.$emit("onRefreshParent")):s["a"].fail(r.message)}))}))["catch"]((function(){}))},toRepair:function(){this.$router.push("/repair")},goComment:function(t){this.$router.push("/evaluate?cOrderSn=".concat(t))},goThridComment:function(t){this.$router.push("/thridEvaluate?orderSn=".concat(t.orderSn,"&type=").concat(t.commentStatus||0))},toPayment:function(t){var e=this;e.$router.push({path:"/orderCashier/".concat(t)})},toPaymentTail:function(t,e){if(!e){var r=this,o={orderSn:t};d["a"].checkTailOrder(o).then((function(e){var o=e;s["a"].clear(),o.success?0===o.data?r.createTailOrder(t):r.$router.push({path:"/orderCashier/".concat(t)}):s["a"].fail(o.message)}))}},createTailOrder:function(t){var e=this,r={orderSn:t};d["a"].createTailOrder(r).then((function(r){var o=r.data;s["a"].clear(),o.success?e.$router.push({path:"/orderTail?orderSn=".concat(t)}):s["a"].fail(o.message)}))},initTrackinfo:function(t){return new Promise((function(e,r){var o={orderSn:t};d["a"].getTrackFlowOrderDetail(o).then((function(t){t.data.success&&e(t.data.data.pageUrlStatus)}))}))},toOrderRepair:function(t){this.$router.push({path:"/details",query:{orderProductId:t}})}}},m=p,v=(r("3319"),r("2877")),_=Object(v["a"])(m,o,a,!1,null,"4d1a68a2",null);e["a"]=_.exports}}]);
//# sourceMappingURL=chunk-00399858.5699cc8a.js.map