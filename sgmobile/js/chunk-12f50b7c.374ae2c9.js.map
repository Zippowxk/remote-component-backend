{"version":3,"sources":["webpack:///./src/views/shopDetail/component/top-bar/selected/presell.vue?1891","webpack:///./src/views/shopDetail/component/top-bar/selected/presell.vue?d1ec","webpack:///src/views/shopDetail/component/top-bar/selected/presell.vue","webpack:///./src/views/shopDetail/component/top-bar/selected/presell.vue?bfed","webpack:///./src/views/shopDetail/component/top-bar/selected/presell.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","preSaleProdList","staticClass","_v","attrs","on","$event","goMore","imageUrl","imageId","_s","productName","sellPoints","replace","_f","marketPrice","advance","deduct","_m","_e","timeDown","goProduct","staticRenderFns","inheritAttrs","props","data","type","Object","default","storeId","String","storeSign","components","CountDown","productInfo","sellPoint","computed","watch","handler","getPreSale","immediate","mId","methods","pageIndex","pageSize","res","success","length","i","startTime","sysTime","systemTime","$emit","$util","gioTrackWithVariable","modelName","modelCode","site_number","itemCode","productId","$router","push","component"],"mappings":"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","file":"js/chunk-12f50b7c.374ae2c9.js","sourcesContent":["export * from \"-!../../../../../../node_modules/@sg/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./presell.vue?vue&type=style&index=0&id=00afea18&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.preSaleProdList.length)?_c('div',{staticClass:\"presell\"},[_c('div',{staticClass:\"bg-tag\"}),_c('div',{staticClass:\"title\"},[_c('span',{staticClass:\"text\"},[_vm._v(\"预售专区\")]),_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.goMore()}}},[_vm._v(\"更多 \"),_c('i')])]),_c('div',{staticClass:\"prod-row\"},[_c('img',{attrs:{\"src\":_vm.preSaleProdList[0].imageUrl || _vm.preSaleProdList[0].imageId}}),_c('div',{staticClass:\"prod-info\"},[_c('div',{staticClass:\"prod-title\"},[_vm._v(\" \"+_vm._s(_vm.preSaleProdList[0].productName)+\" \")]),_c('div',{staticClass:\"sale-point\"},[_vm._v(\" \"+_vm._s(_vm.preSaleProdList[0].sellPoints ? _vm.preSaleProdList[0].sellPoints.replace(/,/g, ' | ') : '')+\" \")]),_c('div',{staticClass:\"origin-price\"},[_vm._v(\" 原价\"),_c('span',{staticClass:\"price\"},[_vm._v(\"￥\"),_c('span',{staticClass:\"number\"},[_vm._v(_vm._s(_vm._f(\"formatPriceInt\")(_vm._f(\"formatPrice\")(_vm.preSaleProdList[0].marketPrice))))]),_vm._v(_vm._s(_vm._f(\"formatPriceFloat\")(_vm._f(\"formatPrice\")(_vm.preSaleProdList[0].marketPrice))))])]),_c('div',{staticClass:\"flex-row\"},[_c('div',{staticClass:\"sale-price\"},[_vm._v(\" ￥\"),_c('span',{staticClass:\"salse-price-num\"},[_vm._v(_vm._s(_vm._f(\"formatPriceInt\")(_vm._f(\"formatPrice\")(_vm.preSaleProdList[0].advance))))]),_c('p',{staticClass:\"symbol\"},[_vm._v(_vm._s(_vm._f(\"formatPriceFloat\")(_vm._f(\"formatPrice\")(_vm.preSaleProdList[0].advance)))+\"订金 \")])]),(!!_vm.preSaleProdList[0].advance && !!_vm.preSaleProdList[0].deduct)?_c('div',{staticClass:\"flex-row\"},[_vm._m(0),_c('div',{staticClass:\"price-discount\"},[_c('span',[_vm._v(_vm._s(_vm.preSaleProdList[0].advance || 0)+\"抵\"+_vm._s(_vm.preSaleProdList[0].deduct || ''))])])]):_vm._e()]),_c('div',{staticClass:\"absolute-row\"},[(_vm.timeDown > 0)?_c('div',{staticClass:\"time-down\"},[_vm._v(\" 仅剩 \"),_c('count-down',{attrs:{\"time\":_vm.timeDown}})],1):_vm._e(),_c('div',{staticClass:\"pre-btn\",on:{\"click\":_vm.goProduct}},[_vm._v(\" 立即预定 \")])])])])]):_vm._e()}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"pre-tag\"},[_c('span',[_vm._v(\"预\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"presell\" v-if=\"preSaleProdList.length\">\n    <div class=\"bg-tag\"/>\n    <div class=\"title\">\n      <span class=\"text\">预售专区</span>\n      <a href=\"javascript:;\" @click=\"goMore()\">更多 <i></i></a>\n    </div>\n    <div class=\"prod-row\">\n      <img :src=\"preSaleProdList[0].imageUrl || preSaleProdList[0].imageId\"/>\n      <div class=\"prod-info\">\n        <div class=\"prod-title\">\n          {{preSaleProdList[0].productName}}\n        </div>\n        <div class=\"sale-point\">\n          {{preSaleProdList[0].sellPoints ? preSaleProdList[0].sellPoints.replace(/,/g, ' | ') : ''}}\n        </div>\n        <div class=\"origin-price\">\n          原价<span class=\"price\">￥<span class=\"number\">{{preSaleProdList[0].marketPrice | formatPrice | formatPriceInt}}</span>{{preSaleProdList[0].marketPrice| formatPrice | formatPriceFloat}}</span>\n        </div>\n        <div class=\"flex-row\">\n          <div class=\"sale-price\">\n            ￥<span class=\"salse-price-num\">{{preSaleProdList[0].advance | formatPrice | formatPriceInt}}</span><p class=\"symbol\">{{preSaleProdList[0].advance | formatPrice | formatPriceFloat}}订金  </p>\n          </div>\n          <div class=\"flex-row\" v-if=\"!!preSaleProdList[0].advance && !!preSaleProdList[0].deduct\">\n            <span class=\"pre-tag\"><span>预</span></span>\n            <div class=\"price-discount\">\n              <span>{{preSaleProdList[0].advance || 0}}抵{{preSaleProdList[0].deduct || ''}}</span>\n            </div>\n          </div>\n        </div>\n        <div class=\"absolute-row\">\n          <div class=\"time-down\" v-if=\"timeDown > 0\">\n            仅剩\n              <!-- @finish=\"getPreSale\" -->\n            <count-down\n              :time=\"timeDown\"\n            />\n          </div>\n          <div class=\"pre-btn\" @click=\"goProduct\">\n            立即预定\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport {\n  getPreSales\n} from '@/http/service/shop';\nimport { CountDown } from 'vant';\nimport { mapGetters } from 'vuex';\n/** 预售专区 */\nexport default {\n  inheritAttrs: false,\n  props: {\n    data: {\n      type: Object,\n      default: () => {},\n    },\n    storeId: {\n      type: String,\n      default: '',\n    },\n    storeSign: {\n      type: Object,\n      default: () => {},\n    },\n  },\n  components: {\n    CountDown,\n  },\n  data() {\n    return {\n      preSaleProdList: [],\n      productInfo: {\n        productName: '海尔洗衣机155L水库容量全自动滚水库容量全自动滚',\n        sellPoint: ['风冷无霜', '杀菌净味', '三挡变温'],\n      },\n      timeDown: 0,\n    }\n  },\n  computed: {\n    ...mapGetters(['mId']),\n  },\n  watch: {\n    storeId: {\n      handler(newVal) {\n        this.getPreSale();\n      },\n      immediate: true,\n    },\n    mId() {\n      this.getPreSale();\n    }\n  },\n  methods: {\n    getPreSale() {\n      this.timeDown = 0;\n      getPreSales({\n        storeId: this.storeId,\n        pageIndex: 1,\n        pageSize: 999999,\n      }, [4, 5, 6].includes(this.storeSign.storeType)).then(res => {\n        if (res.success) {\n          if (res.data && res.data.length) {\n            const length = res.data.length;\n            for (let i = length - 1; i >= 0; i--) {\n              if (res.data[i].startTime < res.data[i].sysTime) {\n                this.preSaleProdList.push(res.data[i]);\n              }\n            }\n            if (this.preSaleProdList.length === 0) {\n              this.preSaleProdList.push(res.data[0]);\n            }\n            const { startTime, endTime, systemTime } = this.preSaleProdList[0];\n            if (startTime > systemTime) {\n              this.timeDown = (startTime - systemTime) * 1000;\n            } else if (endTime > systemTime) {\n              this.timeDown = (endTime - systemTime) * 1000;\n            }\n            // this.timeDown = (this.preSaleProdList[0].endTime - this.preSaleProdList[0].systemTime) * 1000;\n          }\n        } else {\n          this.$toast(res.message || '获取数据失败，请稍后重试');\n        }\n      });\n    },\n    goMore() {\n      this.$emit('changeBar', 2);\n    },\n    goProduct() {\n      // 25093埋点\n      this.$util.gioTrackWithVariable('mall_store_click_model', {\n        modelName: '预售专区',\n        modelCode: 'pre_sale',\n        site_number: '1',\n        itemCode: this.preSaleProdList[0].productId + '',\n      })\n      this.$router.push(`/goodsDetail?productId=${this.preSaleProdList[0].productId}&visitStore=${this.storeId}`);\n    }\n  },\n}\n</script>\n<style lang=\"scss\" scoped>\n.presell {\n  position: relative;\n  margin: .24rem;\n  margin-bottom: 0;\n  width: 7.02rem;\n  padding: 0 .24rem;\n  box-sizing: border-box;\n  background: #ffffff;\n  border-radius: .24rem;\n}\n.bg-tag {\n  position: absolute;\n  top: .24rem;\n  left: .16rem;\n  height: .4rem;\n  width: .4rem;\n  border-radius: .2rem;\n  background: linear-gradient(270deg,#f8faff 27%, #d6e5ff 87%);\n  z-index: 0;\n}\n.title{\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-top: .28rem;\n  padding-bottom: .24rem;\n  .text{\n    font-size: .28rem;\n    line-height: .44rem;\n    height: .44rem;\n    color: #333;\n    font-weight: 700;\n    z-index: 0;\n  }\n  a{\n    display: inline-flex;\n    align-items: center;\n    color: #999;\n    font-size: .24rem;\n    line-height: .36rem;\n    i{\n      display: inline-block;\n      width: .24rem;\n      height: .24rem;\n      @include icon-more;\n    }\n  }\n}\n.flex-row {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n.prod-row {\n  display: flex;\n  flex-direction: row;\n  padding-bottom: .24rem;\n  img {\n    height: 1.6rem;\n    width: 1.6rem;\n    border: 1px solid #e6e6e6;\n    border-radius: .08rem;\n    margin-right: .24rem;\n  }\n  .prod-info {\n    position: relative;\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n    .prod-title {\n      padding-top: .08rem;\n      font-size: .24rem;\n      color: #333;\n      width: 100%;\n      line-height: .34rem;\n      height: .34rem;\n      padding-bottom: .08rem;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n    .sale-point {\n      font-size: .20rem;\n      color: #666;\n      line-height: .24rem;\n      height: .24rem;\n      padding-bottom: .12rem;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      overflow: hidden;\n    }\n    .origin-price {\n      color: #999;\n      font-size: .24rem;\n      display: inline-block;\n      transform: scale(.84);\n      margin-left: -.40rem;\n      padding-bottom: .14rem;\n      .price {\n        text-decoration: line-through;\n        .number {\n          margin-left: -0.04rem;\n          font-family: DINAlternate, DINAlternate-Bold;\n          font-size: .29rem;\n        }\n      }\n    }\n\n    .sale-price {\n      font-family: DINAlternate, DINAlternate-Bold;\n      font-size: .24rem;\n      margin-right: .08rem;\n      color: #FF2E2E;\n      vertical-align: bottom;\n      .salse-price-num{\n        margin-left: -0.04rem;\n      }\n      .symbol {\n        font-size: .2rem;\n        display: inline-block;\n        /* transform: scale(0.84);\n        display:inline-block; */\n      }\n      span {\n        font-size: .32rem;\n        font-weight: bold;\n      }\n    }\n    .pre-tag {\n      height: .32rem;\n      width: .32rem;\n      /* padding: .03rem; */\n      background: #ff2e2e;\n      border-radius: .08rem 0 0 .08rem;\n      line-height: .32rem;\n      display:inline-block;\n      font-size:.24rem;\n      transform:scale(0.75);\n      color: white;\n      text-align: center;\n      vertical-align: middle;\n      margin-right: -.08rem;\n      /* font-size: .18rem; */\n      /* span {\n        line-height: .24rem;\n        display:inline-block;\n        font-size:.24rem;\n        transform:scale(0.75);\n        color: white;\n        text-align: center;\n        vertical-align: middle;\n      } */\n    }\n    .price-discount {\n      height: .32rem;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      border-radius: 0 .08rem 0.08rem 0;\n      border:  1px solid #ff2e2e;\n      height: .32rem;\n      line-height: .32rem;\n      display:inline-block;\n      font-size:.24rem;\n      transform:scale(0.75);\n      color:  #ff2e2e;\n      text-align: center;\n      vertical-align: middle;\n      margin-left: -.08rem;\n      /* span {\n        height: .24rem;\n        line-height: .24rem;\n        display:inline-block;\n        font-size:.24rem;\n        transform:scale(0.75);\n        color:  #ff2e2e;\n        text-align: center;\n        vertical-align: middle;\n      } */\n    }\n    .absolute-row {\n      position: absolute;\n      bottom: 0;\n      right: 0;\n      display: flex;\n      flex-direction: column;\n    }\n    .pre-btn {\n      width: 1.52rem;\n      height: .54rem;\n      background-color: #2878ff;\n      border-radius: .3rem;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      line-height: .54rem;\n      text-align: center;\n      color: white;\n      font-size: .24rem;\n    }\n    .time-down {\n      font-size: .24rem;\n      color: #333;\n      display: inline-block;\n      transform: scale(.84);\n      margin-bottom: -.04rem;\n    }\n  }\n}\n.van-count-down {\n  color: #333;\n  font-size: .24rem;\n  display: inline-block;\n  /* transform: scale(.84); */\n}\n</style>\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./presell.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./presell.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./presell.vue?vue&type=template&id=00afea18&scoped=true&\"\nimport script from \"./presell.vue?vue&type=script&lang=js&\"\nexport * from \"./presell.vue?vue&type=script&lang=js&\"\nimport style0 from \"./presell.vue?vue&type=style&index=0&id=00afea18&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"00afea18\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}