{"version":3,"sources":["webpack:///./src/views/searchs/components/addr-select.vue?0963","webpack:///src/views/searchs/components/addr-select.vue","webpack:///./src/views/searchs/components/addr-select.vue?080c","webpack:///./src/views/searchs/components/addr-select.vue","webpack:///./src/views/searchs/components/addr-select.vue?bd0a"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","$event","stopPropagation","_v","attrs","$cdnImageUrl","closeModal","chooseCurrent","_s","location","district","township","_l","item","index","key","selectDefaultAddr","rn","ar","otherLocation","apply","arguments","staticRenderFns","props","data","showLoading","show","windowHeight","methods","onlyread","localStorage","setItem","latitude","longitude","provinceId","cityId","districtId","townshipId","setLocationInfo","setLoaction","console","log","getLocation","$emit","$store","dispatch","then","res","region","pi","province","pt","ci","city","ct","ri","rt","si","st","getLatLongByLocationInfo","locationInfo","aId","id","split","mounted","beforeDestroy","component"],"mappings":"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","file":"js/addrSelect.7962a1ca.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"box\"},[_c('div',{staticClass:\"top\",on:{\"click\":function($event){$event.stopPropagation();}}},[_c('div',{staticClass:\"top-bar\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"配送地址 \"),_c('img',{attrs:{\"src\":(_vm.$cdnImageUrl + \"/common/back-common.svg\")},on:{\"click\":_vm.closeModal}})])]),(_vm.location)?_c('div',{staticClass:\"nowAddress location\",on:{\"click\":_vm.chooseCurrent}},[_c('img',{attrs:{\"src\":(_vm.$cdnImageUrl + \"/location/icon_addr_bule.png\"),\"alt\":\"\"}}),_c('span',[_vm._v(\"定位地址(\"+_vm._s(_vm.location.district)+\"/\"+_vm._s(_vm.location.township)+\")\")])]):_c('div',{staticClass:\"nowAddress location\",on:{\"click\":_vm.chooseCurrent}},[_c('img',{attrs:{\"src\":(_vm.$cdnImageUrl + \"/common/location-icon-blue.svg\"),\"alt\":\"\"}}),_c('span',[_vm._v(\"点击自动定位\")])]),_c('div',{staticClass:\"addr-content\"},[_c('div',{staticClass:\"addr-list\"},_vm._l((_vm.addrList),function(item,index){return _c('div',{key:index,staticClass:\"info\",on:{\"click\":function($event){return _vm.selectDefaultAddr(index)}}},[_c('img',{attrs:{\"src\":(_vm.$cdnImageUrl + \"/location/addr-black.png\"),\"alt\":\"\"}}),_c('span',[_vm._v(_vm._s(item.rn)+\" \"+_vm._s(item.ar))])])}),0)]),_c('div',{staticClass:\"addr-bottom\"},[_c('div',{staticClass:\"addr-bottom-btn\",on:{\"click\":function($event){$event.stopPropagation();return _vm.otherLocation.apply(null, arguments)}}},[_vm._v(\" 点击选择其他地址 \")])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"box\" >\n        <div class=\"top\" @click.stop>\n          <div class=\"top-bar\">\n          <div class=\"title\">配送地址\n            <img v-on:click=\"closeModal\" :src=\"`${$cdnImageUrl}/common/back-common.svg`\" />\n            </div>\n          </div>\n            <div v-if=\"location\" class=\"nowAddress location\" @click=\"chooseCurrent\">\n            <img :src=\"`${$cdnImageUrl}/location/icon_addr_bule.png`\" alt=\"\" />\n            <span>定位地址({{location.district}}/{{location.township}})</span>\n          </div>\n          <div v-else class=\"nowAddress location\" @click=\"chooseCurrent\">\n            <img :src=\"`${$cdnImageUrl}/common/location-icon-blue.svg`\" alt=\"\" />\n            <span>点击自动定位</span>\n          </div>\n          <div class=\"addr-content\">\n\n          <div class=\"addr-list\">\n              <div class=\"info\" v-for=\"(item, index) in addrList\" :key=\"index\" @click=\"selectDefaultAddr(index)\">\n                <img :src=\"`${$cdnImageUrl}/location/addr-black.png`\" alt=\"\" />\n                <span>{{item.rn}} {{item.ar}}</span>\n              </div>\n              <!-- <div class=\"bottom-margin\"></div> -->\n          </div>\n          </div>\n          <div class=\"addr-bottom\">\n            <div class=\"addr-bottom-btn\" @click.stop=\"otherLocation\">\n              点击选择其他地址\n            </div>\n          </div>\n      </div>\n  </div>\n</template>\n\n<script>\nimport { mapMutations, mapActions } from 'vuex'\n/**\n * 选择地址弹窗\n * 使用标签<change-geographic-location>\n * 关闭回调 onHide\n * 选择位置回调 handleLocation\n */\nexport default {\n  props: ['onlyread', 'showAddr', 'addrList'], // onlyread 只读属性 不修改store不进行localStroage存储\n  data() {\n    return {\n      showLoading: false,\n      location: null, // 定位信息\n      show: true,\n      windowHeight: '', // 获取屏幕高度\n    }\n  },\n  methods: {\n    ...mapMutations(['setLocationInfo', 'setLoaction']),\n    ...mapActions(['getLatLongByLocationInfo']),\n    /**\n     * 选择定位地址\n     */\n    chooseCurrent() {\n      if (this.location) {\n        if (!this.onlyread) {\n          localStorage.setItem('latitude', this.location.latitude)\n          localStorage.setItem('longitude', this.location.longitude)\n          localStorage.setItem('provinceId', this.location.provinceId)\n          localStorage.setItem('cityId', this.location.cityId)\n          localStorage.setItem('districtId', this.location.districtId)\n          localStorage.setItem('townshipId', this.location.townshipId)\n          // localStorage.setItem('location', JSON.stringify(this.location));\n          // localStorage.setItem('aId', '');\n          this.setLocationInfo(this.location)\n          this.setLoaction({\n            latitude: this.location.latitude,\n            longitude: this.location.longitude\n          })\n        }\n        // this.$emit('handleLocation', this.location)\n        // 定位成功关闭弹窗\n        this.closeModal()\n      } else {\n        console.log('手动定位')\n        this.getLocation()\n      }\n    },\n    /**\n     * @description 关闭弹窗\n     */\n    closeModal() {\n      this.$emit('handleLocation', this.location)\n      this.$emit('onHide')\n    },\n    /**\n     * @description 从store获取经纬度和地理位置\n     */\n    getLocation() {\n      this.$store.dispatch('doLocation', true).then(res => {\n        if (res === 400) {\n          this.$toast('定位失败，请自行选择位置信息')\n        } else {\n          this.$store.dispatch('doLocationInfo', { latitude: res.latitude, longitude: res.longitude, force: true }).then(result => {\n            this.location = result\n            this.location.aId = ''\n\n            // 定位成功关闭弹窗\n            this.closeModal()\n          })\n        }\n      })\n    },\n    otherLocation() {\n      this.$emit('otherLocation')\n    },\n    selectDefaultAddr(index) {\n      let data = this.addrList[index]\n      // data.de = 1\n      let locationInfo = {\n        region: data.rn,\n        provinceId: data.pi,\n        province: data.pt,\n        cityId: data.ci,\n        city: data.ct,\n        districtId: data.ri,\n        district: data.rt,\n        townshipId: data.si,\n        township: data.st,\n        latitude: '',\n        longitude: ''\n      }\n      this.getLatLongByLocationInfo(locationInfo).then(res => {\n        if (res === 400) {\n          this.$toast('根据位置信息获取经纬度失败')\n        } else {\n          locationInfo.latitude = res.latitude;\n          locationInfo.longitude = res.longitude;\n          locationInfo.aId = data.id;\n          locationInfo.district = locationInfo.region.split(' ')[2]\n\n          if (!this.onlyread) {\n            localStorage.setItem('latitude', res.latitude)\n            localStorage.setItem('longitude', res.longitude)\n            localStorage.setItem('provinceId', locationInfo.provinceId)\n            localStorage.setItem('cityId', locationInfo.cityId)\n            localStorage.setItem('districtId', locationInfo.districtId)\n            localStorage.setItem('townshipId', locationInfo.townshipId)\n            // localStorage.setItem('location', JSON.stringify(locationInfo));\n            // localStorage.setItem('aId', data.id);\n            this.setLocationInfo(locationInfo)\n            this.setLoaction(res)\n          }\n          this.closeModal()\n          this.$emit('handleLocation', locationInfo)\n        }\n      })\n    },\n  },\n  mounted() {\n    this.showLoading = true\n    /**\n     * @description 初次渲染拿到所有城市列表数据\n     * @params 请求参数\n     */\n    // const c = {\n    //   parentId: 0,\n    //   regionType: 0,\n    // }\n    // changeGeographicLocation(c)\n    //   .then(res => {\n    //     this.showLoading = false\n    //     if (res.status === 200) {\n    //       this.list = res.data.data\n    //     } else {\n    //       this.$toast('请求失败，请重试')\n    //     }\n    //   })\n    //   .catch(res => {\n    //     this.$toast('请求失败，请重试')\n    //   })\n  },\n  beforeDestroy() {\n    // this.removeHidden()\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\nimg{\n  -webkit-touch-callout: none;\n}\n.loadingClass {\n  z-index: 10000;\n  color: #1989fa;\n  position: absolute;\n  bottom: 2.5rem;\n  left: 3rem;\n}\n\n.top{\n  position: relative;\n}\n\n.title {\n  font-size: 0.32rem;\n  height: 0.8rem;\n  line-height: 0.8rem;\n  color: #333333;\n  text-align: center;\n}\n.title img {\n  position: absolute;\n  left: 0.32rem;\n  width: 0.36rem;\n  height: 0.36rem;\n  padding: 0.1rem 0.1rem 0.1rem 0;\n  top: 0.16rem;\n}\n.change {\n  width: 100%;\n  padding-left: 0.4rem;\n  width: auto;\n  white-space: nowrap;\n}\n\n.change span {\n  font-size: 0.28rem;\n  margin-right: 0.4rem;\n  display: inline-block;\n  /* width: 1.9rem; */\n}\n.change .placeChange {\n  font-size: 0.28rem;\n  color: #333333;\n  /* border-bottom: 0.06rem solid #2283E2; */\n}\n.nowAddress {\n  position: relative;\n  padding-left: 0.3rem;\n  display: flex;\n  color: $themeColor;\n  flex-direction: row;\n  align-items: center;\n  height: .88rem;\n  line-height: .88rem;\n}\n.nowAddress img {\n  display: block;\n  width: 0.32rem;\n  height: 0.32rem;\n}\n.nowAddress span {\n  margin-left: 0.15rem;\n  font-size: 0.24rem;\n}\n.bottom {\n  /* min-height: 5rem; */\n  width: 100%;\n  overflow-y: scroll;\n  top: 2.43rem;\n  bottom: 0;\n  position: absolute;\n}\n.bottom::-webkit-scrollbar {\n  width: 0;\n}\n.bottom::-moz-scrollbar {\n  widows: 0;\n}\n.bottom::-ms-scrollbar {\n  widows: 0;\n}\n.bottom::-o-scrollbar {\n  widows: 0;\n}\n.address-item {\n  padding-left: 0.4rem;\n  height: 0.8rem;\n  line-height: 0.8rem;\n  font-size: 0.28rem;\n}\n.bottom div:last-child {\n  margin-bottom: 0.18rem;\n}\n\n.addr-bottom{\n  height: 1.36rem;\n  width: 100%;\n  /* position: absolute;\n  bottom: 0; */\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: #fff;\n      position: fixed;\n    bottom: 0;\n}\n.addr-bottom-btn{\n  width: 6.86rem;\n  height: 0.88rem;\n  background-color: $themeColor;\n  color: #fff;\n  font-size: 0.28rem;\n  text-align: center;\n  line-height: 0.88rem;\n  border-radius: 100px;\n  margin: 0 .32rem;\n}\n.addr-list .info{\n  position: relative;\n  display: flex;\n  color: $themeColor;\n  flex-direction: row;\n  align-items: center;\n  font-size: .28rem;\n  color: #333;\n  line-height: .38rem;\n  padding: 0.26rem 0.68rem 0.26rem 0.3rem;\n}\n.addr-list .info img{\n  display: block;\n  position: absolute;\n  width: 0.32rem;\n  height: 0.32rem;\n  top: 13px;\n}\n.addr-list .info span{\n  margin-left: 0.35rem;\n  font-size: 0.24rem;\n}\n.address .top .title{\n  /* position: fixed; */\n  width: 100%;\n  background-color: #fff;\n  /* z-index: 2022;\n  left: 0; */\n}\n.location{\n  margin-top: .26rem;\n  height: auto;\n  line-height: unset;\n  margin-bottom: .38rem;\n}\n.top-bar{\n  height: 0.8rem;\n  width: 100%;\n}\n.addr-content{\n  width: 100%;\n  height: 14rem;\n  overflow-y: scroll;\n}\n.bottom-margin{\n  height: 1.36rem;\n}\n.box{\n  height: 100%;\n  overflow: hidden;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addr-select.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addr-select.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./addr-select.vue?vue&type=template&id=69f289b8&scoped=true&\"\nimport script from \"./addr-select.vue?vue&type=script&lang=js&\"\nexport * from \"./addr-select.vue?vue&type=script&lang=js&\"\nimport style0 from \"./addr-select.vue?vue&type=style&index=0&id=69f289b8&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"69f289b8\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/@sg/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addr-select.vue?vue&type=style&index=0&id=69f289b8&lang=scss&scoped=true&\""],"sourceRoot":""}