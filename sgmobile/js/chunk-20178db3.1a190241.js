(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20178db3"],{"0d8d":function(t,a,i){"use strict";i.d(a,"a",(function(){return n})),i.d(a,"b",(function(){return s}));var o=i("1c03"),e=i("bbc2"),n=function(t){return o["a"].request({url:e["a"].GET_PROVINCE_LIST,method:"get",params:t})},s=function(t){return o["a"].request({url:e["a"].GET_PROVINCE_LIST_BY_STOREOWNERID,method:"get",params:t})}},"5aa7":function(t,a,i){"use strict";i.r(a);var o=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"box"},[i("div",{staticClass:"address",on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"top",on:{touchmove:function(t){t.preventDefault()}}},[i("div",{staticClass:"title"},[i("img",{directives:[{name:"show",rawName:"v-show",value:t.isShowBack,expression:"isShowBack"}],attrs:{src:t.$cdnImageUrl+"/common/control-back.png",alt:""},on:{click:t.closeAndBack}}),t._v(" "+t._s(t.title?t.title:"配送至")+" "),i("img",{attrs:{src:t.$cdnImageUrl+"/common/control-close.png",alt:""},on:{click:t.closeModal}})]),i("div",{staticClass:"change"},[t.province?i("span",{on:{click:t.provinceClick}},[t._v(t._s(t.provinceData.text))]):t._e(),t.city?i("span",{on:{click:t.cityClick}},[t._v(t._s(t.cityData.text))]):t._e(),t.area?i("span",{on:{click:t.areaClick}},[t._v(t._s(t.areaData.text))]):t._e(),i("span",{staticClass:"placeChange"},[t._v("请选择")])])]),t.list.length>6?i("div",{staticClass:"bottom"},[t.showLoading?i("van-loading",{staticClass:"loadingClass",attrs:{vertical:""}},[t._v("加载中...")]):t._e(),t._l(t.list,(function(a,o){return i("div",{key:o,staticClass:"address-item",on:{click:function(i){return t.cityListClick(a)}}},[t._v(t._s(a.text))])}))],2):i("div",{staticClass:"bottom",on:{touchmove:function(t){t.preventDefault()}}},[t.showLoading?i("van-loading",{staticClass:"loadingClass",attrs:{vertical:""}},[t._v("加载中...")]):t._e(),t._l(t.list,(function(a,o){return i("div",{key:o,staticClass:"address-item",on:{click:function(i){return t.cityListClick(a)}}},[t._v(t._s(a.text))])}))],2)])])},e=[],n=i("2f62"),s=i("0d8d");function c(t,a){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);a&&(o=o.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),i.push.apply(i,o)}return i}function r(t){for(var a=1;a<arguments.length;a++){var i=null!=arguments[a]?arguments[a]:{};a%2?c(Object(i),!0).forEach((function(a){l(t,a,i[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))}))}return t}function l(t,a,i){return a in t?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i,t}var d={props:["onlyread","isShowBack","storeId","title"],data:function(){return{showLoading:!1,location:null,show:!0,list:[],windowHeight:"",province:!1,provinceData:"",city:!1,cityData:"",area:!1,areaData:!1,clickNum:0,townData:"",firstValue:0,secondValue:0}},methods:r(r(r({},Object(n["e"])(["setLocationInfo","setLoaction"])),Object(n["c"])(["getLatLongByLocationInfo"])),{},{hideParent:function(t){},removeHidden:function(t){},chooseCurrent:function(){this.location?(this.onlyread||(localStorage.setItem("latitude",this.location.latitude),localStorage.setItem("longitude",this.location.longitude),localStorage.setItem("provinceId",this.location.provinceId),localStorage.setItem("cityId",this.location.cityId),localStorage.setItem("districtId",this.location.districtId),localStorage.setItem("townshipId",this.location.townshipId),this.location.aId="",this.setLocationInfo(this.location),this.setLoaction({latitude:this.location.latitude,longitude:this.location.longitude})),this.$emit("handleLocation",this.location)):this.getLocation()},closeModal:function(){this.$emit("onHide")},closeAndBack:function(){this.$emit("closeAndBack")},provinceClick:function(){var t=this;this.showLoading=!0,this.list=[],this.storeId?Object(s["b"])({parentId:0,regionType:1,storeOwnerId:this.storeId}).then((function(a){t.province=!1,t.city=!1,t.area=!1,t.clickNum=0,t.showLoading=!1,200===a.status?t.list=a.data.data:t.$toast("请求失败，请重试")}))["catch"]((function(a){t.$toast("请求失败，请重试")})):Object(s["a"])({parentId:0,regionType:0}).then((function(a){t.province=!1,t.city=!1,t.area=!1,t.clickNum=0,t.showLoading=!1,200===a.status?t.list=a.data.data:t.$toast("请求失败，请重试")}))["catch"]((function(a){t.$toast("请求失败，请重试")}))},cityClick:function(){var t=this;this.showLoading=!0,this.list=[],this.storeId?Object(s["b"])({parentId:this.firstValue,regionType:2,storeOwnerId:this.storeId}).then((function(a){t.city=!1,t.area=!1,t.clickNum=1,t.showLoading=!1,200===a.status?t.list=a.data.data:t.$toast("请求失败，请重试")}))["catch"]((function(a){t.$toast("请求失败，请重试")})):Object(s["a"])({parentId:this.firstValue,regionType:1}).then((function(a){t.city=!1,t.area=!1,t.clickNum=1,t.showLoading=!1,200===a.status?t.list=a.data.data:t.$toast("请求失败，请重试")}))["catch"]((function(a){t.$toast("请求失败，请重试")}))},areaClick:function(){var t=this;this.showLoading=!0,this.list=[],this.storeId?Object(s["b"])({parentId:this.secondValue,regionType:3,storeOwnerId:this.storeId}).then((function(a){t.clickNum=2,t.area=!1,t.showLoading=!1,200===a.status?t.list=a.data.data:t.$toast("请求失败，请重试")}))["catch"]((function(a){t.$toast("请求失败，请重试")})):Object(s["a"])({parentId:this.secondValue,regionType:2}).then((function(a){t.clickNum=2,t.area=!1,t.showLoading=!1,200===a.status?t.list=a.data.data:t.$toast("请求失败，请重试")}))["catch"]((function(a){t.$toast("请求失败，请重试")}))},cityListClick:function(t){var a=this;if(this.showLoading=!0,0===this.clickNum){this.provinceData=t,this.list=[];var i={parentId:t.value,regionType:1};this.firstValue=t.value,this.storeId?(i.regionType=2,i.storeOwnerId=this.storeId,Object(s["b"])(i).then((function(t){a.showLoading=!1,200===t.status?a.list=t.data.data:a.$toast("请求失败，请重试")}))["catch"]((function(t){a.$toast("请求失败，请重试")}))):Object(s["a"])(i).then((function(t){a.showLoading=!1,200===t.status?a.list=t.data.data:a.$toast("请求失败，请重试")}))["catch"]((function(t){a.$toast("请求失败，请重试")})),this.province=!0,this.clickNum++}else 1===this.clickNum?(this.list=[],this.cityData=t,this.storeId?Object(s["b"])({parentId:t.value,regionType:3,storeOwnerId:this.storeId}).then((function(t){a.showLoading=!1,200===t.status?a.list=t.data.data:a.$toast("请求失败，请重试")}))["catch"]((function(t){a.$toast("请求失败，请重试")})):Object(s["a"])({parentId:t.value,regionType:2}).then((function(t){a.showLoading=!1,200===t.status?a.list=t.data.data:a.$toast("请求失败，请重试")}))["catch"]((function(t){a.$toast("请求失败，请重试")})),this.secondValue=t.value,this.city=!0,this.clickNum++):2===this.clickNum?(this.list=[],this.area=!0,this.areaData=t,this.storeId?Object(s["b"])({parentId:t.value,regionType:4,storeOwnerId:this.storeId}).then((function(t){a.showLoading=!1,200===t.status?a.list=t.data.data:a.$toast("请求失败，请重试"),0===t.data.data.length&&(a.clickNum=0,a.resetLocation())}))["catch"]((function(t){a.$toast("请求失败，请重试")})):Object(s["a"])({parentId:t.value,regionType:3}).then((function(t){a.showLoading=!1,200===t.status?a.list=t.data.data:a.$toast("请求失败，请重试"),0===t.data.data.length&&(a.clickNum=0,a.resetLocation())}))["catch"]((function(t){a.$toast("请求失败，请重试")})),this.clickNum++):3===this.clickNum&&(this.list=[],this.townData=t,this.clickNum=0,this.resetLocation())},resetLocation:function(){var t=this,a={region:"".concat(this.provinceData.text," ").concat(this.cityData.text," ").concat(this.areaData.text," ").concat(this.townData.text),provinceId:this.provinceData.value,province:this.provinceData.text,cityId:this.cityData.value,city:this.cityData.text,districtId:this.areaData.value,district:this.areaData.text,townshipId:this.townData.value,township:this.townData.text};this.getLatLongByLocationInfo(a).then((function(i){400===i?t.$toast("根据位置信息获取经纬度失败"):(a.latitude=i.latitude,a.longitude=i.longitude,a.aId="",t.onlyread||(localStorage.setItem("latitude",i.latitude),localStorage.setItem("longitude",i.longitude),localStorage.setItem("provinceId",a.provinceId),localStorage.setItem("cityId",a.cityId),localStorage.setItem("districtId",a.districtId),localStorage.setItem("townshipId",a.townshipId),t.setLocationInfo(a),t.setLoaction(i)),t.$emit("handleLocation",a))}))},getLocation:function(){var t=this;this.$store.dispatch("doLocation",!0).then((function(a){400===a?t.$toast("定位失败，请自行选择位置信息"):t.$store.dispatch("doLocationInfo",{latitude:a.latitude,longitude:a.longitude,noStore:!0,force:!0}).then((function(a){t.location=a,t.location.aId=""}))}))}}),mounted:function(){var t=this;this.hideParent(),this.showLoading=!0;var a={parentId:0,regionType:0};this.storeId?(a.regionType=1,a.storeOwnerId=this.storeId,Object(s["b"])(a).then((function(a){t.showLoading=!1,200===a.status?t.list=a.data.data:t.$toast("请求失败，请重试")}))["catch"]((function(a){t.$toast("请求失败，请重试")}))):Object(s["a"])(a).then((function(a){t.showLoading=!1,200===a.status?t.list=a.data.data:t.$toast("请求失败，请重试")}))["catch"]((function(a){t.$toast("请求失败，请重试")}))},beforeDestroy:function(){this.removeHidden()}},h=d,u=(i("8a1b"),i("2877")),f=Object(u["a"])(h,o,e,!1,null,"cfe9643a",null);a["default"]=f.exports},"8a1b":function(t,a,i){"use strict";i("a835")},a835:function(t,a,i){}}]);
//# sourceMappingURL=chunk-20178db3.1a190241.js.map