(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4eff787e"],{1468:function(e,t){var a=1e3,i=60*a,s=60*i,o=24*s,n=365.25*o;function r(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),c=(t[2]||"ms").toLowerCase();switch(c){case"years":case"year":case"yrs":case"yr":case"y":return r*n;case"days":case"day":case"d":return r*o;case"hours":case"hour":case"hrs":case"hr":case"h":return r*s;case"minutes":case"minute":case"mins":case"min":case"m":return r*i;case"seconds":case"second":case"secs":case"sec":case"s":return r*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function c(e){return e>=o?Math.round(e/o)+"d":e>=s?Math.round(e/s)+"h":e>=i?Math.round(e/i)+"m":e>=a?Math.round(e/a)+"s":e+"ms"}function d(e){return l(e,o,"day")||l(e,s,"hour")||l(e,i,"minute")||l(e,a,"second")||e+" ms"}function l(e,t,a){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+a:Math.ceil(e/t)+" "+a+"s"}e.exports=function(e,t){t=t||{};var a=typeof e;if("string"===a&&e.length>0)return r(e);if("number"===a&&!1===isNaN(e))return t.long?d(e):c(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},1727:function(e,t,a){},1934:function(e,t,a){(function(i){function s(){return!("undefined"===typeof window||!window.process||"renderer"!==window.process.type)||("undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function o(e){var a=this.useColors;if(e[0]=(a?"%c":"")+this.namespace+(a?" %c":" ")+e[0]+(a?"%c ":" ")+"+"+t.humanize(this.diff),a){var i="color: "+this.color;e.splice(1,0,i,"color: inherit");var s=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(s++,"%c"===e&&(o=s))})),e.splice(o,0,i)}}function n(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function r(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(a){}}function c(){var e;try{e=t.storage.debug}catch(a){}return!e&&"undefined"!==typeof i&&"env"in i&&(e=Object({NODE_ENV:"production",VUE_APP_ENV:"development",VUE_APP_V_CONSLOE:"hide",VUE_APP_LOG:"hide",VUE_APP_PUBLIC_PATH:"/sgmobile",VUE_APP_HOST_PIC:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile",VUE_APP_HOST4:"https://m-test.ehaier.com",VUE_APP_MHOSTA:"https://m-test.ehaier.com",VUE_APP_PHOST:"https://m-test.ehaier.com",VUE_APP_DHOST:"https://d-test.ehaier.com",VUE_APP_OHOST:"https://o-test.ehaier.com",VUE_APP_SHOST:"https://s-test.ehaier.com",VUE_APP_FHOST:"https://m-test.ehaier.com",VUE_APP_THOST:"https://m-test.ehaier.com",VUE_APP_ADMINEHOST:"https://uadmin.testehaier.com",VUE_APP_STOREHOST:"https://store-test.ehaier.com",VUE_APP_SYNHOST:"https://sanyiniao-test.haier.net",BASE_URL:"/sgmobile/"}).DEBUG),e}function d(){try{return window.localStorage}catch(e){}}t=e.exports=a("6d1a"),t.log=n,t.formatArgs=o,t.save=r,t.load=c,t.useColors=s,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:d(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},t.enable(c())}).call(this,a("4362"))},"347c":function(e,t,a){},"58f4":function(e,t,a){},"65d7":function(e,t,a){"use strict";a("58f4")},"6d1a":function(e,t,a){var i;function s(e){var a,i=0;for(a in e)i=(i<<5)-i+e.charCodeAt(a),i|=0;return t.colors[Math.abs(i)%t.colors.length]}function o(e){function a(){if(a.enabled){var e=a,s=+new Date,o=s-(i||s);e.diff=o,e.prev=i,e.curr=s,i=s;for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];n[0]=t.coerce(n[0]),"string"!==typeof n[0]&&n.unshift("%O");var c=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(function(a,i){if("%%"===a)return a;c++;var s=t.formatters[i];if("function"===typeof s){var o=n[c];a=s.call(e,o),n.splice(c,1),c--}return a})),t.formatArgs.call(e,n);var d=a.log||t.log||console.log.bind(console);d.apply(e,n)}}return a.namespace=e,a.enabled=t.enabled(e),a.useColors=t.useColors(),a.color=s(e),"function"===typeof t.init&&t.init(a),a}function n(e){t.save(e),t.names=[],t.skips=[];for(var a=("string"===typeof e?e:"").split(/[\s,]+/),i=a.length,s=0;s<i;s++)a[s]&&(e=a[s].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function r(){t.enable("")}function c(e){var a,i;for(a=0,i=t.skips.length;a<i;a++)if(t.skips[a].test(e))return!1;for(a=0,i=t.names.length;a<i;a++)if(t.names[a].test(e))return!0;return!1}function d(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=o.debug=o["default"]=o,t.coerce=d,t.disable=r,t.enable=n,t.enabled=c,t.humanize=a("1468"),t.names=[],t.skips=[],t.formatters={}},7059:function(e,t,a){"use strict";a("9b2e")},"7f32":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cashier-page"},[a("Header",{attrs:{leftClick:e.goback}},[e.$route.query.browerFirstIn?e._e():a("img",{staticClass:"back-btn",attrs:{slot:"left",src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/order/casher/cashier-back-icon.png",alt:""},slot:"left"}),e.isSyBirdFromH5||e.$util.isSyBird()?e._e():a("router-link",{attrs:{slot:"right",to:"/orderlist"},slot:"right"},[e._v("订单中心")])],1),e.skeletonLoading?a("skeleton",{attrs:{nums:3}}):a("div",[e.isPaying?a("div",{staticClass:"paying-status"},[e._v("正在支付中, 请稍等...")]):a("div",[a("div",{staticClass:"cashier-money"},[e.totalAmount?a("p",{staticClass:"cashier-aplay-money"},[a("span",[e._v("¥")]),e._v(e._s(e.totalAmount.split(".")[0])+"."),a("small",[e._v(e._s(e.totalAmount.split(".")[1]||"00"))])]):e._e(),e._e()]),e.isSyBirdFromH5||e.$util.isSyBird()?e._e():a("div",{staticClass:"service-container",on:{click:e.toService}},[a("span",{staticClass:"service-icon"}),a("span",{staticClass:"service-text"},[e._v("客服")])]),a("div",{staticClass:"cashier-pay-warp"},[a("div",{staticClass:"cashier-pay-list"},e._l(e.paymethodsTopVOList,(function(t){return a("div",{key:t.id},["acp_apple"!=t.code&&"acp_android"!=t.code&&"wx_pay"!=t.code&&"epay"!=t.code&&"ali_pay"!=t.code||"wx_pay"==t.code&&e.isCanShowVersion||"epay"==t.code&&e.isShowEPay||"ali_pay"==t.code&&e.isShowAlipay?a("div",{staticClass:"cashier-list-item",class:{selected:e.curSelected==t.code,"show-selected":t.unfolding},on:{click:function(a){return e.changeSelected(t)}}},[a("div",{staticClass:"cashier-item-row",class:{"cashier-row-digmoney-bg":"digiccy"==t.code}},[a("div",{staticClass:"cashier-list-logo"},[a("i",{class:"logo-"+t.code})]),a("div",{staticClass:"cashier-row-flex",class:{"cashier-row-disable":1!=t.payShowType}},[a("div",{staticClass:"cashier-row-body"},[a("div",{staticClass:"logo-info"},[a("h6",[e._v(e._s(t.desc))]),t.subTile?a("p",[e._v(e._s(t.subTile))]):"digiccy"==t.code&&1!=t.payShowType?a("p",[e._v(e._s(2==t.payShowType?"数字人民币钱包未开通":"订单含非自营商品暂不支持数字人民币"))]):e._e()]),t.activityDescription?a("span",[e._v(e._s(t.activityDescription))]):e._e()]),a("div",{staticClass:"cashier-list-select"},[a("i")])])])]):e._e()])})),0),a("div",{staticClass:"cashier-ways-line"}),a("div",{staticClass:"cashier-pay-list"},e._l(e.paymethodsMiddleVOList,(function(t){return a("div",{key:t.id},["acp_apple"!=t.code&&"acp_android"!=t.code&&"wx_pay"!=t.code&&"epay"!=t.code&&"ali_pay"!=t.code||"wx_pay"==t.code&&e.isCanShowVersion||"epay"==t.code&&e.isShowEPay||"ali_pay"==t.code&&e.isShowAlipay?a("div",{staticClass:"cashier-list-item",class:{selected:e.curSelected==t.code,"show-selected":t.unfolding},on:{click:function(a){return e.changeSelected(t)}}},[a("div",{staticClass:"cashier-item-row",class:{"cashier-row-digmoney-bg":"digiccy"==t.code}},[a("div",{staticClass:"cashier-list-logo"},[a("i",{class:"logo-"+t.code})]),a("div",{staticClass:"cashier-row-flex",class:{"cashier-row-disable":1!=t.payShowType}},[a("div",{staticClass:"cashier-row-body"},[a("div",{staticClass:"logo-info"},[a("h6",[e._v(e._s(t.desc))]),t.subTile?a("p",[e._v(e._s(t.subTile))]):"digiccy"==t.code&&1!=t.payShowType?a("p",[e._v(e._s(2==t.payShowType?"数字人民币钱包未开通":"订单含非自营商品暂不支持数字人民币"))]):e._e()]),t.activityDescription?a("span",[e._v(e._s(t.activityDescription))]):e._e()]),a("div",{staticClass:"cashier-list-select"},[a("i")])])])]):e._e()])})),0),a("div",{staticClass:"cashier-ways-line"}),a("div",{staticClass:"cashier-pay-list"},[e.cardlists&&0!==e.cardlists.length?e._e():a("div",{staticClass:"cashier-item-row",on:{click:e.addCard}},[a("div",{staticClass:"cashier-list-logo"},[a("i",{staticClass:"logo-card-bank"})]),a("div",{staticClass:"cashier-row-flex"},[a("div",{staticClass:"cashier-row-body"},[a("div",{staticClass:"logo-info"},[a("h6",[e._v("使用新卡支付")])])]),a("div",{staticClass:"icon-arrow"})])]),a("div",{staticClass:"bank-list-box",class:{active:e.showMoreCard}},[e._l(e.cardlists,(function(t){return a("div",{key:t.bankCode,staticClass:"cashier-item-row",class:{selected:"bank_pay"==e.curSelected&&e.curSelBankId==t.id},on:{click:function(a){return e.changeBankSelect(t)}}},[a("div",{staticClass:"cashier-list-logo"},[e.getBankStyleInfo[t.bankCode]?a("img",{staticClass:"logo-bank",attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/"+e.getBankStyleInfo[t.bankCode].img+".png"}}):a("img",{staticClass:"logo-bank",attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/order/casher/card.png"}})]),a("div",{staticClass:"cashier-row-flex"},[a("div",{staticClass:"cashier-row-body"},[a("div",{staticClass:"logo-info"},[t.canSelect?a("h6",[e._v(e._s(t.bankName)+"卡("+e._s(t.cardNo)+")")]):a("h6",[e._v("添加"+e._s(t.bankName)+"储蓄卡/信用卡")])])]),t.canSelect?a("div",{staticClass:"cashier-list-select"},[a("i")]):a("div",{staticClass:"icon-arrow"})])])})),e.cardlists&&e.cardlists.length>0?a("div",{staticClass:"cashier-item-row new-card",on:{click:e.addCard}},[a("span",{staticClass:"bind-new-card"},[e._v("使用新卡支付")]),a("span",{staticClass:"bind-new-card-arrow"})]):e._e()],2),e.cardlists.length>4?a("div",{staticClass:"cashier-item-row"},[a("div",{staticClass:"bind-more",class:{active:e.showMoreCard},on:{click:e.showMore}},[a("i"),e._v(e._s(e.showMoreCard?"收起更多":"更多绑定银行卡"))])]):e._e()]),a("div",{staticClass:"cashier-ways-line"}),e.paymethodsBottomVOList.length?a("div",{staticClass:"cashier-list-others",class:{active:e.isToggle},on:{click:e.toggleShowWay}},[a("div",[e._v("其他支付方式 ")]),a("i")]):e._e(),a("div",{staticClass:"cashier-pay-list cashier-pay-list-btm"},e._l(e.paymethodsBottomVOList,(function(t){return a("div",{directives:[{name:"show",rawName:"v-show",value:e.isToggle,expression:"isToggle"}],key:t.id},["acp_apple"!=t.code&&"acp_android"!=t.code&&"wx_pay"!=t.code&&"epay"!=t.code&&"ali_pay"!=t.code||"wx_pay"==t.code&&e.isCanShowVersion||"epay"==t.code&&e.isShowEPay||"ali_pay"==t.code&&e.isShowAlipay?a("div",{staticClass:"cashier-list-item",class:{selected:e.curSelected==t.code,"show-selected":t.unfolding},on:{click:function(a){return e.changeSelected(t)}}},[a("div",{staticClass:"cashier-item-row",class:{"cashier-row-digmoney-bg":"digiccy"==t.code}},[a("div",{staticClass:"cashier-list-logo"},[a("i",{class:"logo-"+t.code})]),a("div",{staticClass:"cashier-row-flex",class:{"cashier-row-disable":1!=t.payShowType}},[a("div",{staticClass:"cashier-row-body"},[a("div",{staticClass:"logo-info"},[a("h6",[e._v(e._s(t.desc))]),t.subTile?a("p",[e._v(e._s(t.subTile))]):"digiccy"==t.code&&1!=t.payShowType?a("p",[e._v(e._s(2==t.payShowType?"数字人民币钱包未开通":"订单含非自营商品暂不支持数字人民币"))]):e._e()]),t.activityDescription?a("span",[e._v(e._s(t.activityDescription))]):e._e()]),a("div",{staticClass:"cashier-list-select"},[a("i")])])])]):e._e()])})),0)]),a("div",{staticClass:"cashier-to-submit"},[a("a",{class:{disable:e.isSubmiting},attrs:{href:"javascript:;"},on:{click:function(t){return e.toSubmit()}}},[e._v("确认"+e._s(e.payMapText[e.curSelected])+" "+e._s("b2b_pay"==e.curSelected||"epay"==e.curSelected||"aggre_pay"==e.curSelected?"":"支付")+" ¥"+e._s(e._f("priceFormate")(e.totalAmount-e.discountPrice)))])]),a("form",{attrs:{id:"aliPay_form",name:"auto_submit_form",action:e.aliPayFormData.target,method:"post",target:"_self"}},[a("input",{attrs:{type:"hidden",name:"biz_content"},domProps:{value:e.aliPayFormData.bizContent}})]),a("form",{attrs:{id:"weixin_form",name:"auto_submit_form",action:e.weixinFormData.target,method:"post",target:"_self"}},[a("input",{attrs:{type:"hidden",name:"biz_content"},domProps:{value:e.weixinFormData.bizContent}})]),a("form",{attrs:{id:"epay_form",name:"auto_submit_form",action:e.epayFormData.target,method:"post",target:"_self"}},[a("input",{attrs:{type:"hidden",name:"biz_content"},domProps:{value:e.epayFormData.bizContent}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.numKeybordShow,expression:"numKeybordShow"}],staticClass:"dialog-container"},[a("div",{staticClass:"bg"}),a("CaptchaDialog",{staticClass:"dialog",attrs:{show:e.numKeybordShow,preGetTime:e.preGetTime,desc:"当使用银行卡支付时，需获取银行卡预留手机号的短信验证码核实身份",phone:this.mobileNo.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2")},on:{submit:e.onSubmitCaptcha,close:e.onCloseCaptchaDialog,resend:e.sendSmsCaptch}})],1),a("van-popup",{style:{height:"8rem"},attrs:{round:"",position:"bottom"},model:{value:e.digitMoneyPop,callback:function(t){e.digitMoneyPop=t},expression:"digitMoneyPop"}},[a("div",{staticClass:"digit-pop-warp"},[a("div",{staticClass:"digit-pop-header"},[a("img",{attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/order/casher/digit_pop_head.png",alt:""}}),a("p",[e._v("数字人民币支付")]),a("a",{staticClass:"digit-pop-close",attrs:{href:"javascript:;"},on:{click:function(t){e.digitMoneyPop=!1}}},[a("img",{attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/sgmobile/common/control-close.png",alt:""}})])]),a("div",{staticClass:"digit-pop-body"},[a("h4",[a("small",[e._v("¥")]),a("span",[e._v(e._s(e.totalAmount.split(".")[0]))]),a("small",[e._v("."+e._s(e.totalAmount.split(".")[1]||"00"))])]),a("div",{staticClass:"digit-pop-list"},e._l(e.digitCardList,(function(t){return a("div",{key:t.id,staticClass:"digit-list-item",class:{selected:t.id==e.curDigitCard},on:{click:function(a){return e.changeDigitCard(t)}}},[a("div",{staticClass:"digit-item-name"},[e.getBankStyleInfo[t.bankCode]?a("img",{attrs:{src:"https://cdn09.ehaier.com/shunguang/H5/www/img/"+e.getBankStyleInfo[t.bankCode].img+".png",alt:""}}):e._e(),a("span",[e._v(e._s(t.bankName)+"数字人民币钱包("+e._s(t.walletSegInfo)+")")])]),a("div",{staticClass:"digit-list-select"},[a("i")])])})),0)]),a("div",{staticClass:"digit-pop-footer"},[a("a",{staticClass:"digit-pay-submit",attrs:{href:"javascript:;"},on:{click:e.doConfirmDigitCard}},[e._v("确定")])])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.digitMsgAuth,expression:"digitMsgAuth"}],staticClass:"dialog-container"},[a("div",{staticClass:"bg"}),a("CaptchaDialog",{staticClass:"dialog",attrs:{show:e.digitMsgAuth,preGetTime:e.preGetTime,isBankPhone:!1,phone:this.getUserInfo.phone},on:{submit:e.digitPaySubmit,close:e.onCloseCaptchaDialog,resend:e.digitPayMsgFn}})],1)],1)]),a("van-popup",{staticClass:"leave-popup",on:{close:function(t){e.leaveOrderTip=!1}},model:{value:e.leaveOrderTip,callback:function(t){e.leaveOrderTip=t},expression:"leaveOrderTip"}},[a("leave-tip",{attrs:{title:"真的要放弃付款吗？",desc:"如您在下单过程中遇到任何疑问，都可联系我们的在线客服进行实时解答哦",sceneId:"cj103"},on:{continuePay:function(t){e.leaveOrderTip=!1},giveUp:e.doBack,close:function(t){e.leaveOrderTip=!1}}})],1)],1)},s=[],o=a("fa7d"),n=a("bbc2"),r=a("e725"),c=a("a73f"),d=a("e845"),l=a("f057"),u=a("f2e8"),p=a.n(u),h=a("9a20"),m=a("2f62"),g=a("21b1"),y=a("f121");function f(e){return _(e)||b(e)||v(e)||S()}function S(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(e,t){if(e){if("string"===typeof e)return C(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?C(e,t):void 0}}function b(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _(e){if(Array.isArray(e))return C(e)}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){I(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function I(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var w=new g["a"];w.initDeviceReady();var P=!1,O=0,A={name:"cashier",data:function(){return{skeletonLoading:!0,payMapText:{ali_pay:"支付宝",pcredit:"花呗",ali_huabei:"花呗分期",ccb_fenqi:"建设银行卡",ceb_fenqi:"光大银行卡",acp_pay:"云闪付",acp_apple:"Apple Pay",acp_android:"安卓Pay",wx_pay:"微信",kjt_pay:"快捷通",sg_ious:"智家白条",epay:"大额支付",bank_pay:"银行卡",b2b_pay:"公对公支付",digiccy:"数字人民币",aggre_pay:"聚合扫码支付",cash_card:"现金刷卡"},isWeikuan:!1,leftTime:"",price:"",totalAmount:"",curSelected:"",curSelBank:"",curSelBankId:"",orderId:"",orderSn:"",minPaymentAmt:"",paymethodsTopVOList:[],paymethodsMiddleVOList:[],paymethodsBottomVOList:[],cardlists:[],initLinkType:0,linkType:0,platformCode:"",platformParentCode:"",stagepCreditId:"",stageIndex:0,curClickStage:"",stageNum:"",stagecfgMark:"",discountPrice:0,isToggle:!1,unionPayFormData:{},aliPayFormData:{},weixinFormData:{},epayFormData:{},digiccyFormData:{},isPaying:!1,isSubmiting:!1,isCanShowVersion:!1,isShowEPay:!0,isShowAlipay:!0,aliPayType:"h5",showMoreCard:!1,isIOS:o["a"].isIos(),isSyBirdFromH5:!1,numKeybordShow:!1,mobileNo:"",bankTel:"",preGetTime:0,resetGetSms:!1,leaveOrderTip:!1,curDigitCard:"",curDigitCardInfo:null,digitMoneyPop:!1,digitMsgAuth:!1,digitCardList:[]}},components:{Header:r["a"],skeleton:c["a"],CaptchaDialog:d["a"],leaveTip:l["a"]},computed:k(k({},Object(m["d"])("freebankcard",["getBankStyleInfo"])),Object(m["d"])(["ucId","accessToken","mId","getUserInfo"])),filters:{priceFormate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number(e).toFixed(t)}},beforeRouteEnter:function(e,t,a){P="orderList"===t.name||"orderDetail"===t.name,console.log(t.fullPath,location.href),O=-1!==t.fullPath.indexOf("closewebview=1")||-1!==location.href.indexOf("closewebview=1")?1:0,a()},mounted:function(){var e=this;this.orderSn=this.$route.params.orderSn;var t=this.$route.query;if(this.isSyBirdFromH5=t.isHaierSyn||"",t.orderSource&&sessionStorage.setItem("cur_order_from",t.orderSource),o["a"].isWeixin()&&t.code)return this.skeletonLoading=!1,this.isPaying=!0,this.orderId=t.orderId,void this.initWxPayWithCode(t);t.isd&&"1"===t.isd&&this.$dialog.confirm({title:"支付确认",message:"1、请在微信内完成支付，如果您已支付成功，请点击”已完成支付“按钮\n2、如果你还未安装微信客户端，请点击”取消“并选择其他方式付款",messageAlign:"left",confirmButtonText:"已完成支付"}).then((function(){e.$router.replace("/orderList?tagChecked=2&goback=2")}))["catch"]((function(){})),o["a"].isHaierApp()?w.initDeviceReady().then((function(){w.addResumeEventListener((function(){e.checkOrderStatus()}),"onresume_key"),console.log("===>version:"),w.upAppinfoModule.getAppInfo().then((function(t){var a=t.retData.appVersion,i=t.retData.OSversion;console.log(a,i,"appVersion"),a&&h["a"].gte(a,"6.14.0")||o["a"].isSyBird()?(console.log("大"),e.isCanShowVersion=!0):(console.log("小"),e.isCanShowVersion=!1),a&&h["a"].gte(a,"6.21.0")||o["a"].isSyBird()||a&&h["a"].gte(a,"6.19.0")&&e.isIOS?(e.isShowAlipay=!0,e.aliPayType="sdk"):a&&h["a"].lt(a,"6.19.0")&&h["a"].gte(i,"14.0.0")&&o["a"].isUplus()?e.isShowAlipay=!1:(e.isShowAlipay=!0,e.aliPayType="h5"),o["a"].isUplus()&&(a&&h["a"].gte(a,"6.17.0")||(e.isShowEPay=!e.isIOS))}))})):o["a"].isWeixin()?this.isCanShowVersion=!0:this.isCanShowVersion=!1,this.fetchData()},beforeDestroy:function(){w.removeResumeEventListener("onresume_key")},methods:{toService:function(){this.$store.dispatch("goPageByType",{type:29,params:{sceneId:"cj102"}})},fetchBindBankCard:function(){var e=this;this.$http.get(n["a"].BANKCARD_FREE_LIST).then((function(t){var a=t.data,i=a.data,s=e.$route.query,o=i.map((function(e){return{bankCode:e.bankCode,bankName:e.bankName,cardNo:e.cardNo.replace(/\*/g,""),id:e.id,bankTel:e.bankTel,mobileNo:e.mobileNo,canSelect:!0}}));e.cardlists=f(o),+s.addcard&&(e.curSelected="bank_pay",e.curSelBank=e.cardlists[0].bankCode,e.curSelBankId=e.cardlists[0].id)}))},toPayWay:function(e){var t=this,a="".concat(n["a"].ORDER_200PAYCHECK,"?orderSn=").concat(this.orderSn);this.$http.get(a).then((function(e){var a=e.data;if(a.success){if("pcredit"===t.curSelected||"ali_huabei"===t.curSelected){var i="";return"ali_huabei"===t.curSelected&&(i="&pCreditId="+t.stagepCreditId),void o["a"].openNewWindow(n["a"].HB_PAY_H5+"?callBackUrl="+encodeURIComponent("".concat(y["a"].HOST,"/sgmobile/payState"))+"&merchantUrl="+encodeURIComponent("".concat(y["a"].HOST,"/sgmobile/payState"))+"&orderSn="+t.orderSn+i)}if("ali_pay"===t.curSelected)return void o["a"].openNewWindow(n["a"].ALIPAY_H5+"?callBackUrl="+encodeURIComponent("".concat(y["a"].HOST,"/sgmobile/payState"))+"&merchantUrl="+encodeURIComponent("".concat(y["a"].HOST,"/sgmobile/payState"))+"&orderSn="+t.orderSn);if("wx_pay"===t.curSelected&&(o["a"].isHaierApp()?t.wxSDKAppPay():o["a"].isWeixin()?t.doGetWxCode():t.wxH5Pay()),"ccb_fenqi"===t.curSelected||"ceb_fenqi"===t.curSelected){var s,r={};r.num=t.stageNum||1,r.channel="sg",r.payType=t.curSelected,r.cfgMark=t.stagecfgMark||"",r.memberId=t.mId,r.orderSn=t.orderSn;var c=null;s=n["a"].CCB_FENQI_W+"?from=sgmobile&orderSn="+r.orderSn+"&num="+r.num+"&channel="+r.channel+"&payType="+r.payType+"&callbackUrl=sgmobile/payState&memberId="+r.memberId+"&cfgMark="+r.cfgMark,o["a"].isProdEnv()&&(s=y["a"].PHOST+s),p()(s,null,(function(e,t){if(!e&&13!==t.errorCode&&t.success){if("ceb_fenqi"===r.payType)c=encodeURI(t.data.cebfenqi.actionUrl)+"?Plain="+encodeURI(t.data.cebfenqi.plain)+"&Signature="+t.data.cebfenqi.sign;else{var a="";t.data.ccbfenqi.INSTALLNUM&&(a="&INSTALLNUM="+t.data.ccbfenqi.INSTALLNUM),c=t.data.ccbfenqi.actionUrl+"&REMARK1="+t.data.ccbfenqi.REMARK1+"&CLIENTIP="+t.data.ccbfenqi.CLIENTIP+"&BRANCHID="+t.data.ccbfenqi.BRANCHID+"&REMARK2="+t.data.ccbfenqi.REMARK2+"&TXCODE="+t.data.ccbfenqi.TXCODE+"&REGINFO="+t.data.ccbfenqi.REGINFO+"&CURCODE="+t.data.ccbfenqi.CURCODE+"&GATEWAY="+t.data.ccbfenqi.GATEWAY+"&PROINFO="+t.data.ccbfenqi.PROINFO+"&MERCHANTID="+t.data.ccbfenqi.MERCHANTID+a+"&ORDERID="+t.data.ccbfenqi.ORDERID+"&POSID="+t.data.ccbfenqi.POSID+"&PAYMENT="+t.data.ccbfenqi.PAYMENT+"&MAC="+t.data.ccbfenqi.MAC+"&TYPE="+t.data.ccbfenqi.TYPE+"&TIMEOUT="+t.data.ccbfenqi.TIMEOUT}o["a"].openNewWindow(c,!0)}}))}if("sg_ious"===t.curSelected){if(o["a"].isNull(t.ucId)||o["a"].isNull(t.accessToken))return t.$toast("您的当前帐号暂时无法访问此服务,请使用关联手机号登录"),void(t.isSubmiting=!1);var d="".concat(n["a"].WHITE_SHOWS_QUERY_STATUS,"?from=sgmobile");t.$http.post(d,{userId:t.ucId,token:t.accessToken}).then((function(e){var a=e.data;if(!a.success)return t.$toast(a.message),void(t.isSubmiting=!1);var i=Number(a.data.applyStatus);if(2!==i&&3!==i||t.$router.push("/sgwhitepay"),0===i&&t.$http.get(n["a"].WHITE_SHOWS_APPLY,{params:{backUrl:window.location.href,userId:t.ucId,token:t.accessToken}}).then((function(e){var a=e.data;a.success?location.href=a.data.data.url:(t.$toast(a.message),t.isSubmiting=!1)})),1===i){var s="".concat(n["a"].WHITE_SHOWS_PAY,"?from=sgmobile&userId=").concat(t.ucId,"&token=").concat(t.accessToken,"&orderSn=").concat(t.orderSn,"&resultUrl=").concat(y["a"].HOST);t.$http.post(s).then((function(e){var a=e.data;a.success?(t.isSubmiting=!1,o["a"].openNewWindow(a.data.redirectUrl,!0)):(t.$toast(a.message),t.isSubmiting=!1)}))}}))}if("kjt_pay"===t.curSelected&&t.$http.get(n["a"].EASYCONNECT_INIT).then((function(e){var a=e.data;a.data.kjtAccount&&a.data.kjtAccount.memberKjtpayAccount?o["a"].openNewWindow("/v2/h5/pay/kjtpay/request.html?callbackUrl="+encodeURIComponent("".concat(y["a"].HOST,'/sgmobile/payState?data={"is_success":"T","order_id": "').concat(t.orderId,'"}'))+"&orderSn="+t.orderSn+"&kjtAcount="+a.data.kjtAccount.memberKjtpayAccount):(t.$dialog.alert({title:"您还未绑定快捷通",confirmButtonText:"去绑定"}).then((function(){t.$router.push("/bankcard")})),t.isSubmiting=!1)})),"acp_pay"===t.curSelected){var l="".concat(n["a"].UNINO_PAY,"?from=sgmobile&orderSn=").concat(t.orderSn,"&channel=sg&callbackUrl=").concat(encodeURIComponent("".concat(y["a"].HOST,'/sgmobile/payState?data={"is_success":"T","order_id": "').concat(t.orderId,'"}')));o["a"].isProdEnv()&&(l=y["a"].PHOST+l),p()(l,null,(function(e,a){e||a.success&&(t.unionPayFormData=a.data,t.$nextTick((function(){t.isSubmiting=!1,document.getElementById("unionPay_form").submit()})))}))}t.$util.gioTrackWithVariable("MB13419",{user_id:localStorage.getItem("ucId")?localStorage.getItem("ucId")+"":"null",member_id:localStorage.getItem("mId")?localStorage.getItem("mId")+"":"null",order_id:t.orderSn?t.orderSn+"":"null",par_value:t.totalAmount?t.totalAmount+"":"null"})}else t.$toast(a.message),t.isSubmiting=!1}))},inDirectPayWay:function(){var e=this,t="".concat(n["a"].ORDER_200PAYCHECK,"?orderSn=").concat(this.orderSn);this.$http.get(t,{cancelRepeat:!1}).then((function(t){var a=t.data;if(a.success){if("ali_pay"===e.curSelected)o["a"].isHaierApp()&&"sdk"===e.aliPayType?e.checkPaySubmit({checkoutType:e.linkType,orderSn:e.orderSn,payPartnerId:e.platformParentCode,payType:e.curSelected,payTypeId:500,userId:e.mId,apiVersion:1}).then((function(t){var a=t.data,i=a;i.success?w.initDeviceReady().then((function(){w.upAlipayModule.alipayOrder({order:i.data.data.zfb_data_package}).then((function(t){console.log("支付宝支付",t),e.$util.gioTrackWithVariable("pay_result",{pay_result_Mcode:t.retData.resultStatus?t.retData.resultStatus+"":"null",pay_result_Message:t.retData.memo||"null",pay_result_platform:"alipay",os:o["a"].isIos()?"ios":"android",order_id:e.orderSn+""}).then((function(){e.isSubmiting=!1,"9000"===t.retData.resultStatus&&e.$router.replace('/payState?data={"is_success":"T","order_id": "'+e.orderId+'"}')}))}))})):(e.$toast(i.message),e.isSubmiting=!1)})):e.checkPaySubmit({checkoutType:e.linkType,orderSn:e.orderSn,payPartnerId:e.platformParentCode,payType:e.curSelected,payTypeId:e.platformCode,userId:e.mId,apiVersion:1}).then((function(t){var a=t.data,i=a;i.success?(e.aliPayFormData=i.data.data,e.$nextTick((function(){e.isSubmiting=!1,document.getElementById("aliPay_form").submit()}))):(e.$toast(i.message),e.isSubmiting=!1)}));else if("wx_pay"===e.curSelected&&o["a"].isWeixin())e.doGetWxCode();else if("wx_pay"===e.curSelected)o["a"].isHaierApp()?(console.log("间连 app sdk支付"),w.upUserModule.checkAppIsInstalled({platform:"wechat"}).then((function(t){t.retData&&t.retData.status?e.checkPaySubmit({checkoutType:e.linkType,orderSn:e.orderSn,payPartnerId:"201",payType:e.curSelected,payTypeId:"102",userId:e.mId,from:e.$util.isSyBird()?"":"1",type:e.$util.isSyBird()?"syn":"app",apiVersion:1}).then((function(t){if(console.log(t),!t.data.success)return e.$toast(t.data.message),void(e.isSubmiting=!1);var a=t.data&&t.data.data&&t.data.data.data,i=e.$util.strJSONParse(a.wx_data_package,{});console.log(i,"appInfoJson"),e.uplusAppWxPay({prepayid:i.prepayid,noncestr:i.noncestr,timestamp:i.timestamp,sign:i.sign}).then((function(t){console.log(t,"微信sdk 支付结果"),e.$util.gioTrackWithVariable("pay_result",{pay_result_Mcode:t.retCode||t||"null",pay_result_Message:t.retInfo||"null",pay_result_platform:"wx",os:o["a"].isIos()?"ios":"android",order_id:e.orderSn}).then((function(){e.isSubmiting=!1,"000000"===t.retCode&&e.$router.replace('/payState?data={"is_success":"T","order_id": "'+e.orderId+'"}')}))}))})):(e.$toast("您还没有安装微信"),e.isSubmiting=!1)}))):e.wxH5Pay();else if("digiccy"===e.curSelected)console.log("数字货币支付"),e.findDigitMoneyCardList();else if("sg_ious"===e.curSelected){(o["a"].isNull(e.ucId)||o["a"].isNull(e.accessToken))&&(e.$toast("您的当前帐号暂时无法访问此服务,请使用关联手机号登录"),e.isSubmiting=!1),console.log("白条间连");var i=n["a"].WHITE_ACCESS_TOKEN;e.$http.post(i,{}).then((function(t){var a=t.data;if(a.success){var i=a.data;e.$store.commit("setAcsToken",i,{root:!0}),window.localStorage.setItem("accessToken",i);var s="".concat(n["a"].WHITE_SHOWS_QUERY_STATUS,"?from=sgmobile");e.$http.post(s,{userId:e.ucId,token:i}).then((function(t){var a=t.data;if(!a.success)return e.$toast(a.message),void(e.isSubmiting=!1);var s=Number(a.data.applyStatus);2!==s&&3!==s||e.$router.push("/sgwhitepay"),0===s&&e.$http.get(n["a"].WHITE_SHOWS_APPLY,{params:{backUrl:window.location.href,userId:e.ucId,token:i}}).then((function(t){var a=t.data;a.success?location.href=a.data.data.url:(e.$toast(a.message),e.isSubmiting=!1)})),1===s&&e.checkPaySubmit({checkoutType:e.linkType,orderSn:e.orderSn,payPartnerId:e.platformParentCode,payType:"bt_pay",payTypeId:e.platformCode,userId:e.mId,ptUserId:i,apiVersion:1}).then((function(t){var a=t.data,i=a;if(console.log(i,"白条支付间连 paysubmit"),!i.success)return e.$toast(i.message),void(e.isSubmiting=!1);location.href=i.data.data.url}))}))}else"-100"===a.errorCode?e.$store.dispatch("doLogin"):"1009"===a.errorCode&&e.$router.push("/sgwhitepay")}))}else"epay"===e.curSelected?(console.log("大额支付 支付"),e.checkPaySubmit({checkoutType:e.linkType,orderSn:e.orderSn,payPartnerId:e.platformParentCode,payType:"epay",payTypeId:e.platformCode,userId:e.mId,apiVersion:1}).then((function(t){var a=t.data,i=a;i.success?(e.epayFormData=i.data.data,console.log(e.epayFormData,"epayFormData"),o["a"].isHaierApp()&&o["a"].isIos()?e.$http.post(n["a"].GET_CHANGE_WEBVIEW_DATA,{key:e.orderSn,obj:e.epayFormData,method:"set"}).then((function(t){console.log(t,"aaaaaaaa");var a=t.data;if(a.success){var i=y["a"].HOST+"/sgmobile/orderpaymiddle?container_type=4&hidesBottomBarWhenPushed=1&orderSn="+e.orderSn;console.log(i,"targetUrl"),w.initDeviceReady().then((function(){w.upVdnModule.goToPage({url:i})}))}})):e.$nextTick((function(){e.isSubmiting=!1,document.getElementById("epay_form").submit()}))):(e.$toast(i.message),e.isSubmiting=!1)}))):"bank_pay"===e.curSelected?(console.log("银行卡支付"),e.sendSmsCaptch()):"b2b_pay"===e.curSelected?e.b2bPaySubmit():"aggre_pay"===e.curSelected||"cash_card"===e.curSelected?e.$router.push("/scanpay/"+e.orderSn+"?type="+e.curSelected):(e.$toast("未知的支付异常"),e.isSubmiting=!1);e.$util.gioTrackWithVariable("MB13419",{user_id:localStorage.getItem("ucId")?localStorage.getItem("ucId")+"":"null",member_id:localStorage.getItem("mId")?localStorage.getItem("mId")+"":"null",order_id:e.orderSn?e.orderSn+"":"null",par_value:e.totalAmount?e.totalAmount+"":"null"})}else e.$toast(a.message),e.isSubmiting=!0}))},b2bPaySubmit:function(){var e=this;this.checkPaySubmit({checkoutType:this.linkType,orderSn:this.orderSn,payPartnerId:this.platformParentCode,payType:"b2b_pay",payTypeId:this.platformCode,userId:this.mId,apiVersion:1}).then((function(t){var a=t.data,i=a;i.success?e.$router.push("/orderCashierB2BPay/".concat(encodeURIComponent(i.data.data.url))):(e.$dialog.alert({message:a.message,className:"dialog-custom"}),e.isSubmiting=!1)}))},checkPaySubmit:function(e){var t="".concat(n["a"].TO_ORDER_PAY_NEW);return this.$http.post(t,e,{cancelRepeat:!1})},toSubmit:function(){var e=this;this.$util.gioTrackWithVariable("choose_payment_method",{payment_method:this.payMapText[this.curSelected]||"null",orderId:this.orderSn}).then((function(){e.isSubmiting||(e.linkType?e.inDirectPayWay():e.reportPayLog())}))},changeStageFn:function(e,t){this.stageIndex=t,this.curSelected=e.code,this.curClickStage=e.code,this.minPaymentAmt=e.minPaymentAmt,e.stagesrepaidTotalAmt=e.stagesVOList[t].repaidTotalAmt,this.stagepCreditId=e.stagesVOList[t].pCreditId,this.price=e.stagesVOList[t].eachPeriodAmt,this.stageNum=e.stagesVOList[t].num,this.stagecfgMark=e.cfgMark},changeSelected:function(e){"1"===e.payShowType&&(this.curSelected!==e.code&&(this.stageIndex=0,e.stagesVOList.length&&(e.stagesrepaidTotalAmt=e.stagesVOList[0].repaidTotalAmt,this.stagepCreditId=e.stagesVOList[0].pCreditId)),this.linkType=e.checkoutType,this.platformCode=e.middlePlatformCode,this.platformParentCode=e.middlePlatformParentCode,this.stagecfgMark=e.cfgMark,this.curSelected=e.code,this.curClickStage=e.code,this.discountPrice=Number(e.discountAmt||null),this.minPaymentAmt=e.minPaymentAmt,this.isSubmiting=!1,sessionStorage.setItem("cur_pay_method",JSON.stringify(I({},this.orderSn,e))))},readyInit:function(){var e=this;this.paymethodsTopVOList.forEach((function(t){t.stagesrepaidTotalAmt=t.stagesVOList.length?t.stagesVOList[0].repaidTotalAmt:"","digiccy"===t.code&&(e.digitCardList=t.digiccyInfoResponseList)})),this.paymethodsMiddleVOList.forEach((function(t){t.stagesrepaidTotalAmt=t.stagesVOList.length?t.stagesVOList[0].repaidTotalAmt:"","digiccy"===t.code&&(e.digitCardList=t.digiccyInfoResponseList)})),this.paymethodsBottomVOList.forEach((function(t){t.stagesrepaidTotalAmt=t.stagesVOList.length?t.stagesVOList[0].repaidTotalAmt:"","digiccy"===t.code&&(e.digitCardList=t.digiccyInfoResponseList)})),this.linkType=this.initLinkType=this.paymethodsTopVOList[0]?this.paymethodsTopVOList[0].checkoutType:this.paymethodsMiddleVOList[0]?this.paymethodsMiddleVOList[0].checkoutType:this.paymethodsBottomVOList[0].checkoutType,this.platformCode=this.paymethodsTopVOList[0]?this.paymethodsTopVOList[0].middlePlatformCode:this.paymethodsMiddleVOList[0]?this.paymethodsMiddleVOList[0].middlePlatformCode:this.paymethodsBottomVOList[0].middlePlatformCode,this.platformParentCode=this.paymethodsTopVOList[0]?this.paymethodsTopVOList[0].middlePlatformParentCode:this.paymethodsMiddleVOList[0]?this.paymethodsMiddleVOList[0].middlePlatformParentCode:this.paymethodsBottomVOList[0].middlePlatformParentCode,this.curSelected=this.paymethodsTopVOList[0]?this.paymethodsTopVOList[0].code:this.paymethodsMiddleVOList[0]?this.paymethodsMiddleVOList[0].code:this.paymethodsBottomVOList[0].code,this.isShowAlipay||(this.curSelected="wx_pay"),this.minPaymentAmt=this.paymethodsTopVOList[0]?this.paymethodsTopVOList[0].minPaymentAmt:this.paymethodsMiddleVOList[0]?this.paymethodsMiddleVOList[0].minPaymentAmt:this.paymethodsBottomVOList[0]?this.paymethodsBottomVOList[0].minPaymentAmt:"";var t=this.$util.strJSONParse(sessionStorage.getItem("cur_pay_method"),{});if(t&&t[this.orderSn]&&!P){var a=t[this.orderSn];"bank_pay"===a.code?(this.curSelected=a.code,this.curSelBank=a.bankCode,this.curSelBankId=a.id,this.mobileNo=a.mobileNo,this.bankTel=a.bankTel,this.resetGetSms=!0):(this.linkType=a.checkoutType,this.platformCode=a.middlePlatformCode,this.platformParentCode=a.middlePlatformParentCode,this.stagecfgMark=a.cfgMark,this.curSelected=a.code,this.curClickStage=a.code,this.discountPrice=Number(a.discountAmt||null),this.minPaymentAmt=a.minPaymentAmt,this.isSubmiting=!1)}},fetchData:function(){var e=this,t=o["a"].isWeixin()?"4":"2",a="".concat(n["a"].TO_ORDER_SUBMIT_SUCCESS_NEW,"?channel=sg&terminalId=").concat(t,"&orderNo=").concat(this.orderSn);this.$http.post(a).then((function(t){if(e.skeletonLoading=!1,t.data.success){var a=t.data.data;if(e.price=e.totalAmount=a.orderAmt.toFixed(2),e.isWeikuan=2===a.orderType,a.remainTime<0&&!e.isWeikuan&&22!==a.orderType)return void e.$router.push("/payState");e.isWeikuan||e.intervalLeft(a.remainTime),e.orderId=a.orderId,e.paymethodsTopVOList=a.paymethodsTopVOList,e.paymethodsMiddleVOList=a.paymethodsMiddleVOList,e.paymethodsBottomVOList=a.paymethodsBottomVOList,e.readyInit(),e.fetchBindBankCard()}else e.$toast(t.data.message)}))},checkOrderStatus:function(){var e=this,t=o["a"].isWeixin()?"4":"2",a="".concat(n["a"].TO_ORDER_SUBMIT_SUCCESS_NEW,"?channel=sg&terminalId=").concat(t,"&orderNo=").concat(this.orderSn);this.$http.post(a).then((function(t){t.data.success&&t.data.data&&101===t.data.data.payStatus&&e.$router.replace('/payState?data={"is_success":"T","order_id": "'+e.orderId+'"}')}))},uplusAppWxPay:function(e){return new Promise((function(t,a){w.upWeiXinModule.pullUpPaymentFlow({prepayid:e.prepayid,noncestr:e.noncestr,timestamp:e.timestamp,sign:e.sign}).then((function(e){t(e)}))["catch"]((function(){t("400")}))}))},wxSDKAppPay:function(){var e=this;w.upUserModule.checkAppIsInstalled({platform:"wechat"}).then((function(t){t.retData&&t.retData.status?e.$http.get("".concat(n["a"].WX_PAY_APP,"?orderSn=").concat(e.orderSn,"&from=1")).then((function(t){var a=t.data;console.log(a.data," 直连 智家APP sdk 微信支付"),a.success?e.uplusAppWxPay({prepayid:a.data.prepayid,noncestr:a.data.noncestr,timestamp:a.data.timestamp,sign:a.data.sign}).then((function(t){console.log(t,"直连 智家APP sdk 支付成功"),"000000"===t.retCode?e.$router.replace("/orderList?tagChecked=2"):e.$router.replace("/orderList?tagChecked=1")})):(e.$toast(a.message),e.isSubmiting=!1)})):(e.$toast("您还没有安装微信"),e.isSubmiting=!1)}))},wxH5Pay:function(){var e=this;this.linkType?this.checkPaySubmit({checkoutType:this.linkType,orderSn:this.orderSn,payPartnerId:this.platformParentCode,payType:this.curSelected,payTypeId:this.platformCode,userId:this.mId,type:"h5",apiVersion:1}).then((function(t){var a=t.data,i=a;console.log(i,"普通H5间连"),i.success?(e.weixinFormData=i.data.data,console.log(e.weixinFormData),e.isSubmiting=!1):(e.$toast(i.message),e.isSubmiting=!1)})):this.$http.get("".concat(n["a"].WX_PAY_H5,"?orderSn=").concat(this.orderSn)).then((function(t){var a=t.data;console.log(a,"=== h5 wxpay ==="),a.success?"SUCCESS"===a.data.returnCode&&"SUCCESS"===a.data.resultCode?o["a"].openNewWindow(a.data.mwebUrl,!0):(e.$toast(a.data.returnMsg),e.$router.replace("/orderList?tagChecked=1")):(e.$toast(a.message),e.isSubmiting=!1)}))},doGetWxCode:function(){if(this.linkType){var e,t={};t.checkoutType=this.linkType,t.orderSn=this.orderSn,t.payPartnerId=this.platformParentCode,t.payType=this.curSelected,t.payTypeId=this.platformCode,t.userId=this.mId,t.linkType=1,t.orderId=this.orderId;var a=this.serializParams(t);e=-1!==location.href.indexOf("?")?location.href+"&"+a:location.href+"?"+a,o["a"].getWxCode("wxb03a523baf487993",e)}else{console.log("微信端内 直连 微信支付");var i=-1!==location.href.indexOf("?")?location.href+"&linkType=0":location.href+"?linkType=0";o["a"].getWxCode("wxb03a523baf487993",i)}},initWxPayWithCode:function(e){var t=this;this.$http.get(n["a"].WX_CODE_TO_PAYINFO,{params:{code:e.code}}).then((function(a){var i=a.data,s=i.data;console.log(s),console.log(e,"====query===="),+e.linkType?t.checkPaySubmit({checkoutType:e.checkoutType,orderSn:e.orderSn,payPartnerId:e.payPartnerId,payType:e.payType,payTypeId:e.payTypeId,userId:e.userId,ptUserId:s.openid,type:"official",apiVersion:1}).then((function(e){var a=e.data,i=a;if(console.log(i,"response"),i.success){var s=t.$util.strJSONParse(i.data.data.wx_data_package,{});console.log(s,"resInfo resInfo"),o["a"].InWXH5Pay({appId:s.appid,timeStamp:s.timestamp,nonceStr:s.noncestr,package:s["package"],paySign:s.sign,success:function(){t.$router.replace('/payState?data={"is_success":"T","order_id": "'+t.orderId+'"}')},fail:function(e){console.log(e),t.$toast("支付失败，请重试"),history.back()}})}else t.$toast(i.message)})):(console.log("直连 微信内微信支付 openid",s.openid,t.orderSn),t.reportPayLog())}))},checkOrderOriginUrl:function(){var e=this;this.$http.get(n["a"].GetExtendInfoByOrderId,{params:{orderId:this.orderId}}).then((function(t){var a=t.data;console.log(a,"订单来源"),a.data&&a.data.returnUrl?e.$router.replace('/payState?data={"is_success":"T","order_id": "'+e.orderId+'"}'):e.$router.replace("/payState")}))},reportPayLog:function(){var e=this;this.$http.post(n["a"].ORDER_ERROR_LOG,{json:{orderId:this.orderId,linkType:this.linkType,curSelected:this.curSelected,paymethodsTopVOList:this.paymethodsTopVOList,paymethodsMiddleVOList:this.paymethodsMiddleVOList,paymethodsBottomVOList:this.paymethodsBottomVOList}}),this.$dialog.confirm({title:"支付异常",message:'请联系客服，客服电话 <a href="tel:4008287777" style="color: #2979FF">4008287777</a>'}).then((function(){location.href="tel:4008287777",e.isSubmiting=!1}))["catch"]((function(){e.isSubmiting=!1}))},intervalLeft:function(e){var t=this,a=function(){if(e<0)return e=0,void clearInterval(i);var a=Math.floor(e/3600),s=Math.floor(e%3600/60),n=Math.floor(e%3600%60);e--,t.leftTime=o["a"].numberToDouble(a)+":"+o["a"].numberToDouble(s)+":"+o["a"].numberToDouble(n)},i=setInterval(a,1e3);a()},toggleShowWay:function(){this.isToggle=!this.isToggle},serializParams:function(e){var t="",a=0;for(var i in e)t+=a?"&"+i+"="+e[i]:i+"="+e[i],a++;return t},addCard:function(){this.$router.push("/freeapply?addcard="+this.orderSn)},changeBankSelect:function(e){console.log(e),e.canSelect?(e.code="bank_pay",this.curSelected=e.code,this.curSelBank=e.bankCode,this.curSelBankId=e.id,this.mobileNo=e.mobileNo,this.bankTel=e.bankTel,this.resetGetSms=!0,sessionStorage.setItem("cur_pay_method",JSON.stringify(I({},this.orderSn,e)))):this.addCard()},showMore:function(){this.showMoreCard=!this.showMoreCard},sendSmsCaptch:function(){var e=this;this.numKeybordShow=!0,Date.now()-this.preGetTime<=6e4&&!this.resetGetSms||this.$http.post(n["a"].sendSmsCapthNew,{id:this.curSelBankId}).then((function(t){var a=t.data;console.log(a),a.success?(e.preGetTime=Date.now(),e.resetGetSms=!1):e.$toast(a.message)}))},onSubmitCaptcha:function(e){var t=this;this.checkPaySubmit({orderSn:this.orderSn,payType:"bind_card_pay",smsCode:e,checkoutType:1,payTypeId:5070,payPartnerId:201,userId:this.mId,noCardPaySignId:this.curSelBankId}).then((function(e){var a=e.data,i=a;i.success?(t.$util.gioTrackWithVariable("MB13419",{user_id:localStorage.getItem("ucId")?localStorage.getItem("ucId")+"":"null",member_id:localStorage.getItem("mId")?localStorage.getItem("mId"):"null",order_id:t.orderSn?t.orderSn:"null",par_value:t.totalAmount?t.totalAmount:"null"}),t.$router.replace('/payState?data={"is_success":"T","order_id": "'+t.orderId+'"}')):(console.log(a),t.$toast(i.message))}))},onCloseCaptchaDialog:function(){this.numKeybordShow=!1,this.digitMsgAuth=!1,this.isSubmiting=!1},goback:function(){this.leaveOrderTip=!0},doBack:function(){this.$util.isSyBird()||+this.isSyBirdFromH5?this.$store.dispatch("doHistoryBack"):this.$util.isHaierApp()?this.$router.replace(O?"/orderList?closewebview=1":"/orderList"):this.$store.dispatch("doHistoryBack")},findDigitMoneyCardList:function(){this.digitMoneyPop=!0,this.curDigitCardInfo=this.digitCardList[0],this.curDigitCard=this.curDigitCardInfo.id},changeDigitCard:function(e){this.curDigitCard=e.id,this.curDigitCardInfo=e},doConfirmDigitCard:function(){this.digitMoneyPop=!1,this.digitMsgAuth=!0,this.digitPayMsgFn()},digitPaySubmit:function(e){var t=this;console.log("digitPaySubmit",e),this.checkPaySubmit({checkoutType:this.linkType,orderSn:this.orderSn,payPartnerId:this.platformParentCode,payType:this.curSelected,payTypeId:this.platformCode,userId:this.mId,apiVersion:1,digiccyId:this.curDigitCard,smsCode:e}).then((function(e){var a=e.data,i=a;i.success?(t.digitMsgAuth=!1,t.$router.replace('/payState?data={"is_success":"T","order_id": "'+t.orderId+'"}')):"PCWB0001"===i.errorCode?t.$toast(i.message):(t.digitMsgAuth=!1,t.$dialog.alert({message:i.message,confirmButtonText:"返回收银台"}).then((function(){t.digitMoneyPop=!0})),t.isSubmiting=!1)}))},digitPayMsgFn:function(){var e=this;this.$http.get(n["a"].sendSmsCaptch).then((function(t){var a=t.data,i=a;i.success?(e.preGetTime=Date.now(),e.resetGetSms=!1):e.$toast(i.message)}))}}},$=A,V=(a("7059"),a("2877")),E=Object(V["a"])($,i,s,!1,null,"7abfde6b",null);t["default"]=E.exports},"80cc":function(e,t,a){"use strict";a("347c")},"9a20":function(e,t,a){"use strict";var i=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=e.split("."),i=t.split("."),s=Math.max(a.length,i.length),o=0,n=0;n<s;n++){var r=a.length>n?a[n]:0,c=isNaN(Number(r))?r.charCodeAt():Number(r),d=i.length>n?i[n]:0,l=isNaN(Number(d))?d.charCodeAt():Number(d);if(c<l){o=-1;break}if(c>l){o=1;break}}return o};t["a"]={gte:function(e,t){return i(e,t)>=0},gt:function(e,t){return i(e,t)>0},lte:function(e,t){return i(e,t)<=0},lt:function(e,t){return i(e,t)<0},eq:function(e,t){return 0===i(e,t)}}},"9b2e":function(e,t,a){},a73f:function(e,t,a){"use strict";var i=function(e,t){var a=t._c;return t.props.nums>0?a("div",{staticClass:"m-skeleton",style:{"z-index":t.props.zIndex||0}},[a("div",{style:{background:t.props.bgColor,height:t.props.fheight}}),t._l(t.props.nums-1,(function(e){return a("div",{key:e,style:{background:t.props.bgColor,height:t.props.iheight}})}))],2):t._e()},s=[],o=(a("80cc"),a("2877")),n={},r=Object(o["a"])(n,i,s,!0,null,null,null);t["a"]=r.exports},e845:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"captcha-dialog-page"},[a("div",{staticClass:"close-btn",on:{click:e.close}},[a("img",{staticClass:"close",attrs:{src:e.$cdnImageUrl+"/order/home_common_control-close.png",alt:""}})]),e._m(0),a("div",{staticClass:"des"},[e._v(e._s(e.desc))]),a("div",{staticClass:"input-field flex"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],ref:"inputSMS",staticClass:"password-input",attrs:{inputmode:"search"},domProps:{value:e.inputValue},on:{input:[function(t){t.target.composing||(e.inputValue=t.target.value)},e.change]}}),a("div",{staticClass:"get-messge",style:{color:e.color},on:{click:e.resend}},[e._v(" "+e._s(e.canResendMSG?"重新获取验证码":e.farToResend+"s后获取"))])]),a("div",{staticClass:"divider"}),e.phone?a("div",{staticClass:"phone"},[e._v("验证码已发送至"+e._s(e.isBankPhone?"银行预留":"")+"手机号"+e._s(e.phone))]):e._e(),a("div",{staticClass:"btn-area",style:{"background-color":6===e.inputValue.length?"#2878FF":"#dddddd"},on:{click:e.sumitCaptcha}},[e._v(" 确定 ")])])},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("div",{staticClass:"title-name"},[e._v("身份校验")])])}],o={props:{show:{type:Boolean},preGetTime:{type:Number},desc:{type:String,default:function(){return""}},isBankPhone:{type:Boolean,default:function(){return!0}},phone:{type:String,defalut:function(){return""}}},data:function(){return{inputValue:"",now:null,fdInterval:null}},computed:{color:function(){return this.canResendMSG?"#2878FF":"#999"},farToResend:function(){return Number(this.now-this.preGetTime)<0?60:this.now-this.preGetTime>=6e4?0:60-Number((this.now-this.preGetTime)/1e3).toFixed(0)},canResendMSG:function(){return 0===this.farToResend}},watch:{show:{handler:function(e,t){var a=this;e?(this.now=Date.now(),this.fdInterval=setInterval((function(){a.now=Date.now()}),1e3),this.$nextTick((function(){a.$refs.inputSMS.focus()}))):this.fdInterval&&clearInterval(this.fdInterval)},immediate:!0}},created:function(){var e=this;this.now=Date.now(),this.fdInterval=setInterval((function(){e.now=Date.now()}),1e3)},mounted:function(){},destroyed:function(){this.fdInterval&&clearInterval(this.fdInterval)},methods:{resend:function(){this.$emit("resend")},change:function(e){console.log(e.keyCode),this.inputValue=this.inputValue.replace(/[^\d]/g,""),this.inputValue=this.inputValue.replace("e",""),console.log(this.inputValue),this.inputValue.length>6&&(this.inputValue=this.inputValue.slice(0,6))},sumitCaptcha:function(){console.log("submit"),this.inputValue.length<6||(this.$emit("submit",this.inputValue),this.inputValue="")},close:function(){this.$emit("close")}}},n=o,r=(a("ebe9"),a("2877")),c=Object(r["a"])(n,i,s,!1,null,"11a4f73d",null);t["a"]=c.exports},ebe9:function(e,t,a){"use strict";a("1727")},f057:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"header"},[a("span",{staticClass:"title"},[e._v(e._s(e.title))]),a("span",{staticClass:"close-icon",on:{click:e.close}})]),e._m(0),a("div",{staticClass:"desc-cantainer"},[a("span",[e._v(e._s(e.desc))])]),a("div",{staticClass:"option"},[a("div",{staticClass:"btn give-up",on:{click:e.giveUp}},[e._v("暂时放弃")]),"cj101"===e.sceneId&&e.isSyBird?e._e():a("div",{staticClass:"btn to-service",on:{click:e.toService}},[e._v("联系客服")]),a("div",{staticClass:"btn continue",on:{click:e.continuePay}},[e._v("继续支付")])])])},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"logo-cantainer"},[a("span",{staticClass:"logo"})])}],o={props:["title","desc","sceneId"],data:function(){return{isSyBird:!1}},created:function(){this.isSyBird=this.$util.isSyBird()},methods:{close:function(){this.$emit("close")},giveUp:function(){this.$emit("giveUp")},toService:function(){this.$store.dispatch("goPageByType",{type:29,params:{sceneId:this.sceneId}})},continuePay:function(){this.$emit("continuePay")}}},n=o,r=(a("65d7"),a("2877")),c=Object(r["a"])(n,i,s,!1,null,"f20e3b98",null);t["a"]=c.exports},f2e8:function(e,t,a){var i=a("1934")("jsonp");e.exports=n;var s=0;function o(){}function n(e,t,a){"function"==typeof t&&(a=t,t={}),t||(t={});var n,r,c=t.prefix||"__jp",d=t.name||c+s++,l=t.param||"callback",u=null!=t.timeout?t.timeout:6e4,p=encodeURIComponent,h=document.getElementsByTagName("script")[0]||document.head;function m(){n.parentNode&&n.parentNode.removeChild(n),window[d]=o,r&&clearTimeout(r)}function g(){window[d]&&m()}return u&&(r=setTimeout((function(){m(),a&&a(new Error("Timeout"))}),u)),window[d]=function(e){i("jsonp got",e),m(),a&&a(null,e)},e+=(~e.indexOf("?")?"&":"?")+l+"="+p(d),e=e.replace("?&","?"),i('jsonp req "%s"',e),n=document.createElement("script"),n.src=e,h.parentNode.insertBefore(n,h),g}}}]);
//# sourceMappingURL=chunk-4eff787e.5aa586a1.js.map